(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();window.global||(window.global=window);var ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sa(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function dg(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(e,s);return new o}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var pg={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ir,function(){var t=1e3,i=6e4,s=36e5,o="millisecond",u="second",l="minute",f="hour",g="day",b="week",S="month",y="quarter",w="year",m="date",I="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,F={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(W){var v=["th","st","nd","rd"],D=W%100;return"["+W+(v[(D-20)%10]||v[D]||v[0])+"]"}},N=function(W,v,D){var H=String(W);return!H||H.length>=v?W:""+Array(v+1-H.length).join(D)+W},P={s:N,z:function(W){var v=-W.utcOffset(),D=Math.abs(v),H=Math.floor(D/60),j=D%60;return(v<=0?"+":"-")+N(H,2,"0")+":"+N(j,2,"0")},m:function W(v,D){if(v.date()<D.date())return-W(D,v);var H=12*(D.year()-v.year())+(D.month()-v.month()),j=v.clone().add(H,S),V=D-j<0,k=v.clone().add(H+(V?-1:1),S);return+(-(H+(D-j)/(V?j-k:k-j))||0)},a:function(W){return W<0?Math.ceil(W)||0:Math.floor(W)},p:function(W){return{M:S,y:w,w:b,d:g,D:m,h:f,m:l,s:u,ms:o,Q:y}[W]||String(W||"").toLowerCase().replace(/s$/,"")},u:function(W){return W===void 0}},T="en",x={};x[T]=F;var h=function(W){return W instanceof B},E=function W(v,D,H){var j;if(!v)return T;if(typeof v=="string"){var V=v.toLowerCase();x[V]&&(j=V),D&&(x[V]=D,j=V);var k=v.split("-");if(!j&&k.length>1)return W(k[0])}else{var ee=v.name;x[ee]=v,j=ee}return!H&&j&&(T=j),j||!H&&T},K=function(W,v){if(h(W))return W.clone();var D=typeof v=="object"?v:{};return D.date=W,D.args=arguments,new B(D)},$=P;$.l=E,$.i=h,$.w=function(W,v){return K(W,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var B=function(){function W(D){this.$L=E(D.locale,null,!0),this.parse(D)}var v=W.prototype;return v.parse=function(D){this.$d=function(H){var j=H.date,V=H.utc;if(j===null)return new Date(NaN);if($.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var k=j.match(A);if(k){var ee=k[2]-1||0,re=(k[7]||"0").substring(0,3);return V?new Date(Date.UTC(k[1],ee,k[3]||1,k[4]||0,k[5]||0,k[6]||0,re)):new Date(k[1],ee,k[3]||1,k[4]||0,k[5]||0,k[6]||0,re)}}return new Date(j)}(D),this.$x=D.x||{},this.init()},v.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},v.$utils=function(){return $},v.isValid=function(){return this.$d.toString()!==I},v.isSame=function(D,H){var j=K(D);return this.startOf(H)<=j&&j<=this.endOf(H)},v.isAfter=function(D,H){return K(D)<this.startOf(H)},v.isBefore=function(D,H){return this.endOf(H)<K(D)},v.$g=function(D,H,j){return $.u(D)?this[H]:this.set(j,D)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(D,H){var j=this,V=!!$.u(H)||H,k=$.p(D),ee=function(Z,q){var p=$.w(j.$u?Date.UTC(j.$y,q,Z):new Date(j.$y,q,Z),j);return V?p:p.endOf(g)},re=function(Z,q){return $.w(j.toDate()[Z].apply(j.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(q)),j)},le=this.$W,ie=this.$M,De=this.$D,fe="set"+(this.$u?"UTC":"");switch(k){case w:return V?ee(1,0):ee(31,11);case S:return V?ee(1,ie):ee(0,ie+1);case b:var Ie=this.$locale().weekStart||0,Q=(le<Ie?le+7:le)-Ie;return ee(V?De-Q:De+(6-Q),ie);case g:case m:return re(fe+"Hours",0);case f:return re(fe+"Minutes",1);case l:return re(fe+"Seconds",2);case u:return re(fe+"Milliseconds",3);default:return this.clone()}},v.endOf=function(D){return this.startOf(D,!1)},v.$set=function(D,H){var j,V=$.p(D),k="set"+(this.$u?"UTC":""),ee=(j={},j[g]=k+"Date",j[m]=k+"Date",j[S]=k+"Month",j[w]=k+"FullYear",j[f]=k+"Hours",j[l]=k+"Minutes",j[u]=k+"Seconds",j[o]=k+"Milliseconds",j)[V],re=V===g?this.$D+(H-this.$W):H;if(V===S||V===w){var le=this.clone().set(m,1);le.$d[ee](re),le.init(),this.$d=le.set(m,Math.min(this.$D,le.daysInMonth())).$d}else ee&&this.$d[ee](re);return this.init(),this},v.set=function(D,H){return this.clone().$set(D,H)},v.get=function(D){return this[$.p(D)]()},v.add=function(D,H){var j,V=this;D=Number(D);var k=$.p(H),ee=function(ie){var De=K(V);return $.w(De.date(De.date()+Math.round(ie*D)),V)};if(k===S)return this.set(S,this.$M+D);if(k===w)return this.set(w,this.$y+D);if(k===g)return ee(1);if(k===b)return ee(7);var re=(j={},j[l]=i,j[f]=s,j[u]=t,j)[k]||1,le=this.$d.getTime()+D*re;return $.w(le,this)},v.subtract=function(D,H){return this.add(-1*D,H)},v.format=function(D){var H=this,j=this.$locale();if(!this.isValid())return j.invalidDate||I;var V=D||"YYYY-MM-DDTHH:mm:ssZ",k=$.z(this),ee=this.$H,re=this.$m,le=this.$M,ie=j.weekdays,De=j.months,fe=function(q,p,L,ue){return q&&(q[p]||q(H,V))||L[p].slice(0,ue)},Ie=function(q){return $.s(ee%12||12,q,"0")},Q=j.meridiem||function(q,p,L){var ue=q<12?"AM":"PM";return L?ue.toLowerCase():ue},Z={YY:String(this.$y).slice(-2),YYYY:$.s(this.$y,4,"0"),M:le+1,MM:$.s(le+1,2,"0"),MMM:fe(j.monthsShort,le,De,3),MMMM:fe(De,le),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:fe(j.weekdaysMin,this.$W,ie,2),ddd:fe(j.weekdaysShort,this.$W,ie,3),dddd:ie[this.$W],H:String(ee),HH:$.s(ee,2,"0"),h:Ie(1),hh:Ie(2),a:Q(ee,re,!0),A:Q(ee,re,!1),m:String(re),mm:$.s(re,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:k};return V.replace(z,function(q,p){return p||Z[q]||k.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(D,H,j){var V,k=$.p(H),ee=K(D),re=(ee.utcOffset()-this.utcOffset())*i,le=this-ee,ie=$.m(this,ee);return ie=(V={},V[w]=ie/12,V[S]=ie,V[y]=ie/3,V[b]=(le-re)/6048e5,V[g]=(le-re)/864e5,V[f]=le/s,V[l]=le/i,V[u]=le/t,V)[k]||le,j?ie:$.a(ie)},v.daysInMonth=function(){return this.endOf(S).$D},v.$locale=function(){return x[this.$L]},v.locale=function(D,H){if(!D)return this.$L;var j=this.clone(),V=E(D,H,!0);return V&&(j.$L=V),j},v.clone=function(){return $.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},W}(),G=B.prototype;return K.prototype=G,[["$ms",o],["$s",u],["$m",l],["$H",f],["$W",g],["$M",S],["$y",w],["$D",m]].forEach(function(W){G[W[1]]=function(v){return this.$g(v,W[0],W[1])}}),K.extend=function(W,v){return W.$i||(W(v,B,K),W.$i=!0),K},K.locale=E,K.isDayjs=h,K.unix=function(W){return K(1e3*W)},K.en=x[T],K.Ls=x,K.p={},K})})(pg);var y2=pg.exports;const xn=Sa(y2);var gg={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ir,function(){var t,i,s=1e3,o=6e4,u=36e5,l=864e5,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g=31536e6,b=2592e6,S=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,y={years:g,months:b,days:l,hours:u,minutes:o,seconds:s,milliseconds:1,weeks:6048e5},w=function(T){return T instanceof P},m=function(T,x,h){return new P(T,h,x.$l)},I=function(T){return i.p(T)+"s"},A=function(T){return T<0},z=function(T){return A(T)?Math.ceil(T):Math.floor(T)},F=function(T){return Math.abs(T)},N=function(T,x){return T?A(T)?{negative:!0,format:""+F(T)+x}:{negative:!1,format:""+T+x}:{negative:!1,format:""}},P=function(){function T(h,E,K){var $=this;if(this.$d={},this.$l=K,h===void 0&&(this.$ms=0,this.parseFromMilliseconds()),E)return m(h*y[I(E)],this);if(typeof h=="number")return this.$ms=h,this.parseFromMilliseconds(),this;if(typeof h=="object")return Object.keys(h).forEach(function(W){$.$d[I(W)]=h[W]}),this.calMilliseconds(),this;if(typeof h=="string"){var B=h.match(S);if(B){var G=B.slice(2).map(function(W){return W!=null?Number(W):0});return this.$d.years=G[0],this.$d.months=G[1],this.$d.weeks=G[2],this.$d.days=G[3],this.$d.hours=G[4],this.$d.minutes=G[5],this.$d.seconds=G[6],this.calMilliseconds(),this}}return this}var x=T.prototype;return x.calMilliseconds=function(){var h=this;this.$ms=Object.keys(this.$d).reduce(function(E,K){return E+(h.$d[K]||0)*y[K]},0)},x.parseFromMilliseconds=function(){var h=this.$ms;this.$d.years=z(h/g),h%=g,this.$d.months=z(h/b),h%=b,this.$d.days=z(h/l),h%=l,this.$d.hours=z(h/u),h%=u,this.$d.minutes=z(h/o),h%=o,this.$d.seconds=z(h/s),h%=s,this.$d.milliseconds=h},x.toISOString=function(){var h=N(this.$d.years,"Y"),E=N(this.$d.months,"M"),K=+this.$d.days||0;this.$d.weeks&&(K+=7*this.$d.weeks);var $=N(K,"D"),B=N(this.$d.hours,"H"),G=N(this.$d.minutes,"M"),W=this.$d.seconds||0;this.$d.milliseconds&&(W+=this.$d.milliseconds/1e3);var v=N(W,"S"),D=h.negative||E.negative||$.negative||B.negative||G.negative||v.negative,H=B.format||G.format||v.format?"T":"",j=(D?"-":"")+"P"+h.format+E.format+$.format+H+B.format+G.format+v.format;return j==="P"||j==="-P"?"P0D":j},x.toJSON=function(){return this.toISOString()},x.format=function(h){var E=h||"YYYY-MM-DDTHH:mm:ss",K={Y:this.$d.years,YY:i.s(this.$d.years,2,"0"),YYYY:i.s(this.$d.years,4,"0"),M:this.$d.months,MM:i.s(this.$d.months,2,"0"),D:this.$d.days,DD:i.s(this.$d.days,2,"0"),H:this.$d.hours,HH:i.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:i.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:i.s(this.$d.seconds,2,"0"),SSS:i.s(this.$d.milliseconds,3,"0")};return E.replace(f,function($,B){return B||String(K[$])})},x.as=function(h){return this.$ms/y[I(h)]},x.get=function(h){var E=this.$ms,K=I(h);return K==="milliseconds"?E%=1e3:E=K==="weeks"?z(E/y[K]):this.$d[K],E===0?0:E},x.add=function(h,E,K){var $;return $=E?h*y[I(E)]:w(h)?h.$ms:m(h,this).$ms,m(this.$ms+$*(K?-1:1),this)},x.subtract=function(h,E){return this.add(h,E,!0)},x.locale=function(h){var E=this.clone();return E.$l=h,E},x.clone=function(){return m(this.$ms,this)},x.humanize=function(h){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!h)},x.valueOf=function(){return this.asMilliseconds()},x.milliseconds=function(){return this.get("milliseconds")},x.asMilliseconds=function(){return this.as("milliseconds")},x.seconds=function(){return this.get("seconds")},x.asSeconds=function(){return this.as("seconds")},x.minutes=function(){return this.get("minutes")},x.asMinutes=function(){return this.as("minutes")},x.hours=function(){return this.get("hours")},x.asHours=function(){return this.as("hours")},x.days=function(){return this.get("days")},x.asDays=function(){return this.as("days")},x.weeks=function(){return this.get("weeks")},x.asWeeks=function(){return this.as("weeks")},x.months=function(){return this.get("months")},x.asMonths=function(){return this.as("months")},x.years=function(){return this.get("years")},x.asYears=function(){return this.as("years")},T}();return function(T,x,h){t=h,i=h().$utils(),h.duration=function($,B){var G=h.locale();return m($,{$l:G},B)},h.isDuration=w;var E=x.prototype.add,K=x.prototype.subtract;x.prototype.add=function($,B){return w($)&&($=$.asMilliseconds()),E.bind(this)($,B)},x.prototype.subtract=function($,B){return w($)&&($=$.asMilliseconds()),K.bind(this)($,B)}}})})(gg);var m2=gg.exports;const b2=Sa(m2),v2="modulepreload",w2=function(r){return"/"+r},yp={},wh=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=w2(o),o in yp)return;yp[o]=!0;const u=o.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(!!i)for(let b=s.length-1;b>=0;b--){const S=s[b];if(S.href===o&&(!u||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":v2,u||(g.as="script",g.crossOrigin=""),g.href=o,document.head.appendChild(g),u)return new Promise((b,S)=>{g.addEventListener("load",b),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};class nt{constructor(e,t,i,s,o){this._legacyCanvasSize=nt.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=t:(console.warn(i||s||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof i=="object"?i:{},this._onDecodeError=t.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof s=="function"?s:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof s=="number"?s:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let u=!1;if(e.hidden&&(e.hidden=!1,u=!0),document.body.contains(e)||(document.body.appendChild(e),u=!0),i=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(s=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!s&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let l=window.getComputedStyle(e);l.display==="none"&&(e.style.setProperty("display","block","important"),u=!0),l.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),u=!0),u&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=nt.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await nt.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),i;try{e&&(await t()).every(s=>!s.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((s,o)=>({id:s.deviceId,label:s.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),nt._stopVideoStream(i))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),nt._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),nt._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?nt._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(nt._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,i,s,o=!1,u=!1){let l,f=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(l=t.scanRegion,i=t.qrEngine,s=t.canvas,o=t.disallowCanvasResizing||!1,u=t.alsoTryWithoutScanRegion||!1,f=!0):console.warn(t||i||s||o||u?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!i;try{let g,b;[i,g]=await Promise.all([i||nt.createQrEngine(),nt._loadImage(e)]),[s,b]=nt._drawToCanvas(g,l,s,o);let S;if(i instanceof Worker){let y=i;t||nt._postWorkerMessageSync(y,"inversionMode","both"),S=await new Promise((w,m)=>{let I,A,z,F=-1;A=P=>{P.data.id===F&&(y.removeEventListener("message",A),y.removeEventListener("error",z),clearTimeout(I),P.data.data!==null?w({data:P.data.data,cornerPoints:nt._convertPoints(P.data.cornerPoints,l)}):m(nt.NO_QR_CODE_FOUND))},z=P=>{y.removeEventListener("message",A),y.removeEventListener("error",z),clearTimeout(I),m("Scanner error: "+(P?P.message||P:"Unknown Error"))},y.addEventListener("message",A),y.addEventListener("error",z),I=setTimeout(()=>z("timeout"),1e4);let N=b.getImageData(0,0,s.width,s.height);F=nt._postWorkerMessageSync(y,"decode",N,[N.data.buffer])})}else S=await Promise.race([new Promise((y,w)=>window.setTimeout(()=>w("Scanner error: timeout"),1e4)),(async()=>{try{var[y]=await i.detect(s);if(!y)throw nt.NO_QR_CODE_FOUND;return{data:y.rawValue,cornerPoints:nt._convertPoints(y.cornerPoints,l)}}catch(w){if(y=w.message||w,/not implemented|service unavailable/.test(y))return nt._disableBarcodeDetector=!0,nt.scanImage(e,{scanRegion:l,canvas:s,disallowCanvasResizing:o,alsoTryWithoutScanRegion:u});throw`Scanner error: ${y}`}})()]);return f?S:S.data}catch(g){if(!l||!u)throw g;let b=await nt.scanImage(e,{qrEngine:i,canvas:s,disallowCanvasResizing:o});return f?b:b.data}finally{t||nt._postWorkerMessage(i,"close")}}setGrayscaleWeights(e,t,i,s=!0){nt._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:i,useIntegerApproximation:s})}setInversionMode(e){nt._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>wh(()=>import("./qr-scanner-worker.min-5f44a019.js"),[]).then(i=>i.createWorker()),!(!nt._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:s})=>/arm/i.test(i||"arm")&&13<=parseInt(s||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,i=e.videoHeight,s=e.offsetWidth,o=e.offsetHeight,u=e.offsetLeft,l=e.offsetTop,f=window.getComputedStyle(e),g=f.objectFit,b=t/i,S=s/o;switch(g){case"none":var y=t,w=i;break;case"fill":y=s,w=o;break;default:(g==="cover"?b>S:b<S)?(w=o,y=w*b):(y=s,w=y/b),g==="scale-down"&&(y=Math.min(y,t),w=Math.min(w,i))}var[m,I]=f.objectPosition.split(" ").map((z,F)=>{const N=parseFloat(z);return z.endsWith("%")?(F?o-w:s-y)*N/100:N});f=this._scanRegion.width||t,S=this._scanRegion.height||i,g=this._scanRegion.x||0;var A=this._scanRegion.y||0;b=this.$overlay.style,b.width=`${f/t*y}px`,b.height=`${S/i*w}px`,b.top=`${l+I+A/i*w}px`,i=/scaleX\(-1\)/.test(e.style.transform),b.left=`${u+(i?s-m-y:m)+(i?t-g-f:g)/t*y}px`,b.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,s=t.y||0,o=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let u of e)u.x=u.x*o+i,u.y=u.y*t+s;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(s=>setTimeout(s,t-e)),this._lastScanTimestamp=Date.now();try{var i=await nt.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(s){if(!this._active)return;this._onDecodeError(s)}!nt._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=nt.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:s,y:o})=>`${s},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==nt.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(s=>Object.assign({},s,{[e]:{exact:this._preferredCamera}}));for(let s of[...i,...t])try{let o=await navigator.mediaDevices.getUserMedia({video:s,audio:!1}),u=this._getFacingMode(o)||(s.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:u}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,s=!1){i=i||document.createElement("canvas");let o=t&&t.x?t.x:0,u=t&&t.y?t.y:0,l=t&&t.width?t.width:e.videoWidth||e.width,f=t&&t.height?t.height:e.videoHeight||e.height;return s||(s=t&&t.downScaledWidth?t.downScaledWidth:l,t=t&&t.downScaledHeight?t.downScaledHeight:f,i.width!==s&&(i.width=s),i.height!==t&&(i.height=t)),t=i.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,o,u,l,f,0,0,i.width,i.height),[i,t]}static async _loadImage(e){if(e instanceof Image)return await nt._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await nt._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,i)=>{let s=o=>{e.removeEventListener("load",s),e.removeEventListener("error",s),o instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",s),e.addEventListener("error",s)})}static async _postWorkerMessage(e,t,i,s){return nt._postWorkerMessageSync(await e,t,i,s)}static _postWorkerMessageSync(e,t,i,s){if(!(e instanceof Worker))return-1;let o=nt._workerMessageId++;return e.postMessage({id:o,type:t,data:i},s),o}}nt.DEFAULT_CANVAS_SIZE=400;nt.NO_QR_CODE_FOUND="No QR code found";nt._disableBarcodeDetector=!1;nt._workerMessageId=0;var Rl={exports:{}};(function(r,e){(function(t,i){var s="1.0.35",o="",u="?",l="function",f="undefined",g="object",b="string",S="major",y="model",w="name",m="type",I="vendor",A="version",z="architecture",F="console",N="mobile",P="tablet",T="smarttv",x="wearable",h="embedded",E=350,K="Amazon",$="Apple",B="ASUS",G="BlackBerry",W="Browser",v="Chrome",D="Edge",H="Firefox",j="Google",V="Huawei",k="LG",ee="Microsoft",re="Motorola",le="Opera",ie="Samsung",De="Sharp",fe="Sony",Ie="Xiaomi",Q="Zebra",Z="Facebook",q="Chromium OS",p="Mac OS",L=function(pe,ve){var he={};for(var we in pe)ve[we]&&ve[we].length%2===0?he[we]=ve[we].concat(pe[we]):he[we]=pe[we];return he},ue=function(pe){for(var ve={},he=0;he<pe.length;he++)ve[pe[he].toUpperCase()]=pe[he];return ve},me=function(pe,ve){return typeof pe===b?Te(ve).indexOf(Te(pe))!==-1:!1},Te=function(pe){return pe.toLowerCase()},Je=function(pe){return typeof pe===b?pe.replace(/[^\d\.]/g,o).split(".")[0]:i},Xe=function(pe,ve){if(typeof pe===b)return pe=pe.replace(/^\s\s*/,o),typeof ve===f?pe:pe.substring(0,E)},ke=function(pe,ve){for(var he=0,we,je,Ae,Ee,de,ze;he<ve.length&&!de;){var tt=ve[he],rt=ve[he+1];for(we=je=0;we<tt.length&&!de&&tt[we];)if(de=tt[we++].exec(pe),de)for(Ae=0;Ae<rt.length;Ae++)ze=de[++je],Ee=rt[Ae],typeof Ee===g&&Ee.length>0?Ee.length===2?typeof Ee[1]==l?this[Ee[0]]=Ee[1].call(this,ze):this[Ee[0]]=Ee[1]:Ee.length===3?typeof Ee[1]===l&&!(Ee[1].exec&&Ee[1].test)?this[Ee[0]]=ze?Ee[1].call(this,ze,Ee[2]):i:this[Ee[0]]=ze?ze.replace(Ee[1],Ee[2]):i:Ee.length===4&&(this[Ee[0]]=ze?Ee[3].call(this,ze.replace(Ee[1],Ee[2])):i):this[Ee]=ze||i;he+=2}},pt=function(pe,ve){for(var he in ve)if(typeof ve[he]===g&&ve[he].length>0){for(var we=0;we<ve[he].length;we++)if(me(ve[he][we],pe))return he===u?i:he}else if(me(ve[he],pe))return he===u?i:he;return pe},_t={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Re={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[A,[w,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[A,[w,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[w,A],[/opios[\/ ]+([\w\.]+)/i],[A,[w,le+" Mini"]],[/\bopr\/([\w\.]+)/i],[A,[w,le]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[w,A],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[A,[w,"UC"+W]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[A,[w,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[A,[w,"WeChat"]],[/konqueror\/([\w\.]+)/i],[A,[w,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[A,[w,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[A,[w,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[w,/(.+)/,"$1 Secure "+W],A],[/\bfocus\/([\w\.]+)/i],[A,[w,H+" Focus"]],[/\bopt\/([\w\.]+)/i],[A,[w,le+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[A,[w,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[A,[w,"Dolphin"]],[/coast\/([\w\.]+)/i],[A,[w,le+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[A,[w,"MIUI "+W]],[/fxios\/([-\w\.]+)/i],[A,[w,H]],[/\bqihu|(qi?ho?o?|360)browser/i],[[w,"360 "+W]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[w,/(.+)/,"$1 "+W],A],[/(comodo_dragon)\/([\w\.]+)/i],[[w,/_/g," "],A],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[w,A],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[w],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[w,Z],A],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[w,A],[/\bgsa\/([\w\.]+) .*safari\//i],[A,[w,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[A,[w,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[A,[w,v+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[w,v+" WebView"],A],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[A,[w,"Android "+W]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[w,A],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[A,[w,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[A,w],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[w,[A,pt,_t]],[/(webkit|khtml)\/([\w\.]+)/i],[w,A],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[w,"Netscape"],A],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[A,[w,H+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[w,A],[/(cobalt)\/([\w\.]+)/i],[w,[A,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[z,"amd64"]],[/(ia32(?=;))/i],[[z,Te]],[/((?:i[346]|x)86)[;\)]/i],[[z,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[z,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[z,"armhf"]],[/windows (ce|mobile); ppc;/i],[[z,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[z,/ower/,o,Te]],[/(sun4\w)[;\)]/i],[[z,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[z,Te]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[y,[I,ie],[m,P]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[y,[I,ie],[m,N]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[y,[I,$],[m,N]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[y,[I,$],[m,P]],[/(macintosh);/i],[y,[I,$]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[y,[I,De],[m,N]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[y,[I,V],[m,P]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[y,[I,V],[m,N]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[y,/_/g," "],[I,Ie],[m,N]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[y,/_/g," "],[I,Ie],[m,P]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[y,[I,"OPPO"],[m,N]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[y,[I,"Vivo"],[m,N]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[y,[I,"Realme"],[m,N]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[y,[I,re],[m,N]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[y,[I,re],[m,P]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[y,[I,k],[m,P]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[y,[I,k],[m,N]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[y,[I,"Lenovo"],[m,P]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[y,/_/g," "],[I,"Nokia"],[m,N]],[/(pixel c)\b/i],[y,[I,j],[m,P]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[y,[I,j],[m,N]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[y,[I,fe],[m,N]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[y,"Xperia Tablet"],[I,fe],[m,P]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[y,[I,"OnePlus"],[m,N]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[y,[I,K],[m,P]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[y,/(.+)/g,"Fire Phone $1"],[I,K],[m,N]],[/(playbook);[-\w\),; ]+(rim)/i],[y,I,[m,P]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[y,[I,G],[m,N]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[y,[I,B],[m,P]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[y,[I,B],[m,N]],[/(nexus 9)/i],[y,[I,"HTC"],[m,P]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[I,[y,/_/g," "],[m,N]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[y,[I,"Acer"],[m,P]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[y,[I,"Meizu"],[m,N]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[I,y,[m,N]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[I,y,[m,P]],[/(surface duo)/i],[y,[I,ee],[m,P]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[y,[I,"Fairphone"],[m,N]],[/(u304aa)/i],[y,[I,"AT&T"],[m,N]],[/\bsie-(\w*)/i],[y,[I,"Siemens"],[m,N]],[/\b(rct\w+) b/i],[y,[I,"RCA"],[m,P]],[/\b(venue[\d ]{2,7}) b/i],[y,[I,"Dell"],[m,P]],[/\b(q(?:mv|ta)\w+) b/i],[y,[I,"Verizon"],[m,P]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[y,[I,"Barnes & Noble"],[m,P]],[/\b(tm\d{3}\w+) b/i],[y,[I,"NuVision"],[m,P]],[/\b(k88) b/i],[y,[I,"ZTE"],[m,P]],[/\b(nx\d{3}j) b/i],[y,[I,"ZTE"],[m,N]],[/\b(gen\d{3}) b.+49h/i],[y,[I,"Swiss"],[m,N]],[/\b(zur\d{3}) b/i],[y,[I,"Swiss"],[m,P]],[/\b((zeki)?tb.*\b) b/i],[y,[I,"Zeki"],[m,P]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[I,"Dragon Touch"],y,[m,P]],[/\b(ns-?\w{0,9}) b/i],[y,[I,"Insignia"],[m,P]],[/\b((nxa|next)-?\w{0,9}) b/i],[y,[I,"NextBook"],[m,P]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[I,"Voice"],y,[m,N]],[/\b(lvtel\-)?(v1[12]) b/i],[[I,"LvTel"],y,[m,N]],[/\b(ph-1) /i],[y,[I,"Essential"],[m,N]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[y,[I,"Envizen"],[m,P]],[/\b(trio[-\w\. ]+) b/i],[y,[I,"MachSpeed"],[m,P]],[/\btu_(1491) b/i],[y,[I,"Rotor"],[m,P]],[/(shield[\w ]+) b/i],[y,[I,"Nvidia"],[m,P]],[/(sprint) (\w+)/i],[I,y,[m,N]],[/(kin\.[onetw]{3})/i],[[y,/\./g," "],[I,ee],[m,N]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[y,[I,Q],[m,P]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[y,[I,Q],[m,N]],[/smart-tv.+(samsung)/i],[I,[m,T]],[/hbbtv.+maple;(\d+)/i],[[y,/^/,"SmartTV"],[I,ie],[m,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[I,k],[m,T]],[/(apple) ?tv/i],[I,[y,$+" TV"],[m,T]],[/crkey/i],[[y,v+"cast"],[I,j],[m,T]],[/droid.+aft(\w)( bui|\))/i],[y,[I,K],[m,T]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[y,[I,De],[m,T]],[/(bravia[\w ]+)( bui|\))/i],[y,[I,fe],[m,T]],[/(mitv-\w{5}) bui/i],[y,[I,Ie],[m,T]],[/Hbbtv.*(technisat) (.*);/i],[I,y,[m,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[I,Xe],[y,Xe],[m,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,T]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[I,y,[m,F]],[/droid.+; (shield) bui/i],[y,[I,"Nvidia"],[m,F]],[/(playstation [345portablevi]+)/i],[y,[I,fe],[m,F]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[y,[I,ee],[m,F]],[/((pebble))app/i],[I,y,[m,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[y,[I,$],[m,x]],[/droid.+; (glass) \d/i],[y,[I,j],[m,x]],[/droid.+; (wt63?0{2,3})\)/i],[y,[I,Q],[m,x]],[/(quest( 2| pro)?)/i],[y,[I,Z],[m,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[I,[m,h]],[/(aeobc)\b/i],[y,[I,K],[m,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[y,[m,N]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[y,[m,P]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,P]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,N]],[/(android[-\w\. ]{0,9});.+buil/i],[y,[I,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[A,[w,D+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[A,[w,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[w,A],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[A,w]],os:[[/microsoft (windows) (vista|xp)/i],[w,A],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[w,[A,pt,Ke]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[w,"Windows"],[A,pt,Ke]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[A,/_/g,"."],[w,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[w,p],[A,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[A,w],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[w,A],[/\(bb(10);/i],[A,[w,G]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[A,[w,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[A,[w,H+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[A,[w,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[A,[w,"watchOS"]],[/crkey\/([\d\.]+)/i],[A,[w,v+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[w,q],A],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[w,A],[/(sunos) ?([\w\.\d]*)/i],[[w,"Solaris"],A],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[w,A]]},$e=function(pe,ve){if(typeof pe===g&&(ve=pe,pe=i),!(this instanceof $e))return new $e(pe,ve).getResult();var he=typeof t!==f&&t.navigator?t.navigator:i,we=pe||(he&&he.userAgent?he.userAgent:o),je=he&&he.userAgentData?he.userAgentData:i,Ae=ve?L(Re,ve):Re,Ee=he&&he.userAgent==we;return this.getBrowser=function(){var de={};return de[w]=i,de[A]=i,ke.call(de,we,Ae.browser),de[S]=Je(de[A]),Ee&&he&&he.brave&&typeof he.brave.isBrave==l&&(de[w]="Brave"),de},this.getCPU=function(){var de={};return de[z]=i,ke.call(de,we,Ae.cpu),de},this.getDevice=function(){var de={};return de[I]=i,de[y]=i,de[m]=i,ke.call(de,we,Ae.device),Ee&&!de[m]&&je&&je.mobile&&(de[m]=N),Ee&&de[y]=="Macintosh"&&he&&typeof he.standalone!==f&&he.maxTouchPoints&&he.maxTouchPoints>2&&(de[y]="iPad",de[m]=P),de},this.getEngine=function(){var de={};return de[w]=i,de[A]=i,ke.call(de,we,Ae.engine),de},this.getOS=function(){var de={};return de[w]=i,de[A]=i,ke.call(de,we,Ae.os),Ee&&!de[w]&&je&&je.platform!="Unknown"&&(de[w]=je.platform.replace(/chrome os/i,q).replace(/macos/i,p)),de},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return we},this.setUA=function(de){return we=typeof de===b&&de.length>E?Xe(de,E):de,this},this.setUA(we),this};$e.VERSION=s,$e.BROWSER=ue([w,A,S]),$e.CPU=ue([z]),$e.DEVICE=ue([y,I,m,F,N,T,P,x,h]),$e.ENGINE=$e.OS=ue([w,A]),r.exports&&(e=r.exports=$e),e.UAParser=$e;var Le=typeof t!==f&&(t.jQuery||t.Zepto);if(Le&&!Le.ua){var qe=new $e;Le.ua=qe.getResult(),Le.ua.get=function(){return qe.getUA()},Le.ua.set=function(pe){qe.setUA(pe);var ve=qe.getResult();for(var he in ve)Le.ua[he]=ve[he]}}})(typeof window=="object"?window:ir)})(Rl,Rl.exports);var _2=Rl.exports,_h={exports:{}},ms=typeof Reflect=="object"?Reflect:null,mp=ms&&typeof ms.apply=="function"?ms.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Vo;ms&&typeof ms.ownKeys=="function"?Vo=ms.ownKeys:Object.getOwnPropertySymbols?Vo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vo=function(e){return Object.getOwnPropertyNames(e)};function E2(r){console&&console.warn&&console.warn(r)}var yg=Number.isNaN||function(e){return e!==e};function yt(){yt.init.call(this)}_h.exports=yt;_h.exports.once=I2;yt.EventEmitter=yt;yt.prototype._events=void 0;yt.prototype._eventsCount=0;yt.prototype._maxListeners=void 0;var bp=10;function uc(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return bp},set:function(r){if(typeof r!="number"||r<0||yg(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");bp=r}});yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||yg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function mg(r){return r._maxListeners===void 0?yt.defaultMaxListeners:r._maxListeners}yt.prototype.getMaxListeners=function(){return mg(this)};yt.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var s=e==="error",o=this._events;if(o!==void 0)s=s&&o.error===void 0;else if(!s)return!1;if(s){var u;if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var l=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var f=o[e];if(f===void 0)return!1;if(typeof f=="function")mp(f,this,t);else for(var g=f.length,b=Eg(f,g),i=0;i<g;++i)mp(b[i],this,t);return!0};function bg(r,e,t,i){var s,o,u;if(uc(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),u=o[e]),u===void 0)u=o[e]=t,++r._eventsCount;else if(typeof u=="function"?u=o[e]=i?[t,u]:[u,t]:i?u.unshift(t):u.push(t),s=mg(r),s>0&&u.length>s&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=e,l.count=u.length,E2(l)}return r}yt.prototype.addListener=function(e,t){return bg(this,e,t,!1)};yt.prototype.on=yt.prototype.addListener;yt.prototype.prependListener=function(e,t){return bg(this,e,t,!0)};function x2(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vg(r,e,t){var i={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},s=x2.bind(i);return s.listener=t,i.wrapFn=s,s}yt.prototype.once=function(e,t){return uc(t),this.on(e,vg(this,e,t)),this};yt.prototype.prependOnceListener=function(e,t){return uc(t),this.prependListener(e,vg(this,e,t)),this};yt.prototype.removeListener=function(e,t){var i,s,o,u,l;if(uc(t),s=this._events,s===void 0)return this;if(i=s[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(o=-1,u=i.length-1;u>=0;u--)if(i[u]===t||i[u].listener===t){l=i[u].listener,o=u;break}if(o<0)return this;o===0?i.shift():S2(i,o),i.length===1&&(s[e]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.removeAllListeners=function(e){var t,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var o=Object.keys(i),u;for(s=0;s<o.length;++s)u=o[s],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this};function wg(r,e,t){var i=r._events;if(i===void 0)return[];var s=i[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?D2(s):Eg(s,s.length)}yt.prototype.listeners=function(e){return wg(this,e,!0)};yt.prototype.rawListeners=function(e){return wg(this,e,!1)};yt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):_g.call(r,e)};yt.prototype.listenerCount=_g;function _g(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?Vo(this._events):[]};function Eg(r,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=r[i];return t}function S2(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function D2(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function I2(r,e){return new Promise(function(t,i){function s(u){r.removeListener(e,o),i(u)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",s),t([].slice.call(arguments))}xg(r,e,o,{once:!0}),e!=="error"&&O2(r,s,{once:!0})})}function O2(r,e,t){typeof r.on=="function"&&xg(r,"error",e,t)}function xg(r,e,t,i){if(typeof r.on=="function")i.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function s(o){i.once&&r.removeEventListener(e,s),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var zr=_h.exports;const Eh=Sa(zr);var xh={},lc={},Ye={},Sg={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(l,f){var g=l>>>16&65535,b=l&65535,S=f>>>16&65535,y=f&65535;return b*y+(g*y+b*S<<16>>>0)|0}r.mul=Math.imul||e;function t(l,f){return l+f|0}r.add=t;function i(l,f){return l-f|0}r.sub=i;function s(l,f){return l<<f|l>>>32-f}r.rotl=s;function o(l,f){return l<<32-f|l>>>f}r.rotr=o;function u(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}r.isInteger=Number.isInteger||u,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(l){return r.isInteger(l)&&l>=-r.MAX_SAFE_INTEGER&&l<=r.MAX_SAFE_INTEGER}})(Sg);Object.defineProperty(Ye,"__esModule",{value:!0});var Dg=Sg;function P2(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}Ye.readInt16BE=P2;function A2(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}Ye.readUint16BE=A2;function C2(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}Ye.readInt16LE=C2;function T2(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}Ye.readUint16LE=T2;function Ig(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}Ye.writeUint16BE=Ig;Ye.writeInt16BE=Ig;function Og(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}Ye.writeUint16LE=Og;Ye.writeInt16LE=Og;function Fl(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}Ye.readInt32BE=Fl;function Ml(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}Ye.readUint32BE=Ml;function Ll(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}Ye.readInt32LE=Ll;function jl(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}Ye.readUint32LE=jl;function Jo(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}Ye.writeUint32BE=Jo;Ye.writeInt32BE=Jo;function Xo(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}Ye.writeUint32LE=Xo;Ye.writeInt32LE=Xo;function $2(r,e){e===void 0&&(e=0);var t=Fl(r,e),i=Fl(r,e+4);return t*4294967296+i-(i>>31)*4294967296}Ye.readInt64BE=$2;function N2(r,e){e===void 0&&(e=0);var t=Ml(r,e),i=Ml(r,e+4);return t*4294967296+i}Ye.readUint64BE=N2;function R2(r,e){e===void 0&&(e=0);var t=Ll(r,e),i=Ll(r,e+4);return i*4294967296+t-(t>>31)*4294967296}Ye.readInt64LE=R2;function F2(r,e){e===void 0&&(e=0);var t=jl(r,e),i=jl(r,e+4);return i*4294967296+t}Ye.readUint64LE=F2;function Pg(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Jo(r/4294967296>>>0,e,t),Jo(r>>>0,e,t+4),e}Ye.writeUint64BE=Pg;Ye.writeInt64BE=Pg;function Ag(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Xo(r>>>0,e,t),Xo(r/4294967296>>>0,e,t+4),e}Ye.writeUint64LE=Ag;Ye.writeInt64LE=Ag;function M2(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,s=1,o=r/8+t-1;o>=t;o--)i+=e[o]*s,s*=256;return i}Ye.readUintBE=M2;function L2(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,s=1,o=t;o<t+r/8;o++)i+=e[o]*s,s*=256;return i}Ye.readUintLE=L2;function j2(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Dg.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,o=r/8+i-1;o>=i;o--)t[o]=e/s&255,s*=256;return t}Ye.writeUintBE=j2;function k2(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Dg.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+r/8;o++)t[o]=e/s&255,s*=256;return t}Ye.writeUintLE=k2;function U2(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}Ye.readFloat32BE=U2;function B2(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}Ye.readFloat32LE=B2;function q2(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}Ye.readFloat64BE=q2;function z2(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}Ye.readFloat64LE=z2;function H2(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r),e}Ye.writeFloat32BE=H2;function K2(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r,!0),e}Ye.writeFloat32LE=K2;function V2(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r),e}Ye.writeFloat64BE=V2;function W2(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r,!0),e}Ye.writeFloat64LE=W2;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});function G2(r){for(var e=0;e<r.length;e++)r[e]=0;return r}Hr.wipe=G2;Object.defineProperty(lc,"__esModule",{value:!0});var dr=Ye,kl=Hr,Y2=20;function J2(r,e,t){for(var i=1634760805,s=857760878,o=2036477234,u=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],f=t[7]<<24|t[6]<<16|t[5]<<8|t[4],g=t[11]<<24|t[10]<<16|t[9]<<8|t[8],b=t[15]<<24|t[14]<<16|t[13]<<8|t[12],S=t[19]<<24|t[18]<<16|t[17]<<8|t[16],y=t[23]<<24|t[22]<<16|t[21]<<8|t[20],w=t[27]<<24|t[26]<<16|t[25]<<8|t[24],m=t[31]<<24|t[30]<<16|t[29]<<8|t[28],I=e[3]<<24|e[2]<<16|e[1]<<8|e[0],A=e[7]<<24|e[6]<<16|e[5]<<8|e[4],z=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],N=i,P=s,T=o,x=u,h=l,E=f,K=g,$=b,B=S,G=y,W=w,v=m,D=I,H=A,j=z,V=F,k=0;k<Y2;k+=2)N=N+h|0,D^=N,D=D>>>32-16|D<<16,B=B+D|0,h^=B,h=h>>>32-12|h<<12,P=P+E|0,H^=P,H=H>>>32-16|H<<16,G=G+H|0,E^=G,E=E>>>32-12|E<<12,T=T+K|0,j^=T,j=j>>>32-16|j<<16,W=W+j|0,K^=W,K=K>>>32-12|K<<12,x=x+$|0,V^=x,V=V>>>32-16|V<<16,v=v+V|0,$^=v,$=$>>>32-12|$<<12,T=T+K|0,j^=T,j=j>>>32-8|j<<8,W=W+j|0,K^=W,K=K>>>32-7|K<<7,x=x+$|0,V^=x,V=V>>>32-8|V<<8,v=v+V|0,$^=v,$=$>>>32-7|$<<7,P=P+E|0,H^=P,H=H>>>32-8|H<<8,G=G+H|0,E^=G,E=E>>>32-7|E<<7,N=N+h|0,D^=N,D=D>>>32-8|D<<8,B=B+D|0,h^=B,h=h>>>32-7|h<<7,N=N+E|0,V^=N,V=V>>>32-16|V<<16,W=W+V|0,E^=W,E=E>>>32-12|E<<12,P=P+K|0,D^=P,D=D>>>32-16|D<<16,v=v+D|0,K^=v,K=K>>>32-12|K<<12,T=T+$|0,H^=T,H=H>>>32-16|H<<16,B=B+H|0,$^=B,$=$>>>32-12|$<<12,x=x+h|0,j^=x,j=j>>>32-16|j<<16,G=G+j|0,h^=G,h=h>>>32-12|h<<12,T=T+$|0,H^=T,H=H>>>32-8|H<<8,B=B+H|0,$^=B,$=$>>>32-7|$<<7,x=x+h|0,j^=x,j=j>>>32-8|j<<8,G=G+j|0,h^=G,h=h>>>32-7|h<<7,P=P+K|0,D^=P,D=D>>>32-8|D<<8,v=v+D|0,K^=v,K=K>>>32-7|K<<7,N=N+E|0,V^=N,V=V>>>32-8|V<<8,W=W+V|0,E^=W,E=E>>>32-7|E<<7;dr.writeUint32LE(N+i|0,r,0),dr.writeUint32LE(P+s|0,r,4),dr.writeUint32LE(T+o|0,r,8),dr.writeUint32LE(x+u|0,r,12),dr.writeUint32LE(h+l|0,r,16),dr.writeUint32LE(E+f|0,r,20),dr.writeUint32LE(K+g|0,r,24),dr.writeUint32LE($+b|0,r,28),dr.writeUint32LE(B+S|0,r,32),dr.writeUint32LE(G+y|0,r,36),dr.writeUint32LE(W+w|0,r,40),dr.writeUint32LE(v+m|0,r,44),dr.writeUint32LE(D+I|0,r,48),dr.writeUint32LE(H+A|0,r,52),dr.writeUint32LE(j+z|0,r,56),dr.writeUint32LE(V+F|0,r,60)}function Cg(r,e,t,i,s){if(s===void 0&&(s=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var o,u;if(s===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),u=o.length-e.length,o.set(e,u)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,u=s}for(var l=new Uint8Array(64),f=0;f<t.length;f+=64){J2(l,o,r);for(var g=f;g<f+64&&g<t.length;g++)i[g]=t[g]^l[g-f];Z2(o,0,u)}return kl.wipe(l),s===0&&kl.wipe(o),i}lc.streamXOR=Cg;function X2(r,e,t,i){return i===void 0&&(i=0),kl.wipe(t),Cg(r,e,t,t,i)}lc.stream=X2;function Z2(r,e,t){for(var i=1;t--;)i=i+(r[e]&255)|0,r[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var Tg={},hi={};Object.defineProperty(hi,"__esModule",{value:!0});function Q2(r,e,t){return~(r-1)&e|r-1&t}hi.select=Q2;function e6(r,e){return(r|0)-(e|0)-1>>>31&1}hi.lessOrEqual=e6;function $g(r,e){if(r.length!==e.length)return 0;for(var t=0,i=0;i<r.length;i++)t|=r[i]^e[i];return 1&t-1>>>8}hi.compare=$g;function t6(r,e){return r.length===0||e.length===0?!1:$g(r,e)!==0}hi.equal=t6;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=hi,t=Hr;r.DIGEST_LENGTH=16;var i=function(){function u(l){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var f=l[0]|l[1]<<8;this._r[0]=f&8191;var g=l[2]|l[3]<<8;this._r[1]=(f>>>13|g<<3)&8191;var b=l[4]|l[5]<<8;this._r[2]=(g>>>10|b<<6)&7939;var S=l[6]|l[7]<<8;this._r[3]=(b>>>7|S<<9)&8191;var y=l[8]|l[9]<<8;this._r[4]=(S>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var w=l[10]|l[11]<<8;this._r[6]=(y>>>14|w<<2)&8191;var m=l[12]|l[13]<<8;this._r[7]=(w>>>11|m<<5)&8065;var I=l[14]|l[15]<<8;this._r[8]=(m>>>8|I<<8)&8191,this._r[9]=I>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return u.prototype._blocks=function(l,f,g){for(var b=this._fin?0:2048,S=this._h[0],y=this._h[1],w=this._h[2],m=this._h[3],I=this._h[4],A=this._h[5],z=this._h[6],F=this._h[7],N=this._h[8],P=this._h[9],T=this._r[0],x=this._r[1],h=this._r[2],E=this._r[3],K=this._r[4],$=this._r[5],B=this._r[6],G=this._r[7],W=this._r[8],v=this._r[9];g>=16;){var D=l[f+0]|l[f+1]<<8;S+=D&8191;var H=l[f+2]|l[f+3]<<8;y+=(D>>>13|H<<3)&8191;var j=l[f+4]|l[f+5]<<8;w+=(H>>>10|j<<6)&8191;var V=l[f+6]|l[f+7]<<8;m+=(j>>>7|V<<9)&8191;var k=l[f+8]|l[f+9]<<8;I+=(V>>>4|k<<12)&8191,A+=k>>>1&8191;var ee=l[f+10]|l[f+11]<<8;z+=(k>>>14|ee<<2)&8191;var re=l[f+12]|l[f+13]<<8;F+=(ee>>>11|re<<5)&8191;var le=l[f+14]|l[f+15]<<8;N+=(re>>>8|le<<8)&8191,P+=le>>>5|b;var ie=0,De=ie;De+=S*T,De+=y*(5*v),De+=w*(5*W),De+=m*(5*G),De+=I*(5*B),ie=De>>>13,De&=8191,De+=A*(5*$),De+=z*(5*K),De+=F*(5*E),De+=N*(5*h),De+=P*(5*x),ie+=De>>>13,De&=8191;var fe=ie;fe+=S*x,fe+=y*T,fe+=w*(5*v),fe+=m*(5*W),fe+=I*(5*G),ie=fe>>>13,fe&=8191,fe+=A*(5*B),fe+=z*(5*$),fe+=F*(5*K),fe+=N*(5*E),fe+=P*(5*h),ie+=fe>>>13,fe&=8191;var Ie=ie;Ie+=S*h,Ie+=y*x,Ie+=w*T,Ie+=m*(5*v),Ie+=I*(5*W),ie=Ie>>>13,Ie&=8191,Ie+=A*(5*G),Ie+=z*(5*B),Ie+=F*(5*$),Ie+=N*(5*K),Ie+=P*(5*E),ie+=Ie>>>13,Ie&=8191;var Q=ie;Q+=S*E,Q+=y*h,Q+=w*x,Q+=m*T,Q+=I*(5*v),ie=Q>>>13,Q&=8191,Q+=A*(5*W),Q+=z*(5*G),Q+=F*(5*B),Q+=N*(5*$),Q+=P*(5*K),ie+=Q>>>13,Q&=8191;var Z=ie;Z+=S*K,Z+=y*E,Z+=w*h,Z+=m*x,Z+=I*T,ie=Z>>>13,Z&=8191,Z+=A*(5*v),Z+=z*(5*W),Z+=F*(5*G),Z+=N*(5*B),Z+=P*(5*$),ie+=Z>>>13,Z&=8191;var q=ie;q+=S*$,q+=y*K,q+=w*E,q+=m*h,q+=I*x,ie=q>>>13,q&=8191,q+=A*T,q+=z*(5*v),q+=F*(5*W),q+=N*(5*G),q+=P*(5*B),ie+=q>>>13,q&=8191;var p=ie;p+=S*B,p+=y*$,p+=w*K,p+=m*E,p+=I*h,ie=p>>>13,p&=8191,p+=A*x,p+=z*T,p+=F*(5*v),p+=N*(5*W),p+=P*(5*G),ie+=p>>>13,p&=8191;var L=ie;L+=S*G,L+=y*B,L+=w*$,L+=m*K,L+=I*E,ie=L>>>13,L&=8191,L+=A*h,L+=z*x,L+=F*T,L+=N*(5*v),L+=P*(5*W),ie+=L>>>13,L&=8191;var ue=ie;ue+=S*W,ue+=y*G,ue+=w*B,ue+=m*$,ue+=I*K,ie=ue>>>13,ue&=8191,ue+=A*E,ue+=z*h,ue+=F*x,ue+=N*T,ue+=P*(5*v),ie+=ue>>>13,ue&=8191;var me=ie;me+=S*v,me+=y*W,me+=w*G,me+=m*B,me+=I*$,ie=me>>>13,me&=8191,me+=A*K,me+=z*E,me+=F*h,me+=N*x,me+=P*T,ie+=me>>>13,me&=8191,ie=(ie<<2)+ie|0,ie=ie+De|0,De=ie&8191,ie=ie>>>13,fe+=ie,S=De,y=fe,w=Ie,m=Q,I=Z,A=q,z=p,F=L,N=ue,P=me,f+=16,g-=16}this._h[0]=S,this._h[1]=y,this._h[2]=w,this._h[3]=m,this._h[4]=I,this._h[5]=A,this._h[6]=z,this._h[7]=F,this._h[8]=N,this._h[9]=P},u.prototype.finish=function(l,f){f===void 0&&(f=0);var g=new Uint16Array(10),b,S,y,w;if(this._leftover){for(w=this._leftover,this._buffer[w++]=1;w<16;w++)this._buffer[w]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(b=this._h[1]>>>13,this._h[1]&=8191,w=2;w<10;w++)this._h[w]+=b,b=this._h[w]>>>13,this._h[w]&=8191;for(this._h[0]+=b*5,b=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=b,b=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=b,g[0]=this._h[0]+5,b=g[0]>>>13,g[0]&=8191,w=1;w<10;w++)g[w]=this._h[w]+b,b=g[w]>>>13,g[w]&=8191;for(g[9]-=8192,S=(b^1)-1,w=0;w<10;w++)g[w]&=S;for(S=~S,w=0;w<10;w++)this._h[w]=this._h[w]&S|g[w];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,w=1;w<8;w++)y=(this._h[w]+this._pad[w]|0)+(y>>>16)|0,this._h[w]=y&65535;return l[f+0]=this._h[0]>>>0,l[f+1]=this._h[0]>>>8,l[f+2]=this._h[1]>>>0,l[f+3]=this._h[1]>>>8,l[f+4]=this._h[2]>>>0,l[f+5]=this._h[2]>>>8,l[f+6]=this._h[3]>>>0,l[f+7]=this._h[3]>>>8,l[f+8]=this._h[4]>>>0,l[f+9]=this._h[4]>>>8,l[f+10]=this._h[5]>>>0,l[f+11]=this._h[5]>>>8,l[f+12]=this._h[6]>>>0,l[f+13]=this._h[6]>>>8,l[f+14]=this._h[7]>>>0,l[f+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(l){var f=0,g=l.length,b;if(this._leftover){b=16-this._leftover,b>g&&(b=g);for(var S=0;S<b;S++)this._buffer[this._leftover+S]=l[f+S];if(g-=b,f+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(g>=16&&(b=g-g%16,this._blocks(l,f,b),f+=b,g-=b),g){for(var S=0;S<g;S++)this._buffer[this._leftover+S]=l[f+S];this._leftover+=g}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},u.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();r.Poly1305=i;function s(u,l){var f=new i(u);f.update(l);var g=f.digest();return f.clean(),g}r.oneTimeAuth=s;function o(u,l){return u.length!==r.DIGEST_LENGTH||l.length!==r.DIGEST_LENGTH?!1:e.equal(u,l)}r.equal=o})(Tg);(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=lc,t=Tg,i=Hr,s=Ye,o=hi;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var u=new Uint8Array(16),l=function(){function f(g){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,g.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(g)}return f.prototype.seal=function(g,b,S,y){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var w=new Uint8Array(16);w.set(g,w.length-g.length);var m=new Uint8Array(32);e.stream(this._key,w,m,4);var I=b.length+this.tagLength,A;if(y){if(y.length!==I)throw new Error("ChaCha20Poly1305: incorrect destination length");A=y}else A=new Uint8Array(I);return e.streamXOR(this._key,w,b,A,4),this._authenticate(A.subarray(A.length-this.tagLength,A.length),m,A.subarray(0,A.length-this.tagLength),S),i.wipe(w),A},f.prototype.open=function(g,b,S,y){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var w=new Uint8Array(16);w.set(g,w.length-g.length);var m=new Uint8Array(32);e.stream(this._key,w,m,4);var I=new Uint8Array(this.tagLength);if(this._authenticate(I,m,b.subarray(0,b.length-this.tagLength),S),!o.equal(I,b.subarray(b.length-this.tagLength,b.length)))return null;var A=b.length-this.tagLength,z;if(y){if(y.length!==A)throw new Error("ChaCha20Poly1305: incorrect destination length");z=y}else z=new Uint8Array(A);return e.streamXOR(this._key,w,b.subarray(0,b.length-this.tagLength),z,4),i.wipe(w),z},f.prototype.clean=function(){return i.wipe(this._key),this},f.prototype._authenticate=function(g,b,S,y){var w=new t.Poly1305(b);y&&(w.update(y),y.length%16>0&&w.update(u.subarray(y.length%16))),w.update(S),S.length%16>0&&w.update(u.subarray(S.length%16));var m=new Uint8Array(8);y&&s.writeUint64LE(y.length,m),w.update(m),s.writeUint64LE(S.length,m),w.update(m);for(var I=w.digest(),A=0;A<I.length;A++)g[A]=I[A];w.clean(),i.wipe(I),i.wipe(m)},f}();r.ChaCha20Poly1305=l})(xh);var Ng={},Da={},Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});function r6(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}Sh.isSerializableHash=r6;Object.defineProperty(Da,"__esModule",{value:!0});var wn=Sh,n6=hi,i6=Hr,Rg=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var s=0;s<i.length;s++)i[s]^=54;this._inner.update(i);for(var s=0;s<i.length;s++)i[s]^=106;this._outer.update(i),wn.isSerializableHash(this._inner)&&wn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i6.wipe(i)}return r.prototype.reset=function(){if(!wn.isSerializableHash(this._inner)||!wn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){wn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),wn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!wn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!wn.isSerializableHash(this._inner)||!wn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!wn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Da.HMAC=Rg;function s6(r,e,t){var i=new Rg(r,e);i.update(t);var s=i.digest();return i.clean(),s}Da.hmac=s6;Da.equal=n6.equal;Object.defineProperty(Ng,"__esModule",{value:!0});var vp=Da,wp=Hr,a6=function(){function r(e,t,i,s){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=s;var o=vp.hmac(this._hash,i,t);this._hmac=new vp.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),wp.wipe(this._buffer),wp.wipe(this._counter),this._bufpos=0},r}(),o6=Ng.HKDF=a6,xs={},hc={},fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.BrowserRandomSource=void 0;const _p=65536;class c6{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let i=0;i<t.length;i+=_p)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,_p)));return t}}fc.BrowserRandomSource=c6;function u6(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dc={};const l6={},h6=Object.freeze(Object.defineProperty({__proto__:null,default:l6},Symbol.toStringTag,{value:"Module"})),f6=dg(h6);Object.defineProperty(dc,"__esModule",{value:!0});dc.NodeRandomSource=void 0;const d6=Hr;class p6{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof u6<"u"){const e=f6;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let s=0;s<i.length;s++)i[s]=t[s];return(0,d6.wipe)(t),i}}dc.NodeRandomSource=p6;Object.defineProperty(hc,"__esModule",{value:!0});hc.SystemRandomSource=void 0;const g6=fc,y6=dc;class m6{constructor(){if(this.isAvailable=!1,this.name="",this._source=new g6.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new y6.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}hc.SystemRandomSource=m6;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=hc,t=Ye,i=Hr;r.defaultRandomSource=new e.SystemRandomSource;function s(g,b=r.defaultRandomSource){return b.randomBytes(g)}r.randomBytes=s;function o(g=r.defaultRandomSource){const b=s(4,g),S=(0,t.readUint32LE)(b);return(0,i.wipe)(b),S}r.randomUint32=o;const u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(g,b=u,S=r.defaultRandomSource){if(b.length<2)throw new Error("randomString charset is too short");if(b.length>256)throw new Error("randomString charset is too long");let y="";const w=b.length,m=256-256%w;for(;g>0;){const I=s(Math.ceil(g*256/m),S);for(let A=0;A<I.length&&g>0;A++){const z=I[A];z<m&&(y+=b.charAt(z%w),g--)}(0,i.wipe)(I)}return y}r.randomString=l;function f(g,b=u,S=r.defaultRandomSource){const y=Math.ceil(g/(Math.log(b.length)/Math.LN2));return l(y,b,S)}r.randomStringForEntropy=f})(xs);var pc={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Ye,t=Hr;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var i=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},l.prototype.update=function(f,g){if(g===void 0&&(g=f.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var b=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&g>0;)this._buffer[this._bufferLength++]=f[b++],g--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(b=o(this._temp,this._state,f,b,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=f[b++],g--;return this},l.prototype.finish=function(f){if(!this._finished){var g=this._bytesHashed,b=this._bufferLength,S=g/536870912|0,y=g<<3,w=g%64<56?64:128;this._buffer[b]=128;for(var m=b+1;m<w-8;m++)this._buffer[m]=0;e.writeUint32BE(S,this._buffer,w-8),e.writeUint32BE(y,this._buffer,w-4),o(this._temp,this._state,this._buffer,0,w),this._finished=!0}for(var m=0;m<this.digestLength/4;m++)e.writeUint32BE(this._state[m],f,m*4);return this},l.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(f){return this._state.set(f.state),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(f){t.wipe(f.state),f.buffer&&t.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},l}();r.SHA256=i;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(l,f,g,b,S){for(;S>=64;){for(var y=f[0],w=f[1],m=f[2],I=f[3],A=f[4],z=f[5],F=f[6],N=f[7],P=0;P<16;P++){var T=b+P*4;l[P]=e.readUint32BE(g,T)}for(var P=16;P<64;P++){var x=l[P-2],h=(x>>>17|x<<32-17)^(x>>>19|x<<32-19)^x>>>10;x=l[P-15];var E=(x>>>7|x<<32-7)^(x>>>18|x<<32-18)^x>>>3;l[P]=(h+l[P-7]|0)+(E+l[P-16]|0)}for(var P=0;P<64;P++){var h=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&z^~A&F)|0)+(N+(s[P]+l[P]|0)|0)|0,E=((y>>>2|y<<32-2)^(y>>>13|y<<32-13)^(y>>>22|y<<32-22))+(y&w^y&m^w&m)|0;N=F,F=z,z=A,A=I+h|0,I=m,m=w,w=y,y=h+E|0}f[0]+=y,f[1]+=w,f[2]+=m,f[3]+=I,f[4]+=A,f[5]+=z,f[6]+=F,f[7]+=N,b+=64,S-=64}return b}function u(l){var f=new i;f.update(l);var g=f.digest();return f.clean(),g}r.hash=u})(pc);var Dh={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=xs,t=Hr;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(P){const T=new Float64Array(16);if(P)for(let x=0;x<P.length;x++)T[x]=P[x];return T}const s=new Uint8Array(32);s[0]=9;const o=i([56129,1]);function u(P){let T=1;for(let x=0;x<16;x++){let h=P[x]+T+65535;T=Math.floor(h/65536),P[x]=h-T*65536}P[0]+=T-1+37*(T-1)}function l(P,T,x){const h=~(x-1);for(let E=0;E<16;E++){const K=h&(P[E]^T[E]);P[E]^=K,T[E]^=K}}function f(P,T){const x=i(),h=i();for(let E=0;E<16;E++)h[E]=T[E];u(h),u(h),u(h);for(let E=0;E<2;E++){x[0]=h[0]-65517;for(let $=1;$<15;$++)x[$]=h[$]-65535-(x[$-1]>>16&1),x[$-1]&=65535;x[15]=h[15]-32767-(x[14]>>16&1);const K=x[15]>>16&1;x[14]&=65535,l(h,x,1-K)}for(let E=0;E<16;E++)P[2*E]=h[E]&255,P[2*E+1]=h[E]>>8}function g(P,T){for(let x=0;x<16;x++)P[x]=T[2*x]+(T[2*x+1]<<8);P[15]&=32767}function b(P,T,x){for(let h=0;h<16;h++)P[h]=T[h]+x[h]}function S(P,T,x){for(let h=0;h<16;h++)P[h]=T[h]-x[h]}function y(P,T,x){let h,E,K=0,$=0,B=0,G=0,W=0,v=0,D=0,H=0,j=0,V=0,k=0,ee=0,re=0,le=0,ie=0,De=0,fe=0,Ie=0,Q=0,Z=0,q=0,p=0,L=0,ue=0,me=0,Te=0,Je=0,Xe=0,ke=0,pt=0,_t=0,Ke=x[0],Re=x[1],$e=x[2],Le=x[3],qe=x[4],pe=x[5],ve=x[6],he=x[7],we=x[8],je=x[9],Ae=x[10],Ee=x[11],de=x[12],ze=x[13],tt=x[14],rt=x[15];h=T[0],K+=h*Ke,$+=h*Re,B+=h*$e,G+=h*Le,W+=h*qe,v+=h*pe,D+=h*ve,H+=h*he,j+=h*we,V+=h*je,k+=h*Ae,ee+=h*Ee,re+=h*de,le+=h*ze,ie+=h*tt,De+=h*rt,h=T[1],$+=h*Ke,B+=h*Re,G+=h*$e,W+=h*Le,v+=h*qe,D+=h*pe,H+=h*ve,j+=h*he,V+=h*we,k+=h*je,ee+=h*Ae,re+=h*Ee,le+=h*de,ie+=h*ze,De+=h*tt,fe+=h*rt,h=T[2],B+=h*Ke,G+=h*Re,W+=h*$e,v+=h*Le,D+=h*qe,H+=h*pe,j+=h*ve,V+=h*he,k+=h*we,ee+=h*je,re+=h*Ae,le+=h*Ee,ie+=h*de,De+=h*ze,fe+=h*tt,Ie+=h*rt,h=T[3],G+=h*Ke,W+=h*Re,v+=h*$e,D+=h*Le,H+=h*qe,j+=h*pe,V+=h*ve,k+=h*he,ee+=h*we,re+=h*je,le+=h*Ae,ie+=h*Ee,De+=h*de,fe+=h*ze,Ie+=h*tt,Q+=h*rt,h=T[4],W+=h*Ke,v+=h*Re,D+=h*$e,H+=h*Le,j+=h*qe,V+=h*pe,k+=h*ve,ee+=h*he,re+=h*we,le+=h*je,ie+=h*Ae,De+=h*Ee,fe+=h*de,Ie+=h*ze,Q+=h*tt,Z+=h*rt,h=T[5],v+=h*Ke,D+=h*Re,H+=h*$e,j+=h*Le,V+=h*qe,k+=h*pe,ee+=h*ve,re+=h*he,le+=h*we,ie+=h*je,De+=h*Ae,fe+=h*Ee,Ie+=h*de,Q+=h*ze,Z+=h*tt,q+=h*rt,h=T[6],D+=h*Ke,H+=h*Re,j+=h*$e,V+=h*Le,k+=h*qe,ee+=h*pe,re+=h*ve,le+=h*he,ie+=h*we,De+=h*je,fe+=h*Ae,Ie+=h*Ee,Q+=h*de,Z+=h*ze,q+=h*tt,p+=h*rt,h=T[7],H+=h*Ke,j+=h*Re,V+=h*$e,k+=h*Le,ee+=h*qe,re+=h*pe,le+=h*ve,ie+=h*he,De+=h*we,fe+=h*je,Ie+=h*Ae,Q+=h*Ee,Z+=h*de,q+=h*ze,p+=h*tt,L+=h*rt,h=T[8],j+=h*Ke,V+=h*Re,k+=h*$e,ee+=h*Le,re+=h*qe,le+=h*pe,ie+=h*ve,De+=h*he,fe+=h*we,Ie+=h*je,Q+=h*Ae,Z+=h*Ee,q+=h*de,p+=h*ze,L+=h*tt,ue+=h*rt,h=T[9],V+=h*Ke,k+=h*Re,ee+=h*$e,re+=h*Le,le+=h*qe,ie+=h*pe,De+=h*ve,fe+=h*he,Ie+=h*we,Q+=h*je,Z+=h*Ae,q+=h*Ee,p+=h*de,L+=h*ze,ue+=h*tt,me+=h*rt,h=T[10],k+=h*Ke,ee+=h*Re,re+=h*$e,le+=h*Le,ie+=h*qe,De+=h*pe,fe+=h*ve,Ie+=h*he,Q+=h*we,Z+=h*je,q+=h*Ae,p+=h*Ee,L+=h*de,ue+=h*ze,me+=h*tt,Te+=h*rt,h=T[11],ee+=h*Ke,re+=h*Re,le+=h*$e,ie+=h*Le,De+=h*qe,fe+=h*pe,Ie+=h*ve,Q+=h*he,Z+=h*we,q+=h*je,p+=h*Ae,L+=h*Ee,ue+=h*de,me+=h*ze,Te+=h*tt,Je+=h*rt,h=T[12],re+=h*Ke,le+=h*Re,ie+=h*$e,De+=h*Le,fe+=h*qe,Ie+=h*pe,Q+=h*ve,Z+=h*he,q+=h*we,p+=h*je,L+=h*Ae,ue+=h*Ee,me+=h*de,Te+=h*ze,Je+=h*tt,Xe+=h*rt,h=T[13],le+=h*Ke,ie+=h*Re,De+=h*$e,fe+=h*Le,Ie+=h*qe,Q+=h*pe,Z+=h*ve,q+=h*he,p+=h*we,L+=h*je,ue+=h*Ae,me+=h*Ee,Te+=h*de,Je+=h*ze,Xe+=h*tt,ke+=h*rt,h=T[14],ie+=h*Ke,De+=h*Re,fe+=h*$e,Ie+=h*Le,Q+=h*qe,Z+=h*pe,q+=h*ve,p+=h*he,L+=h*we,ue+=h*je,me+=h*Ae,Te+=h*Ee,Je+=h*de,Xe+=h*ze,ke+=h*tt,pt+=h*rt,h=T[15],De+=h*Ke,fe+=h*Re,Ie+=h*$e,Q+=h*Le,Z+=h*qe,q+=h*pe,p+=h*ve,L+=h*he,ue+=h*we,me+=h*je,Te+=h*Ae,Je+=h*Ee,Xe+=h*de,ke+=h*ze,pt+=h*tt,_t+=h*rt,K+=38*fe,$+=38*Ie,B+=38*Q,G+=38*Z,W+=38*q,v+=38*p,D+=38*L,H+=38*ue,j+=38*me,V+=38*Te,k+=38*Je,ee+=38*Xe,re+=38*ke,le+=38*pt,ie+=38*_t,E=1,h=K+E+65535,E=Math.floor(h/65536),K=h-E*65536,h=$+E+65535,E=Math.floor(h/65536),$=h-E*65536,h=B+E+65535,E=Math.floor(h/65536),B=h-E*65536,h=G+E+65535,E=Math.floor(h/65536),G=h-E*65536,h=W+E+65535,E=Math.floor(h/65536),W=h-E*65536,h=v+E+65535,E=Math.floor(h/65536),v=h-E*65536,h=D+E+65535,E=Math.floor(h/65536),D=h-E*65536,h=H+E+65535,E=Math.floor(h/65536),H=h-E*65536,h=j+E+65535,E=Math.floor(h/65536),j=h-E*65536,h=V+E+65535,E=Math.floor(h/65536),V=h-E*65536,h=k+E+65535,E=Math.floor(h/65536),k=h-E*65536,h=ee+E+65535,E=Math.floor(h/65536),ee=h-E*65536,h=re+E+65535,E=Math.floor(h/65536),re=h-E*65536,h=le+E+65535,E=Math.floor(h/65536),le=h-E*65536,h=ie+E+65535,E=Math.floor(h/65536),ie=h-E*65536,h=De+E+65535,E=Math.floor(h/65536),De=h-E*65536,K+=E-1+37*(E-1),E=1,h=K+E+65535,E=Math.floor(h/65536),K=h-E*65536,h=$+E+65535,E=Math.floor(h/65536),$=h-E*65536,h=B+E+65535,E=Math.floor(h/65536),B=h-E*65536,h=G+E+65535,E=Math.floor(h/65536),G=h-E*65536,h=W+E+65535,E=Math.floor(h/65536),W=h-E*65536,h=v+E+65535,E=Math.floor(h/65536),v=h-E*65536,h=D+E+65535,E=Math.floor(h/65536),D=h-E*65536,h=H+E+65535,E=Math.floor(h/65536),H=h-E*65536,h=j+E+65535,E=Math.floor(h/65536),j=h-E*65536,h=V+E+65535,E=Math.floor(h/65536),V=h-E*65536,h=k+E+65535,E=Math.floor(h/65536),k=h-E*65536,h=ee+E+65535,E=Math.floor(h/65536),ee=h-E*65536,h=re+E+65535,E=Math.floor(h/65536),re=h-E*65536,h=le+E+65535,E=Math.floor(h/65536),le=h-E*65536,h=ie+E+65535,E=Math.floor(h/65536),ie=h-E*65536,h=De+E+65535,E=Math.floor(h/65536),De=h-E*65536,K+=E-1+37*(E-1),P[0]=K,P[1]=$,P[2]=B,P[3]=G,P[4]=W,P[5]=v,P[6]=D,P[7]=H,P[8]=j,P[9]=V,P[10]=k,P[11]=ee,P[12]=re,P[13]=le,P[14]=ie,P[15]=De}function w(P,T){y(P,T,T)}function m(P,T){const x=i();for(let h=0;h<16;h++)x[h]=T[h];for(let h=253;h>=0;h--)w(x,x),h!==2&&h!==4&&y(x,x,T);for(let h=0;h<16;h++)P[h]=x[h]}function I(P,T){const x=new Uint8Array(32),h=new Float64Array(80),E=i(),K=i(),$=i(),B=i(),G=i(),W=i();for(let j=0;j<31;j++)x[j]=P[j];x[31]=P[31]&127|64,x[0]&=248,g(h,T);for(let j=0;j<16;j++)K[j]=h[j];E[0]=B[0]=1;for(let j=254;j>=0;--j){const V=x[j>>>3]>>>(j&7)&1;l(E,K,V),l($,B,V),b(G,E,$),S(E,E,$),b($,K,B),S(K,K,B),w(B,G),w(W,E),y(E,$,E),y($,K,G),b(G,E,$),S(E,E,$),w(K,E),S($,B,W),y(E,$,o),b(E,E,B),y($,$,E),y(E,B,W),y(B,K,h),w(K,G),l(E,K,V),l($,B,V)}for(let j=0;j<16;j++)h[j+16]=E[j],h[j+32]=$[j],h[j+48]=K[j],h[j+64]=B[j];const v=h.subarray(32),D=h.subarray(16);m(v,v),y(D,D,v);const H=new Uint8Array(32);return f(H,D),H}r.scalarMult=I;function A(P){return I(P,s)}r.scalarMultBase=A;function z(P){if(P.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const T=new Uint8Array(P);return{publicKey:A(T),secretKey:T}}r.generateKeyPairFromSeed=z;function F(P){const T=(0,e.randomBytes)(32,P),x=z(T);return(0,t.wipe)(T),x}r.generateKeyPair=F;function N(P,T,x=!1){if(P.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(T.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const h=I(P,T);if(x){let E=0;for(let K=0;K<h.length;K++)E|=h[K];if(E===0)throw new Error("X25519: invalid shared key")}return h}r.sharedKey=N})(Dh);function Ih(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Fg(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ih(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Ul(r,e){e||(e=r.reduce((s,o)=>s+o.length,0));const t=Fg(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return Ih(t)}function b6(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),u=o.charCodeAt(0);if(t[u]!==255)throw new TypeError(o+" is ambiguous");t[u]=s}var l=r.length,f=r.charAt(0),g=Math.log(l)/Math.log(256),b=Math.log(256)/Math.log(l);function S(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var I=0,A=0,z=0,F=m.length;z!==F&&m[z]===0;)z++,I++;for(var N=(F-z)*b+1>>>0,P=new Uint8Array(N);z!==F;){for(var T=m[z],x=0,h=N-1;(T!==0||x<A)&&h!==-1;h--,x++)T+=256*P[h]>>>0,P[h]=T%l>>>0,T=T/l>>>0;if(T!==0)throw new Error("Non-zero carry");A=x,z++}for(var E=N-A;E!==N&&P[E]===0;)E++;for(var K=f.repeat(I);E<N;++E)K+=r.charAt(P[E]);return K}function y(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var I=0;if(m[I]!==" "){for(var A=0,z=0;m[I]===f;)A++,I++;for(var F=(m.length-I)*g+1>>>0,N=new Uint8Array(F);m[I];){var P=t[m.charCodeAt(I)];if(P===255)return;for(var T=0,x=F-1;(P!==0||T<z)&&x!==-1;x--,T++)P+=l*N[x]>>>0,N[x]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");z=T,I++}if(m[I]!==" "){for(var h=F-z;h!==F&&N[h]===0;)h++;for(var E=new Uint8Array(A+(F-h)),K=A;h!==F;)E[K++]=N[h++];return E}}}function w(m){var I=y(m);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:y,decode:w}}var v6=b6,w6=v6;const _6=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},E6=r=>new TextEncoder().encode(r),x6=r=>new TextDecoder().decode(r);class S6{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class D6{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Mg(this,e)}}class I6{constructor(e){this.decoders=e}or(e){return Mg(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Mg=(r,e)=>new I6({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class O6{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new S6(e,t,i),this.decoder=new D6(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const gc=({name:r,prefix:e,encode:t,decode:i})=>new O6(r,e,t,i),Ia=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=w6(t,e);return gc({prefix:r,name:e,encode:i,decode:o=>_6(s(o))})},P6=(r,e,t,i)=>{const s={};for(let b=0;b<e.length;++b)s[e[b]]=b;let o=r.length;for(;r[o-1]==="=";)--o;const u=new Uint8Array(o*t/8|0);let l=0,f=0,g=0;for(let b=0;b<o;++b){const S=s[r[b]];if(S===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<t|S,l+=t,l>=8&&(l-=8,u[g++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return u},A6=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let o="",u=0,l=0;for(let f=0;f<r.length;++f)for(l=l<<8|r[f],u+=8;u>t;)u-=t,o+=e[s&l>>u];if(u&&(o+=e[s&l<<t-u]),i)for(;o.length*t&7;)o+="=";return o},ur=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>gc({prefix:e,name:r,encode(s){return A6(s,i,t)},decode(s){return P6(s,i,t,r)}}),C6=gc({prefix:"\0",name:"identity",encode:r=>x6(r),decode:r=>E6(r)}),T6=Object.freeze(Object.defineProperty({__proto__:null,identity:C6},Symbol.toStringTag,{value:"Module"})),$6=ur({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),N6=Object.freeze(Object.defineProperty({__proto__:null,base2:$6},Symbol.toStringTag,{value:"Module"})),R6=ur({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),F6=Object.freeze(Object.defineProperty({__proto__:null,base8:R6},Symbol.toStringTag,{value:"Module"})),M6=Ia({prefix:"9",name:"base10",alphabet:"0123456789"}),L6=Object.freeze(Object.defineProperty({__proto__:null,base10:M6},Symbol.toStringTag,{value:"Module"})),j6=ur({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),k6=ur({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),U6=Object.freeze(Object.defineProperty({__proto__:null,base16:j6,base16upper:k6},Symbol.toStringTag,{value:"Module"})),B6=ur({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),q6=ur({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),z6=ur({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),H6=ur({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),K6=ur({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),V6=ur({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),W6=ur({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),G6=ur({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Y6=ur({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),J6=Object.freeze(Object.defineProperty({__proto__:null,base32:B6,base32hex:K6,base32hexpad:W6,base32hexpadupper:G6,base32hexupper:V6,base32pad:z6,base32padupper:H6,base32upper:q6,base32z:Y6},Symbol.toStringTag,{value:"Module"})),X6=Ia({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Z6=Ia({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Q6=Object.freeze(Object.defineProperty({__proto__:null,base36:X6,base36upper:Z6},Symbol.toStringTag,{value:"Module"})),e3=Ia({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),t3=Ia({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),r3=Object.freeze(Object.defineProperty({__proto__:null,base58btc:e3,base58flickr:t3},Symbol.toStringTag,{value:"Module"})),n3=ur({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),i3=ur({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),s3=ur({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a3=ur({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),o3=Object.freeze(Object.defineProperty({__proto__:null,base64:n3,base64pad:i3,base64url:s3,base64urlpad:a3},Symbol.toStringTag,{value:"Module"})),Lg=Array.from(""),c3=Lg.reduce((r,e,t)=>(r[t]=e,r),[]),u3=Lg.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function l3(r){return r.reduce((e,t)=>(e+=c3[t],e),"")}function h3(r){const e=[];for(const t of r){const i=u3[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const f3=gc({prefix:"",name:"base256emoji",encode:l3,decode:h3}),d3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:f3},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Ep={...T6,...N6,...F6,...L6,...U6,...J6,...Q6,...r3,...o3,...d3};function jg(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const xp=jg("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),al=jg("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Fg(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),kg={utf8:xp,"utf-8":xp,hex:Ep.base16,latin1:al,ascii:al,binary:al,...Ep};function Nr(r,e="utf8"){const t=kg[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ih(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function Dr(r,e="utf8"){const t=kg[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Sp=globalThis&&globalThis.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return r.concat(o||Array.prototype.slice.call(e))},p3=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}(),g3=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),y3=function(){function r(e,t,i,s){this.name=e,this.version=t,this.os=i,this.bot=s,this.type="bot-device"}return r}(),m3=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),b3=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),v3=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,w3=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Dp=3,_3=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",v3]],Ip=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function E3(r){return r?Op(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new b3:typeof navigator<"u"?Op(navigator.userAgent):D3()}function x3(r){return r!==""&&_3.reduce(function(e,t){var i=t[0],s=t[1];if(e)return e;var o=s.exec(r);return!!o&&[i,o]},!1)}function Op(r){var e=x3(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new m3;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<Dp&&(s=Sp(Sp([],s,!0),I3(Dp-s.length),!0)):s=[];var o=s.join("."),u=S3(r),l=w3.exec(r);return l&&l[1]?new y3(t,o,u,l[1]):new p3(t,o,u)}function S3(r){for(var e=0,t=Ip.length;e<t;e++){var i=Ip[e],s=i[0],o=i[1],u=o.exec(r);if(u)return s}return null}function D3(){var r=typeof process<"u"&&process.version;return r?new g3(process.version.slice(1)):null}function I3(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var Pe={},Ug={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(r){var e,t,i,s,o,u,l,f,g,b,S,y,w,m,I,A,z,F,N,P,T,x,h;(function(E){var K=typeof ir=="object"?ir:typeof self=="object"?self:typeof this=="object"?this:{};E($(K,$(r.exports)));function $(B,G){return B!==K&&(typeof Object.create=="function"?Object.defineProperty(B,"__esModule",{value:!0}):B.__esModule=!0),function(W,v){return B[W]=G?G(W,v):v}}})(function(E){var K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,B){$.__proto__=B}||function($,B){for(var G in B)B.hasOwnProperty(G)&&($[G]=B[G])};e=function($,B){K($,B);function G(){this.constructor=$}$.prototype=B===null?Object.create(B):(G.prototype=B.prototype,new G)},t=Object.assign||function($){for(var B,G=1,W=arguments.length;G<W;G++){B=arguments[G];for(var v in B)Object.prototype.hasOwnProperty.call(B,v)&&($[v]=B[v])}return $},i=function($,B){var G={};for(var W in $)Object.prototype.hasOwnProperty.call($,W)&&B.indexOf(W)<0&&(G[W]=$[W]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,W=Object.getOwnPropertySymbols($);v<W.length;v++)B.indexOf(W[v])<0&&Object.prototype.propertyIsEnumerable.call($,W[v])&&(G[W[v]]=$[W[v]]);return G},s=function($,B,G,W){var v=arguments.length,D=v<3?B:W===null?W=Object.getOwnPropertyDescriptor(B,G):W,H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate($,B,G,W);else for(var j=$.length-1;j>=0;j--)(H=$[j])&&(D=(v<3?H(D):v>3?H(B,G,D):H(B,G))||D);return v>3&&D&&Object.defineProperty(B,G,D),D},o=function($,B){return function(G,W){B(G,W,$)}},u=function($,B){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata($,B)},l=function($,B,G,W){function v(D){return D instanceof G?D:new G(function(H){H(D)})}return new(G||(G=Promise))(function(D,H){function j(ee){try{k(W.next(ee))}catch(re){H(re)}}function V(ee){try{k(W.throw(ee))}catch(re){H(re)}}function k(ee){ee.done?D(ee.value):v(ee.value).then(j,V)}k((W=W.apply($,B||[])).next())})},f=function($,B){var G={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},W,v,D,H;return H={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function j(k){return function(ee){return V([k,ee])}}function V(k){if(W)throw new TypeError("Generator is already executing.");for(;G;)try{if(W=1,v&&(D=k[0]&2?v.return:k[0]?v.throw||((D=v.return)&&D.call(v),0):v.next)&&!(D=D.call(v,k[1])).done)return D;switch(v=0,D&&(k=[k[0]&2,D.value]),k[0]){case 0:case 1:D=k;break;case 4:return G.label++,{value:k[1],done:!1};case 5:G.label++,v=k[1],k=[0];continue;case 7:k=G.ops.pop(),G.trys.pop();continue;default:if(D=G.trys,!(D=D.length>0&&D[D.length-1])&&(k[0]===6||k[0]===2)){G=0;continue}if(k[0]===3&&(!D||k[1]>D[0]&&k[1]<D[3])){G.label=k[1];break}if(k[0]===6&&G.label<D[1]){G.label=D[1],D=k;break}if(D&&G.label<D[2]){G.label=D[2],G.ops.push(k);break}D[2]&&G.ops.pop(),G.trys.pop();continue}k=B.call($,G)}catch(ee){k=[6,ee],v=0}finally{W=D=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}},h=function($,B,G,W){W===void 0&&(W=G),$[W]=B[G]},g=function($,B){for(var G in $)G!=="default"&&!B.hasOwnProperty(G)&&(B[G]=$[G])},b=function($){var B=typeof Symbol=="function"&&Symbol.iterator,G=B&&$[B],W=0;if(G)return G.call($);if($&&typeof $.length=="number")return{next:function(){return $&&W>=$.length&&($=void 0),{value:$&&$[W++],done:!$}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function($,B){var G=typeof Symbol=="function"&&$[Symbol.iterator];if(!G)return $;var W=G.call($),v,D=[],H;try{for(;(B===void 0||B-- >0)&&!(v=W.next()).done;)D.push(v.value)}catch(j){H={error:j}}finally{try{v&&!v.done&&(G=W.return)&&G.call(W)}finally{if(H)throw H.error}}return D},y=function(){for(var $=[],B=0;B<arguments.length;B++)$=$.concat(S(arguments[B]));return $},w=function(){for(var $=0,B=0,G=arguments.length;B<G;B++)$+=arguments[B].length;for(var W=Array($),v=0,B=0;B<G;B++)for(var D=arguments[B],H=0,j=D.length;H<j;H++,v++)W[v]=D[H];return W},m=function($){return this instanceof m?(this.v=$,this):new m($)},I=function($,B,G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=G.apply($,B||[]),v,D=[];return v={},H("next"),H("throw"),H("return"),v[Symbol.asyncIterator]=function(){return this},v;function H(le){W[le]&&(v[le]=function(ie){return new Promise(function(De,fe){D.push([le,ie,De,fe])>1||j(le,ie)})})}function j(le,ie){try{V(W[le](ie))}catch(De){re(D[0][3],De)}}function V(le){le.value instanceof m?Promise.resolve(le.value.v).then(k,ee):re(D[0][2],le)}function k(le){j("next",le)}function ee(le){j("throw",le)}function re(le,ie){le(ie),D.shift(),D.length&&j(D[0][0],D[0][1])}},A=function($){var B,G;return B={},W("next"),W("throw",function(v){throw v}),W("return"),B[Symbol.iterator]=function(){return this},B;function W(v,D){B[v]=$[v]?function(H){return(G=!G)?{value:m($[v](H)),done:v==="return"}:D?D(H):H}:D}},z=function($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B=$[Symbol.asyncIterator],G;return B?B.call($):($=typeof b=="function"?b($):$[Symbol.iterator](),G={},W("next"),W("throw"),W("return"),G[Symbol.asyncIterator]=function(){return this},G);function W(D){G[D]=$[D]&&function(H){return new Promise(function(j,V){H=$[D](H),v(j,V,H.done,H.value)})}}function v(D,H,j,V){Promise.resolve(V).then(function(k){D({value:k,done:j})},H)}},F=function($,B){return Object.defineProperty?Object.defineProperty($,"raw",{value:B}):$.raw=B,$},N=function($){if($&&$.__esModule)return $;var B={};if($!=null)for(var G in $)Object.hasOwnProperty.call($,G)&&(B[G]=$[G]);return B.default=$,B},P=function($){return $&&$.__esModule?$:{default:$}},T=function($,B){if(!B.has($))throw new TypeError("attempted to get private field on non-instance");return B.get($)},x=function($,B,G){if(!B.has($))throw new TypeError("attempted to set private field on non-instance");return B.set($,G),G},E("__extends",e),E("__assign",t),E("__rest",i),E("__decorate",s),E("__param",o),E("__metadata",u),E("__awaiter",l),E("__generator",f),E("__exportStar",g),E("__createBinding",h),E("__values",b),E("__read",S),E("__spread",y),E("__spreadArrays",w),E("__await",m),E("__asyncGenerator",I),E("__asyncDelegator",A),E("__asyncValues",z),E("__makeTemplateObject",F),E("__importStar",N),E("__importDefault",P),E("__classPrivateFieldGet",T),E("__classPrivateFieldSet",x)})})(Ug);var nn=Ug.exports,ol={},Zs={},Pp;function O3(){if(Pp)return Zs;Pp=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Zs.delay=r,Zs}var Ti={},cl={},$i={},Ap;function P3(){return Ap||(Ap=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.ONE_THOUSAND=$i.ONE_HUNDRED=void 0,$i.ONE_HUNDRED=100,$i.ONE_THOUSAND=1e3),$i}var ul={},Cp;function A3(){return Cp||(Cp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(ul)),ul}var Tp;function Bg(){return Tp||(Tp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(P3(),r),e.__exportStar(A3(),r)}(cl)),cl}var $p;function C3(){if($p)return Ti;$p=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.fromMiliseconds=Ti.toMiliseconds=void 0;const r=Bg();function e(i){return i*r.ONE_THOUSAND}Ti.toMiliseconds=e;function t(i){return Math.floor(i/r.ONE_THOUSAND)}return Ti.fromMiliseconds=t,Ti}var Np;function T3(){return Np||(Np=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(O3(),r),e.__exportStar(C3(),r)}(ol)),ol}var ds={},Rp;function $3(){if(Rp)return ds;Rp=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:s})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return ds.Watch=r,ds.default=r,ds}var ll={},Qs={},Fp;function N3(){if(Fp)return Qs;Fp=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.IWatch=void 0;class r{}return Qs.IWatch=r,Qs}var Mp;function R3(){return Mp||(Mp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),nn.__exportStar(N3(),r)}(ll)),ll}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(T3(),r),e.__exportStar($3(),r),e.__exportStar(R3(),r),e.__exportStar(Bg(),r)})(Pe);var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.getLocalStorage=xt.getLocalStorageOrThrow=xt.getCrypto=xt.getCryptoOrThrow=zg=xt.getLocation=xt.getLocationOrThrow=Oh=xt.getNavigator=xt.getNavigatorOrThrow=qg=xt.getDocument=xt.getDocumentOrThrow=xt.getFromWindowOrThrow=xt.getFromWindow=void 0;function qi(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}xt.getFromWindow=qi;function Ss(r){const e=qi(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}xt.getFromWindowOrThrow=Ss;function F3(){return Ss("document")}xt.getDocumentOrThrow=F3;function M3(){return qi("document")}var qg=xt.getDocument=M3;function L3(){return Ss("navigator")}xt.getNavigatorOrThrow=L3;function j3(){return qi("navigator")}var Oh=xt.getNavigator=j3;function k3(){return Ss("location")}xt.getLocationOrThrow=k3;function U3(){return qi("location")}var zg=xt.getLocation=U3;function B3(){return Ss("crypto")}xt.getCryptoOrThrow=B3;function q3(){return qi("crypto")}xt.getCrypto=q3;function z3(){return Ss("localStorage")}xt.getLocalStorageOrThrow=z3;function H3(){return qi("localStorage")}xt.getLocalStorage=H3;var Ph={};Object.defineProperty(Ph,"__esModule",{value:!0});var Hg=Ph.getWindowMetadata=void 0;const Lp=xt;function K3(){let r,e;try{r=Lp.getDocumentOrThrow(),e=Lp.getLocationOrThrow()}catch{return null}function t(){const S=r.getElementsByTagName("link"),y=[];for(let w=0;w<S.length;w++){const m=S[w],I=m.getAttribute("rel");if(I&&I.toLowerCase().indexOf("icon")>-1){const A=m.getAttribute("href");if(A)if(A.toLowerCase().indexOf("https:")===-1&&A.toLowerCase().indexOf("http:")===-1&&A.indexOf("//")!==0){let z=e.protocol+"//"+e.host;if(A.indexOf("/")===0)z+=A;else{const F=e.pathname.split("/");F.pop();const N=F.join("/");z+=N+"/"+A}y.push(z)}else if(A.indexOf("//")===0){const z=e.protocol+A;y.push(z)}else y.push(A)}}return y}function i(...S){const y=r.getElementsByTagName("meta");for(let w=0;w<y.length;w++){const m=y[w],I=["itemprop","property","name"].map(A=>m.getAttribute(A)).filter(A=>A?S.includes(A):!1);if(I.length&&I){const A=m.getAttribute("content");if(A)return A}}return""}function s(){let S=i("name","og:site_name","og:title","twitter:title");return S||(S=r.title),S}function o(){return i("description","og:description","twitter:description","keywords")}const u=s(),l=o(),f=e.origin,g=t();return{description:l,url:f,icons:g,name:u}}Hg=Ph.getWindowMetadata=K3;var ga={},V3=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Kg="%[a-f0-9]{2}",jp=new RegExp("("+Kg+")|([^%]+?)","gi"),kp=new RegExp("("+Kg+")+","gi");function Bl(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),i=r.slice(e);return Array.prototype.concat.call([],Bl(t),Bl(i))}function W3(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(jp)||[],t=1;t<e.length;t++)r=Bl(e,t).join(""),e=r.match(jp)||[];return r}}function G3(r){for(var e={"%FE%FF":"","%FF%FE":""},t=kp.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=W3(t[0]);i!==t[0]&&(e[t[0]]=i)}t=kp.exec(r)}e["%C2"]="";for(var s=Object.keys(e),o=0;o<s.length;o++){var u=s[o];r=r.replace(new RegExp(u,"g"),e[u])}return r}var Y3=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return G3(r)}},J3=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]},X3=function(r,e){for(var t={},i=Object.keys(r),s=Array.isArray(e),o=0;o<i.length;o++){var u=i[o],l=r[u];(s?e.indexOf(u)!==-1:e(u,l,r))&&(t[u]=l)}return t};(function(r){const e=V3,t=Y3,i=J3,s=X3,o=F=>F==null,u=Symbol("encodeFragmentIdentifier");function l(F){switch(F.arrayFormat){case"index":return N=>(P,T)=>{const x=P.length;return T===void 0||F.skipNull&&T===null||F.skipEmptyString&&T===""?P:T===null?[...P,[b(N,F),"[",x,"]"].join("")]:[...P,[b(N,F),"[",b(x,F),"]=",b(T,F)].join("")]};case"bracket":return N=>(P,T)=>T===void 0||F.skipNull&&T===null||F.skipEmptyString&&T===""?P:T===null?[...P,[b(N,F),"[]"].join("")]:[...P,[b(N,F),"[]=",b(T,F)].join("")];case"colon-list-separator":return N=>(P,T)=>T===void 0||F.skipNull&&T===null||F.skipEmptyString&&T===""?P:T===null?[...P,[b(N,F),":list="].join("")]:[...P,[b(N,F),":list=",b(T,F)].join("")];case"comma":case"separator":case"bracket-separator":{const N=F.arrayFormat==="bracket-separator"?"[]=":"=";return P=>(T,x)=>x===void 0||F.skipNull&&x===null||F.skipEmptyString&&x===""?T:(x=x===null?"":x,T.length===0?[[b(P,F),N,b(x,F)].join("")]:[[T,b(x,F)].join(F.arrayFormatSeparator)])}default:return N=>(P,T)=>T===void 0||F.skipNull&&T===null||F.skipEmptyString&&T===""?P:T===null?[...P,b(N,F)]:[...P,[b(N,F),"=",b(T,F)].join("")]}}function f(F){let N;switch(F.arrayFormat){case"index":return(P,T,x)=>{if(N=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!N){x[P]=T;return}x[P]===void 0&&(x[P]={}),x[P][N[1]]=T};case"bracket":return(P,T,x)=>{if(N=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!N){x[P]=T;return}if(x[P]===void 0){x[P]=[T];return}x[P]=[].concat(x[P],T)};case"colon-list-separator":return(P,T,x)=>{if(N=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!N){x[P]=T;return}if(x[P]===void 0){x[P]=[T];return}x[P]=[].concat(x[P],T)};case"comma":case"separator":return(P,T,x)=>{const h=typeof T=="string"&&T.includes(F.arrayFormatSeparator),E=typeof T=="string"&&!h&&S(T,F).includes(F.arrayFormatSeparator);T=E?S(T,F):T;const K=h||E?T.split(F.arrayFormatSeparator).map($=>S($,F)):T===null?T:S(T,F);x[P]=K};case"bracket-separator":return(P,T,x)=>{const h=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!h){x[P]=T&&S(T,F);return}const E=T===null?[]:T.split(F.arrayFormatSeparator).map(K=>S(K,F));if(x[P]===void 0){x[P]=E;return}x[P]=[].concat(x[P],E)};default:return(P,T,x)=>{if(x[P]===void 0){x[P]=T;return}x[P]=[].concat(x[P],T)}}}function g(F){if(typeof F!="string"||F.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function b(F,N){return N.encode?N.strict?e(F):encodeURIComponent(F):F}function S(F,N){return N.decode?t(F):F}function y(F){return Array.isArray(F)?F.sort():typeof F=="object"?y(Object.keys(F)).sort((N,P)=>Number(N)-Number(P)).map(N=>F[N]):F}function w(F){const N=F.indexOf("#");return N!==-1&&(F=F.slice(0,N)),F}function m(F){let N="";const P=F.indexOf("#");return P!==-1&&(N=F.slice(P)),N}function I(F){F=w(F);const N=F.indexOf("?");return N===-1?"":F.slice(N+1)}function A(F,N){return N.parseNumbers&&!Number.isNaN(Number(F))&&typeof F=="string"&&F.trim()!==""?F=Number(F):N.parseBooleans&&F!==null&&(F.toLowerCase()==="true"||F.toLowerCase()==="false")&&(F=F.toLowerCase()==="true"),F}function z(F,N){N=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},N),g(N.arrayFormatSeparator);const P=f(N),T=Object.create(null);if(typeof F!="string"||(F=F.trim().replace(/^[?#&]/,""),!F))return T;for(const x of F.split("&")){if(x==="")continue;let[h,E]=i(N.decode?x.replace(/\+/g," "):x,"=");E=E===void 0?null:["comma","separator","bracket-separator"].includes(N.arrayFormat)?E:S(E,N),P(S(h,N),E,T)}for(const x of Object.keys(T)){const h=T[x];if(typeof h=="object"&&h!==null)for(const E of Object.keys(h))h[E]=A(h[E],N);else T[x]=A(h,N)}return N.sort===!1?T:(N.sort===!0?Object.keys(T).sort():Object.keys(T).sort(N.sort)).reduce((x,h)=>{const E=T[h];return E&&typeof E=="object"&&!Array.isArray(E)?x[h]=y(E):x[h]=E,x},Object.create(null))}r.extract=I,r.parse=z,r.stringify=(F,N)=>{if(!F)return"";N=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},N),g(N.arrayFormatSeparator);const P=E=>N.skipNull&&o(F[E])||N.skipEmptyString&&F[E]==="",T=l(N),x={};for(const E of Object.keys(F))P(E)||(x[E]=F[E]);const h=Object.keys(x);return N.sort!==!1&&h.sort(N.sort),h.map(E=>{const K=F[E];return K===void 0?"":K===null?b(E,N):Array.isArray(K)?K.length===0&&N.arrayFormat==="bracket-separator"?b(E,N)+"[]":K.reduce(T(E),[]).join("&"):b(E,N)+"="+b(K,N)}).filter(E=>E.length>0).join("&")},r.parseUrl=(F,N)=>{N=Object.assign({decode:!0},N);const[P,T]=i(F,"#");return Object.assign({url:P.split("?")[0]||"",query:z(I(F),N)},N&&N.parseFragmentIdentifier&&T?{fragmentIdentifier:S(T,N)}:{})},r.stringifyUrl=(F,N)=>{N=Object.assign({encode:!0,strict:!0,[u]:!0},N);const P=w(F.url).split("?")[0]||"",T=r.extract(F.url),x=r.parse(T,{sort:!1}),h=Object.assign(x,F.query);let E=r.stringify(h,N);E&&(E=`?${E}`);let K=m(F.url);return F.fragmentIdentifier&&(K=`#${N[u]?b(F.fragmentIdentifier,N):F.fragmentIdentifier}`),`${P}${E}${K}`},r.pick=(F,N,P)=>{P=Object.assign({parseFragmentIdentifier:!0,[u]:!1},P);const{url:T,query:x,fragmentIdentifier:h}=r.parseUrl(F,P);return r.stringifyUrl({url:T,query:s(x,N),fragmentIdentifier:h},P)},r.exclude=(F,N,P)=>{const T=Array.isArray(N)?x=>!N.includes(x):(x,h)=>!N(x,h);return r.pick(F,T,P)}})(ga);const Z3={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Q3(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const s=r[i];t.push(...s.accounts)}),t}function Vg(r,e){return r.includes(":")?[r]:e.chains||[]}const Wg="base10",Er="base16",ql="base64pad",Ah="utf8",Gg=0,zi=1,e5=0,Up=1,zl=12,Ch=32;function t5(){const r=Dh.generateKeyPair();return{privateKey:Dr(r.secretKey,Er),publicKey:Dr(r.publicKey,Er)}}function Hl(){const r=xs.randomBytes(Ch);return Dr(r,Er)}function r5(r,e){const t=Dh.sharedKey(Nr(r,Er),Nr(e,Er)),i=new o6(pc.SHA256,t).expand(Ch);return Dr(i,Er)}function n5(r){const e=pc.hash(Nr(r,Er));return Dr(e,Er)}function bs(r){const e=pc.hash(Nr(r,Ah));return Dr(e,Er)}function i5(r){return Nr(`${r}`,Wg)}function Oa(r){return Number(Dr(r,Wg))}function s5(r){const e=i5(typeof r.type<"u"?r.type:Gg);if(Oa(e)===zi&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Nr(r.senderPublicKey,Er):void 0,i=typeof r.iv<"u"?Nr(r.iv,Er):xs.randomBytes(zl),s=new xh.ChaCha20Poly1305(Nr(r.symKey,Er)).seal(i,Nr(r.message,Ah));return o5({type:e,sealed:s,iv:i,senderPublicKey:t})}function a5(r){const e=new xh.ChaCha20Poly1305(Nr(r.symKey,Er)),{sealed:t,iv:i}=Zo(r.encoded),s=e.open(i,t);if(s===null)throw new Error("Failed to decrypt");return Dr(s,Ah)}function o5(r){if(Oa(r.type)===zi){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Dr(Ul([r.type,r.senderPublicKey,r.iv,r.sealed]),ql)}return Dr(Ul([r.type,r.iv,r.sealed]),ql)}function Zo(r){const e=Nr(r,ql),t=e.slice(e5,Up),i=Up;if(Oa(t)===zi){const l=i+Ch,f=l+zl,g=e.slice(i,l),b=e.slice(l,f),S=e.slice(f);return{type:t,sealed:S,iv:b,senderPublicKey:g}}const s=i+zl,o=e.slice(i,s),u=e.slice(s);return{type:t,sealed:u,iv:o}}function c5(r,e){const t=Zo(r);return Yg({type:Oa(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Dr(t.senderPublicKey,Er):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Yg(r){const e=(r==null?void 0:r.type)||Gg;if(e===zi){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function Bp(r){return r.type===zi&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}var u5=Object.defineProperty,qp=Object.getOwnPropertySymbols,l5=Object.prototype.hasOwnProperty,h5=Object.prototype.propertyIsEnumerable,zp=(r,e,t)=>e in r?u5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Hp=(r,e)=>{for(var t in e||(e={}))l5.call(e,t)&&zp(r,t,e[t]);if(qp)for(var t of qp(e))h5.call(e,t)&&zp(r,t,e[t]);return r};const f5="ReactNative",Li={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},d5="js";function Th(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Jg(){return!qg()&&!!Oh()&&navigator.product===f5}function $h(){return!Th()&&!!Oh()}function Xg(){return Jg()?Li.reactNative:Th()?Li.node:$h()?Li.browser:Li.unknown}function p5(r,e){let t=ga.parse(r);return t=Hp(Hp({},t),e),r=ga.stringify(t),r}function g5(){return Hg()||{name:"",description:"",url:"",icons:[""]}}function y5(){if(typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const r=E3();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function m5(){var r;const e=Xg();return e===Li.browser?[e,((r=zg())==null?void 0:r.host)||"unknown"].join(":"):e}function b5(r,e,t){const i=y5(),s=m5();return[[r,e].join("-"),[d5,t].join("-"),i,s].join("/")}function v5({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:o,useOnCloseEvent:u}){const l=t.split("?"),f=b5(r,e,i),g={auth:s,ua:f,projectId:o,useOnCloseEvent:u||void 0},b=p5(l[1]||"",g);return l[0]+"?"+b}function ji(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Zg(r){return Object.fromEntries(r.entries())}function Qg(r){return new Map(Object.entries(r))}function gs(r=Pe.FIVE_MINUTES,e){const t=Pe.toMiliseconds(r||Pe.FIVE_MINUTES);let i,s,o;return{resolve:u=>{o&&i&&(clearTimeout(o),i(u))},reject:u=>{o&&s&&(clearTimeout(o),s(u))},done:()=>new Promise((u,l)=>{o=setTimeout(()=>{l(new Error(e))},t),i=u,s=l})}}function Qo(r,e,t){return new Promise(async(i,s)=>{const o=setTimeout(()=>s(new Error(t)),e);try{const u=await r;i(u)}catch(u){s(u)}clearTimeout(o)})}function ey(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function w5(r){return ey("topic",r)}function _5(r){return ey("id",r)}function ty(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function hn(r,e){return Pe.fromMiliseconds((e||Date.now())+Pe.toMiliseconds(r))}function si(r){return Date.now()>=Pe.toMiliseconds(r)}function er(r,e){return`${r}${e?`:${e}`:""}`}function hl(r=[],e=[]){return[...new Set([...r,...e])]}async function E5({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t;let s=i==null?void 0:i.href;if(typeof s!="string")return;s.endsWith("/")&&(s=s.slice(0,-1));const o=`${s}/wc?requestId=${r}&sessionTopic=${e}`,u=Xg();u===Li.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):u===Li.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}const x5="irn";function Kl(r){return(r==null?void 0:r.relay)||{protocol:x5}}function Wo(r){const e=Z3[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var S5=Object.defineProperty,Kp=Object.getOwnPropertySymbols,D5=Object.prototype.hasOwnProperty,I5=Object.prototype.propertyIsEnumerable,Vp=(r,e,t)=>e in r?S5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,O5=(r,e)=>{for(var t in e||(e={}))D5.call(e,t)&&Vp(r,t,e[t]);if(Kp)for(var t of Kp(e))I5.call(e,t)&&Vp(r,t,e[t]);return r};function P5(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const o=s.replace(i,""),u=r[s];t[o]=u}}),t}function A5(r){const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),o=typeof t<"u"?r.substring(t):"",u=ga.parse(o);return{protocol:i,topic:C5(s[0]),version:parseInt(s[1],10),symKey:u.symKey,relay:P5(u)}}function C5(r){return r.startsWith("//")?r.substring(2):r}function T5(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const o=t+e+s;r[s]&&(i[o]=r[s])}),i}function $5(r){return`${r.protocol}:${r.topic}@${r.version}?`+ga.stringify(O5({symKey:r.symKey},T5(r.relay)))}function Ds(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function N5(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Ds(t.accounts))}),e}function R5(r,e){const t=[];return Object.values(r).forEach(i=>{Ds(i.accounts).includes(e)&&t.push(...i.methods)}),t}function F5(r,e){const t=[];return Object.values(r).forEach(i=>{Ds(i.accounts).includes(e)&&t.push(...i.events)}),t}function M5(r,e){const t=Yo(r,e);if(t)throw new Error(t.message);const i={};for(const[s,o]of Object.entries(r))i[s]={methods:o.methods,events:o.events,chains:o.accounts.map(u=>`${u.split(":")[0]}:${u.split(":")[1]}`)};return i}function ry(r){return r.includes(":")}function Go(r){return ry(r)?r.split(":")[0]:r}const L5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},j5={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(r,e){const{message:t,code:i}=j5[r];return{message:e?`${t} ${e}`:t,code:i}}function Ht(r,e){const{message:t,code:i}=L5[r];return{message:e?`${t} ${e}`:t,code:i}}function Sn(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function vs(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function _r(r){return typeof r>"u"}function or(r,e){return e&&_r(r)?!0:typeof r=="string"&&!!r.trim().length}function Nh(r,e){return e&&_r(r)?!0:typeof r=="number"&&!isNaN(r)}function k5(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let o=!0;return ji(s,i)?(i.forEach(u=>{const{accounts:l,methods:f,events:g}=r.namespaces[u],b=Ds(l),S=t[u];(!ji(Vg(u,S),b)||!ji(S.methods,f)||!ji(S.events,g))&&(o=!1)}),o):!1}function ec(r){return or(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function U5(r){if(or(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ec(t)}}return!1}function B5(r){if(or(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function q5(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function z5(r){return r==null?void 0:r.topic}function H5(r,e){let t=null;return or(r==null?void 0:r.publicKey,!1)||(t=be("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Wp(r){let e=!0;return Sn(r)?r.length&&(e=r.every(t=>or(t,!1))):e=!1,e}function K5(r,e,t){let i=null;return Sn(e)&&e.length?e.forEach(s=>{i||ec(s)||(i=Ht("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ec(r)||(i=Ht("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function V5(r,e,t){let i=null;return Object.entries(r).forEach(([s,o])=>{if(i)return;const u=K5(s,Vg(s,o),`${e} ${t}`);u&&(i=u)}),i}function W5(r,e){let t=null;return Sn(r)?r.forEach(i=>{t||U5(i)||(t=Ht("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=Ht("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function G5(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=W5(i==null?void 0:i.accounts,`${e} namespace`);s&&(t=s)}),t}function Y5(r,e){let t=null;return Wp(r==null?void 0:r.methods)?Wp(r==null?void 0:r.events)||(t=Ht("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Ht("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function ny(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=Y5(i,`${e}, namespace`);s&&(t=s)}),t}function J5(r,e,t){let i=null;if(r&&vs(r)){const s=ny(r,e);s&&(i=s);const o=V5(r,e,t);o&&(i=o)}else i=be("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function Yo(r,e){let t=null;if(r&&vs(r)){const i=ny(r,e);i&&(t=i);const s=G5(r,e);s&&(t=s)}else t=be("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function iy(r){return or(r.protocol,!0)}function X5(r,e){let t=!1;return e&&!r?t=!0:r&&Sn(r)&&r.length&&r.forEach(i=>{t=iy(i)}),t}function Z5(r){return typeof r=="number"}function $r(r){return typeof r<"u"&&typeof r!==null}function Q5(r){return!(!r||typeof r!="object"||!r.code||!Nh(r.code,!1)||!r.message||!or(r.message,!1))}function ex(r){return!(_r(r)||!or(r.method,!1))}function tx(r){return!(_r(r)||_r(r.result)&&_r(r.error)||!Nh(r.id,!1)||!or(r.jsonrpc,!1))}function rx(r){return!(_r(r)||!or(r.name,!1))}function Gp(r,e){return!(!ec(e)||!N5(r).includes(e))}function nx(r,e,t){return or(t,!1)?R5(r,e).includes(t):!1}function ix(r,e,t){return or(t,!1)?F5(r,e).includes(t):!1}function Yp(r,e,t){let i=null;const s=sx(r),o=ax(e),u=Object.keys(s),l=Object.keys(o),f=Jp(Object.keys(r)),g=Jp(Object.keys(e)),b=f.filter(S=>!g.includes(S));return b.length&&(i=be("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${b.toString()}
      Received: ${Object.keys(e).toString()}`)),ji(u,l)||(i=be("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${u.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(S=>{if(!S.includes(":")||i)return;const y=Ds(e[S].accounts);y.includes(S)||(i=be("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${S}
        Required: ${S}
        Approved: ${y.toString()}`))}),u.forEach(S=>{i||(ji(s[S].methods,o[S].methods)?ji(s[S].events,o[S].events)||(i=be("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${S}`)):i=be("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${S}`))}),i}function sx(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function Jp(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function ax(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const i=Ds(r[t].accounts);i==null||i.forEach(s=>{e[s]={accounts:r[t].accounts.filter(o=>o.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function ox(r,e){return Nh(r,!1)&&r<=e.max&&r>=e.min}var yc={},Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});function cx(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSON.parse(r)}catch{return r}}Pa.safeJsonParse=cx;function ux(r){return typeof r=="string"?r:JSON.stringify(r,(e,t)=>typeof t>"u"?null:t)}Pa.safeJsonStringify=ux;var ea={exports:{}},Xp;function lx(){return Xp||(Xp=1,function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ir<"u"&&ir.localStorage?ea.exports=ir.localStorage:typeof window<"u"&&window.localStorage?ea.exports=window.localStorage:ea.exports=new e}()),ea.exports}var fl={},ta={},Zp;function hx(){if(Zp)return ta;Zp=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.IKeyValueStorage=void 0;class r{}return ta.IKeyValueStorage=r,ta}var ra={},Qp;function fx(){if(Qp)return ra;Qp=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.parseEntry=void 0;const r=Pa;function e(t){var i;return[t[0],r.safeJsonParse((i=t[1])!==null&&i!==void 0?i:"")]}return ra.parseEntry=e,ra}var e0;function dx(){return e0||(e0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(hx(),r),e.__exportStar(fx(),r)}(fl)),fl}Object.defineProperty(yc,"__esModule",{value:!0});yc.KeyValueStorage=void 0;const ys=nn,t0=Pa,px=ys.__importDefault(lx()),gx=dx();class sy{constructor(){this.localStorage=px.default}getKeys(){return ys.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ys.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(gx.parseEntry)})}getItem(e){return ys.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return t0.safeJsonParse(t)})}setItem(e,t){return ys.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,t0.safeJsonStringify(t))})}removeItem(e){return ys.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}yc.KeyValueStorage=sy;var yx=yc.default=sy,Is={},na={},dl={},ia={};let Hi=class{};const mx=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Hi},Symbol.toStringTag,{value:"Module"})),bx=dg(mx);var r0;function vx(){if(r0)return ia;r0=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.IHeartBeat=void 0;const r=bx;class e extends r.IEvents{constructor(i){super()}}return ia.IHeartBeat=e,ia}var n0;function ay(){return n0||(n0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),nn.__exportStar(vx(),r)}(dl)),dl}var pl={},Ni={},i0;function wx(){if(i0)return Ni;i0=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.HEARTBEAT_EVENTS=Ni.HEARTBEAT_INTERVAL=void 0;const r=Pe;return Ni.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,Ni.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Ni}var s0;function oy(){return s0||(s0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),nn.__exportStar(wx(),r)}(pl)),pl}var a0;function _x(){if(a0)return na;a0=1,Object.defineProperty(na,"__esModule",{value:!0}),na.HeartBeat=void 0;const r=nn,e=zr,t=Pe,i=ay(),s=oy();class o extends i.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=s.HEARTBEAT_INTERVAL,this.interval=(l==null?void 0:l.interval)||s.HEARTBEAT_INTERVAL}static init(l){return r.__awaiter(this,void 0,void 0,function*(){const f=new o(l);return yield f.init(),f})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,f){this.events.on(l,f)}once(l,f){this.events.once(l,f)}off(l,f){this.events.off(l,f)}removeListener(l,f){this.events.removeListener(l,f)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(s.HEARTBEAT_EVENTS.pulse)}}return na.HeartBeat=o,na}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(_x(),r),e.__exportStar(ay(),r),e.__exportStar(oy(),r)})(Is);var ut={},gl,o0;function Ex(){if(o0)return gl;o0=1;function r(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}gl=e;function e(t,i,s){var o=s&&s.stringify||r,u=1;if(typeof t=="object"&&t!==null){var l=i.length+u;if(l===1)return t;var f=new Array(l);f[0]=o(t);for(var g=1;g<l;g++)f[g]=o(i[g]);return f.join(" ")}if(typeof t!="string")return t;var b=i.length;if(b===0)return t;for(var S="",y=1-u,w=-1,m=t&&t.length||0,I=0;I<m;){if(t.charCodeAt(I)===37&&I+1<m){switch(w=w>-1?w:0,t.charCodeAt(I+1)){case 100:case 102:if(y>=b||i[y]==null)break;w<I&&(S+=t.slice(w,I)),S+=Number(i[y]),w=I+2,I++;break;case 105:if(y>=b||i[y]==null)break;w<I&&(S+=t.slice(w,I)),S+=Math.floor(Number(i[y])),w=I+2,I++;break;case 79:case 111:case 106:if(y>=b||i[y]===void 0)break;w<I&&(S+=t.slice(w,I));var A=typeof i[y];if(A==="string"){S+="'"+i[y]+"'",w=I+2,I++;break}if(A==="function"){S+=i[y].name||"<anonymous>",w=I+2,I++;break}S+=o(i[y]),w=I+2,I++;break;case 115:if(y>=b)break;w<I&&(S+=t.slice(w,I)),S+=String(i[y]),w=I+2,I++;break;case 37:w<I&&(S+=t.slice(w,I)),S+="%",w=I+2,I++,y--;break}++y}++I}return w===-1?t:(w<m&&(S+=t.slice(w)),S)}return gl}var yl,c0;function xx(){if(c0)return yl;c0=1;const r=Ex();yl=s;const e=T().console||{},t={mapHttpRequest:m,mapHttpResponse:m,wrapRequestSerializer:I,wrapResponseSerializer:I,wrapErrorSerializer:I,req:m,res:m,err:y};function i(x,h){return Array.isArray(x)?x.filter(function(K){return K!=="!stdSerializers.err"}):x===!0?Object.keys(h):!1}function s(x){x=x||{},x.browser=x.browser||{};const h=x.browser.transmit;if(h&&typeof h.send!="function")throw Error("pino: transmit option must have a send function");const E=x.browser.write||e;x.browser.write&&(x.browser.asObject=!0);const K=x.serializers||{},$=i(x.browser.serialize,K);let B=x.browser.serialize;Array.isArray(x.browser.serialize)&&x.browser.serialize.indexOf("!stdSerializers.err")>-1&&(B=!1);const G=["error","fatal","warn","info","debug","trace"];typeof E=="function"&&(E.error=E.fatal=E.warn=E.info=E.debug=E.trace=E),x.enabled===!1&&(x.level="silent");const W=x.level||"info",v=Object.create(E);v.log||(v.log=A),Object.defineProperty(v,"levelVal",{get:H}),Object.defineProperty(v,"level",{get:j,set:V});const D={transmit:h,serialize:$,asObject:x.browser.asObject,levels:G,timestamp:w(x)};v.levels=s.levels,v.level=W,v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=A,v.serializers=K,v._serialize=$,v._stdErrSerialize=B,v.child=k,h&&(v._logEvent=S());function H(){return this.level==="silent"?1/0:this.levels.values[this.level]}function j(){return this._level}function V(ee){if(ee!=="silent"&&!this.levels.values[ee])throw Error("unknown level "+ee);this._level=ee,o(D,v,"error","log"),o(D,v,"fatal","error"),o(D,v,"warn","error"),o(D,v,"info","log"),o(D,v,"debug","log"),o(D,v,"trace","log")}function k(ee,re){if(!ee)throw new Error("missing bindings for child Pino");re=re||{},$&&ee.serializers&&(re.serializers=ee.serializers);const le=re.serializers;if($&&le){var ie=Object.assign({},K,le),De=x.browser.serialize===!0?Object.keys(ie):$;delete ee.serializers,f([ee],De,ie,this._stdErrSerialize)}function fe(Ie){this._childLevel=(Ie._childLevel|0)+1,this.error=g(Ie,ee,"error"),this.fatal=g(Ie,ee,"fatal"),this.warn=g(Ie,ee,"warn"),this.info=g(Ie,ee,"info"),this.debug=g(Ie,ee,"debug"),this.trace=g(Ie,ee,"trace"),ie&&(this.serializers=ie,this._serialize=De),h&&(this._logEvent=S([].concat(Ie._logEvent.bindings,ee)))}return fe.prototype=this,new fe(this)}return v}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:z,epochTime:F,unixTime:N,isoTime:P});function o(x,h,E,K){const $=Object.getPrototypeOf(h);h[E]=h.levelVal>h.levels.values[E]?A:$[E]?$[E]:e[E]||e[K]||A,u(x,h,E)}function u(x,h,E){!x.transmit&&h[E]===A||(h[E]=function(K){return function(){const B=x.timestamp(),G=new Array(arguments.length),W=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var v=0;v<G.length;v++)G[v]=arguments[v];if(x.serialize&&!x.asObject&&f(G,this._serialize,this.serializers,this._stdErrSerialize),x.asObject?K.call(W,l(this,E,G,B)):K.apply(W,G),x.transmit){const D=x.transmit.level||h.level,H=s.levels.values[D],j=s.levels.values[E];if(j<H)return;b(this,{ts:B,methodLevel:E,methodValue:j,transmitLevel:D,transmitValue:s.levels.values[x.transmit.level||h.level],send:x.transmit.send,val:h.levelVal},G)}}}(h[E]))}function l(x,h,E,K){x._serialize&&f(E,x._serialize,x.serializers,x._stdErrSerialize);const $=E.slice();let B=$[0];const G={};K&&(G.time=K),G.level=s.levels.values[h];let W=(x._childLevel|0)+1;if(W<1&&(W=1),B!==null&&typeof B=="object"){for(;W--&&typeof $[0]=="object";)Object.assign(G,$.shift());B=$.length?r($.shift(),$):void 0}else typeof B=="string"&&(B=r($.shift(),$));return B!==void 0&&(G.msg=B),G}function f(x,h,E,K){for(const $ in x)if(K&&x[$]instanceof Error)x[$]=s.stdSerializers.err(x[$]);else if(typeof x[$]=="object"&&!Array.isArray(x[$]))for(const B in x[$])h&&h.indexOf(B)>-1&&B in E&&(x[$][B]=E[B](x[$][B]))}function g(x,h,E){return function(){const K=new Array(1+arguments.length);K[0]=h;for(var $=1;$<K.length;$++)K[$]=arguments[$-1];return x[E].apply(this,K)}}function b(x,h,E){const K=h.send,$=h.ts,B=h.methodLevel,G=h.methodValue,W=h.val,v=x._logEvent.bindings;f(E,x._serialize||Object.keys(x.serializers),x.serializers,x._stdErrSerialize===void 0?!0:x._stdErrSerialize),x._logEvent.ts=$,x._logEvent.messages=E.filter(function(D){return v.indexOf(D)===-1}),x._logEvent.level.label=B,x._logEvent.level.value=G,K(B,x._logEvent,W),x._logEvent=S(v)}function S(x){return{ts:0,messages:[],bindings:x||[],level:{label:"",value:0}}}function y(x){const h={type:x.constructor.name,msg:x.message,stack:x.stack};for(const E in x)h[E]===void 0&&(h[E]=x[E]);return h}function w(x){return typeof x.timestamp=="function"?x.timestamp:x.timestamp===!1?z:F}function m(){return{}}function I(x){return x}function A(){}function z(){return!1}function F(){return Date.now()}function N(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function T(){function x(h){return typeof h<"u"&&h}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return x(self)||x(window)||x(this)||{}}}return yl}var Ri={},u0;function cy(){return u0||(u0=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.PINO_CUSTOM_CONTEXT_KEY=Ri.PINO_LOGGER_DEFAULTS=void 0,Ri.PINO_LOGGER_DEFAULTS={level:"info"},Ri.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Ri}var wr={},l0;function Sx(){if(l0)return wr;l0=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.generateChildLogger=wr.formatChildLoggerContext=wr.getLoggerContext=wr.setBrowserLoggerContext=wr.getBrowserLoggerContext=wr.getDefaultLoggerOptions=void 0;const r=cy();function e(l){return Object.assign(Object.assign({},l),{level:(l==null?void 0:l.level)||r.PINO_LOGGER_DEFAULTS.level})}wr.getDefaultLoggerOptions=e;function t(l,f=r.PINO_CUSTOM_CONTEXT_KEY){return l[f]||""}wr.getBrowserLoggerContext=t;function i(l,f,g=r.PINO_CUSTOM_CONTEXT_KEY){return l[g]=f,l}wr.setBrowserLoggerContext=i;function s(l,f=r.PINO_CUSTOM_CONTEXT_KEY){let g="";return typeof l.bindings>"u"?g=t(l,f):g=l.bindings().context||"",g}wr.getLoggerContext=s;function o(l,f,g=r.PINO_CUSTOM_CONTEXT_KEY){const b=s(l,g);return b.trim()?`${b}/${f}`:f}wr.formatChildLoggerContext=o;function u(l,f,g=r.PINO_CUSTOM_CONTEXT_KEY){const b=o(l,f,g),S=l.child({context:b});return i(S,b,g)}return wr.generateChildLogger=u,wr}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=nn,t=e.__importDefault(xx());Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(cy(),r),e.__exportStar(Sx(),r)})(ut);class Dx extends Hi{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Ix extends Hi{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Ox{constructor(e,t){this.logger=e,this.core=t}}let Px=class extends Hi{constructor(e,t){super(),this.relayer=e,this.logger=t}},Ax=class extends Hi{constructor(e){super()}},Cx=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}};class Tx extends Hi{constructor(e,t){super(),this.relayer=e,this.logger=t}}class $x extends Hi{constructor(e,t){super(),this.core=e,this.logger=t}}let Nx=class{constructor(e,t){this.projectId=e,this.logger=t}},Rx=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class Fx{constructor(e){this.client=e}}const Mx=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Lx=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Rh(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return Lx(r)}catch{return r}}function ya(r){return typeof r=="string"?r:Mx(r)||""}var Fh={},uy={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Ye,t=Hr;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},l.prototype.update=function(f,g){if(g===void 0&&(g=f.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var b=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=f[b++],g--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(b=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,f,b,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=f[b++],g--;return this},l.prototype.finish=function(f){if(!this._finished){var g=this._bytesHashed,b=this._bufferLength,S=g/536870912|0,y=g<<3,w=g%128<112?128:256;this._buffer[b]=128;for(var m=b+1;m<w-8;m++)this._buffer[m]=0;e.writeUint32BE(S,this._buffer,w-8),e.writeUint32BE(y,this._buffer,w-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var m=0;m<this.digestLength/8;m++)e.writeUint32BE(this._stateHi[m],f,m*8),e.writeUint32BE(this._stateLo[m],f,m*8+4);return this},l.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(f){return this._stateHi.set(f.stateHi),this._stateLo.set(f.stateLo),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(f){t.wipe(f.stateHi),t.wipe(f.stateLo),f.buffer&&t.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},l}();r.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(l,f,g,b,S,y,w){for(var m=g[0],I=g[1],A=g[2],z=g[3],F=g[4],N=g[5],P=g[6],T=g[7],x=b[0],h=b[1],E=b[2],K=b[3],$=b[4],B=b[5],G=b[6],W=b[7],v,D,H,j,V,k,ee,re;w>=128;){for(var le=0;le<16;le++){var ie=8*le+y;l[le]=e.readUint32BE(S,ie),f[le]=e.readUint32BE(S,ie+4)}for(var le=0;le<80;le++){var De=m,fe=I,Ie=A,Q=z,Z=F,q=N,p=P,L=T,ue=x,me=h,Te=E,Je=K,Xe=$,ke=B,pt=G,_t=W;if(v=T,D=W,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=(F>>>14|$<<32-14)^(F>>>18|$<<32-18)^($>>>41-32|F<<32-(41-32)),D=($>>>14|F<<32-14)^($>>>18|F<<32-18)^(F>>>41-32|$<<32-(41-32)),V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,v=F&N^~F&P,D=$&B^~$&G,V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,v=s[le*2],D=s[le*2+1],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,v=l[le%16],D=f[le%16],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,H=ee&65535|re<<16,j=V&65535|k<<16,v=H,D=j,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=(m>>>28|x<<32-28)^(x>>>34-32|m<<32-(34-32))^(x>>>39-32|m<<32-(39-32)),D=(x>>>28|m<<32-28)^(m>>>34-32|x<<32-(34-32))^(m>>>39-32|x<<32-(39-32)),V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,v=m&I^m&A^I&A,D=x&h^x&E^h&E,V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,L=ee&65535|re<<16,_t=V&65535|k<<16,v=Q,D=Je,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=H,D=j,V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,Q=ee&65535|re<<16,Je=V&65535|k<<16,I=De,A=fe,z=Ie,F=Q,N=Z,P=q,T=p,m=L,h=ue,E=me,K=Te,$=Je,B=Xe,G=ke,W=pt,x=_t,le%16===15)for(var ie=0;ie<16;ie++)v=l[ie],D=f[ie],V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=l[(ie+9)%16],D=f[(ie+9)%16],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,H=l[(ie+1)%16],j=f[(ie+1)%16],v=(H>>>1|j<<32-1)^(H>>>8|j<<32-8)^H>>>7,D=(j>>>1|H<<32-1)^(j>>>8|H<<32-8)^(j>>>7|H<<32-7),V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,H=l[(ie+14)%16],j=f[(ie+14)%16],v=(H>>>19|j<<32-19)^(j>>>61-32|H<<32-(61-32))^H>>>6,D=(j>>>19|H<<32-19)^(H>>>61-32|j<<32-(61-32))^(j>>>6|H<<32-6),V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,l[ie]=ee&65535|re<<16,f[ie]=V&65535|k<<16}v=m,D=x,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[0],D=b[0],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[0]=m=ee&65535|re<<16,b[0]=x=V&65535|k<<16,v=I,D=h,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[1],D=b[1],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[1]=I=ee&65535|re<<16,b[1]=h=V&65535|k<<16,v=A,D=E,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[2],D=b[2],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[2]=A=ee&65535|re<<16,b[2]=E=V&65535|k<<16,v=z,D=K,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[3],D=b[3],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[3]=z=ee&65535|re<<16,b[3]=K=V&65535|k<<16,v=F,D=$,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[4],D=b[4],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[4]=F=ee&65535|re<<16,b[4]=$=V&65535|k<<16,v=N,D=B,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[5],D=b[5],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[5]=N=ee&65535|re<<16,b[5]=B=V&65535|k<<16,v=P,D=G,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[6],D=b[6],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[6]=P=ee&65535|re<<16,b[6]=G=V&65535|k<<16,v=T,D=W,V=D&65535,k=D>>>16,ee=v&65535,re=v>>>16,v=g[7],D=b[7],V+=D&65535,k+=D>>>16,ee+=v&65535,re+=v>>>16,k+=V>>>16,ee+=k>>>16,re+=ee>>>16,g[7]=T=ee&65535|re<<16,b[7]=W=V&65535|k<<16,y+=128,w-=128}return y}function u(l){var f=new i;f.update(l);var g=f.digest();return f.clean(),g}r.hash=u})(uy);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=xs,t=uy,i=Hr;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function s(Q){const Z=new Float64Array(16);if(Q)for(let q=0;q<Q.length;q++)Z[q]=Q[q];return Z}const o=new Uint8Array(32);o[0]=9;const u=s(),l=s([1]),f=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(Q,Z){for(let q=0;q<16;q++)Q[q]=Z[q]|0}function m(Q){let Z=1;for(let q=0;q<16;q++){let p=Q[q]+Z+65535;Z=Math.floor(p/65536),Q[q]=p-Z*65536}Q[0]+=Z-1+37*(Z-1)}function I(Q,Z,q){const p=~(q-1);for(let L=0;L<16;L++){const ue=p&(Q[L]^Z[L]);Q[L]^=ue,Z[L]^=ue}}function A(Q,Z){const q=s(),p=s();for(let L=0;L<16;L++)p[L]=Z[L];m(p),m(p),m(p);for(let L=0;L<2;L++){q[0]=p[0]-65517;for(let me=1;me<15;me++)q[me]=p[me]-65535-(q[me-1]>>16&1),q[me-1]&=65535;q[15]=p[15]-32767-(q[14]>>16&1);const ue=q[15]>>16&1;q[14]&=65535,I(p,q,1-ue)}for(let L=0;L<16;L++)Q[2*L]=p[L]&255,Q[2*L+1]=p[L]>>8}function z(Q,Z){let q=0;for(let p=0;p<32;p++)q|=Q[p]^Z[p];return(1&q-1>>>8)-1}function F(Q,Z){const q=new Uint8Array(32),p=new Uint8Array(32);return A(q,Q),A(p,Z),z(q,p)}function N(Q){const Z=new Uint8Array(32);return A(Z,Q),Z[0]&1}function P(Q,Z){for(let q=0;q<16;q++)Q[q]=Z[2*q]+(Z[2*q+1]<<8);Q[15]&=32767}function T(Q,Z,q){for(let p=0;p<16;p++)Q[p]=Z[p]+q[p]}function x(Q,Z,q){for(let p=0;p<16;p++)Q[p]=Z[p]-q[p]}function h(Q,Z,q){let p,L,ue=0,me=0,Te=0,Je=0,Xe=0,ke=0,pt=0,_t=0,Ke=0,Re=0,$e=0,Le=0,qe=0,pe=0,ve=0,he=0,we=0,je=0,Ae=0,Ee=0,de=0,ze=0,tt=0,rt=0,pr=0,Ir=0,pn=0,gr=0,Dn=0,Gn=0,mi=0,Tt=q[0],It=q[1],$t=q[2],Nt=q[3],At=q[4],Ot=q[5],Wt=q[6],Gt=q[7],Rt=q[8],Yt=q[9],Ft=q[10],Ut=q[11],Mt=q[12],Et=q[13],Jt=q[14],Xt=q[15];p=Z[0],ue+=p*Tt,me+=p*It,Te+=p*$t,Je+=p*Nt,Xe+=p*At,ke+=p*Ot,pt+=p*Wt,_t+=p*Gt,Ke+=p*Rt,Re+=p*Yt,$e+=p*Ft,Le+=p*Ut,qe+=p*Mt,pe+=p*Et,ve+=p*Jt,he+=p*Xt,p=Z[1],me+=p*Tt,Te+=p*It,Je+=p*$t,Xe+=p*Nt,ke+=p*At,pt+=p*Ot,_t+=p*Wt,Ke+=p*Gt,Re+=p*Rt,$e+=p*Yt,Le+=p*Ft,qe+=p*Ut,pe+=p*Mt,ve+=p*Et,he+=p*Jt,we+=p*Xt,p=Z[2],Te+=p*Tt,Je+=p*It,Xe+=p*$t,ke+=p*Nt,pt+=p*At,_t+=p*Ot,Ke+=p*Wt,Re+=p*Gt,$e+=p*Rt,Le+=p*Yt,qe+=p*Ft,pe+=p*Ut,ve+=p*Mt,he+=p*Et,we+=p*Jt,je+=p*Xt,p=Z[3],Je+=p*Tt,Xe+=p*It,ke+=p*$t,pt+=p*Nt,_t+=p*At,Ke+=p*Ot,Re+=p*Wt,$e+=p*Gt,Le+=p*Rt,qe+=p*Yt,pe+=p*Ft,ve+=p*Ut,he+=p*Mt,we+=p*Et,je+=p*Jt,Ae+=p*Xt,p=Z[4],Xe+=p*Tt,ke+=p*It,pt+=p*$t,_t+=p*Nt,Ke+=p*At,Re+=p*Ot,$e+=p*Wt,Le+=p*Gt,qe+=p*Rt,pe+=p*Yt,ve+=p*Ft,he+=p*Ut,we+=p*Mt,je+=p*Et,Ae+=p*Jt,Ee+=p*Xt,p=Z[5],ke+=p*Tt,pt+=p*It,_t+=p*$t,Ke+=p*Nt,Re+=p*At,$e+=p*Ot,Le+=p*Wt,qe+=p*Gt,pe+=p*Rt,ve+=p*Yt,he+=p*Ft,we+=p*Ut,je+=p*Mt,Ae+=p*Et,Ee+=p*Jt,de+=p*Xt,p=Z[6],pt+=p*Tt,_t+=p*It,Ke+=p*$t,Re+=p*Nt,$e+=p*At,Le+=p*Ot,qe+=p*Wt,pe+=p*Gt,ve+=p*Rt,he+=p*Yt,we+=p*Ft,je+=p*Ut,Ae+=p*Mt,Ee+=p*Et,de+=p*Jt,ze+=p*Xt,p=Z[7],_t+=p*Tt,Ke+=p*It,Re+=p*$t,$e+=p*Nt,Le+=p*At,qe+=p*Ot,pe+=p*Wt,ve+=p*Gt,he+=p*Rt,we+=p*Yt,je+=p*Ft,Ae+=p*Ut,Ee+=p*Mt,de+=p*Et,ze+=p*Jt,tt+=p*Xt,p=Z[8],Ke+=p*Tt,Re+=p*It,$e+=p*$t,Le+=p*Nt,qe+=p*At,pe+=p*Ot,ve+=p*Wt,he+=p*Gt,we+=p*Rt,je+=p*Yt,Ae+=p*Ft,Ee+=p*Ut,de+=p*Mt,ze+=p*Et,tt+=p*Jt,rt+=p*Xt,p=Z[9],Re+=p*Tt,$e+=p*It,Le+=p*$t,qe+=p*Nt,pe+=p*At,ve+=p*Ot,he+=p*Wt,we+=p*Gt,je+=p*Rt,Ae+=p*Yt,Ee+=p*Ft,de+=p*Ut,ze+=p*Mt,tt+=p*Et,rt+=p*Jt,pr+=p*Xt,p=Z[10],$e+=p*Tt,Le+=p*It,qe+=p*$t,pe+=p*Nt,ve+=p*At,he+=p*Ot,we+=p*Wt,je+=p*Gt,Ae+=p*Rt,Ee+=p*Yt,de+=p*Ft,ze+=p*Ut,tt+=p*Mt,rt+=p*Et,pr+=p*Jt,Ir+=p*Xt,p=Z[11],Le+=p*Tt,qe+=p*It,pe+=p*$t,ve+=p*Nt,he+=p*At,we+=p*Ot,je+=p*Wt,Ae+=p*Gt,Ee+=p*Rt,de+=p*Yt,ze+=p*Ft,tt+=p*Ut,rt+=p*Mt,pr+=p*Et,Ir+=p*Jt,pn+=p*Xt,p=Z[12],qe+=p*Tt,pe+=p*It,ve+=p*$t,he+=p*Nt,we+=p*At,je+=p*Ot,Ae+=p*Wt,Ee+=p*Gt,de+=p*Rt,ze+=p*Yt,tt+=p*Ft,rt+=p*Ut,pr+=p*Mt,Ir+=p*Et,pn+=p*Jt,gr+=p*Xt,p=Z[13],pe+=p*Tt,ve+=p*It,he+=p*$t,we+=p*Nt,je+=p*At,Ae+=p*Ot,Ee+=p*Wt,de+=p*Gt,ze+=p*Rt,tt+=p*Yt,rt+=p*Ft,pr+=p*Ut,Ir+=p*Mt,pn+=p*Et,gr+=p*Jt,Dn+=p*Xt,p=Z[14],ve+=p*Tt,he+=p*It,we+=p*$t,je+=p*Nt,Ae+=p*At,Ee+=p*Ot,de+=p*Wt,ze+=p*Gt,tt+=p*Rt,rt+=p*Yt,pr+=p*Ft,Ir+=p*Ut,pn+=p*Mt,gr+=p*Et,Dn+=p*Jt,Gn+=p*Xt,p=Z[15],he+=p*Tt,we+=p*It,je+=p*$t,Ae+=p*Nt,Ee+=p*At,de+=p*Ot,ze+=p*Wt,tt+=p*Gt,rt+=p*Rt,pr+=p*Yt,Ir+=p*Ft,pn+=p*Ut,gr+=p*Mt,Dn+=p*Et,Gn+=p*Jt,mi+=p*Xt,ue+=38*we,me+=38*je,Te+=38*Ae,Je+=38*Ee,Xe+=38*de,ke+=38*ze,pt+=38*tt,_t+=38*rt,Ke+=38*pr,Re+=38*Ir,$e+=38*pn,Le+=38*gr,qe+=38*Dn,pe+=38*Gn,ve+=38*mi,L=1,p=ue+L+65535,L=Math.floor(p/65536),ue=p-L*65536,p=me+L+65535,L=Math.floor(p/65536),me=p-L*65536,p=Te+L+65535,L=Math.floor(p/65536),Te=p-L*65536,p=Je+L+65535,L=Math.floor(p/65536),Je=p-L*65536,p=Xe+L+65535,L=Math.floor(p/65536),Xe=p-L*65536,p=ke+L+65535,L=Math.floor(p/65536),ke=p-L*65536,p=pt+L+65535,L=Math.floor(p/65536),pt=p-L*65536,p=_t+L+65535,L=Math.floor(p/65536),_t=p-L*65536,p=Ke+L+65535,L=Math.floor(p/65536),Ke=p-L*65536,p=Re+L+65535,L=Math.floor(p/65536),Re=p-L*65536,p=$e+L+65535,L=Math.floor(p/65536),$e=p-L*65536,p=Le+L+65535,L=Math.floor(p/65536),Le=p-L*65536,p=qe+L+65535,L=Math.floor(p/65536),qe=p-L*65536,p=pe+L+65535,L=Math.floor(p/65536),pe=p-L*65536,p=ve+L+65535,L=Math.floor(p/65536),ve=p-L*65536,p=he+L+65535,L=Math.floor(p/65536),he=p-L*65536,ue+=L-1+37*(L-1),L=1,p=ue+L+65535,L=Math.floor(p/65536),ue=p-L*65536,p=me+L+65535,L=Math.floor(p/65536),me=p-L*65536,p=Te+L+65535,L=Math.floor(p/65536),Te=p-L*65536,p=Je+L+65535,L=Math.floor(p/65536),Je=p-L*65536,p=Xe+L+65535,L=Math.floor(p/65536),Xe=p-L*65536,p=ke+L+65535,L=Math.floor(p/65536),ke=p-L*65536,p=pt+L+65535,L=Math.floor(p/65536),pt=p-L*65536,p=_t+L+65535,L=Math.floor(p/65536),_t=p-L*65536,p=Ke+L+65535,L=Math.floor(p/65536),Ke=p-L*65536,p=Re+L+65535,L=Math.floor(p/65536),Re=p-L*65536,p=$e+L+65535,L=Math.floor(p/65536),$e=p-L*65536,p=Le+L+65535,L=Math.floor(p/65536),Le=p-L*65536,p=qe+L+65535,L=Math.floor(p/65536),qe=p-L*65536,p=pe+L+65535,L=Math.floor(p/65536),pe=p-L*65536,p=ve+L+65535,L=Math.floor(p/65536),ve=p-L*65536,p=he+L+65535,L=Math.floor(p/65536),he=p-L*65536,ue+=L-1+37*(L-1),Q[0]=ue,Q[1]=me,Q[2]=Te,Q[3]=Je,Q[4]=Xe,Q[5]=ke,Q[6]=pt,Q[7]=_t,Q[8]=Ke,Q[9]=Re,Q[10]=$e,Q[11]=Le,Q[12]=qe,Q[13]=pe,Q[14]=ve,Q[15]=he}function E(Q,Z){h(Q,Z,Z)}function K(Q,Z){const q=s();let p;for(p=0;p<16;p++)q[p]=Z[p];for(p=253;p>=0;p--)E(q,q),p!==2&&p!==4&&h(q,q,Z);for(p=0;p<16;p++)Q[p]=q[p]}function $(Q,Z){const q=s();let p;for(p=0;p<16;p++)q[p]=Z[p];for(p=250;p>=0;p--)E(q,q),p!==1&&h(q,q,Z);for(p=0;p<16;p++)Q[p]=q[p]}function B(Q,Z){const q=s(),p=s(),L=s(),ue=s(),me=s(),Te=s(),Je=s(),Xe=s(),ke=s();x(q,Q[1],Q[0]),x(ke,Z[1],Z[0]),h(q,q,ke),T(p,Q[0],Q[1]),T(ke,Z[0],Z[1]),h(p,p,ke),h(L,Q[3],Z[3]),h(L,L,g),h(ue,Q[2],Z[2]),T(ue,ue,ue),x(me,p,q),x(Te,ue,L),T(Je,ue,L),T(Xe,p,q),h(Q[0],me,Te),h(Q[1],Xe,Je),h(Q[2],Je,Te),h(Q[3],me,Xe)}function G(Q,Z,q){for(let p=0;p<4;p++)I(Q[p],Z[p],q)}function W(Q,Z){const q=s(),p=s(),L=s();K(L,Z[2]),h(q,Z[0],L),h(p,Z[1],L),A(Q,p),Q[31]^=N(q)<<7}function v(Q,Z,q){w(Q[0],u),w(Q[1],l),w(Q[2],l),w(Q[3],u);for(let p=255;p>=0;--p){const L=q[p/8|0]>>(p&7)&1;G(Q,Z,L),B(Z,Q),B(Q,Q),G(Q,Z,L)}}function D(Q,Z){const q=[s(),s(),s(),s()];w(q[0],b),w(q[1],S),w(q[2],l),h(q[3],b,S),v(Q,q,Z)}function H(Q){if(Q.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const Z=(0,t.hash)(Q);Z[0]&=248,Z[31]&=127,Z[31]|=64;const q=new Uint8Array(32),p=[s(),s(),s(),s()];D(p,Z),W(q,p);const L=new Uint8Array(64);return L.set(Q),L.set(q,32),{publicKey:q,secretKey:L}}r.generateKeyPairFromSeed=H;function j(Q){const Z=(0,e.randomBytes)(32,Q),q=H(Z);return(0,i.wipe)(Z),q}r.generateKeyPair=j;function V(Q){if(Q.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Q.subarray(32))}r.extractPublicKeyFromSecretKey=V;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ee(Q,Z){let q,p,L,ue;for(p=63;p>=32;--p){for(q=0,L=p-32,ue=p-12;L<ue;++L)Z[L]+=q-16*Z[p]*k[L-(p-32)],q=Math.floor((Z[L]+128)/256),Z[L]-=q*256;Z[L]+=q,Z[p]=0}for(q=0,L=0;L<32;L++)Z[L]+=q-(Z[31]>>4)*k[L],q=Z[L]>>8,Z[L]&=255;for(L=0;L<32;L++)Z[L]-=q*k[L];for(p=0;p<32;p++)Z[p+1]+=Z[p]>>8,Q[p]=Z[p]&255}function re(Q){const Z=new Float64Array(64);for(let q=0;q<64;q++)Z[q]=Q[q];for(let q=0;q<64;q++)Q[q]=0;ee(Q,Z)}function le(Q,Z){const q=new Float64Array(64),p=[s(),s(),s(),s()],L=(0,t.hash)(Q.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const ue=new Uint8Array(64);ue.set(L.subarray(32),32);const me=new t.SHA512;me.update(ue.subarray(32)),me.update(Z);const Te=me.digest();me.clean(),re(Te),D(p,Te),W(ue,p),me.reset(),me.update(ue.subarray(0,32)),me.update(Q.subarray(32)),me.update(Z);const Je=me.digest();re(Je);for(let Xe=0;Xe<32;Xe++)q[Xe]=Te[Xe];for(let Xe=0;Xe<32;Xe++)for(let ke=0;ke<32;ke++)q[Xe+ke]+=Je[Xe]*L[ke];return ee(ue.subarray(32),q),ue}r.sign=le;function ie(Q,Z){const q=s(),p=s(),L=s(),ue=s(),me=s(),Te=s(),Je=s();return w(Q[2],l),P(Q[1],Z),E(L,Q[1]),h(ue,L,f),x(L,L,Q[2]),T(ue,Q[2],ue),E(me,ue),E(Te,me),h(Je,Te,me),h(q,Je,L),h(q,q,ue),$(q,q),h(q,q,L),h(q,q,ue),h(q,q,ue),h(Q[0],q,ue),E(p,Q[0]),h(p,p,ue),F(p,L)&&h(Q[0],Q[0],y),E(p,Q[0]),h(p,p,ue),F(p,L)?-1:(N(Q[0])===Z[31]>>7&&x(Q[0],u,Q[0]),h(Q[3],Q[0],Q[1]),0)}function De(Q,Z,q){const p=new Uint8Array(32),L=[s(),s(),s(),s()],ue=[s(),s(),s(),s()];if(q.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(ie(ue,Q))return!1;const me=new t.SHA512;me.update(q.subarray(0,32)),me.update(Q),me.update(Z);const Te=me.digest();return re(Te),v(L,ue,Te),D(ue,q.subarray(32)),B(L,ue),W(p,L),!z(q,p)}r.verify=De;function fe(Q){let Z=[s(),s(),s(),s()];if(ie(Z,Q))throw new Error("Ed25519: invalid public key");let q=s(),p=s(),L=Z[1];T(q,l,L),x(p,l,L),K(p,p),h(q,q,p);let ue=new Uint8Array(32);return A(ue,q),ue}r.convertPublicKeyToX25519=fe;function Ie(Q){const Z=(0,t.hash)(Q.subarray(0,32));Z[0]&=248,Z[31]&=127,Z[31]|=64;const q=new Uint8Array(Z.subarray(0,32));return(0,i.wipe)(Z),q}r.convertSecretKeyToX25519=Ie})(Fh);const jx="EdDSA",kx="JWT",ly=".",hy="base64url",Ux="utf8",Bx="utf8",qx=":",zx="did",Hx="key",h0="base58btc",Kx="z",Vx="K36",Wx=32;function tc(r){return Dr(Nr(ya(r),Ux),hy)}function fy(r){const e=Nr(Vx,h0),t=Kx+Dr(Ul([e,r]),h0);return[zx,Hx,t].join(qx)}function Gx(r){return Dr(r,hy)}function Yx(r){return Nr([tc(r.header),tc(r.payload)].join(ly),Bx)}function Jx(r){return[tc(r.header),tc(r.payload),Gx(r.signature)].join(ly)}function f0(r=xs.randomBytes(Wx)){return Fh.generateKeyPairFromSeed(r)}async function Xx(r,e,t,i,s=Pe.fromMiliseconds(Date.now())){const o={alg:jx,typ:kx},u=fy(i.publicKey),l=s+t,f={iss:u,sub:r,aud:e,iat:s,exp:l},g=Yx({header:o,payload:f}),b=Fh.sign(i.secretKey,g);return Jx({header:o,payload:f,signature:b})}const Zx="PARSE_ERROR",Qx="INVALID_REQUEST",eS="METHOD_NOT_FOUND",tS="INVALID_PARAMS",dy="INTERNAL_ERROR",Mh="SERVER_ERROR",rS=[-32700,-32600,-32601,-32602,-32603],da={[Zx]:{code:-32700,message:"Parse error"},[Qx]:{code:-32600,message:"Invalid Request"},[eS]:{code:-32601,message:"Method not found"},[tS]:{code:-32602,message:"Invalid params"},[dy]:{code:-32603,message:"Internal error"},[Mh]:{code:-32e3,message:"Server error"}},py=Mh;function nS(r){return rS.includes(r)}function d0(r){return Object.keys(da).includes(r)?da[r]:da[py]}function iS(r){const e=Object.values(da).find(t=>t.code===r);return e||da[py]}function gy(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var yy={},Ln={},p0;function sS(){if(p0)return Ln;p0=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.isBrowserCryptoAvailable=Ln.getSubtleCrypto=Ln.getBrowerCrypto=void 0;function r(){return(ir==null?void 0:ir.crypto)||(ir==null?void 0:ir.msCrypto)||{}}Ln.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}Ln.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return Ln.isBrowserCryptoAvailable=t,Ln}var jn={},g0;function aS(){if(g0)return jn;g0=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.isBrowser=jn.isNode=jn.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}jn.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}jn.isNode=e;function t(){return!r()&&!e()}return jn.isBrowser=t,jn}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(sS(),r),e.__exportStar(aS(),r)})(yy);function my(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function Lh(r=6){return BigInt(my(r))}function mc(r,e,t){return{id:t||my(),jsonrpc:"2.0",method:r,params:e}}function jh(r,e){return{id:r,jsonrpc:"2.0",result:e}}function bc(r,e,t){return{id:r,jsonrpc:"2.0",error:oS(e,t)}}function oS(r,e){return typeof r>"u"?d0(dy):(typeof r=="string"&&(r=Object.assign(Object.assign({},d0(Mh)),{message:r})),typeof e<"u"&&(r.data=e),nS(r.code)&&(r=iS(r.code)),r)}class cS{}class uS extends cS{constructor(){super()}}class lS extends uS{constructor(e){super()}}const hS="^https?:",fS="^wss?:";function dS(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function by(r,e){const t=dS(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function y0(r){return by(r,hS)}function m0(r){return by(r,fS)}function pS(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function vy(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function kh(r){return vy(r)&&"method"in r}function vc(r){return vy(r)&&(kn(r)||fn(r))}function kn(r){return"result"in r}function fn(r){return"error"in r}class fi extends lS{constructor(e){super(e),this.events=new zr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(mc(e.method,e.params||[],e.id||Lh().toString()),t)}async requestStrict(e,t){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(o){s(o)}this.events.on(`${e.id}`,o=>{fn(o)?s(o.error):i(o.result)});try{await this.connection.send(e,t)}catch(o){s(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),vc(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const gS=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),yS=()=>typeof window<"u",b0=r=>r.split("?")[0],v0=10,mS=gS();class bS{constructor(e){if(this.url=e,this.events=new zr.EventEmitter,this.registering=!1,!m0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ya(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!m0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const s=yy.isReactNative()?void 0:{rejectUnauthorized:!pS(e)},o=new mS(e,[],s);yS()?o.onerror=u=>{const l=u;i(this.emitError(l.error))}:o.on("error",u=>{i(this.emitError(u))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Rh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),o=bc(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return gy(e,b0(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>v0&&this.events.setMaxListeners(v0)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${b0(this.url)}`));return this.events.emit("register_error",t),t}}var rc={exports:{}};rc.exports;(function(r,e){var t=200,i="__lodash_hash_undefined__",s=1,o=2,u=9007199254740991,l="[object Arguments]",f="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",S="[object Date]",y="[object Error]",w="[object Function]",m="[object GeneratorFunction]",I="[object Map]",A="[object Number]",z="[object Null]",F="[object Object]",N="[object Promise]",P="[object Proxy]",T="[object RegExp]",x="[object Set]",h="[object String]",E="[object Symbol]",K="[object Undefined]",$="[object WeakMap]",B="[object ArrayBuffer]",G="[object DataView]",W="[object Float32Array]",v="[object Float64Array]",D="[object Int8Array]",H="[object Int16Array]",j="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",ee="[object Uint16Array]",re="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,De=/^(?:0|[1-9]\d*)$/,fe={};fe[W]=fe[v]=fe[D]=fe[H]=fe[j]=fe[V]=fe[k]=fe[ee]=fe[re]=!0,fe[l]=fe[f]=fe[B]=fe[b]=fe[G]=fe[S]=fe[y]=fe[w]=fe[I]=fe[A]=fe[F]=fe[T]=fe[x]=fe[h]=fe[$]=!1;var Ie=typeof ir=="object"&&ir&&ir.Object===Object&&ir,Q=typeof self=="object"&&self&&self.Object===Object&&self,Z=Ie||Q||Function("return this")(),q=e&&!e.nodeType&&e,p=q&&!0&&r&&!r.nodeType&&r,L=p&&p.exports===q,ue=L&&Ie.process,me=function(){try{return ue&&ue.binding&&ue.binding("util")}catch{}}(),Te=me&&me.isTypedArray;function Je(R,Y){for(var oe=-1,xe=R==null?0:R.length,bt=0,Ve=[];++oe<xe;){var St=R[oe];Y(St,oe,R)&&(Ve[bt++]=St)}return Ve}function Xe(R,Y){for(var oe=-1,xe=Y.length,bt=R.length;++oe<xe;)R[bt+oe]=Y[oe];return R}function ke(R,Y){for(var oe=-1,xe=R==null?0:R.length;++oe<xe;)if(Y(R[oe],oe,R))return!0;return!1}function pt(R,Y){for(var oe=-1,xe=Array(R);++oe<R;)xe[oe]=Y(oe);return xe}function _t(R){return function(Y){return R(Y)}}function Ke(R,Y){return R.has(Y)}function Re(R,Y){return R==null?void 0:R[Y]}function $e(R){var Y=-1,oe=Array(R.size);return R.forEach(function(xe,bt){oe[++Y]=[bt,xe]}),oe}function Le(R,Y){return function(oe){return R(Y(oe))}}function qe(R){var Y=-1,oe=Array(R.size);return R.forEach(function(xe){oe[++Y]=xe}),oe}var pe=Array.prototype,ve=Function.prototype,he=Object.prototype,we=Z["__core-js_shared__"],je=ve.toString,Ae=he.hasOwnProperty,Ee=function(){var R=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}(),de=he.toString,ze=RegExp("^"+je.call(Ae).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=L?Z.Buffer:void 0,rt=Z.Symbol,pr=Z.Uint8Array,Ir=he.propertyIsEnumerable,pn=pe.splice,gr=rt?rt.toStringTag:void 0,Dn=Object.getOwnPropertySymbols,Gn=tt?tt.isBuffer:void 0,mi=Le(Object.keys,Object),Tt=Mr(Z,"DataView"),It=Mr(Z,"Map"),$t=Mr(Z,"Promise"),Nt=Mr(Z,"Set"),At=Mr(Z,"WeakMap"),Ot=Mr(Object,"create"),Wt=On(Tt),Gt=On(It),Rt=On($t),Yt=On(Nt),Ft=On(At),Ut=rt?rt.prototype:void 0,Mt=Ut?Ut.valueOf:void 0;function Et(R){var Y=-1,oe=R==null?0:R.length;for(this.clear();++Y<oe;){var xe=R[Y];this.set(xe[0],xe[1])}}function Jt(){this.__data__=Ot?Ot(null):{},this.size=0}function Xt(R){var Y=this.has(R)&&delete this.__data__[R];return this.size-=Y?1:0,Y}function Mc(R){var Y=this.__data__;if(Ot){var oe=Y[R];return oe===i?void 0:oe}return Ae.call(Y,R)?Y[R]:void 0}function Lc(R){var Y=this.__data__;return Ot?Y[R]!==void 0:Ae.call(Y,R)}function jc(R,Y){var oe=this.__data__;return this.size+=this.has(R)?0:1,oe[R]=Ot&&Y===void 0?i:Y,this}Et.prototype.clear=Jt,Et.prototype.delete=Xt,Et.prototype.get=Mc,Et.prototype.has=Lc,Et.prototype.set=jc;function Kr(R){var Y=-1,oe=R==null?0:R.length;for(this.clear();++Y<oe;){var xe=R[Y];this.set(xe[0],xe[1])}}function kc(){this.__data__=[],this.size=0}function Uc(R){var Y=this.__data__,oe=bi(Y,R);if(oe<0)return!1;var xe=Y.length-1;return oe==xe?Y.pop():pn.call(Y,oe,1),--this.size,!0}function Bc(R){var Y=this.__data__,oe=bi(Y,R);return oe<0?void 0:Y[oe][1]}function qc(R){return bi(this.__data__,R)>-1}function zc(R,Y){var oe=this.__data__,xe=bi(oe,R);return xe<0?(++this.size,oe.push([R,Y])):oe[xe][1]=Y,this}Kr.prototype.clear=kc,Kr.prototype.delete=Uc,Kr.prototype.get=Bc,Kr.prototype.has=qc,Kr.prototype.set=zc;function In(R){var Y=-1,oe=R==null?0:R.length;for(this.clear();++Y<oe;){var xe=R[Y];this.set(xe[0],xe[1])}}function Wi(){this.size=0,this.__data__={hash:new Et,map:new(It||Kr),string:new Et}}function Hc(R){var Y=Yn(this,R).delete(R);return this.size-=Y?1:0,Y}function Gi(R){return Yn(this,R).get(R)}function Kc(R){return Yn(this,R).has(R)}function Vc(R,Y){var oe=Yn(this,R),xe=oe.size;return oe.set(R,Y),this.size+=oe.size==xe?0:1,this}In.prototype.clear=Wi,In.prototype.delete=Hc,In.prototype.get=Gi,In.prototype.has=Kc,In.prototype.set=Vc;function Yi(R){var Y=-1,oe=R==null?0:R.length;for(this.__data__=new In;++Y<oe;)this.add(R[Y])}function Fa(R){return this.__data__.set(R,i),this}function Ma(R){return this.__data__.has(R)}Yi.prototype.add=Yi.prototype.push=Fa,Yi.prototype.has=Ma;function sn(R){var Y=this.__data__=new Kr(R);this.size=Y.size}function Wc(){this.__data__=new Kr,this.size=0}function Gc(R){var Y=this.__data__,oe=Y.delete(R);return this.size=Y.size,oe}function Yc(R){return this.__data__.get(R)}function Jc(R){return this.__data__.has(R)}function La(R,Y){var oe=this.__data__;if(oe instanceof Kr){var xe=oe.__data__;if(!It||xe.length<t-1)return xe.push([R,Y]),this.size=++oe.size,this;oe=this.__data__=new In(xe)}return oe.set(R,Y),this.size=oe.size,this}sn.prototype.clear=Wc,sn.prototype.delete=Gc,sn.prototype.get=Yc,sn.prototype.has=Jc,sn.prototype.set=La;function ja(R,Y){var oe=Zi(R),xe=!oe&&Ja(R),bt=!oe&&!xe&&Fs(R),Ve=!oe&&!xe&&!bt&&Qa(R),St=oe||xe||bt||Ve,Zt=St?pt(R.length,String):[],ot=Zt.length;for(var vt in R)(Y||Ae.call(R,vt))&&!(St&&(vt=="length"||bt&&(vt=="offset"||vt=="parent")||Ve&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Ka(vt,ot)))&&Zt.push(vt);return Zt}function bi(R,Y){for(var oe=R.length;oe--;)if(Ya(R[oe][0],Y))return oe;return-1}function Ns(R,Y,oe){var xe=Y(R);return Zi(R)?xe:Xe(xe,oe(R))}function vi(R){return R==null?R===void 0?K:z:gr&&gr in Object(R)?za(R):Qc(R)}function Rs(R){return _i(R)&&vi(R)==l}function wi(R,Y,oe,xe,bt){return R===Y?!0:R==null||Y==null||!_i(R)&&!_i(Y)?R!==R&&Y!==Y:ka(R,Y,oe,xe,wi,bt)}function ka(R,Y,oe,xe,bt,Ve){var St=Zi(R),Zt=Zi(Y),ot=St?f:gn(R),vt=Zt?f:gn(Y);ot=ot==l?F:ot,vt=vt==l?F:vt;var Bt=ot==F,Or=vt==F,Qt=ot==vt;if(Qt&&Fs(R)){if(!Fs(Y))return!1;St=!0,Bt=!1}if(Qt&&!Bt)return Ve||(Ve=new sn),St||Qa(R)?Ji(R,Y,oe,xe,bt,Ve):Zc(R,Y,ot,oe,xe,bt,Ve);if(!(oe&s)){var Dt=Bt&&Ae.call(R,"__wrapped__"),yr=Or&&Ae.call(Y,"__wrapped__");if(Dt||yr){var an=Dt?R.value():R,Vr=yr?Y.value():Y;return Ve||(Ve=new sn),bt(an,Vr,oe,xe,Ve)}}return Qt?(Ve||(Ve=new sn),qa(R,Y,oe,xe,bt,Ve)):!1}function Xc(R){if(!Za(R)||Wa(R))return!1;var Y=Qi(R)?ze:ie;return Y.test(On(R))}function Ua(R){return _i(R)&&Xa(R.length)&&!!fe[vi(R)]}function Ba(R){if(!Ga(R))return mi(R);var Y=[];for(var oe in Object(R))Ae.call(R,oe)&&oe!="constructor"&&Y.push(oe);return Y}function Ji(R,Y,oe,xe,bt,Ve){var St=oe&s,Zt=R.length,ot=Y.length;if(Zt!=ot&&!(St&&ot>Zt))return!1;var vt=Ve.get(R);if(vt&&Ve.get(Y))return vt==Y;var Bt=-1,Or=!0,Qt=oe&o?new Yi:void 0;for(Ve.set(R,Y),Ve.set(Y,R);++Bt<Zt;){var Dt=R[Bt],yr=Y[Bt];if(xe)var an=St?xe(yr,Dt,Bt,Y,R,Ve):xe(Dt,yr,Bt,R,Y,Ve);if(an!==void 0){if(an)continue;Or=!1;break}if(Qt){if(!ke(Y,function(Vr,yn){if(!Ke(Qt,yn)&&(Dt===Vr||bt(Dt,Vr,oe,xe,Ve)))return Qt.push(yn)})){Or=!1;break}}else if(!(Dt===yr||bt(Dt,yr,oe,xe,Ve))){Or=!1;break}}return Ve.delete(R),Ve.delete(Y),Or}function Zc(R,Y,oe,xe,bt,Ve,St){switch(oe){case G:if(R.byteLength!=Y.byteLength||R.byteOffset!=Y.byteOffset)return!1;R=R.buffer,Y=Y.buffer;case B:return!(R.byteLength!=Y.byteLength||!Ve(new pr(R),new pr(Y)));case b:case S:case A:return Ya(+R,+Y);case y:return R.name==Y.name&&R.message==Y.message;case T:case h:return R==Y+"";case I:var Zt=$e;case x:var ot=xe&s;if(Zt||(Zt=qe),R.size!=Y.size&&!ot)return!1;var vt=St.get(R);if(vt)return vt==Y;xe|=o,St.set(R,Y);var Bt=Ji(Zt(R),Zt(Y),xe,bt,Ve,St);return St.delete(R),Bt;case E:if(Mt)return Mt.call(R)==Mt.call(Y)}return!1}function qa(R,Y,oe,xe,bt,Ve){var St=oe&s,Zt=Xi(R),ot=Zt.length,vt=Xi(Y),Bt=vt.length;if(ot!=Bt&&!St)return!1;for(var Or=ot;Or--;){var Qt=Zt[Or];if(!(St?Qt in Y:Ae.call(Y,Qt)))return!1}var Dt=Ve.get(R);if(Dt&&Ve.get(Y))return Dt==Y;var yr=!0;Ve.set(R,Y),Ve.set(Y,R);for(var an=St;++Or<ot;){Qt=Zt[Or];var Vr=R[Qt],yn=Y[Qt];if(xe)var Ms=St?xe(yn,Vr,Qt,Y,R,Ve):xe(Vr,yn,Qt,R,Y,Ve);if(!(Ms===void 0?Vr===yn||bt(Vr,yn,oe,xe,Ve):Ms)){yr=!1;break}an||(an=Qt=="constructor")}if(yr&&!an){var Ei=R.constructor,sr=Y.constructor;Ei!=sr&&"constructor"in R&&"constructor"in Y&&!(typeof Ei=="function"&&Ei instanceof Ei&&typeof sr=="function"&&sr instanceof sr)&&(yr=!1)}return Ve.delete(R),Ve.delete(Y),yr}function Xi(R){return Ns(R,ru,Ha)}function Yn(R,Y){var oe=R.__data__;return Va(Y)?oe[typeof Y=="string"?"string":"hash"]:oe.map}function Mr(R,Y){var oe=Re(R,Y);return Xc(oe)?oe:void 0}function za(R){var Y=Ae.call(R,gr),oe=R[gr];try{R[gr]=void 0;var xe=!0}catch{}var bt=de.call(R);return xe&&(Y?R[gr]=oe:delete R[gr]),bt}var Ha=Dn?function(R){return R==null?[]:(R=Object(R),Je(Dn(R),function(Y){return Ir.call(R,Y)}))}:mt,gn=vi;(Tt&&gn(new Tt(new ArrayBuffer(1)))!=G||It&&gn(new It)!=I||$t&&gn($t.resolve())!=N||Nt&&gn(new Nt)!=x||At&&gn(new At)!=$)&&(gn=function(R){var Y=vi(R),oe=Y==F?R.constructor:void 0,xe=oe?On(oe):"";if(xe)switch(xe){case Wt:return G;case Gt:return I;case Rt:return N;case Yt:return x;case Ft:return $}return Y});function Ka(R,Y){return Y=Y??u,!!Y&&(typeof R=="number"||De.test(R))&&R>-1&&R%1==0&&R<Y}function Va(R){var Y=typeof R;return Y=="string"||Y=="number"||Y=="symbol"||Y=="boolean"?R!=="__proto__":R===null}function Wa(R){return!!Ee&&Ee in R}function Ga(R){var Y=R&&R.constructor,oe=typeof Y=="function"&&Y.prototype||he;return R===oe}function Qc(R){return de.call(R)}function On(R){if(R!=null){try{return je.call(R)}catch{}try{return R+""}catch{}}return""}function Ya(R,Y){return R===Y||R!==R&&Y!==Y}var Ja=Rs(function(){return arguments}())?Rs:function(R){return _i(R)&&Ae.call(R,"callee")&&!Ir.call(R,"callee")},Zi=Array.isArray;function eu(R){return R!=null&&Xa(R.length)&&!Qi(R)}var Fs=Gn||gt;function tu(R,Y){return wi(R,Y)}function Qi(R){if(!Za(R))return!1;var Y=vi(R);return Y==w||Y==m||Y==g||Y==P}function Xa(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=u}function Za(R){var Y=typeof R;return R!=null&&(Y=="object"||Y=="function")}function _i(R){return R!=null&&typeof R=="object"}var Qa=Te?_t(Te):Ua;function ru(R){return eu(R)?ja(R):Ba(R)}function mt(){return[]}function gt(){return!1}r.exports=tu})(rc,rc.exports);var vS=rc.exports;const wS=Sa(vS);function _S(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),u=o.charCodeAt(0);if(t[u]!==255)throw new TypeError(o+" is ambiguous");t[u]=s}var l=r.length,f=r.charAt(0),g=Math.log(l)/Math.log(256),b=Math.log(256)/Math.log(l);function S(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var I=0,A=0,z=0,F=m.length;z!==F&&m[z]===0;)z++,I++;for(var N=(F-z)*b+1>>>0,P=new Uint8Array(N);z!==F;){for(var T=m[z],x=0,h=N-1;(T!==0||x<A)&&h!==-1;h--,x++)T+=256*P[h]>>>0,P[h]=T%l>>>0,T=T/l>>>0;if(T!==0)throw new Error("Non-zero carry");A=x,z++}for(var E=N-A;E!==N&&P[E]===0;)E++;for(var K=f.repeat(I);E<N;++E)K+=r.charAt(P[E]);return K}function y(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var I=0;if(m[I]!==" "){for(var A=0,z=0;m[I]===f;)A++,I++;for(var F=(m.length-I)*g+1>>>0,N=new Uint8Array(F);m[I];){var P=t[m.charCodeAt(I)];if(P===255)return;for(var T=0,x=F-1;(P!==0||T<z)&&x!==-1;x--,T++)P+=l*N[x]>>>0,N[x]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");z=T,I++}if(m[I]!==" "){for(var h=F-z;h!==F&&N[h]===0;)h++;for(var E=new Uint8Array(A+(F-h)),K=A;h!==F;)E[K++]=N[h++];return E}}}function w(m){var I=y(m);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:y,decode:w}}var ES=_S,xS=ES;const wy=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},SS=r=>new TextEncoder().encode(r),DS=r=>new TextDecoder().decode(r);class IS{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class OS{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _y(this,e)}}class PS{constructor(e){this.decoders=e}or(e){return _y(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _y=(r,e)=>new PS({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class AS{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new IS(e,t,i),this.decoder=new OS(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const wc=({name:r,prefix:e,encode:t,decode:i})=>new AS(r,e,t,i),Aa=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=xS(t,e);return wc({prefix:r,name:e,encode:i,decode:o=>wy(s(o))})},CS=(r,e,t,i)=>{const s={};for(let b=0;b<e.length;++b)s[e[b]]=b;let o=r.length;for(;r[o-1]==="=";)--o;const u=new Uint8Array(o*t/8|0);let l=0,f=0,g=0;for(let b=0;b<o;++b){const S=s[r[b]];if(S===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<t|S,l+=t,l>=8&&(l-=8,u[g++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return u},TS=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let o="",u=0,l=0;for(let f=0;f<r.length;++f)for(l=l<<8|r[f],u+=8;u>t;)u-=t,o+=e[s&l>>u];if(u&&(o+=e[s&l<<t-u]),i)for(;o.length*t&7;)o+="=";return o},lr=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>wc({prefix:e,name:r,encode(s){return TS(s,i,t)},decode(s){return CS(s,i,t,r)}}),$S=wc({prefix:"\0",name:"identity",encode:r=>DS(r),decode:r=>SS(r)});var NS=Object.freeze({__proto__:null,identity:$S});const RS=lr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var FS=Object.freeze({__proto__:null,base2:RS});const MS=lr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var LS=Object.freeze({__proto__:null,base8:MS});const jS=Aa({prefix:"9",name:"base10",alphabet:"0123456789"});var kS=Object.freeze({__proto__:null,base10:jS});const US=lr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),BS=lr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qS=Object.freeze({__proto__:null,base16:US,base16upper:BS});const zS=lr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),HS=lr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),KS=lr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),VS=lr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),WS=lr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),GS=lr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),YS=lr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JS=lr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),XS=lr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ZS=Object.freeze({__proto__:null,base32:zS,base32upper:HS,base32pad:KS,base32padupper:VS,base32hex:WS,base32hexupper:GS,base32hexpad:YS,base32hexpadupper:JS,base32z:XS});const QS=Aa({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eD=Aa({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var tD=Object.freeze({__proto__:null,base36:QS,base36upper:eD});const rD=Aa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nD=Aa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var iD=Object.freeze({__proto__:null,base58btc:rD,base58flickr:nD});const sD=lr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aD=lr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),oD=lr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cD=lr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var uD=Object.freeze({__proto__:null,base64:sD,base64pad:aD,base64url:oD,base64urlpad:cD});const Ey=Array.from(""),lD=Ey.reduce((r,e,t)=>(r[t]=e,r),[]),hD=Ey.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function fD(r){return r.reduce((e,t)=>(e+=lD[t],e),"")}function dD(r){const e=[];for(const t of r){const i=hD[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const pD=wc({prefix:"",name:"base256emoji",encode:fD,decode:dD});var gD=Object.freeze({__proto__:null,base256emoji:pD}),yD=xy,w0=128,mD=127,bD=~mD,vD=Math.pow(2,31);function xy(r,e,t){e=e||[],t=t||0;for(var i=t;r>=vD;)e[t++]=r&255|w0,r/=128;for(;r&bD;)e[t++]=r&255|w0,r>>>=7;return e[t]=r|0,xy.bytes=t-i+1,e}var wD=Vl,_D=128,_0=127;function Vl(r,i){var t=0,i=i||0,s=0,o=i,u,l=r.length;do{if(o>=l)throw Vl.bytes=0,new RangeError("Could not decode varint");u=r[o++],t+=s<28?(u&_0)<<s:(u&_0)*Math.pow(2,s),s+=7}while(u>=_D);return Vl.bytes=o-i,t}var ED=Math.pow(2,7),xD=Math.pow(2,14),SD=Math.pow(2,21),DD=Math.pow(2,28),ID=Math.pow(2,35),OD=Math.pow(2,42),PD=Math.pow(2,49),AD=Math.pow(2,56),CD=Math.pow(2,63),TD=function(r){return r<ED?1:r<xD?2:r<SD?3:r<DD?4:r<ID?5:r<OD?6:r<PD?7:r<AD?8:r<CD?9:10},$D={encode:yD,decode:wD,encodingLength:TD},Sy=$D;const E0=(r,e,t=0)=>(Sy.encode(r,e,t),e),x0=r=>Sy.encodingLength(r),Wl=(r,e)=>{const t=e.byteLength,i=x0(r),s=i+x0(t),o=new Uint8Array(s+t);return E0(r,o,0),E0(t,o,i),o.set(e,s),new ND(r,t,e,o)};class ND{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const Dy=({name:r,code:e,encode:t})=>new RD(r,e,t);class RD{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Wl(this.code,t):t.then(i=>Wl(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Iy=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),FD=Dy({name:"sha2-256",code:18,encode:Iy("SHA-256")}),MD=Dy({name:"sha2-512",code:19,encode:Iy("SHA-512")});var LD=Object.freeze({__proto__:null,sha256:FD,sha512:MD});const Oy=0,jD="identity",Py=wy,kD=r=>Wl(Oy,Py(r)),UD={code:Oy,name:jD,encode:Py,digest:kD};var BD=Object.freeze({__proto__:null,identity:UD});new TextEncoder,new TextDecoder;const S0={...NS,...FS,...LS,...kS,...qS,...ZS,...tD,...iD,...uD,...gD};({...LD,...BD});function Ay(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function qD(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ay(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Cy(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const D0=Cy("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ml=Cy("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=qD(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),zD={utf8:D0,"utf-8":D0,hex:S0.base16,latin1:ml,ascii:ml,binary:ml,...S0};function HD(r,e="utf8"){const t=zD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ay(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const Ty="wc",KD=2,Uh="core",ui=`${Ty}@2:${Uh}:`,VD={name:Uh,logger:"error"},WD={database:":memory:"},GD="crypto",I0="client_ed25519_seed",YD=Pe.ONE_DAY,JD="keychain",XD="0.3",ZD="messages",QD="0.3",eI=Pe.SIX_HOURS,tI="publisher",$y="irn",rI="error",Ny="wss://relay.walletconnect.com",O0="wss://relay.walletconnect.org",nI="relayer",jt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},iI="_subscription",sa={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},sI=Pe.ONE_SECOND/2,aI="2.8.6",oI=1e4,cI="0.3",uI="WALLETCONNECT_CLIENT_ID",En={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},lI="subscription",hI="0.3",fI=Pe.FIVE_SECONDS*1e3,dI="pairing",pI="0.3",aa={wc_pairingDelete:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:0},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:0}}},_n={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},gI="history",yI="0.3",mI="expirer",tn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},bI="0.3",bl="verify-api",P0="https://verify.walletconnect.com";class vI{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=JD,this.version=XD,this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:o}=be("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(o)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=ut.generateChildLogger(t,this.name)}get context(){return ut.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Zg(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qg(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}class wI{constructor(e,t,i){this.core=e,this.logger=t,this.name=GD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),o=f0(s);return fy(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=t5();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const o=await this.getClientSeed(),u=f0(o),l=Hl();return await Xx(l,s,YD,u)},this.generateSharedKey=(s,o,u)=>{this.isInitialized();const l=this.getPrivateKey(s),f=r5(l,o);return this.setSymKey(f,u)},this.setSymKey=async(s,o)=>{this.isInitialized();const u=o||n5(s);return await this.keychain.set(u,s),u},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,o,u)=>{this.isInitialized();const l=Yg(u),f=ya(o);if(Bp(l)){const y=l.senderPublicKey,w=l.receiverPublicKey;s=await this.generateSharedKey(y,w)}const g=this.getSymKey(s),{type:b,senderPublicKey:S}=l;return s5({type:b,symKey:g,message:f,senderPublicKey:S})},this.decode=async(s,o,u)=>{this.isInitialized();const l=c5(o,u);if(Bp(l)){const b=l.receiverPublicKey,S=l.senderPublicKey;s=await this.generateSharedKey(b,S)}const f=this.getSymKey(s),g=a5({symKey:f,encoded:o});return Rh(g)},this.getPayloadType=s=>{const o=Zo(s);return Oa(o.type)},this.getPayloadSenderPublicKey=s=>{const o=Zo(s);return o.senderPublicKey?Dr(o.senderPublicKey,Er):void 0},this.core=e,this.logger=ut.generateChildLogger(t,this.name),this.keychain=i||new vI(this.core,this.logger)}get context(){return ut.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(I0)}catch{e=Hl(),await this.keychain.set(I0,e)}return HD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _I extends Ox{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=ZD,this.version=QD,this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const o=bs(s);let u=this.messages.get(i);return typeof u>"u"&&(u={}),typeof u[o]<"u"||(u[o]=s,this.messages.set(i,u),await this.persist()),o},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const o=this.get(i),u=bs(s);return typeof o[u]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=ut.generateChildLogger(e,this.name),this.core=t}get context(){return ut.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Zg(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qg(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}class EI extends Px{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new zr.EventEmitter,this.name=tI,this.queue=new Map,this.publishTimeout=Pe.toMiliseconds(Pe.TEN_SECONDS),this.queueTimeout=Pe.toMiliseconds(Pe.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,s,o)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:o}});try{const u=(o==null?void 0:o.ttl)||eI,l=Kl(o),f=(o==null?void 0:o.prompt)||!1,g=(o==null?void 0:o.tag)||0,b=(o==null?void 0:o.id)||Lh().toString(),S={topic:i,message:s,opts:{ttl:u,relay:l,prompt:f,tag:g,id:b}},y=setTimeout(()=>this.queue.set(b,S),this.queueTimeout);try{await await Qo(this.rpcPublish(i,s,u,l,f,g,b),this.publishTimeout),clearTimeout(y),this.relayer.events.emit(jt.publish,S)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:o}})}catch(u){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(u),u}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=ut.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return ut.getLoggerContext(this.logger)}rpcPublish(e,t,i,s,o,u,l){var f,g,b,S;const y={method:Wo(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:o,tag:u},id:l};return _r((f=y.params)==null?void 0:f.prompt)&&((g=y.params)==null||delete g.prompt),_r((b=y.params)==null?void 0:b.tag)&&((S=y.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:y}),this.relayer.request(y)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(Is.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(jt.connection_stalled);return}this.checkQueue()}),this.relayer.on(jt.message_ack,e=>{this.onPublish(e.id.toString())})}}class xI{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(o=>o!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var SI=Object.defineProperty,DI=Object.defineProperties,II=Object.getOwnPropertyDescriptors,A0=Object.getOwnPropertySymbols,OI=Object.prototype.hasOwnProperty,PI=Object.prototype.propertyIsEnumerable,C0=(r,e,t)=>e in r?SI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,oa=(r,e)=>{for(var t in e||(e={}))OI.call(e,t)&&C0(r,t,e[t]);if(A0)for(var t of A0(e))PI.call(e,t)&&C0(r,t,e[t]);return r},vl=(r,e)=>DI(r,II(e));class AI extends Tx{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new xI,this.events=new zr.EventEmitter,this.name=lI,this.version=hI,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ui,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const o=Kl(s),u={topic:i,relay:o};this.pending.set(i,u);const l=await this.rpcSubscribe(i,o);return this.onSubscribe(l,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),l}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((s,o)=>{const u=new Pe.Watch;u.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(l),u.stop(this.pendingSubscriptionWatchLabel),s(!0)),u.elapsed(this.pendingSubscriptionWatchLabel)>=fI&&(clearInterval(l),u.stop(this.pendingSubscriptionWatchLabel),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=ut.generateChildLogger(t,this.name),this.clientId=""}get context(){return ut.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=Kl(i);await this.rpcUnsubscribe(e,t,s);const o=Ht("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t){const i={method:Wo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await Qo(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(jt.connection_stalled)}return bs(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Wo(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Qo(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(jt.connection_stalled)}}rpcUnsubscribe(e,t,i){const s={method:Wo(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,vl(oa({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,oa({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,oa({},t)),this.topicMap.set(t.topic,e),this.events.emit(En.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(En.deleted,vl(oa({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(En.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(En.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Sn(t)&&this.onBatchSubscribe(t.map((i,s)=>vl(oa({},e[s]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Is.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(jt.connect,async()=>{await this.onConnect()}),this.relayer.on(jt.disconnect,()=>{this.onDisconnect()}),this.events.on(En.created,async e=>{const t=En.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(En.deleted,async e=>{const t=En.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var CI=Object.defineProperty,T0=Object.getOwnPropertySymbols,TI=Object.prototype.hasOwnProperty,$I=Object.prototype.propertyIsEnumerable,$0=(r,e,t)=>e in r?CI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,NI=(r,e)=>{for(var t in e||(e={}))TI.call(e,t)&&$0(r,t,e[t]);if(T0)for(var t of T0(e))$I.call(e,t)&&$0(r,t,e[t]);return r};class RI extends Ax{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new zr.EventEmitter,this.name=nI,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ut.generateChildLogger(e.logger,this.name):ut.pino(ut.getDefaultLoggerOptions({level:e.logger||rI})),this.messages=new _I(this.logger,e.core),this.subscriber=new AI(this,this.logger),this.publisher=new EI(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Ny,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${O0}...`),await this.restartTransport(O0)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},oI)}get context(){return ut.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let s=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";return s||(await Promise.all([new Promise(o=>{this.subscriber.once(En.created,u=>{u.topic===e&&o()})}),new Promise(async o=>{s=await this.subscriber.subscribe(e,t),o()})]),s)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(jt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(En.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,i)=>{await Qo(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>i(s)).then(()=>t()).finally(()=>this.removeListener(jt.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(jt.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.events.emit(jt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(sa.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new fi(new bS(v5({sdkVersion:aI,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,i):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),kh(e)){if(!e.method.endsWith(iI))return;const t=e.params,{topic:i,message:s,publishedAt:o}=t.data,u={topic:i,message:s,publishedAt:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(NI({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else vc(e)&&this.events.emit(jt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(jt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=jh(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(sa.payload,e=>this.onProviderPayload(e)),this.provider.on(sa.connect,()=>{this.events.emit(jt.connect)}),this.provider.on(sa.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(sa.error,e=>{this.logger.error(e),this.events.emit(jt.error,e)})}registerEventListeners(){this.events.on(jt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(jt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},Pe.toMiliseconds(sI))}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var FI=Object.defineProperty,N0=Object.getOwnPropertySymbols,MI=Object.prototype.hasOwnProperty,LI=Object.prototype.propertyIsEnumerable,R0=(r,e,t)=>e in r?FI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,F0=(r,e)=>{for(var t in e||(e={}))MI.call(e,t)&&R0(r,t,e[t]);if(N0)for(var t of N0(e))LI.call(e,t)&&R0(r,t,e[t]);return r};class _c extends Cx{constructor(e,t,i,s=ui,o=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=cI,this.cached=[],this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(u=>{this.getKey&&u!==null&&!_r(u)?this.map.set(this.getKey(u),u):q5(u)?this.map.set(u.id,u):z5(u)&&this.map.set(u.topic,u)}),this.cached=[],this.initialized=!0)},this.set=async(u,l)=>{this.isInitialized(),this.map.has(u)?await this.update(u,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:u,value:l}),this.map.set(u,l),await this.persist())},this.get=u=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:u}),this.getData(u)),this.getAll=u=>(this.isInitialized(),u?this.values.filter(l=>Object.keys(u).every(f=>wS(l[f],u[f]))):this.values),this.update=async(u,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:u,update:l});const f=F0(F0({},this.getData(u)),l);this.map.set(u,f),await this.persist()},this.delete=async(u,l)=>{this.isInitialized(),this.map.has(u)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:u,reason:l}),this.map.delete(u),await this.persist())},this.logger=ut.generateChildLogger(t,this.name),this.storagePrefix=s,this.getKey=o}get context(){return ut.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}class jI{constructor(e,t){this.core=e,this.logger=t,this.name=dI,this.version=pI,this.events=new Eh,this.initialized=!1,this.storagePrefix=ui,this.ignoredPayloadTypes=[zi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=Hl(),s=await this.core.crypto.setSymKey(i),o=hn(Pe.FIVE_MINUTES),u={protocol:$y},l={topic:s,expiry:o,relay:u,active:!1},f=$5({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:u});return await this.pairings.set(s,l),await this.core.relayer.subscribe(s),this.core.expirer.set(s,o),{topic:s,uri:f}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:s,symKey:o,relay:u}=A5(i.uri);if(this.pairings.keys.includes(s))throw new Error(`Pairing already exists: ${s}`);if(this.core.crypto.hasKeys(s))throw new Error(`Keychain already exists: ${s}`);const l=hn(Pe.FIVE_MINUTES),f={topic:s,relay:u,expiry:l,active:!1};return await this.pairings.set(s,f),await this.core.crypto.setSymKey(o,s),await this.core.relayer.subscribe(s,{relay:u}),this.core.expirer.set(s,l),i.activatePairing&&await this.activate({topic:s}),f},this.activate=async({topic:i})=>{this.isInitialized();const s=hn(Pe.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:s}),this.core.expirer.set(i,s)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const o=await this.sendRequest(s,"wc_pairingPing",{}),{done:u,resolve:l,reject:f}=gs();this.events.once(er("pairing_ping",o),({error:g})=>{g?f(g):l()}),await u()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Ht("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,o)=>{const u=mc(s,o),l=await this.core.crypto.encode(i,u),f=aa[s].req;return this.core.history.set(i,u),this.core.relayer.publish(i,l,f),u.id},this.sendResult=async(i,s,o)=>{const u=jh(i,o),l=await this.core.crypto.encode(s,u),f=await this.core.history.get(s,i),g=aa[f.request.method].res;await this.core.relayer.publish(s,l,g),await this.core.history.resolve(u)},this.sendError=async(i,s,o)=>{const u=bc(i,o),l=await this.core.crypto.encode(s,u),f=await this.core.history.get(s,i),g=aa[f.request.method]?aa[f.request.method].res:aa.unregistered_method.res;await this.core.relayer.publish(s,l,g),await this.core.history.resolve(u)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Ht("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>si(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:o}=i,u=o.method;if(this.pairings.keys.includes(s))switch(u){case"wc_pairingPing":return this.onPairingPingRequest(s,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,o);default:return this.onUnknownRpcMethodRequest(s,o)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:o}=i,u=(await this.core.history.get(s,o.id)).request.method;if(this.pairings.keys.includes(s))switch(u){case"wc_pairingPing":return this.onPairingPingResponse(s,o);default:return this.onUnknownRpcMethodResponse(u)}},this.onPairingPingRequest=async(i,s)=>{const{id:o}=s;try{this.isValidPing({topic:i}),await this.sendResult(o,i,!0),this.events.emit("pairing_ping",{id:o,topic:i})}catch(u){await this.sendError(o,i,u),this.logger.error(u)}},this.onPairingPingResponse=(i,s)=>{const{id:o}=s;setTimeout(()=>{kn(s)?this.events.emit(er("pairing_ping",o),{}):fn(s)&&this.events.emit(er("pairing_ping",o),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:o,topic:i})}catch(u){await this.sendError(o,i,u),this.logger.error(u)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:o,method:u}=s;try{if(this.registeredMethods.includes(u))return;const l=Ht("WC_METHOD_UNSUPPORTED",u);await this.sendError(o,i,l),this.logger.error(l)}catch(l){await this.sendError(o,i,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Ht("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!$r(i)){const{message:s}=be("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(s)}if(!B5(i.uri)){const{message:s}=be("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(s)}},this.isValidPing=async i=>{if(!$r(i)){const{message:o}=be("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!$r(i)){const{message:o}=be("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!or(i,!1)){const{message:s}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(si(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=be("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=ut.generateChildLogger(t,this.name),this.pairings=new _c(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ut.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(jt.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(t,i);kh(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):vc(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))})}registerExpirerEvents(){this.core.expirer.on(tn.expired,async e=>{const{topic:t}=ty(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class kI extends Ix{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new zr.EventEmitter,this.name=gI,this.version=yI,this.cached=[],this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:o}),this.records.has(s.id))return;const u={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:o,expiry:hn(Pe.THIRTY_DAYS)};this.records.set(u.id,u),this.events.emit(_n.created,u)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=fn(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.events.emit(_n.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(o=>{if(o.topic===i){if(typeof s<"u"&&o.id!==s)return;this.records.delete(o.id),this.events.emit(_n.deleted,o)}})},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=ut.generateChildLogger(t,this.name)}get context(){return ut.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:mc(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(_n.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(_n.created,e=>{const t=_n.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(_n.updated,e=>{const t=_n.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(_n.deleted,e=>{const t=_n.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Is.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{Pe.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}class UI extends $x{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new zr.EventEmitter,this.name=mI,this.version=bI,this.cached=[],this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const o=this.formatTarget(i),u={target:o,expiry:s};this.expirations.set(o,u),this.checkExpiry(o,u),this.events.emit(tn.created,{target:o,expiration:u})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),o=this.getExpiration(s);this.expirations.delete(s),this.events.emit(tn.deleted,{target:s,expiration:o})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=ut.generateChildLogger(t,this.name)}get context(){return ut.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return w5(e);if(typeof e=="number")return _5(e);const{message:t}=be("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(tn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;Pe.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(tn.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Is.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(tn.created,e=>{const t=tn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(tn.expired,e=>{const t=tn.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(tn.deleted,e=>{const t=tn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}class BI extends Nx{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=bl,this.initialized=!1,this.init=async i=>{Jg()||!$h()||(this.verifyUrl=(i==null?void 0:i.verifyUrl)||P0,await this.createIframe())},this.register=async i=>{var s;if(this.initialized||await this.init(),!!this.iframe)try{(s=this.iframe.contentWindow)==null||s.postMessage(i.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${i.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async i=>{var s;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${i.attestationId}`);const o=this.startAbortTimer(Pe.FIVE_SECONDS),u=await fetch(`${this.verifyUrl}/attestation/${i.attestationId}`,{signal:this.abortController.signal});return clearTimeout(o),u.status===200?(s=await u.json())==null?void 0:s.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((i,s)=>{if(document.getElementById(bl))return i();const o=document.createElement("iframe");o.setAttribute("id",bl),o.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),o.style.display="none",o.addEventListener("load",()=>{this.initialized=!0,i()}),o.addEventListener("error",u=>{s(u)}),document.body.append(o),this.iframe=o}),new Promise(i=>{setTimeout(()=>i("iframe load timeout"),Pe.toMiliseconds(Pe.ONE_SECOND/2))})])}catch(i){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(i)}},this.logger=ut.generateChildLogger(t,this.name),this.verifyUrl=P0,this.abortController=new AbortController,this.isDevEnv=Th()&&{}.IS_VITEST}get context(){return ut.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),Pe.toMiliseconds(e))}}var qI=Object.defineProperty,M0=Object.getOwnPropertySymbols,zI=Object.prototype.hasOwnProperty,HI=Object.prototype.propertyIsEnumerable,L0=(r,e,t)=>e in r?qI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,j0=(r,e)=>{for(var t in e||(e={}))zI.call(e,t)&&L0(r,t,e[t]);if(M0)for(var t of M0(e))HI.call(e,t)&&L0(r,t,e[t]);return r};class Bh extends Dx{constructor(e){super(e),this.protocol=Ty,this.version=KD,this.name=Uh,this.events=new zr.EventEmitter,this.initialized=!1,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Ny;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ut.pino(ut.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||VD.logger}));this.logger=ut.generateChildLogger(t,this.name),this.heartbeat=new Is.HeartBeat,this.crypto=new wI(this,this.logger,e==null?void 0:e.keychain),this.history=new kI(this,this.logger),this.expirer=new UI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new yx(j0(j0({},WD),e==null?void 0:e.storageOptions)),this.relayer=new RI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new jI(this,this.logger),this.verify=new BI(this.projectId||"",this.logger)}static async init(e){const t=new Bh(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(uI,i),t}get context(){return ut.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const KI=Bh,Ry="wc",Fy=2,My="client",qh=`${Ry}@${Fy}:${My}:`,wl={name:My,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},VI="WALLETCONNECT_DEEPLINK_CHOICE",WI="proposal",Ly="Proposal expired",GI="session",Uo=Pe.SEVEN_DAYS,YI="engine",ca={wc_sessionPropose:{req:{ttl:Pe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Pe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Pe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1115}}},_l={min:Pe.FIVE_MINUTES,max:Pe.SEVEN_DAYS},JI="request",XI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var ZI=Object.defineProperty,QI=Object.defineProperties,eO=Object.getOwnPropertyDescriptors,k0=Object.getOwnPropertySymbols,tO=Object.prototype.hasOwnProperty,rO=Object.prototype.propertyIsEnumerable,U0=(r,e,t)=>e in r?ZI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,en=(r,e)=>{for(var t in e||(e={}))tO.call(e,t)&&U0(r,t,e[t]);if(k0)for(var t of k0(e))rO.call(e,t)&&U0(r,t,e[t]);return r},El=(r,e)=>QI(r,eO(e));class nO extends Fx{constructor(e){super(e),this.name=YI,this.events=new Eh,this.initialized=!1,this.ignoredPayloadTypes=[zi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ca)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const i=El(en({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:u,sessionProperties:l,relays:f}=i;let g=s,b,S=!1;if(g&&(S=this.client.core.pairing.pairings.get(g).active),!g||!S){const{topic:N,uri:P}=await this.client.core.pairing.create();g=N,b=P}const y=await this.client.core.crypto.generateKeyPair(),w=en({requiredNamespaces:o,optionalNamespaces:u,relays:f??[{protocol:$y}],proposer:{publicKey:y,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:m,resolve:I,done:A}=gs(Pe.FIVE_MINUTES,Ly);if(this.events.once(er("session_connect"),async({error:N,session:P})=>{if(N)m(N);else if(P){P.self.publicKey=y;const T=El(en({},P),{requiredNamespaces:P.requiredNamespaces,optionalNamespaces:P.optionalNamespaces});await this.client.session.set(P.topic,T),await this.setExpiry(P.topic,P.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:P.peer.metadata}),I(T)}}),!g){const{message:N}=be("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(N)}const z=await this.sendRequest(g,"wc_sessionPropose",w),F=hn(Pe.FIVE_MINUTES);return await this.setProposal(z,en({id:z,expiry:F},w)),{uri:b,approval:A}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:i,relayProtocol:s,namespaces:o,sessionProperties:u}=t,l=this.client.proposal.get(i);let{pairingTopic:f,proposer:g,requiredNamespaces:b,optionalNamespaces:S}=l;f=f||"",vs(b)||(b=M5(o,"approve()"));const y=await this.client.core.crypto.generateKeyPair(),w=g.publicKey,m=await this.client.core.crypto.generateSharedKey(y,w);f&&i&&(await this.client.core.pairing.updateMetadata({topic:f,metadata:g.metadata}),await this.sendResult(i,f,{relay:{protocol:s??"irn"},responderPublicKey:y}),await this.client.proposal.delete(i,Ht("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:f}));const I=en({relay:{protocol:s??"irn"},namespaces:o,requiredNamespaces:b,optionalNamespaces:S,pairingTopic:f,controller:{publicKey:y,metadata:this.client.metadata},expiry:hn(Uo)},u&&{sessionProperties:u});await this.client.core.relayer.subscribe(m),await this.sendRequest(m,"wc_sessionSettle",I);const A=El(en({},I),{topic:m,pairingTopic:f,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:y});return await this.client.session.set(m,A),await this.setExpiry(m,hn(Uo)),{topic:m,acknowledged:()=>new Promise(z=>setTimeout(()=>z(this.client.session.get(m)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:i,reason:s}=t,{pairingTopic:o}=this.client.proposal.get(i);o&&(await this.sendError(i,o,s),await this.client.proposal.delete(i,Ht("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:i,namespaces:s}=t,o=await this.sendRequest(i,"wc_sessionUpdate",{namespaces:s}),{done:u,resolve:l,reject:f}=gs();return this.events.once(er("session_update",o),({error:g})=>{g?f(g):l()}),await this.client.session.update(i,{namespaces:s}),{acknowledged:u}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:i}=t,s=await this.sendRequest(i,"wc_sessionExtend",{}),{done:o,resolve:u,reject:l}=gs();return this.events.once(er("session_extend",s),({error:f})=>{f?l(f):u()}),await this.setExpiry(i,hn(Uo)),{acknowledged:o}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:i,request:s,topic:o,expiry:u}=t,l=await this.sendRequest(o,"wc_sessionRequest",{request:s,chainId:i},u),{done:f,resolve:g,reject:b}=gs(u);this.events.once(er("session_request",l),({error:y,result:w})=>{y?b(y):g(w)}),this.client.events.emit("session_request_sent",{topic:o,request:s,chainId:i,id:l});const S=await this.client.core.storage.getItem(VI);return E5({id:l,topic:o,wcDeepLink:S}),await f()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:o}=s;kn(s)?await this.sendResult(o,i,s.result):fn(s)&&await this.sendError(o,i,s.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=await this.sendRequest(i,"wc_sessionPing",{}),{done:o,resolve:u,reject:l}=gs();this.events.once(er("session_ping",s),({error:f})=>{f?l(f):u()}),await o()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:i,event:s,chainId:o}=t;await this.sendRequest(i,"wc_sessionEvent",{event:s,chainId:o})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=Lh().toString();let o;const u=l=>{(l==null?void 0:l.id.toString())===s&&(this.client.core.relayer.events.removeListener(jt.message_ack,u),o())};await Promise.all([new Promise(l=>{o=l,this.client.core.relayer.on(jt.message_ack,u)}),this.sendRequest(i,"wc_sessionDelete",Ht("USER_DISCONNECTED"),void 0,s)]),await this.deleteSession(i)}else await this.client.core.pairing.disconnect({topic:i})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>k5(i,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(o=>{var u,l;return((u=o.peerMetadata)==null?void 0:u.url)&&((l=o.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&o.topic&&o.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(t,i)=>{const{self:s}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Ht("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),i||this.client.core.expirer.del(t)},this.deleteProposal=async(t,i)=>{await Promise.all([this.client.proposal.delete(t,Ht("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:i}),this.client.core.expirer.set(t,i)},this.setProposal=async(t,i)=>{await this.client.proposal.set(t,i),this.client.core.expirer.set(t,i.expiry)},this.setPendingSessionRequest=async t=>{const i=ca.wc_sessionRequest.req.ttl,{id:s,topic:o,params:u}=t;await this.client.pendingRequest.set(s,{id:s,topic:o,params:u}),i&&this.client.core.expirer.set(s,hn(i))},this.sendRequest=async(t,i,s,o,u)=>{const l=mc(i,s);if($h()&&XI.includes(i)){const b=bs(JSON.stringify(l));await this.client.core.verify.register({attestationId:b})}const f=await this.client.core.crypto.encode(t,l),g=ca[i].req;return o&&(g.ttl=o),u&&(g.id=u),this.client.core.history.set(t,l),this.client.core.relayer.publish(t,f,g),l.id},this.sendResult=async(t,i,s)=>{const o=jh(t,s),u=await this.client.core.crypto.encode(i,o),l=await this.client.core.history.get(i,t),f=ca[l.request.method].res;this.client.core.relayer.publish(i,u,f),await this.client.core.history.resolve(o)},this.sendError=async(t,i,s)=>{const o=bc(t,s),u=await this.client.core.crypto.encode(i,o),l=await this.client.core.history.get(i,t),f=ca[l.request.method].res;this.client.core.relayer.publish(i,u,f),await this.client.core.history.resolve(o)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{si(s.expiry)&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{si(s.expiry)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession(s)),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=t=>{const{topic:i,payload:s}=t,o=s.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeRequest(i,s);case"wc_sessionSettle":return this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return this.onSessionExtendRequest(i,s);case"wc_sessionPing":return this.onSessionPingRequest(i,s);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return this.onSessionRequest(i,s);case"wc_sessionEvent":return this.onSessionEventRequest(i,s);default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:s}=t,o=(await this.client.core.history.get(i,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:s}=be("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.onSessionProposeRequest=async(t,i)=>{const{params:s,id:o}=i;try{this.isValidConnect(en({},i.params));const u=hn(Pe.FIVE_MINUTES),l=en({id:o,pairingTopic:t,expiry:u},s);await this.setProposal(o,l);const f=bs(JSON.stringify(i)),g=await this.getVerifyContext(f,l.proposer.metadata);this.client.events.emit("session_proposal",{id:o,params:l,verifyContext:g})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionProposeResponse=async(t,i)=>{const{id:s}=i;if(kn(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const u=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const l=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const f=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const g=await this.client.core.crypto.generateSharedKey(l,f);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const b=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:b}),await this.client.core.pairing.activate({topic:t})}else fn(i)&&(await this.client.proposal.delete(s,Ht("USER_DISCONNECTED")),this.events.emit(er("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(t,i)=>{const{id:s,params:o}=i;try{this.isValidSessionSettleRequest(o);const{relay:u,controller:l,expiry:f,namespaces:g,requiredNamespaces:b,optionalNamespaces:S,sessionProperties:y,pairingTopic:w}=i.params,m=en({topic:t,relay:u,expiry:f,namespaces:g,acknowledged:!0,pairingTopic:w,requiredNamespaces:b,optionalNamespaces:S,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},y&&{sessionProperties:y});await this.sendResult(i.id,t,!0),this.events.emit(er("session_connect"),{session:m}),this.cleanupDuplicatePairings(m)}catch(u){await this.sendError(s,t,u),this.client.logger.error(u)}},this.onSessionSettleResponse=async(t,i)=>{const{id:s}=i;kn(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(er("session_approve",s),{})):fn(i)&&(await this.client.session.delete(t,Ht("USER_DISCONNECTED")),this.events.emit(er("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:s,id:o}=i;try{this.isValidUpdate(en({topic:t},s)),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult(o,t,!0),this.client.events.emit("session_update",{id:o,topic:t,params:s})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionUpdateResponse=(t,i)=>{const{id:s}=i;kn(i)?this.events.emit(er("session_update",s),{}):fn(i)&&this.events.emit(er("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,hn(Uo)),await this.sendResult(s,t,!0),this.client.events.emit("session_extend",{id:s,topic:t})}catch(o){await this.sendError(s,t,o),this.client.logger.error(o)}},this.onSessionExtendResponse=(t,i)=>{const{id:s}=i;kn(i)?this.events.emit(er("session_extend",s),{}):fn(i)&&this.events.emit(er("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult(s,t,!0),this.client.events.emit("session_ping",{id:s,topic:t})}catch(o){await this.sendError(s,t,o),this.client.logger.error(o)}},this.onSessionPingResponse=(t,i)=>{const{id:s}=i;setTimeout(()=>{kn(i)?this.events.emit(er("session_ping",s),{}):fn(i)&&this.events.emit(er("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(o=>{this.client.core.relayer.once(jt.publish,async()=>{o(await this.deleteSession(t))})}),this.sendResult(s,t,!0)]),this.client.events.emit("session_delete",{id:s,topic:t})}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async(t,i)=>{const{id:s,params:o}=i;try{this.isValidRequest(en({topic:t},o)),await this.setPendingSessionRequest({id:s,topic:t,params:o});const u=bs(JSON.stringify(i)),l=this.client.session.get(t),f=await this.getVerifyContext(u,l.peer.metadata);this.client.events.emit("session_request",{id:s,topic:t,params:o,verifyContext:f})}catch(u){await this.sendError(s,t,u),this.client.logger.error(u)}},this.onSessionRequestResponse=(t,i)=>{const{id:s}=i;kn(i)?this.events.emit(er("session_request",s),{result:i.result}):fn(i)&&this.events.emit(er("session_request",s),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:s,params:o}=i;try{this.isValidEmit(en({topic:t},o)),this.client.events.emit("session_event",{id:s,topic:t,params:o})}catch(u){await this.sendError(s,t,u),this.client.logger.error(u)}},this.isValidConnect=async t=>{if(!$r(t)){const{message:f}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(f)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:u,relays:l}=t;if(_r(i)||await this.isValidPairingTopic(i),!X5(l,!0)){const{message:f}=be("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(f)}!_r(s)&&vs(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!_r(o)&&vs(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),_r(u)||this.validateSessionProps(u,"sessionProperties")},this.validateNamespaces=(t,i)=>{const s=J5(t,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!$r(t))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:o,sessionProperties:u}=t;await this.isValidProposalId(i);const l=this.client.proposal.get(i),f=Yo(s,"approve()");if(f)throw new Error(f.message);const g=Yp(l.requiredNamespaces,s,"approve()");if(g)throw new Error(g.message);if(!or(o,!0)){const{message:b}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(b)}_r(u)||this.validateSessionProps(u,"sessionProperties")},this.isValidReject=async t=>{if(!$r(t)){const{message:o}=be("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(o)}const{id:i,reason:s}=t;if(await this.isValidProposalId(i),!Q5(s)){const{message:o}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidSessionSettleRequest=t=>{if(!$r(t)){const{message:g}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}const{relay:i,controller:s,namespaces:o,expiry:u}=t;if(!iy(i)){const{message:g}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const l=H5(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const f=Yo(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(si(u)){const{message:g}=be("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async t=>{if(!$r(t)){const{message:f}=be("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(f)}const{topic:i,namespaces:s}=t;await this.isValidSessionTopic(i);const o=this.client.session.get(i),u=Yo(s,"update()");if(u)throw new Error(u.message);const l=Yp(o.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async t=>{if(!$r(t)){const{message:s}=be("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!$r(t)){const{message:f}=be("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(f)}const{topic:i,request:s,chainId:o,expiry:u}=t;await this.isValidSessionTopic(i);const{namespaces:l}=this.client.session.get(i);if(!Gp(l,o)){const{message:f}=be("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(f)}if(!ex(s)){const{message:f}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(f)}if(!nx(l,o,s.method)){const{message:f}=be("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(f)}if(u&&!ox(u,_l)){const{message:f}=be("MISSING_OR_INVALID",`request() expiry: ${u}. Expiry must be a number (in seconds) between ${_l.min} and ${_l.max}`);throw new Error(f)}},this.isValidRespond=async t=>{if(!$r(t)){const{message:o}=be("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:i,response:s}=t;if(await this.isValidSessionTopic(i),!tx(s)){const{message:o}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async t=>{if(!$r(t)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!$r(t)){const{message:l}=be("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:i,event:s,chainId:o}=t;await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!Gp(u,o)){const{message:l}=be("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(l)}if(!rx(s)){const{message:l}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!ix(u,o,s.name)){const{message:l}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}},this.isValidDisconnect=async t=>{if(!$r(t)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(t,i)=>{const s={verified:{verifyUrl:i.verifyUrl||"",validation:"UNKNOWN",origin:i.url||""}};try{const o=await this.client.core.verify.resolve({attestationId:t,verifyUrl:i.verifyUrl});o&&(s.verified.origin=o,s.verified.validation=o===i.url?"VALID":"INVALID")}catch(o){this.client.logger.error(o)}return this.client.logger.info(`Verify context: ${JSON.stringify(s)}`),s},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(s=>{if(!or(s,!1)){const{message:o}=be("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(o)}})}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(jt.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const s=await this.client.core.crypto.decode(t,i);kh(s)?(this.client.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):vc(s)?(await this.client.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.client.core.history.delete(t,s.id)):this.onRelayEventUnknownPayload({topic:t,payload:s})})}registerExpirerEvents(){this.client.core.expirer.on(tn.expired,async e=>{const{topic:t,id:i}=ty(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,be("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}isValidPairingTopic(e){if(!or(e,!1)){const{message:t}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(si(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=be("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!or(e,!1)){const{message:t}=be("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(si(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=be("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(or(e,!1)){const{message:t}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Z5(e)){const{message:t}=be("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(si(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=be("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class iO extends _c{constructor(e,t){super(e,t,WI,qh),this.core=e,this.logger=t}}class sO extends _c{constructor(e,t){super(e,t,GI,qh),this.core=e,this.logger=t}}class aO extends _c{constructor(e,t){super(e,t,JI,qh,i=>i.id),this.core=e,this.logger=t}}class zh extends Rx{constructor(e){super(e),this.protocol=Ry,this.version=Fy,this.name=wl.name,this.events=new zr.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||wl.name,this.metadata=(e==null?void 0:e.metadata)||g5();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ut.pino(ut.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||wl.logger}));this.core=(e==null?void 0:e.core)||new KI(e),this.logger=ut.generateChildLogger(t,this.name),this.session=new sO(this.core,this.logger),this.proposal=new iO(this.core,this.logger),this.pendingRequest=new aO(this.core,this.logger),this.engine=new nO(this)}static async init(e){const t=new zh(e);return await t.initialize(),t}get context(){return ut.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Gl={exports:{}};(function(r,e){var t=typeof self<"u"?self:ir,i=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();(function(o){(function(u){var l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function f(v){return v&&DataView.prototype.isPrototypeOf(v)}if(l.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(v){return v&&g.indexOf(Object.prototype.toString.call(v))>-1};function S(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(v))throw new TypeError("Invalid character in header field name");return v.toLowerCase()}function y(v){return typeof v!="string"&&(v=String(v)),v}function w(v){var D={next:function(){var H=v.shift();return{done:H===void 0,value:H}}};return l.iterable&&(D[Symbol.iterator]=function(){return D}),D}function m(v){this.map={},v instanceof m?v.forEach(function(D,H){this.append(H,D)},this):Array.isArray(v)?v.forEach(function(D){this.append(D[0],D[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(D){this.append(D,v[D])},this)}m.prototype.append=function(v,D){v=S(v),D=y(D);var H=this.map[v];this.map[v]=H?H+", "+D:D},m.prototype.delete=function(v){delete this.map[S(v)]},m.prototype.get=function(v){return v=S(v),this.has(v)?this.map[v]:null},m.prototype.has=function(v){return this.map.hasOwnProperty(S(v))},m.prototype.set=function(v,D){this.map[S(v)]=y(D)},m.prototype.forEach=function(v,D){for(var H in this.map)this.map.hasOwnProperty(H)&&v.call(D,this.map[H],H,this)},m.prototype.keys=function(){var v=[];return this.forEach(function(D,H){v.push(H)}),w(v)},m.prototype.values=function(){var v=[];return this.forEach(function(D){v.push(D)}),w(v)},m.prototype.entries=function(){var v=[];return this.forEach(function(D,H){v.push([H,D])}),w(v)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function I(v){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}function A(v){return new Promise(function(D,H){v.onload=function(){D(v.result)},v.onerror=function(){H(v.error)}})}function z(v){var D=new FileReader,H=A(D);return D.readAsArrayBuffer(v),H}function F(v){var D=new FileReader,H=A(D);return D.readAsText(v),H}function N(v){for(var D=new Uint8Array(v),H=new Array(D.length),j=0;j<D.length;j++)H[j]=String.fromCharCode(D[j]);return H.join("")}function P(v){if(v.slice)return v.slice(0);var D=new Uint8Array(v.byteLength);return D.set(new Uint8Array(v)),D.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(v){this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:l.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:l.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():l.arrayBuffer&&l.blob&&f(v)?(this._bodyArrayBuffer=P(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||b(v))?this._bodyArrayBuffer=P(v):this._bodyText=v=Object.prototype.toString.call(v):this._bodyText="",this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var v=I(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?I(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(z)}),this.text=function(){var v=I(this);if(v)return v;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(v){var D=v.toUpperCase();return x.indexOf(D)>-1?D:v}function E(v,D){D=D||{};var H=D.body;if(v instanceof E){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,D.headers||(this.headers=new m(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!H&&v._bodyInit!=null&&(H=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new m(D.headers)),this.method=h(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&H)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(H)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function K(v){var D=new FormData;return v.trim().split("&").forEach(function(H){if(H){var j=H.split("="),V=j.shift().replace(/\+/g," "),k=j.join("=").replace(/\+/g," ");D.append(decodeURIComponent(V),decodeURIComponent(k))}}),D}function $(v){var D=new m,H=v.replace(/\r?\n[\t ]+/g," ");return H.split(/\r?\n/).forEach(function(j){var V=j.split(":"),k=V.shift().trim();if(k){var ee=V.join(":").trim();D.append(k,ee)}}),D}T.call(E.prototype);function B(v,D){D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in D?D.statusText:"OK",this.headers=new m(D.headers),this.url=D.url||"",this._initBody(v)}T.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},B.error=function(){var v=new B(null,{status:0,statusText:""});return v.type="error",v};var G=[301,302,303,307,308];B.redirect=function(v,D){if(G.indexOf(D)===-1)throw new RangeError("Invalid status code");return new B(null,{status:D,headers:{location:v}})},u.DOMException=o.DOMException;try{new u.DOMException}catch{u.DOMException=function(D,H){this.message=D,this.name=H;var j=Error(D);this.stack=j.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function W(v,D){return new Promise(function(H,j){var V=new E(v,D);if(V.signal&&V.signal.aborted)return j(new u.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function ee(){k.abort()}k.onload=function(){var re={status:k.status,statusText:k.statusText,headers:$(k.getAllResponseHeaders()||"")};re.url="responseURL"in k?k.responseURL:re.headers.get("X-Request-URL");var le="response"in k?k.response:k.responseText;H(new B(le,re))},k.onerror=function(){j(new TypeError("Network request failed"))},k.ontimeout=function(){j(new TypeError("Network request failed"))},k.onabort=function(){j(new u.DOMException("Aborted","AbortError"))},k.open(V.method,V.url,!0),V.credentials==="include"?k.withCredentials=!0:V.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&l.blob&&(k.responseType="blob"),V.headers.forEach(function(re,le){k.setRequestHeader(le,re)}),V.signal&&(V.signal.addEventListener("abort",ee),k.onreadystatechange=function(){k.readyState===4&&V.signal.removeEventListener("abort",ee)}),k.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return W.polyfill=!0,o.fetch||(o.fetch=W,o.Headers=m,o.Request=E,o.Response=B),u.Headers=m,u.Request=E,u.Response=B,u.fetch=W,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(Gl,Gl.exports);var oO=Gl.exports;const B0=Sa(oO),cO={Accept:"application/json","Content-Type":"application/json"},uO="POST",q0={headers:cO,method:uO},z0=10;class Ki{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new zr.EventEmitter,this.isAvailable=!1,this.registering=!1,!y0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const i=ya(e),o=await(await B0(this.url,Object.assign(Object.assign({},q0),{body:i}))).json();this.onPayload({data:o})}catch(i){this.onError(e.id,i)}}async register(e=this.url){if(!y0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=ya({id:1,jsonrpc:"2.0",method:"test",params:[]});await B0(e,Object.assign(Object.assign({},q0),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Rh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),o=bc(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return gy(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>z0&&this.events.setMaxListeners(z0)}}const H0="error",lO="wss://relay.walletconnect.com",hO="wc",fO="universal_provider",K0=`${hO}@2:${fO}:`,dO="https://rpc.walletconnect.com/v1",di={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yl={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",g=500,b="__lodash_placeholder__",S=1,y=2,w=4,m=1,I=2,A=1,z=2,F=4,N=8,P=16,T=32,x=64,h=128,E=256,K=512,$=30,B="...",G=800,W=16,v=1,D=2,H=3,j=1/0,V=9007199254740991,k=17976931348623157e292,ee=0/0,re=4294967295,le=re-1,ie=re>>>1,De=[["ary",h],["bind",A],["bindKey",z],["curry",N],["curryRight",P],["flip",K],["partial",T],["partialRight",x],["rearg",E]],fe="[object Arguments]",Ie="[object Array]",Q="[object AsyncFunction]",Z="[object Boolean]",q="[object Date]",p="[object DOMException]",L="[object Error]",ue="[object Function]",me="[object GeneratorFunction]",Te="[object Map]",Je="[object Number]",Xe="[object Null]",ke="[object Object]",pt="[object Promise]",_t="[object Proxy]",Ke="[object RegExp]",Re="[object Set]",$e="[object String]",Le="[object Symbol]",qe="[object Undefined]",pe="[object WeakMap]",ve="[object WeakSet]",he="[object ArrayBuffer]",we="[object DataView]",je="[object Float32Array]",Ae="[object Float64Array]",Ee="[object Int8Array]",de="[object Int16Array]",ze="[object Int32Array]",tt="[object Uint8Array]",rt="[object Uint8ClampedArray]",pr="[object Uint16Array]",Ir="[object Uint32Array]",pn=/\b__p \+= '';/g,gr=/\b(__p \+=) '' \+/g,Dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gn=/&(?:amp|lt|gt|quot|#39);/g,mi=/[&<>"']/g,Tt=RegExp(Gn.source),It=RegExp(mi.source),$t=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/,Gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,Yt=RegExp(Rt.source),Ft=/^\s+/,Ut=/\s/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Et=/\{\n\/\* \[wrapped with (.+)\] \*/,Jt=/,? & /,Xt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Mc=/[()=,{}\[\]\/\s]/,Lc=/\\(\\)?/g,jc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kr=/\w*$/,kc=/^[-+]0x[0-9a-f]+$/i,Uc=/^0b[01]+$/i,Bc=/^\[object .+?Constructor\]$/,qc=/^0o[0-7]+$/i,zc=/^(?:0|[1-9]\d*)$/,In=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wi=/($^)/,Hc=/['\n\r\u2028\u2029\\]/g,Gi="\\ud800-\\udfff",Kc="\\u0300-\\u036f",Vc="\\ufe20-\\ufe2f",Yi="\\u20d0-\\u20ff",Fa=Kc+Vc+Yi,Ma="\\u2700-\\u27bf",sn="a-z\\xdf-\\xf6\\xf8-\\xff",Wc="\\xac\\xb1\\xd7\\xf7",Gc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yc="\\u2000-\\u206f",Jc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",La="A-Z\\xc0-\\xd6\\xd8-\\xde",ja="\\ufe0e\\ufe0f",bi=Wc+Gc+Yc+Jc,Ns="[']",vi="["+Gi+"]",Rs="["+bi+"]",wi="["+Fa+"]",ka="\\d+",Xc="["+Ma+"]",Ua="["+sn+"]",Ba="[^"+Gi+bi+ka+Ma+sn+La+"]",Ji="\\ud83c[\\udffb-\\udfff]",Zc="(?:"+wi+"|"+Ji+")",qa="[^"+Gi+"]",Xi="(?:\\ud83c[\\udde6-\\uddff]){2}",Yn="[\\ud800-\\udbff][\\udc00-\\udfff]",Mr="["+La+"]",za="\\u200d",Ha="(?:"+Ua+"|"+Ba+")",gn="(?:"+Mr+"|"+Ba+")",Ka="(?:"+Ns+"(?:d|ll|m|re|s|t|ve))?",Va="(?:"+Ns+"(?:D|LL|M|RE|S|T|VE))?",Wa=Zc+"?",Ga="["+ja+"]?",Qc="(?:"+za+"(?:"+[qa,Xi,Yn].join("|")+")"+Ga+Wa+")*",On="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ya="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ja=Ga+Wa+Qc,Zi="(?:"+[Xc,Xi,Yn].join("|")+")"+Ja,eu="(?:"+[qa+wi+"?",wi,Xi,Yn,vi].join("|")+")",Fs=RegExp(Ns,"g"),tu=RegExp(wi,"g"),Qi=RegExp(Ji+"(?="+Ji+")|"+eu+Ja,"g"),Xa=RegExp([Mr+"?"+Ua+"+"+Ka+"(?="+[Rs,Mr,"$"].join("|")+")",gn+"+"+Va+"(?="+[Rs,Mr+Ha,"$"].join("|")+")",Mr+"?"+Ha+"+"+Ka,Mr+"+"+Va,Ya,On,ka,Zi].join("|"),"g"),Za=RegExp("["+za+Gi+Fa+ja+"]"),_i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ru=-1,mt={};mt[je]=mt[Ae]=mt[Ee]=mt[de]=mt[ze]=mt[tt]=mt[rt]=mt[pr]=mt[Ir]=!0,mt[fe]=mt[Ie]=mt[he]=mt[Z]=mt[we]=mt[q]=mt[L]=mt[ue]=mt[Te]=mt[Je]=mt[ke]=mt[Ke]=mt[Re]=mt[$e]=mt[pe]=!1;var gt={};gt[fe]=gt[Ie]=gt[he]=gt[we]=gt[Z]=gt[q]=gt[je]=gt[Ae]=gt[Ee]=gt[de]=gt[ze]=gt[Te]=gt[Je]=gt[ke]=gt[Ke]=gt[Re]=gt[$e]=gt[Le]=gt[tt]=gt[rt]=gt[pr]=gt[Ir]=!0,gt[L]=gt[ue]=gt[pe]=!1;var R={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bt=parseFloat,Ve=parseInt,St=typeof ua=="object"&&ua&&ua.Object===Object&&ua,Zt=typeof self=="object"&&self&&self.Object===Object&&self,ot=St||Zt||Function("return this")(),vt=e&&!e.nodeType&&e,Bt=vt&&!0&&r&&!r.nodeType&&r,Or=Bt&&Bt.exports===vt,Qt=Or&&St.process,Dt=function(){try{var J=Bt&&Bt.require&&Bt.require("util").types;return J||Qt&&Qt.binding&&Qt.binding("util")}catch{}}(),yr=Dt&&Dt.isArrayBuffer,an=Dt&&Dt.isDate,Vr=Dt&&Dt.isMap,yn=Dt&&Dt.isRegExp,Ms=Dt&&Dt.isSet,Ei=Dt&&Dt.isTypedArray;function sr(J,ne,te){switch(te.length){case 0:return J.call(ne);case 1:return J.call(ne,te[0]);case 2:return J.call(ne,te[0],te[1]);case 3:return J.call(ne,te[0],te[1],te[2])}return J.apply(ne,te)}function km(J,ne,te,Se){for(var He=-1,ht=J==null?0:J.length;++He<ht;){var rr=J[He];ne(Se,rr,te(rr),J)}return Se}function Wr(J,ne){for(var te=-1,Se=J==null?0:J.length;++te<Se&&ne(J[te],te,J)!==!1;);return J}function Um(J,ne){for(var te=J==null?0:J.length;te--&&ne(J[te],te,J)!==!1;);return J}function mf(J,ne){for(var te=-1,Se=J==null?0:J.length;++te<Se;)if(!ne(J[te],te,J))return!1;return!0}function Jn(J,ne){for(var te=-1,Se=J==null?0:J.length,He=0,ht=[];++te<Se;){var rr=J[te];ne(rr,te,J)&&(ht[He++]=rr)}return ht}function eo(J,ne){var te=J==null?0:J.length;return!!te&&es(J,ne,0)>-1}function nu(J,ne,te){for(var Se=-1,He=J==null?0:J.length;++Se<He;)if(te(ne,J[Se]))return!0;return!1}function Pt(J,ne){for(var te=-1,Se=J==null?0:J.length,He=Array(Se);++te<Se;)He[te]=ne(J[te],te,J);return He}function Xn(J,ne){for(var te=-1,Se=ne.length,He=J.length;++te<Se;)J[He+te]=ne[te];return J}function iu(J,ne,te,Se){var He=-1,ht=J==null?0:J.length;for(Se&&ht&&(te=J[++He]);++He<ht;)te=ne(te,J[He],He,J);return te}function Bm(J,ne,te,Se){var He=J==null?0:J.length;for(Se&&He&&(te=J[--He]);He--;)te=ne(te,J[He],He,J);return te}function su(J,ne){for(var te=-1,Se=J==null?0:J.length;++te<Se;)if(ne(J[te],te,J))return!0;return!1}var qm=au("length");function zm(J){return J.split("")}function Hm(J){return J.match(Xt)||[]}function bf(J,ne,te){var Se;return te(J,function(He,ht,rr){if(ne(He,ht,rr))return Se=ht,!1}),Se}function to(J,ne,te,Se){for(var He=J.length,ht=te+(Se?1:-1);Se?ht--:++ht<He;)if(ne(J[ht],ht,J))return ht;return-1}function es(J,ne,te){return ne===ne?rb(J,ne,te):to(J,vf,te)}function Km(J,ne,te,Se){for(var He=te-1,ht=J.length;++He<ht;)if(Se(J[He],ne))return He;return-1}function vf(J){return J!==J}function wf(J,ne){var te=J==null?0:J.length;return te?cu(J,ne)/te:ee}function au(J){return function(ne){return ne==null?t:ne[J]}}function ou(J){return function(ne){return J==null?t:J[ne]}}function _f(J,ne,te,Se,He){return He(J,function(ht,rr,wt){te=Se?(Se=!1,ht):ne(te,ht,rr,wt)}),te}function Vm(J,ne){var te=J.length;for(J.sort(ne);te--;)J[te]=J[te].value;return J}function cu(J,ne){for(var te,Se=-1,He=J.length;++Se<He;){var ht=ne(J[Se]);ht!==t&&(te=te===t?ht:te+ht)}return te}function uu(J,ne){for(var te=-1,Se=Array(J);++te<J;)Se[te]=ne(te);return Se}function Wm(J,ne){return Pt(ne,function(te){return[te,J[te]]})}function Ef(J){return J&&J.slice(0,If(J)+1).replace(Ft,"")}function Lr(J){return function(ne){return J(ne)}}function lu(J,ne){return Pt(ne,function(te){return J[te]})}function Ls(J,ne){return J.has(ne)}function xf(J,ne){for(var te=-1,Se=J.length;++te<Se&&es(ne,J[te],0)>-1;);return te}function Sf(J,ne){for(var te=J.length;te--&&es(ne,J[te],0)>-1;);return te}function Gm(J,ne){for(var te=J.length,Se=0;te--;)J[te]===ne&&++Se;return Se}var Ym=ou(R),Jm=ou(Y);function Xm(J){return"\\"+xe[J]}function Zm(J,ne){return J==null?t:J[ne]}function ts(J){return Za.test(J)}function Qm(J){return _i.test(J)}function eb(J){for(var ne,te=[];!(ne=J.next()).done;)te.push(ne.value);return te}function hu(J){var ne=-1,te=Array(J.size);return J.forEach(function(Se,He){te[++ne]=[He,Se]}),te}function Df(J,ne){return function(te){return J(ne(te))}}function Zn(J,ne){for(var te=-1,Se=J.length,He=0,ht=[];++te<Se;){var rr=J[te];(rr===ne||rr===b)&&(J[te]=b,ht[He++]=te)}return ht}function ro(J){var ne=-1,te=Array(J.size);return J.forEach(function(Se){te[++ne]=Se}),te}function tb(J){var ne=-1,te=Array(J.size);return J.forEach(function(Se){te[++ne]=[Se,Se]}),te}function rb(J,ne,te){for(var Se=te-1,He=J.length;++Se<He;)if(J[Se]===ne)return Se;return-1}function nb(J,ne,te){for(var Se=te+1;Se--;)if(J[Se]===ne)return Se;return Se}function rs(J){return ts(J)?sb(J):qm(J)}function on(J){return ts(J)?ab(J):zm(J)}function If(J){for(var ne=J.length;ne--&&Ut.test(J.charAt(ne)););return ne}var ib=ou(oe);function sb(J){for(var ne=Qi.lastIndex=0;Qi.test(J);)++ne;return ne}function ab(J){return J.match(Qi)||[]}function ob(J){return J.match(Xa)||[]}var cb=function J(ne){ne=ne==null?ot:ns.defaults(ot.Object(),ne,ns.pick(ot,Qa));var te=ne.Array,Se=ne.Date,He=ne.Error,ht=ne.Function,rr=ne.Math,wt=ne.Object,fu=ne.RegExp,ub=ne.String,Gr=ne.TypeError,no=te.prototype,lb=ht.prototype,is=wt.prototype,io=ne["__core-js_shared__"],so=lb.toString,dt=is.hasOwnProperty,hb=0,Of=function(){var n=/[^.]+$/.exec(io&&io.keys&&io.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ao=is.toString,fb=so.call(wt),db=ot._,pb=fu("^"+so.call(dt).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oo=Or?ne.Buffer:t,Qn=ne.Symbol,co=ne.Uint8Array,Pf=oo?oo.allocUnsafe:t,uo=Df(wt.getPrototypeOf,wt),Af=wt.create,Cf=is.propertyIsEnumerable,lo=no.splice,Tf=Qn?Qn.isConcatSpreadable:t,js=Qn?Qn.iterator:t,xi=Qn?Qn.toStringTag:t,ho=function(){try{var n=Pi(wt,"defineProperty");return n({},"",{}),n}catch{}}(),gb=ne.clearTimeout!==ot.clearTimeout&&ne.clearTimeout,yb=Se&&Se.now!==ot.Date.now&&Se.now,mb=ne.setTimeout!==ot.setTimeout&&ne.setTimeout,fo=rr.ceil,po=rr.floor,du=wt.getOwnPropertySymbols,bb=oo?oo.isBuffer:t,$f=ne.isFinite,vb=no.join,wb=Df(wt.keys,wt),nr=rr.max,hr=rr.min,_b=Se.now,Eb=ne.parseInt,Nf=rr.random,xb=no.reverse,pu=Pi(ne,"DataView"),ks=Pi(ne,"Map"),gu=Pi(ne,"Promise"),ss=Pi(ne,"Set"),Us=Pi(ne,"WeakMap"),Bs=Pi(wt,"create"),go=Us&&new Us,as={},Sb=Ai(pu),Db=Ai(ks),Ib=Ai(gu),Ob=Ai(ss),Pb=Ai(Us),yo=Qn?Qn.prototype:t,qs=yo?yo.valueOf:t,Rf=yo?yo.toString:t;function O(n){if(Lt(n)&&!We(n)&&!(n instanceof st)){if(n instanceof Yr)return n;if(dt.call(n,"__wrapped__"))return Fd(n)}return new Yr(n)}var os=function(){function n(){}return function(a){if(!Ct(a))return{};if(Af)return Af(a);n.prototype=a;var c=new n;return n.prototype=t,c}}();function mo(){}function Yr(n,a){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}O.templateSettings={escape:$t,evaluate:Nt,interpolate:At,variable:"",imports:{_:O}},O.prototype=mo.prototype,O.prototype.constructor=O,Yr.prototype=os(mo.prototype),Yr.prototype.constructor=Yr;function st(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Ab(){var n=new st(this.__wrapped__);return n.__actions__=Pr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Pr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Pr(this.__views__),n}function Cb(){if(this.__filtered__){var n=new st(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Tb(){var n=this.__wrapped__.value(),a=this.__dir__,c=We(n),d=a<0,_=c?n.length:0,C=zv(0,_,this.__views__),M=C.start,U=C.end,X=U-M,se=d?U:M-1,ae=this.__iteratees__,ce=ae.length,ye=0,Oe=hr(X,this.__takeCount__);if(!c||!d&&_==X&&Oe==X)return id(n,this.__actions__);var Fe=[];e:for(;X--&&ye<Oe;){se+=a;for(var Qe=-1,Me=n[se];++Qe<ce;){var it=ae[Qe],ct=it.iteratee,Ur=it.type,vr=ct(Me);if(Ur==D)Me=vr;else if(!vr){if(Ur==v)continue e;break e}}Fe[ye++]=Me}return Fe}st.prototype=os(mo.prototype),st.prototype.constructor=st;function Si(n){var a=-1,c=n==null?0:n.length;for(this.clear();++a<c;){var d=n[a];this.set(d[0],d[1])}}function $b(){this.__data__=Bs?Bs(null):{},this.size=0}function Nb(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a}function Rb(n){var a=this.__data__;if(Bs){var c=a[n];return c===f?t:c}return dt.call(a,n)?a[n]:t}function Fb(n){var a=this.__data__;return Bs?a[n]!==t:dt.call(a,n)}function Mb(n,a){var c=this.__data__;return this.size+=this.has(n)?0:1,c[n]=Bs&&a===t?f:a,this}Si.prototype.clear=$b,Si.prototype.delete=Nb,Si.prototype.get=Rb,Si.prototype.has=Fb,Si.prototype.set=Mb;function Pn(n){var a=-1,c=n==null?0:n.length;for(this.clear();++a<c;){var d=n[a];this.set(d[0],d[1])}}function Lb(){this.__data__=[],this.size=0}function jb(n){var a=this.__data__,c=bo(a,n);if(c<0)return!1;var d=a.length-1;return c==d?a.pop():lo.call(a,c,1),--this.size,!0}function kb(n){var a=this.__data__,c=bo(a,n);return c<0?t:a[c][1]}function Ub(n){return bo(this.__data__,n)>-1}function Bb(n,a){var c=this.__data__,d=bo(c,n);return d<0?(++this.size,c.push([n,a])):c[d][1]=a,this}Pn.prototype.clear=Lb,Pn.prototype.delete=jb,Pn.prototype.get=kb,Pn.prototype.has=Ub,Pn.prototype.set=Bb;function An(n){var a=-1,c=n==null?0:n.length;for(this.clear();++a<c;){var d=n[a];this.set(d[0],d[1])}}function qb(){this.size=0,this.__data__={hash:new Si,map:new(ks||Pn),string:new Si}}function zb(n){var a=Co(this,n).delete(n);return this.size-=a?1:0,a}function Hb(n){return Co(this,n).get(n)}function Kb(n){return Co(this,n).has(n)}function Vb(n,a){var c=Co(this,n),d=c.size;return c.set(n,a),this.size+=c.size==d?0:1,this}An.prototype.clear=qb,An.prototype.delete=zb,An.prototype.get=Hb,An.prototype.has=Kb,An.prototype.set=Vb;function Di(n){var a=-1,c=n==null?0:n.length;for(this.__data__=new An;++a<c;)this.add(n[a])}function Wb(n){return this.__data__.set(n,f),this}function Gb(n){return this.__data__.has(n)}Di.prototype.add=Di.prototype.push=Wb,Di.prototype.has=Gb;function cn(n){var a=this.__data__=new Pn(n);this.size=a.size}function Yb(){this.__data__=new Pn,this.size=0}function Jb(n){var a=this.__data__,c=a.delete(n);return this.size=a.size,c}function Xb(n){return this.__data__.get(n)}function Zb(n){return this.__data__.has(n)}function Qb(n,a){var c=this.__data__;if(c instanceof Pn){var d=c.__data__;if(!ks||d.length<s-1)return d.push([n,a]),this.size=++c.size,this;c=this.__data__=new An(d)}return c.set(n,a),this.size=c.size,this}cn.prototype.clear=Yb,cn.prototype.delete=Jb,cn.prototype.get=Xb,cn.prototype.has=Zb,cn.prototype.set=Qb;function Ff(n,a){var c=We(n),d=!c&&Ci(n),_=!c&&!d&&ii(n),C=!c&&!d&&!_&&hs(n),M=c||d||_||C,U=M?uu(n.length,ub):[],X=U.length;for(var se in n)(a||dt.call(n,se))&&!(M&&(se=="length"||_&&(se=="offset"||se=="parent")||C&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||Nn(se,X)))&&U.push(se);return U}function Mf(n){var a=n.length;return a?n[Iu(0,a-1)]:t}function ev(n,a){return To(Pr(n),Ii(a,0,n.length))}function tv(n){return To(Pr(n))}function yu(n,a,c){(c!==t&&!un(n[a],c)||c===t&&!(a in n))&&Cn(n,a,c)}function zs(n,a,c){var d=n[a];(!(dt.call(n,a)&&un(d,c))||c===t&&!(a in n))&&Cn(n,a,c)}function bo(n,a){for(var c=n.length;c--;)if(un(n[c][0],a))return c;return-1}function rv(n,a,c,d){return ei(n,function(_,C,M){a(d,_,c(_),M)}),d}function Lf(n,a){return n&&bn(a,ar(a),n)}function nv(n,a){return n&&bn(a,Cr(a),n)}function Cn(n,a,c){a=="__proto__"&&ho?ho(n,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):n[a]=c}function mu(n,a){for(var c=-1,d=a.length,_=te(d),C=n==null;++c<d;)_[c]=C?t:Xu(n,a[c]);return _}function Ii(n,a,c){return n===n&&(c!==t&&(n=n<=c?n:c),a!==t&&(n=n>=a?n:a)),n}function Jr(n,a,c,d,_,C){var M,U=a&S,X=a&y,se=a&w;if(c&&(M=_?c(n,d,_,C):c(n)),M!==t)return M;if(!Ct(n))return n;var ae=We(n);if(ae){if(M=Kv(n),!U)return Pr(n,M)}else{var ce=fr(n),ye=ce==ue||ce==me;if(ii(n))return od(n,U);if(ce==ke||ce==fe||ye&&!_){if(M=X||ye?{}:Id(n),!U)return X?Rv(n,nv(M,n)):Nv(n,Lf(M,n))}else{if(!gt[ce])return _?n:{};M=Vv(n,ce,U)}}C||(C=new cn);var Oe=C.get(n);if(Oe)return Oe;C.set(n,M),tp(n)?n.forEach(function(Me){M.add(Jr(Me,a,c,Me,n,C))}):Qd(n)&&n.forEach(function(Me,it){M.set(it,Jr(Me,a,c,it,n,C))});var Fe=se?X?Lu:Mu:X?Cr:ar,Qe=ae?t:Fe(n);return Wr(Qe||n,function(Me,it){Qe&&(it=Me,Me=n[it]),zs(M,it,Jr(Me,a,c,it,n,C))}),M}function iv(n){var a=ar(n);return function(c){return jf(c,n,a)}}function jf(n,a,c){var d=c.length;if(n==null)return!d;for(n=wt(n);d--;){var _=c[d],C=a[_],M=n[_];if(M===t&&!(_ in n)||!C(M))return!1}return!0}function kf(n,a,c){if(typeof n!="function")throw new Gr(u);return Js(function(){n.apply(t,c)},a)}function Hs(n,a,c,d){var _=-1,C=eo,M=!0,U=n.length,X=[],se=a.length;if(!U)return X;c&&(a=Pt(a,Lr(c))),d?(C=nu,M=!1):a.length>=s&&(C=Ls,M=!1,a=new Di(a));e:for(;++_<U;){var ae=n[_],ce=c==null?ae:c(ae);if(ae=d||ae!==0?ae:0,M&&ce===ce){for(var ye=se;ye--;)if(a[ye]===ce)continue e;X.push(ae)}else C(a,ce,d)||X.push(ae)}return X}var ei=fd(mn),Uf=fd(vu,!0);function sv(n,a){var c=!0;return ei(n,function(d,_,C){return c=!!a(d,_,C),c}),c}function vo(n,a,c){for(var d=-1,_=n.length;++d<_;){var C=n[d],M=a(C);if(M!=null&&(U===t?M===M&&!kr(M):c(M,U)))var U=M,X=C}return X}function av(n,a,c,d){var _=n.length;for(c=Ze(c),c<0&&(c=-c>_?0:_+c),d=d===t||d>_?_:Ze(d),d<0&&(d+=_),d=c>d?0:np(d);c<d;)n[c++]=a;return n}function Bf(n,a){var c=[];return ei(n,function(d,_,C){a(d,_,C)&&c.push(d)}),c}function cr(n,a,c,d,_){var C=-1,M=n.length;for(c||(c=Gv),_||(_=[]);++C<M;){var U=n[C];a>0&&c(U)?a>1?cr(U,a-1,c,d,_):Xn(_,U):d||(_[_.length]=U)}return _}var bu=dd(),qf=dd(!0);function mn(n,a){return n&&bu(n,a,ar)}function vu(n,a){return n&&qf(n,a,ar)}function wo(n,a){return Jn(a,function(c){return Rn(n[c])})}function Oi(n,a){a=ri(a,n);for(var c=0,d=a.length;n!=null&&c<d;)n=n[vn(a[c++])];return c&&c==d?n:t}function zf(n,a,c){var d=a(n);return We(n)?d:Xn(d,c(n))}function mr(n){return n==null?n===t?qe:Xe:xi&&xi in wt(n)?qv(n):tw(n)}function wu(n,a){return n>a}function ov(n,a){return n!=null&&dt.call(n,a)}function cv(n,a){return n!=null&&a in wt(n)}function uv(n,a,c){return n>=hr(a,c)&&n<nr(a,c)}function _u(n,a,c){for(var d=c?nu:eo,_=n[0].length,C=n.length,M=C,U=te(C),X=1/0,se=[];M--;){var ae=n[M];M&&a&&(ae=Pt(ae,Lr(a))),X=hr(ae.length,X),U[M]=!c&&(a||_>=120&&ae.length>=120)?new Di(M&&ae):t}ae=n[0];var ce=-1,ye=U[0];e:for(;++ce<_&&se.length<X;){var Oe=ae[ce],Fe=a?a(Oe):Oe;if(Oe=c||Oe!==0?Oe:0,!(ye?Ls(ye,Fe):d(se,Fe,c))){for(M=C;--M;){var Qe=U[M];if(!(Qe?Ls(Qe,Fe):d(n[M],Fe,c)))continue e}ye&&ye.push(Fe),se.push(Oe)}}return se}function lv(n,a,c,d){return mn(n,function(_,C,M){a(d,c(_),C,M)}),d}function Ks(n,a,c){a=ri(a,n),n=Cd(n,a);var d=n==null?n:n[vn(Zr(a))];return d==null?t:sr(d,n,c)}function Hf(n){return Lt(n)&&mr(n)==fe}function hv(n){return Lt(n)&&mr(n)==he}function fv(n){return Lt(n)&&mr(n)==q}function Vs(n,a,c,d,_){return n===a?!0:n==null||a==null||!Lt(n)&&!Lt(a)?n!==n&&a!==a:dv(n,a,c,d,Vs,_)}function dv(n,a,c,d,_,C){var M=We(n),U=We(a),X=M?Ie:fr(n),se=U?Ie:fr(a);X=X==fe?ke:X,se=se==fe?ke:se;var ae=X==ke,ce=se==ke,ye=X==se;if(ye&&ii(n)){if(!ii(a))return!1;M=!0,ae=!1}if(ye&&!ae)return C||(C=new cn),M||hs(n)?xd(n,a,c,d,_,C):Uv(n,a,X,c,d,_,C);if(!(c&m)){var Oe=ae&&dt.call(n,"__wrapped__"),Fe=ce&&dt.call(a,"__wrapped__");if(Oe||Fe){var Qe=Oe?n.value():n,Me=Fe?a.value():a;return C||(C=new cn),_(Qe,Me,c,d,C)}}return ye?(C||(C=new cn),Bv(n,a,c,d,_,C)):!1}function pv(n){return Lt(n)&&fr(n)==Te}function Eu(n,a,c,d){var _=c.length,C=_,M=!d;if(n==null)return!C;for(n=wt(n);_--;){var U=c[_];if(M&&U[2]?U[1]!==n[U[0]]:!(U[0]in n))return!1}for(;++_<C;){U=c[_];var X=U[0],se=n[X],ae=U[1];if(M&&U[2]){if(se===t&&!(X in n))return!1}else{var ce=new cn;if(d)var ye=d(se,ae,X,n,a,ce);if(!(ye===t?Vs(ae,se,m|I,d,ce):ye))return!1}}return!0}function Kf(n){if(!Ct(n)||Jv(n))return!1;var a=Rn(n)?pb:Bc;return a.test(Ai(n))}function gv(n){return Lt(n)&&mr(n)==Ke}function yv(n){return Lt(n)&&fr(n)==Re}function mv(n){return Lt(n)&&Lo(n.length)&&!!mt[mr(n)]}function Vf(n){return typeof n=="function"?n:n==null?Tr:typeof n=="object"?We(n)?Yf(n[0],n[1]):Gf(n):pp(n)}function xu(n){if(!Ys(n))return wb(n);var a=[];for(var c in wt(n))dt.call(n,c)&&c!="constructor"&&a.push(c);return a}function bv(n){if(!Ct(n))return ew(n);var a=Ys(n),c=[];for(var d in n)d=="constructor"&&(a||!dt.call(n,d))||c.push(d);return c}function Su(n,a){return n<a}function Wf(n,a){var c=-1,d=Ar(n)?te(n.length):[];return ei(n,function(_,C,M){d[++c]=a(_,C,M)}),d}function Gf(n){var a=ku(n);return a.length==1&&a[0][2]?Pd(a[0][0],a[0][1]):function(c){return c===n||Eu(c,n,a)}}function Yf(n,a){return Bu(n)&&Od(a)?Pd(vn(n),a):function(c){var d=Xu(c,n);return d===t&&d===a?Zu(c,n):Vs(a,d,m|I)}}function _o(n,a,c,d,_){n!==a&&bu(a,function(C,M){if(_||(_=new cn),Ct(C))vv(n,a,M,c,_o,d,_);else{var U=d?d(zu(n,M),C,M+"",n,a,_):t;U===t&&(U=C),yu(n,M,U)}},Cr)}function vv(n,a,c,d,_,C,M){var U=zu(n,c),X=zu(a,c),se=M.get(X);if(se){yu(n,c,se);return}var ae=C?C(U,X,c+"",n,a,M):t,ce=ae===t;if(ce){var ye=We(X),Oe=!ye&&ii(X),Fe=!ye&&!Oe&&hs(X);ae=X,ye||Oe||Fe?We(U)?ae=U:qt(U)?ae=Pr(U):Oe?(ce=!1,ae=od(X,!0)):Fe?(ce=!1,ae=cd(X,!0)):ae=[]:Xs(X)||Ci(X)?(ae=U,Ci(U)?ae=ip(U):(!Ct(U)||Rn(U))&&(ae=Id(X))):ce=!1}ce&&(M.set(X,ae),_(ae,X,d,C,M),M.delete(X)),yu(n,c,ae)}function Jf(n,a){var c=n.length;if(c)return a+=a<0?c:0,Nn(a,c)?n[a]:t}function Xf(n,a,c){a.length?a=Pt(a,function(C){return We(C)?function(M){return Oi(M,C.length===1?C[0]:C)}:C}):a=[Tr];var d=-1;a=Pt(a,Lr(Ne()));var _=Wf(n,function(C,M,U){var X=Pt(a,function(se){return se(C)});return{criteria:X,index:++d,value:C}});return Vm(_,function(C,M){return $v(C,M,c)})}function wv(n,a){return Zf(n,a,function(c,d){return Zu(n,d)})}function Zf(n,a,c){for(var d=-1,_=a.length,C={};++d<_;){var M=a[d],U=Oi(n,M);c(U,M)&&Ws(C,ri(M,n),U)}return C}function _v(n){return function(a){return Oi(a,n)}}function Du(n,a,c,d){var _=d?Km:es,C=-1,M=a.length,U=n;for(n===a&&(a=Pr(a)),c&&(U=Pt(n,Lr(c)));++C<M;)for(var X=0,se=a[C],ae=c?c(se):se;(X=_(U,ae,X,d))>-1;)U!==n&&lo.call(U,X,1),lo.call(n,X,1);return n}function Qf(n,a){for(var c=n?a.length:0,d=c-1;c--;){var _=a[c];if(c==d||_!==C){var C=_;Nn(_)?lo.call(n,_,1):Au(n,_)}}return n}function Iu(n,a){return n+po(Nf()*(a-n+1))}function Ev(n,a,c,d){for(var _=-1,C=nr(fo((a-n)/(c||1)),0),M=te(C);C--;)M[d?C:++_]=n,n+=c;return M}function Ou(n,a){var c="";if(!n||a<1||a>V)return c;do a%2&&(c+=n),a=po(a/2),a&&(n+=n);while(a);return c}function et(n,a){return Hu(Ad(n,a,Tr),n+"")}function xv(n){return Mf(fs(n))}function Sv(n,a){var c=fs(n);return To(c,Ii(a,0,c.length))}function Ws(n,a,c,d){if(!Ct(n))return n;a=ri(a,n);for(var _=-1,C=a.length,M=C-1,U=n;U!=null&&++_<C;){var X=vn(a[_]),se=c;if(X==="__proto__"||X==="constructor"||X==="prototype")return n;if(_!=M){var ae=U[X];se=d?d(ae,X,U):t,se===t&&(se=Ct(ae)?ae:Nn(a[_+1])?[]:{})}zs(U,X,se),U=U[X]}return n}var ed=go?function(n,a){return go.set(n,a),n}:Tr,Dv=ho?function(n,a){return ho(n,"toString",{configurable:!0,enumerable:!1,value:el(a),writable:!0})}:Tr;function Iv(n){return To(fs(n))}function Xr(n,a,c){var d=-1,_=n.length;a<0&&(a=-a>_?0:_+a),c=c>_?_:c,c<0&&(c+=_),_=a>c?0:c-a>>>0,a>>>=0;for(var C=te(_);++d<_;)C[d]=n[d+a];return C}function Ov(n,a){var c;return ei(n,function(d,_,C){return c=a(d,_,C),!c}),!!c}function Eo(n,a,c){var d=0,_=n==null?d:n.length;if(typeof a=="number"&&a===a&&_<=ie){for(;d<_;){var C=d+_>>>1,M=n[C];M!==null&&!kr(M)&&(c?M<=a:M<a)?d=C+1:_=C}return _}return Pu(n,a,Tr,c)}function Pu(n,a,c,d){var _=0,C=n==null?0:n.length;if(C===0)return 0;a=c(a);for(var M=a!==a,U=a===null,X=kr(a),se=a===t;_<C;){var ae=po((_+C)/2),ce=c(n[ae]),ye=ce!==t,Oe=ce===null,Fe=ce===ce,Qe=kr(ce);if(M)var Me=d||Fe;else se?Me=Fe&&(d||ye):U?Me=Fe&&ye&&(d||!Oe):X?Me=Fe&&ye&&!Oe&&(d||!Qe):Oe||Qe?Me=!1:Me=d?ce<=a:ce<a;Me?_=ae+1:C=ae}return hr(C,le)}function td(n,a){for(var c=-1,d=n.length,_=0,C=[];++c<d;){var M=n[c],U=a?a(M):M;if(!c||!un(U,X)){var X=U;C[_++]=M===0?0:M}}return C}function rd(n){return typeof n=="number"?n:kr(n)?ee:+n}function jr(n){if(typeof n=="string")return n;if(We(n))return Pt(n,jr)+"";if(kr(n))return Rf?Rf.call(n):"";var a=n+"";return a=="0"&&1/n==-j?"-0":a}function ti(n,a,c){var d=-1,_=eo,C=n.length,M=!0,U=[],X=U;if(c)M=!1,_=nu;else if(C>=s){var se=a?null:jv(n);if(se)return ro(se);M=!1,_=Ls,X=new Di}else X=a?[]:U;e:for(;++d<C;){var ae=n[d],ce=a?a(ae):ae;if(ae=c||ae!==0?ae:0,M&&ce===ce){for(var ye=X.length;ye--;)if(X[ye]===ce)continue e;a&&X.push(ce),U.push(ae)}else _(X,ce,c)||(X!==U&&X.push(ce),U.push(ae))}return U}function Au(n,a){return a=ri(a,n),n=Cd(n,a),n==null||delete n[vn(Zr(a))]}function nd(n,a,c,d){return Ws(n,a,c(Oi(n,a)),d)}function xo(n,a,c,d){for(var _=n.length,C=d?_:-1;(d?C--:++C<_)&&a(n[C],C,n););return c?Xr(n,d?0:C,d?C+1:_):Xr(n,d?C+1:0,d?_:C)}function id(n,a){var c=n;return c instanceof st&&(c=c.value()),iu(a,function(d,_){return _.func.apply(_.thisArg,Xn([d],_.args))},c)}function Cu(n,a,c){var d=n.length;if(d<2)return d?ti(n[0]):[];for(var _=-1,C=te(d);++_<d;)for(var M=n[_],U=-1;++U<d;)U!=_&&(C[_]=Hs(C[_]||M,n[U],a,c));return ti(cr(C,1),a,c)}function sd(n,a,c){for(var d=-1,_=n.length,C=a.length,M={};++d<_;){var U=d<C?a[d]:t;c(M,n[d],U)}return M}function Tu(n){return qt(n)?n:[]}function $u(n){return typeof n=="function"?n:Tr}function ri(n,a){return We(n)?n:Bu(n,a)?[n]:Rd(ft(n))}var Pv=et;function ni(n,a,c){var d=n.length;return c=c===t?d:c,!a&&c>=d?n:Xr(n,a,c)}var ad=gb||function(n){return ot.clearTimeout(n)};function od(n,a){if(a)return n.slice();var c=n.length,d=Pf?Pf(c):new n.constructor(c);return n.copy(d),d}function Nu(n){var a=new n.constructor(n.byteLength);return new co(a).set(new co(n)),a}function Av(n,a){var c=a?Nu(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.byteLength)}function Cv(n){var a=new n.constructor(n.source,Kr.exec(n));return a.lastIndex=n.lastIndex,a}function Tv(n){return qs?wt(qs.call(n)):{}}function cd(n,a){var c=a?Nu(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.length)}function ud(n,a){if(n!==a){var c=n!==t,d=n===null,_=n===n,C=kr(n),M=a!==t,U=a===null,X=a===a,se=kr(a);if(!U&&!se&&!C&&n>a||C&&M&&X&&!U&&!se||d&&M&&X||!c&&X||!_)return 1;if(!d&&!C&&!se&&n<a||se&&c&&_&&!d&&!C||U&&c&&_||!M&&_||!X)return-1}return 0}function $v(n,a,c){for(var d=-1,_=n.criteria,C=a.criteria,M=_.length,U=c.length;++d<M;){var X=ud(_[d],C[d]);if(X){if(d>=U)return X;var se=c[d];return X*(se=="desc"?-1:1)}}return n.index-a.index}function ld(n,a,c,d){for(var _=-1,C=n.length,M=c.length,U=-1,X=a.length,se=nr(C-M,0),ae=te(X+se),ce=!d;++U<X;)ae[U]=a[U];for(;++_<M;)(ce||_<C)&&(ae[c[_]]=n[_]);for(;se--;)ae[U++]=n[_++];return ae}function hd(n,a,c,d){for(var _=-1,C=n.length,M=-1,U=c.length,X=-1,se=a.length,ae=nr(C-U,0),ce=te(ae+se),ye=!d;++_<ae;)ce[_]=n[_];for(var Oe=_;++X<se;)ce[Oe+X]=a[X];for(;++M<U;)(ye||_<C)&&(ce[Oe+c[M]]=n[_++]);return ce}function Pr(n,a){var c=-1,d=n.length;for(a||(a=te(d));++c<d;)a[c]=n[c];return a}function bn(n,a,c,d){var _=!c;c||(c={});for(var C=-1,M=a.length;++C<M;){var U=a[C],X=d?d(c[U],n[U],U,c,n):t;X===t&&(X=n[U]),_?Cn(c,U,X):zs(c,U,X)}return c}function Nv(n,a){return bn(n,Uu(n),a)}function Rv(n,a){return bn(n,Sd(n),a)}function So(n,a){return function(c,d){var _=We(c)?km:rv,C=a?a():{};return _(c,n,Ne(d,2),C)}}function cs(n){return et(function(a,c){var d=-1,_=c.length,C=_>1?c[_-1]:t,M=_>2?c[2]:t;for(C=n.length>3&&typeof C=="function"?(_--,C):t,M&&br(c[0],c[1],M)&&(C=_<3?t:C,_=1),a=wt(a);++d<_;){var U=c[d];U&&n(a,U,d,C)}return a})}function fd(n,a){return function(c,d){if(c==null)return c;if(!Ar(c))return n(c,d);for(var _=c.length,C=a?_:-1,M=wt(c);(a?C--:++C<_)&&d(M[C],C,M)!==!1;);return c}}function dd(n){return function(a,c,d){for(var _=-1,C=wt(a),M=d(a),U=M.length;U--;){var X=M[n?U:++_];if(c(C[X],X,C)===!1)break}return a}}function Fv(n,a,c){var d=a&A,_=Gs(n);function C(){var M=this&&this!==ot&&this instanceof C?_:n;return M.apply(d?c:this,arguments)}return C}function pd(n){return function(a){a=ft(a);var c=ts(a)?on(a):t,d=c?c[0]:a.charAt(0),_=c?ni(c,1).join(""):a.slice(1);return d[n]()+_}}function us(n){return function(a){return iu(fp(hp(a).replace(Fs,"")),n,"")}}function Gs(n){return function(){var a=arguments;switch(a.length){case 0:return new n;case 1:return new n(a[0]);case 2:return new n(a[0],a[1]);case 3:return new n(a[0],a[1],a[2]);case 4:return new n(a[0],a[1],a[2],a[3]);case 5:return new n(a[0],a[1],a[2],a[3],a[4]);case 6:return new n(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new n(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=os(n.prototype),d=n.apply(c,a);return Ct(d)?d:c}}function Mv(n,a,c){var d=Gs(n);function _(){for(var C=arguments.length,M=te(C),U=C,X=ls(_);U--;)M[U]=arguments[U];var se=C<3&&M[0]!==X&&M[C-1]!==X?[]:Zn(M,X);if(C-=se.length,C<c)return vd(n,a,Do,_.placeholder,t,M,se,t,t,c-C);var ae=this&&this!==ot&&this instanceof _?d:n;return sr(ae,this,M)}return _}function gd(n){return function(a,c,d){var _=wt(a);if(!Ar(a)){var C=Ne(c,3);a=ar(a),c=function(U){return C(_[U],U,_)}}var M=n(a,c,d);return M>-1?_[C?a[M]:M]:t}}function yd(n){return $n(function(a){var c=a.length,d=c,_=Yr.prototype.thru;for(n&&a.reverse();d--;){var C=a[d];if(typeof C!="function")throw new Gr(u);if(_&&!M&&Ao(C)=="wrapper")var M=new Yr([],!0)}for(d=M?d:c;++d<c;){C=a[d];var U=Ao(C),X=U=="wrapper"?ju(C):t;X&&qu(X[0])&&X[1]==(h|N|T|E)&&!X[4].length&&X[9]==1?M=M[Ao(X[0])].apply(M,X[3]):M=C.length==1&&qu(C)?M[U]():M.thru(C)}return function(){var se=arguments,ae=se[0];if(M&&se.length==1&&We(ae))return M.plant(ae).value();for(var ce=0,ye=c?a[ce].apply(this,se):ae;++ce<c;)ye=a[ce].call(this,ye);return ye}})}function Do(n,a,c,d,_,C,M,U,X,se){var ae=a&h,ce=a&A,ye=a&z,Oe=a&(N|P),Fe=a&K,Qe=ye?t:Gs(n);function Me(){for(var it=arguments.length,ct=te(it),Ur=it;Ur--;)ct[Ur]=arguments[Ur];if(Oe)var vr=ls(Me),Br=Gm(ct,vr);if(d&&(ct=ld(ct,d,_,Oe)),C&&(ct=hd(ct,C,M,Oe)),it-=Br,Oe&&it<se){var zt=Zn(ct,vr);return vd(n,a,Do,Me.placeholder,c,ct,zt,U,X,se-it)}var ln=ce?c:this,Mn=ye?ln[n]:n;return it=ct.length,U?ct=rw(ct,U):Fe&&it>1&&ct.reverse(),ae&&X<it&&(ct.length=X),this&&this!==ot&&this instanceof Me&&(Mn=Qe||Gs(Mn)),Mn.apply(ln,ct)}return Me}function md(n,a){return function(c,d){return lv(c,n,a(d),{})}}function Io(n,a){return function(c,d){var _;if(c===t&&d===t)return a;if(c!==t&&(_=c),d!==t){if(_===t)return d;typeof c=="string"||typeof d=="string"?(c=jr(c),d=jr(d)):(c=rd(c),d=rd(d)),_=n(c,d)}return _}}function Ru(n){return $n(function(a){return a=Pt(a,Lr(Ne())),et(function(c){var d=this;return n(a,function(_){return sr(_,d,c)})})})}function Oo(n,a){a=a===t?" ":jr(a);var c=a.length;if(c<2)return c?Ou(a,n):a;var d=Ou(a,fo(n/rs(a)));return ts(a)?ni(on(d),0,n).join(""):d.slice(0,n)}function Lv(n,a,c,d){var _=a&A,C=Gs(n);function M(){for(var U=-1,X=arguments.length,se=-1,ae=d.length,ce=te(ae+X),ye=this&&this!==ot&&this instanceof M?C:n;++se<ae;)ce[se]=d[se];for(;X--;)ce[se++]=arguments[++U];return sr(ye,_?c:this,ce)}return M}function bd(n){return function(a,c,d){return d&&typeof d!="number"&&br(a,c,d)&&(c=d=t),a=Fn(a),c===t?(c=a,a=0):c=Fn(c),d=d===t?a<c?1:-1:Fn(d),Ev(a,c,d,n)}}function Po(n){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Qr(a),c=Qr(c)),n(a,c)}}function vd(n,a,c,d,_,C,M,U,X,se){var ae=a&N,ce=ae?M:t,ye=ae?t:M,Oe=ae?C:t,Fe=ae?t:C;a|=ae?T:x,a&=~(ae?x:T),a&F||(a&=~(A|z));var Qe=[n,a,_,Oe,ce,Fe,ye,U,X,se],Me=c.apply(t,Qe);return qu(n)&&Td(Me,Qe),Me.placeholder=d,$d(Me,n,a)}function Fu(n){var a=rr[n];return function(c,d){if(c=Qr(c),d=d==null?0:hr(Ze(d),292),d&&$f(c)){var _=(ft(c)+"e").split("e"),C=a(_[0]+"e"+(+_[1]+d));return _=(ft(C)+"e").split("e"),+(_[0]+"e"+(+_[1]-d))}return a(c)}}var jv=ss&&1/ro(new ss([,-0]))[1]==j?function(n){return new ss(n)}:nl;function wd(n){return function(a){var c=fr(a);return c==Te?hu(a):c==Re?tb(a):Wm(a,n(a))}}function Tn(n,a,c,d,_,C,M,U){var X=a&z;if(!X&&typeof n!="function")throw new Gr(u);var se=d?d.length:0;if(se||(a&=~(T|x),d=_=t),M=M===t?M:nr(Ze(M),0),U=U===t?U:Ze(U),se-=_?_.length:0,a&x){var ae=d,ce=_;d=_=t}var ye=X?t:ju(n),Oe=[n,a,c,d,_,ae,ce,C,M,U];if(ye&&Qv(Oe,ye),n=Oe[0],a=Oe[1],c=Oe[2],d=Oe[3],_=Oe[4],U=Oe[9]=Oe[9]===t?X?0:n.length:nr(Oe[9]-se,0),!U&&a&(N|P)&&(a&=~(N|P)),!a||a==A)var Fe=Fv(n,a,c);else a==N||a==P?Fe=Mv(n,a,U):(a==T||a==(A|T))&&!_.length?Fe=Lv(n,a,c,d):Fe=Do.apply(t,Oe);var Qe=ye?ed:Td;return $d(Qe(Fe,Oe),n,a)}function _d(n,a,c,d){return n===t||un(n,is[c])&&!dt.call(d,c)?a:n}function Ed(n,a,c,d,_,C){return Ct(n)&&Ct(a)&&(C.set(a,n),_o(n,a,t,Ed,C),C.delete(a)),n}function kv(n){return Xs(n)?t:n}function xd(n,a,c,d,_,C){var M=c&m,U=n.length,X=a.length;if(U!=X&&!(M&&X>U))return!1;var se=C.get(n),ae=C.get(a);if(se&&ae)return se==a&&ae==n;var ce=-1,ye=!0,Oe=c&I?new Di:t;for(C.set(n,a),C.set(a,n);++ce<U;){var Fe=n[ce],Qe=a[ce];if(d)var Me=M?d(Qe,Fe,ce,a,n,C):d(Fe,Qe,ce,n,a,C);if(Me!==t){if(Me)continue;ye=!1;break}if(Oe){if(!su(a,function(it,ct){if(!Ls(Oe,ct)&&(Fe===it||_(Fe,it,c,d,C)))return Oe.push(ct)})){ye=!1;break}}else if(!(Fe===Qe||_(Fe,Qe,c,d,C))){ye=!1;break}}return C.delete(n),C.delete(a),ye}function Uv(n,a,c,d,_,C,M){switch(c){case we:if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case he:return!(n.byteLength!=a.byteLength||!C(new co(n),new co(a)));case Z:case q:case Je:return un(+n,+a);case L:return n.name==a.name&&n.message==a.message;case Ke:case $e:return n==a+"";case Te:var U=hu;case Re:var X=d&m;if(U||(U=ro),n.size!=a.size&&!X)return!1;var se=M.get(n);if(se)return se==a;d|=I,M.set(n,a);var ae=xd(U(n),U(a),d,_,C,M);return M.delete(n),ae;case Le:if(qs)return qs.call(n)==qs.call(a)}return!1}function Bv(n,a,c,d,_,C){var M=c&m,U=Mu(n),X=U.length,se=Mu(a),ae=se.length;if(X!=ae&&!M)return!1;for(var ce=X;ce--;){var ye=U[ce];if(!(M?ye in a:dt.call(a,ye)))return!1}var Oe=C.get(n),Fe=C.get(a);if(Oe&&Fe)return Oe==a&&Fe==n;var Qe=!0;C.set(n,a),C.set(a,n);for(var Me=M;++ce<X;){ye=U[ce];var it=n[ye],ct=a[ye];if(d)var Ur=M?d(ct,it,ye,a,n,C):d(it,ct,ye,n,a,C);if(!(Ur===t?it===ct||_(it,ct,c,d,C):Ur)){Qe=!1;break}Me||(Me=ye=="constructor")}if(Qe&&!Me){var vr=n.constructor,Br=a.constructor;vr!=Br&&"constructor"in n&&"constructor"in a&&!(typeof vr=="function"&&vr instanceof vr&&typeof Br=="function"&&Br instanceof Br)&&(Qe=!1)}return C.delete(n),C.delete(a),Qe}function $n(n){return Hu(Ad(n,t,jd),n+"")}function Mu(n){return zf(n,ar,Uu)}function Lu(n){return zf(n,Cr,Sd)}var ju=go?function(n){return go.get(n)}:nl;function Ao(n){for(var a=n.name+"",c=as[a],d=dt.call(as,a)?c.length:0;d--;){var _=c[d],C=_.func;if(C==null||C==n)return _.name}return a}function ls(n){var a=dt.call(O,"placeholder")?O:n;return a.placeholder}function Ne(){var n=O.iteratee||tl;return n=n===tl?Vf:n,arguments.length?n(arguments[0],arguments[1]):n}function Co(n,a){var c=n.__data__;return Yv(a)?c[typeof a=="string"?"string":"hash"]:c.map}function ku(n){for(var a=ar(n),c=a.length;c--;){var d=a[c],_=n[d];a[c]=[d,_,Od(_)]}return a}function Pi(n,a){var c=Zm(n,a);return Kf(c)?c:t}function qv(n){var a=dt.call(n,xi),c=n[xi];try{n[xi]=t;var d=!0}catch{}var _=ao.call(n);return d&&(a?n[xi]=c:delete n[xi]),_}var Uu=du?function(n){return n==null?[]:(n=wt(n),Jn(du(n),function(a){return Cf.call(n,a)}))}:il,Sd=du?function(n){for(var a=[];n;)Xn(a,Uu(n)),n=uo(n);return a}:il,fr=mr;(pu&&fr(new pu(new ArrayBuffer(1)))!=we||ks&&fr(new ks)!=Te||gu&&fr(gu.resolve())!=pt||ss&&fr(new ss)!=Re||Us&&fr(new Us)!=pe)&&(fr=function(n){var a=mr(n),c=a==ke?n.constructor:t,d=c?Ai(c):"";if(d)switch(d){case Sb:return we;case Db:return Te;case Ib:return pt;case Ob:return Re;case Pb:return pe}return a});function zv(n,a,c){for(var d=-1,_=c.length;++d<_;){var C=c[d],M=C.size;switch(C.type){case"drop":n+=M;break;case"dropRight":a-=M;break;case"take":a=hr(a,n+M);break;case"takeRight":n=nr(n,a-M);break}}return{start:n,end:a}}function Hv(n){var a=n.match(Et);return a?a[1].split(Jt):[]}function Dd(n,a,c){a=ri(a,n);for(var d=-1,_=a.length,C=!1;++d<_;){var M=vn(a[d]);if(!(C=n!=null&&c(n,M)))break;n=n[M]}return C||++d!=_?C:(_=n==null?0:n.length,!!_&&Lo(_)&&Nn(M,_)&&(We(n)||Ci(n)))}function Kv(n){var a=n.length,c=new n.constructor(a);return a&&typeof n[0]=="string"&&dt.call(n,"index")&&(c.index=n.index,c.input=n.input),c}function Id(n){return typeof n.constructor=="function"&&!Ys(n)?os(uo(n)):{}}function Vv(n,a,c){var d=n.constructor;switch(a){case he:return Nu(n);case Z:case q:return new d(+n);case we:return Av(n,c);case je:case Ae:case Ee:case de:case ze:case tt:case rt:case pr:case Ir:return cd(n,c);case Te:return new d;case Je:case $e:return new d(n);case Ke:return Cv(n);case Re:return new d;case Le:return Tv(n)}}function Wv(n,a){var c=a.length;if(!c)return n;var d=c-1;return a[d]=(c>1?"& ":"")+a[d],a=a.join(c>2?", ":" "),n.replace(Mt,`{
/* [wrapped with `+a+`] */
`)}function Gv(n){return We(n)||Ci(n)||!!(Tf&&n&&n[Tf])}function Nn(n,a){var c=typeof n;return a=a??V,!!a&&(c=="number"||c!="symbol"&&zc.test(n))&&n>-1&&n%1==0&&n<a}function br(n,a,c){if(!Ct(c))return!1;var d=typeof a;return(d=="number"?Ar(c)&&Nn(a,c.length):d=="string"&&a in c)?un(c[a],n):!1}function Bu(n,a){if(We(n))return!1;var c=typeof n;return c=="number"||c=="symbol"||c=="boolean"||n==null||kr(n)?!0:Wt.test(n)||!Ot.test(n)||a!=null&&n in wt(a)}function Yv(n){var a=typeof n;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null}function qu(n){var a=Ao(n),c=O[a];if(typeof c!="function"||!(a in st.prototype))return!1;if(n===c)return!0;var d=ju(c);return!!d&&n===d[0]}function Jv(n){return!!Of&&Of in n}var Xv=io?Rn:sl;function Ys(n){var a=n&&n.constructor,c=typeof a=="function"&&a.prototype||is;return n===c}function Od(n){return n===n&&!Ct(n)}function Pd(n,a){return function(c){return c==null?!1:c[n]===a&&(a!==t||n in wt(c))}}function Zv(n){var a=Fo(n,function(d){return c.size===g&&c.clear(),d}),c=a.cache;return a}function Qv(n,a){var c=n[1],d=a[1],_=c|d,C=_<(A|z|h),M=d==h&&c==N||d==h&&c==E&&n[7].length<=a[8]||d==(h|E)&&a[7].length<=a[8]&&c==N;if(!(C||M))return n;d&A&&(n[2]=a[2],_|=c&A?0:F);var U=a[3];if(U){var X=n[3];n[3]=X?ld(X,U,a[4]):U,n[4]=X?Zn(n[3],b):a[4]}return U=a[5],U&&(X=n[5],n[5]=X?hd(X,U,a[6]):U,n[6]=X?Zn(n[5],b):a[6]),U=a[7],U&&(n[7]=U),d&h&&(n[8]=n[8]==null?a[8]:hr(n[8],a[8])),n[9]==null&&(n[9]=a[9]),n[0]=a[0],n[1]=_,n}function ew(n){var a=[];if(n!=null)for(var c in wt(n))a.push(c);return a}function tw(n){return ao.call(n)}function Ad(n,a,c){return a=nr(a===t?n.length-1:a,0),function(){for(var d=arguments,_=-1,C=nr(d.length-a,0),M=te(C);++_<C;)M[_]=d[a+_];_=-1;for(var U=te(a+1);++_<a;)U[_]=d[_];return U[a]=c(M),sr(n,this,U)}}function Cd(n,a){return a.length<2?n:Oi(n,Xr(a,0,-1))}function rw(n,a){for(var c=n.length,d=hr(a.length,c),_=Pr(n);d--;){var C=a[d];n[d]=Nn(C,c)?_[C]:t}return n}function zu(n,a){if(!(a==="constructor"&&typeof n[a]=="function")&&a!="__proto__")return n[a]}var Td=Nd(ed),Js=mb||function(n,a){return ot.setTimeout(n,a)},Hu=Nd(Dv);function $d(n,a,c){var d=a+"";return Hu(n,Wv(d,nw(Hv(d),c)))}function Nd(n){var a=0,c=0;return function(){var d=_b(),_=W-(d-c);if(c=d,_>0){if(++a>=G)return arguments[0]}else a=0;return n.apply(t,arguments)}}function To(n,a){var c=-1,d=n.length,_=d-1;for(a=a===t?d:a;++c<a;){var C=Iu(c,_),M=n[C];n[C]=n[c],n[c]=M}return n.length=a,n}var Rd=Zv(function(n){var a=[];return n.charCodeAt(0)===46&&a.push(""),n.replace(Gt,function(c,d,_,C){a.push(_?C.replace(Lc,"$1"):d||c)}),a});function vn(n){if(typeof n=="string"||kr(n))return n;var a=n+"";return a=="0"&&1/n==-j?"-0":a}function Ai(n){if(n!=null){try{return so.call(n)}catch{}try{return n+""}catch{}}return""}function nw(n,a){return Wr(De,function(c){var d="_."+c[0];a&c[1]&&!eo(n,d)&&n.push(d)}),n.sort()}function Fd(n){if(n instanceof st)return n.clone();var a=new Yr(n.__wrapped__,n.__chain__);return a.__actions__=Pr(n.__actions__),a.__index__=n.__index__,a.__values__=n.__values__,a}function iw(n,a,c){(c?br(n,a,c):a===t)?a=1:a=nr(Ze(a),0);var d=n==null?0:n.length;if(!d||a<1)return[];for(var _=0,C=0,M=te(fo(d/a));_<d;)M[C++]=Xr(n,_,_+=a);return M}function sw(n){for(var a=-1,c=n==null?0:n.length,d=0,_=[];++a<c;){var C=n[a];C&&(_[d++]=C)}return _}function aw(){var n=arguments.length;if(!n)return[];for(var a=te(n-1),c=arguments[0],d=n;d--;)a[d-1]=arguments[d];return Xn(We(c)?Pr(c):[c],cr(a,1))}var ow=et(function(n,a){return qt(n)?Hs(n,cr(a,1,qt,!0)):[]}),cw=et(function(n,a){var c=Zr(a);return qt(c)&&(c=t),qt(n)?Hs(n,cr(a,1,qt,!0),Ne(c,2)):[]}),uw=et(function(n,a){var c=Zr(a);return qt(c)&&(c=t),qt(n)?Hs(n,cr(a,1,qt,!0),t,c):[]});function lw(n,a,c){var d=n==null?0:n.length;return d?(a=c||a===t?1:Ze(a),Xr(n,a<0?0:a,d)):[]}function hw(n,a,c){var d=n==null?0:n.length;return d?(a=c||a===t?1:Ze(a),a=d-a,Xr(n,0,a<0?0:a)):[]}function fw(n,a){return n&&n.length?xo(n,Ne(a,3),!0,!0):[]}function dw(n,a){return n&&n.length?xo(n,Ne(a,3),!0):[]}function pw(n,a,c,d){var _=n==null?0:n.length;return _?(c&&typeof c!="number"&&br(n,a,c)&&(c=0,d=_),av(n,a,c,d)):[]}function Md(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var _=c==null?0:Ze(c);return _<0&&(_=nr(d+_,0)),to(n,Ne(a,3),_)}function Ld(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var _=d-1;return c!==t&&(_=Ze(c),_=c<0?nr(d+_,0):hr(_,d-1)),to(n,Ne(a,3),_,!0)}function jd(n){var a=n==null?0:n.length;return a?cr(n,1):[]}function gw(n){var a=n==null?0:n.length;return a?cr(n,j):[]}function yw(n,a){var c=n==null?0:n.length;return c?(a=a===t?1:Ze(a),cr(n,a)):[]}function mw(n){for(var a=-1,c=n==null?0:n.length,d={};++a<c;){var _=n[a];d[_[0]]=_[1]}return d}function kd(n){return n&&n.length?n[0]:t}function bw(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var _=c==null?0:Ze(c);return _<0&&(_=nr(d+_,0)),es(n,a,_)}function vw(n){var a=n==null?0:n.length;return a?Xr(n,0,-1):[]}var ww=et(function(n){var a=Pt(n,Tu);return a.length&&a[0]===n[0]?_u(a):[]}),_w=et(function(n){var a=Zr(n),c=Pt(n,Tu);return a===Zr(c)?a=t:c.pop(),c.length&&c[0]===n[0]?_u(c,Ne(a,2)):[]}),Ew=et(function(n){var a=Zr(n),c=Pt(n,Tu);return a=typeof a=="function"?a:t,a&&c.pop(),c.length&&c[0]===n[0]?_u(c,t,a):[]});function xw(n,a){return n==null?"":vb.call(n,a)}function Zr(n){var a=n==null?0:n.length;return a?n[a-1]:t}function Sw(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var _=d;return c!==t&&(_=Ze(c),_=_<0?nr(d+_,0):hr(_,d-1)),a===a?nb(n,a,_):to(n,vf,_,!0)}function Dw(n,a){return n&&n.length?Jf(n,Ze(a)):t}var Iw=et(Ud);function Ud(n,a){return n&&n.length&&a&&a.length?Du(n,a):n}function Ow(n,a,c){return n&&n.length&&a&&a.length?Du(n,a,Ne(c,2)):n}function Pw(n,a,c){return n&&n.length&&a&&a.length?Du(n,a,t,c):n}var Aw=$n(function(n,a){var c=n==null?0:n.length,d=mu(n,a);return Qf(n,Pt(a,function(_){return Nn(_,c)?+_:_}).sort(ud)),d});function Cw(n,a){var c=[];if(!(n&&n.length))return c;var d=-1,_=[],C=n.length;for(a=Ne(a,3);++d<C;){var M=n[d];a(M,d,n)&&(c.push(M),_.push(d))}return Qf(n,_),c}function Ku(n){return n==null?n:xb.call(n)}function Tw(n,a,c){var d=n==null?0:n.length;return d?(c&&typeof c!="number"&&br(n,a,c)?(a=0,c=d):(a=a==null?0:Ze(a),c=c===t?d:Ze(c)),Xr(n,a,c)):[]}function $w(n,a){return Eo(n,a)}function Nw(n,a,c){return Pu(n,a,Ne(c,2))}function Rw(n,a){var c=n==null?0:n.length;if(c){var d=Eo(n,a);if(d<c&&un(n[d],a))return d}return-1}function Fw(n,a){return Eo(n,a,!0)}function Mw(n,a,c){return Pu(n,a,Ne(c,2),!0)}function Lw(n,a){var c=n==null?0:n.length;if(c){var d=Eo(n,a,!0)-1;if(un(n[d],a))return d}return-1}function jw(n){return n&&n.length?td(n):[]}function kw(n,a){return n&&n.length?td(n,Ne(a,2)):[]}function Uw(n){var a=n==null?0:n.length;return a?Xr(n,1,a):[]}function Bw(n,a,c){return n&&n.length?(a=c||a===t?1:Ze(a),Xr(n,0,a<0?0:a)):[]}function qw(n,a,c){var d=n==null?0:n.length;return d?(a=c||a===t?1:Ze(a),a=d-a,Xr(n,a<0?0:a,d)):[]}function zw(n,a){return n&&n.length?xo(n,Ne(a,3),!1,!0):[]}function Hw(n,a){return n&&n.length?xo(n,Ne(a,3)):[]}var Kw=et(function(n){return ti(cr(n,1,qt,!0))}),Vw=et(function(n){var a=Zr(n);return qt(a)&&(a=t),ti(cr(n,1,qt,!0),Ne(a,2))}),Ww=et(function(n){var a=Zr(n);return a=typeof a=="function"?a:t,ti(cr(n,1,qt,!0),t,a)});function Gw(n){return n&&n.length?ti(n):[]}function Yw(n,a){return n&&n.length?ti(n,Ne(a,2)):[]}function Jw(n,a){return a=typeof a=="function"?a:t,n&&n.length?ti(n,t,a):[]}function Vu(n){if(!(n&&n.length))return[];var a=0;return n=Jn(n,function(c){if(qt(c))return a=nr(c.length,a),!0}),uu(a,function(c){return Pt(n,au(c))})}function Bd(n,a){if(!(n&&n.length))return[];var c=Vu(n);return a==null?c:Pt(c,function(d){return sr(a,t,d)})}var Xw=et(function(n,a){return qt(n)?Hs(n,a):[]}),Zw=et(function(n){return Cu(Jn(n,qt))}),Qw=et(function(n){var a=Zr(n);return qt(a)&&(a=t),Cu(Jn(n,qt),Ne(a,2))}),e1=et(function(n){var a=Zr(n);return a=typeof a=="function"?a:t,Cu(Jn(n,qt),t,a)}),t1=et(Vu);function r1(n,a){return sd(n||[],a||[],zs)}function n1(n,a){return sd(n||[],a||[],Ws)}var i1=et(function(n){var a=n.length,c=a>1?n[a-1]:t;return c=typeof c=="function"?(n.pop(),c):t,Bd(n,c)});function qd(n){var a=O(n);return a.__chain__=!0,a}function s1(n,a){return a(n),n}function $o(n,a){return a(n)}var a1=$n(function(n){var a=n.length,c=a?n[0]:0,d=this.__wrapped__,_=function(C){return mu(C,n)};return a>1||this.__actions__.length||!(d instanceof st)||!Nn(c)?this.thru(_):(d=d.slice(c,+c+(a?1:0)),d.__actions__.push({func:$o,args:[_],thisArg:t}),new Yr(d,this.__chain__).thru(function(C){return a&&!C.length&&C.push(t),C}))});function o1(){return qd(this)}function c1(){return new Yr(this.value(),this.__chain__)}function u1(){this.__values__===t&&(this.__values__=rp(this.value()));var n=this.__index__>=this.__values__.length,a=n?t:this.__values__[this.__index__++];return{done:n,value:a}}function l1(){return this}function h1(n){for(var a,c=this;c instanceof mo;){var d=Fd(c);d.__index__=0,d.__values__=t,a?_.__wrapped__=d:a=d;var _=d;c=c.__wrapped__}return _.__wrapped__=n,a}function f1(){var n=this.__wrapped__;if(n instanceof st){var a=n;return this.__actions__.length&&(a=new st(this)),a=a.reverse(),a.__actions__.push({func:$o,args:[Ku],thisArg:t}),new Yr(a,this.__chain__)}return this.thru(Ku)}function d1(){return id(this.__wrapped__,this.__actions__)}var p1=So(function(n,a,c){dt.call(n,c)?++n[c]:Cn(n,c,1)});function g1(n,a,c){var d=We(n)?mf:sv;return c&&br(n,a,c)&&(a=t),d(n,Ne(a,3))}function y1(n,a){var c=We(n)?Jn:Bf;return c(n,Ne(a,3))}var m1=gd(Md),b1=gd(Ld);function v1(n,a){return cr(No(n,a),1)}function w1(n,a){return cr(No(n,a),j)}function _1(n,a,c){return c=c===t?1:Ze(c),cr(No(n,a),c)}function zd(n,a){var c=We(n)?Wr:ei;return c(n,Ne(a,3))}function Hd(n,a){var c=We(n)?Um:Uf;return c(n,Ne(a,3))}var E1=So(function(n,a,c){dt.call(n,c)?n[c].push(a):Cn(n,c,[a])});function x1(n,a,c,d){n=Ar(n)?n:fs(n),c=c&&!d?Ze(c):0;var _=n.length;return c<0&&(c=nr(_+c,0)),jo(n)?c<=_&&n.indexOf(a,c)>-1:!!_&&es(n,a,c)>-1}var S1=et(function(n,a,c){var d=-1,_=typeof a=="function",C=Ar(n)?te(n.length):[];return ei(n,function(M){C[++d]=_?sr(a,M,c):Ks(M,a,c)}),C}),D1=So(function(n,a,c){Cn(n,c,a)});function No(n,a){var c=We(n)?Pt:Wf;return c(n,Ne(a,3))}function I1(n,a,c,d){return n==null?[]:(We(a)||(a=a==null?[]:[a]),c=d?t:c,We(c)||(c=c==null?[]:[c]),Xf(n,a,c))}var O1=So(function(n,a,c){n[c?0:1].push(a)},function(){return[[],[]]});function P1(n,a,c){var d=We(n)?iu:_f,_=arguments.length<3;return d(n,Ne(a,4),c,_,ei)}function A1(n,a,c){var d=We(n)?Bm:_f,_=arguments.length<3;return d(n,Ne(a,4),c,_,Uf)}function C1(n,a){var c=We(n)?Jn:Bf;return c(n,Mo(Ne(a,3)))}function T1(n){var a=We(n)?Mf:xv;return a(n)}function $1(n,a,c){(c?br(n,a,c):a===t)?a=1:a=Ze(a);var d=We(n)?ev:Sv;return d(n,a)}function N1(n){var a=We(n)?tv:Iv;return a(n)}function R1(n){if(n==null)return 0;if(Ar(n))return jo(n)?rs(n):n.length;var a=fr(n);return a==Te||a==Re?n.size:xu(n).length}function F1(n,a,c){var d=We(n)?su:Ov;return c&&br(n,a,c)&&(a=t),d(n,Ne(a,3))}var M1=et(function(n,a){if(n==null)return[];var c=a.length;return c>1&&br(n,a[0],a[1])?a=[]:c>2&&br(a[0],a[1],a[2])&&(a=[a[0]]),Xf(n,cr(a,1),[])}),Ro=yb||function(){return ot.Date.now()};function L1(n,a){if(typeof a!="function")throw new Gr(u);return n=Ze(n),function(){if(--n<1)return a.apply(this,arguments)}}function Kd(n,a,c){return a=c?t:a,a=n&&a==null?n.length:a,Tn(n,h,t,t,t,t,a)}function Vd(n,a){var c;if(typeof a!="function")throw new Gr(u);return n=Ze(n),function(){return--n>0&&(c=a.apply(this,arguments)),n<=1&&(a=t),c}}var Wu=et(function(n,a,c){var d=A;if(c.length){var _=Zn(c,ls(Wu));d|=T}return Tn(n,d,a,c,_)}),Wd=et(function(n,a,c){var d=A|z;if(c.length){var _=Zn(c,ls(Wd));d|=T}return Tn(a,d,n,c,_)});function Gd(n,a,c){a=c?t:a;var d=Tn(n,N,t,t,t,t,t,a);return d.placeholder=Gd.placeholder,d}function Yd(n,a,c){a=c?t:a;var d=Tn(n,P,t,t,t,t,t,a);return d.placeholder=Yd.placeholder,d}function Jd(n,a,c){var d,_,C,M,U,X,se=0,ae=!1,ce=!1,ye=!0;if(typeof n!="function")throw new Gr(u);a=Qr(a)||0,Ct(c)&&(ae=!!c.leading,ce="maxWait"in c,C=ce?nr(Qr(c.maxWait)||0,a):C,ye="trailing"in c?!!c.trailing:ye);function Oe(zt){var ln=d,Mn=_;return d=_=t,se=zt,M=n.apply(Mn,ln),M}function Fe(zt){return se=zt,U=Js(it,a),ae?Oe(zt):M}function Qe(zt){var ln=zt-X,Mn=zt-se,gp=a-ln;return ce?hr(gp,C-Mn):gp}function Me(zt){var ln=zt-X,Mn=zt-se;return X===t||ln>=a||ln<0||ce&&Mn>=C}function it(){var zt=Ro();if(Me(zt))return ct(zt);U=Js(it,Qe(zt))}function ct(zt){return U=t,ye&&d?Oe(zt):(d=_=t,M)}function Ur(){U!==t&&ad(U),se=0,d=X=_=U=t}function vr(){return U===t?M:ct(Ro())}function Br(){var zt=Ro(),ln=Me(zt);if(d=arguments,_=this,X=zt,ln){if(U===t)return Fe(X);if(ce)return ad(U),U=Js(it,a),Oe(X)}return U===t&&(U=Js(it,a)),M}return Br.cancel=Ur,Br.flush=vr,Br}var j1=et(function(n,a){return kf(n,1,a)}),k1=et(function(n,a,c){return kf(n,Qr(a)||0,c)});function U1(n){return Tn(n,K)}function Fo(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new Gr(u);var c=function(){var d=arguments,_=a?a.apply(this,d):d[0],C=c.cache;if(C.has(_))return C.get(_);var M=n.apply(this,d);return c.cache=C.set(_,M)||C,M};return c.cache=new(Fo.Cache||An),c}Fo.Cache=An;function Mo(n){if(typeof n!="function")throw new Gr(u);return function(){var a=arguments;switch(a.length){case 0:return!n.call(this);case 1:return!n.call(this,a[0]);case 2:return!n.call(this,a[0],a[1]);case 3:return!n.call(this,a[0],a[1],a[2])}return!n.apply(this,a)}}function B1(n){return Vd(2,n)}var q1=Pv(function(n,a){a=a.length==1&&We(a[0])?Pt(a[0],Lr(Ne())):Pt(cr(a,1),Lr(Ne()));var c=a.length;return et(function(d){for(var _=-1,C=hr(d.length,c);++_<C;)d[_]=a[_].call(this,d[_]);return sr(n,this,d)})}),Gu=et(function(n,a){var c=Zn(a,ls(Gu));return Tn(n,T,t,a,c)}),Xd=et(function(n,a){var c=Zn(a,ls(Xd));return Tn(n,x,t,a,c)}),z1=$n(function(n,a){return Tn(n,E,t,t,t,a)});function H1(n,a){if(typeof n!="function")throw new Gr(u);return a=a===t?a:Ze(a),et(n,a)}function K1(n,a){if(typeof n!="function")throw new Gr(u);return a=a==null?0:nr(Ze(a),0),et(function(c){var d=c[a],_=ni(c,0,a);return d&&Xn(_,d),sr(n,this,_)})}function V1(n,a,c){var d=!0,_=!0;if(typeof n!="function")throw new Gr(u);return Ct(c)&&(d="leading"in c?!!c.leading:d,_="trailing"in c?!!c.trailing:_),Jd(n,a,{leading:d,maxWait:a,trailing:_})}function W1(n){return Kd(n,1)}function G1(n,a){return Gu($u(a),n)}function Y1(){if(!arguments.length)return[];var n=arguments[0];return We(n)?n:[n]}function J1(n){return Jr(n,w)}function X1(n,a){return a=typeof a=="function"?a:t,Jr(n,w,a)}function Z1(n){return Jr(n,S|w)}function Q1(n,a){return a=typeof a=="function"?a:t,Jr(n,S|w,a)}function e_(n,a){return a==null||jf(n,a,ar(a))}function un(n,a){return n===a||n!==n&&a!==a}var t_=Po(wu),r_=Po(function(n,a){return n>=a}),Ci=Hf(function(){return arguments}())?Hf:function(n){return Lt(n)&&dt.call(n,"callee")&&!Cf.call(n,"callee")},We=te.isArray,n_=yr?Lr(yr):hv;function Ar(n){return n!=null&&Lo(n.length)&&!Rn(n)}function qt(n){return Lt(n)&&Ar(n)}function i_(n){return n===!0||n===!1||Lt(n)&&mr(n)==Z}var ii=bb||sl,s_=an?Lr(an):fv;function a_(n){return Lt(n)&&n.nodeType===1&&!Xs(n)}function o_(n){if(n==null)return!0;if(Ar(n)&&(We(n)||typeof n=="string"||typeof n.splice=="function"||ii(n)||hs(n)||Ci(n)))return!n.length;var a=fr(n);if(a==Te||a==Re)return!n.size;if(Ys(n))return!xu(n).length;for(var c in n)if(dt.call(n,c))return!1;return!0}function c_(n,a){return Vs(n,a)}function u_(n,a,c){c=typeof c=="function"?c:t;var d=c?c(n,a):t;return d===t?Vs(n,a,t,c):!!d}function Yu(n){if(!Lt(n))return!1;var a=mr(n);return a==L||a==p||typeof n.message=="string"&&typeof n.name=="string"&&!Xs(n)}function l_(n){return typeof n=="number"&&$f(n)}function Rn(n){if(!Ct(n))return!1;var a=mr(n);return a==ue||a==me||a==Q||a==_t}function Zd(n){return typeof n=="number"&&n==Ze(n)}function Lo(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=V}function Ct(n){var a=typeof n;return n!=null&&(a=="object"||a=="function")}function Lt(n){return n!=null&&typeof n=="object"}var Qd=Vr?Lr(Vr):pv;function h_(n,a){return n===a||Eu(n,a,ku(a))}function f_(n,a,c){return c=typeof c=="function"?c:t,Eu(n,a,ku(a),c)}function d_(n){return ep(n)&&n!=+n}function p_(n){if(Xv(n))throw new He(o);return Kf(n)}function g_(n){return n===null}function y_(n){return n==null}function ep(n){return typeof n=="number"||Lt(n)&&mr(n)==Je}function Xs(n){if(!Lt(n)||mr(n)!=ke)return!1;var a=uo(n);if(a===null)return!0;var c=dt.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&so.call(c)==fb}var Ju=yn?Lr(yn):gv;function m_(n){return Zd(n)&&n>=-V&&n<=V}var tp=Ms?Lr(Ms):yv;function jo(n){return typeof n=="string"||!We(n)&&Lt(n)&&mr(n)==$e}function kr(n){return typeof n=="symbol"||Lt(n)&&mr(n)==Le}var hs=Ei?Lr(Ei):mv;function b_(n){return n===t}function v_(n){return Lt(n)&&fr(n)==pe}function w_(n){return Lt(n)&&mr(n)==ve}var __=Po(Su),E_=Po(function(n,a){return n<=a});function rp(n){if(!n)return[];if(Ar(n))return jo(n)?on(n):Pr(n);if(js&&n[js])return eb(n[js]());var a=fr(n),c=a==Te?hu:a==Re?ro:fs;return c(n)}function Fn(n){if(!n)return n===0?n:0;if(n=Qr(n),n===j||n===-j){var a=n<0?-1:1;return a*k}return n===n?n:0}function Ze(n){var a=Fn(n),c=a%1;return a===a?c?a-c:a:0}function np(n){return n?Ii(Ze(n),0,re):0}function Qr(n){if(typeof n=="number")return n;if(kr(n))return ee;if(Ct(n)){var a=typeof n.valueOf=="function"?n.valueOf():n;n=Ct(a)?a+"":a}if(typeof n!="string")return n===0?n:+n;n=Ef(n);var c=Uc.test(n);return c||qc.test(n)?Ve(n.slice(2),c?2:8):kc.test(n)?ee:+n}function ip(n){return bn(n,Cr(n))}function x_(n){return n?Ii(Ze(n),-V,V):n===0?n:0}function ft(n){return n==null?"":jr(n)}var S_=cs(function(n,a){if(Ys(a)||Ar(a)){bn(a,ar(a),n);return}for(var c in a)dt.call(a,c)&&zs(n,c,a[c])}),sp=cs(function(n,a){bn(a,Cr(a),n)}),ko=cs(function(n,a,c,d){bn(a,Cr(a),n,d)}),D_=cs(function(n,a,c,d){bn(a,ar(a),n,d)}),I_=$n(mu);function O_(n,a){var c=os(n);return a==null?c:Lf(c,a)}var P_=et(function(n,a){n=wt(n);var c=-1,d=a.length,_=d>2?a[2]:t;for(_&&br(a[0],a[1],_)&&(d=1);++c<d;)for(var C=a[c],M=Cr(C),U=-1,X=M.length;++U<X;){var se=M[U],ae=n[se];(ae===t||un(ae,is[se])&&!dt.call(n,se))&&(n[se]=C[se])}return n}),A_=et(function(n){return n.push(t,Ed),sr(ap,t,n)});function C_(n,a){return bf(n,Ne(a,3),mn)}function T_(n,a){return bf(n,Ne(a,3),vu)}function $_(n,a){return n==null?n:bu(n,Ne(a,3),Cr)}function N_(n,a){return n==null?n:qf(n,Ne(a,3),Cr)}function R_(n,a){return n&&mn(n,Ne(a,3))}function F_(n,a){return n&&vu(n,Ne(a,3))}function M_(n){return n==null?[]:wo(n,ar(n))}function L_(n){return n==null?[]:wo(n,Cr(n))}function Xu(n,a,c){var d=n==null?t:Oi(n,a);return d===t?c:d}function j_(n,a){return n!=null&&Dd(n,a,ov)}function Zu(n,a){return n!=null&&Dd(n,a,cv)}var k_=md(function(n,a,c){a!=null&&typeof a.toString!="function"&&(a=ao.call(a)),n[a]=c},el(Tr)),U_=md(function(n,a,c){a!=null&&typeof a.toString!="function"&&(a=ao.call(a)),dt.call(n,a)?n[a].push(c):n[a]=[c]},Ne),B_=et(Ks);function ar(n){return Ar(n)?Ff(n):xu(n)}function Cr(n){return Ar(n)?Ff(n,!0):bv(n)}function q_(n,a){var c={};return a=Ne(a,3),mn(n,function(d,_,C){Cn(c,a(d,_,C),d)}),c}function z_(n,a){var c={};return a=Ne(a,3),mn(n,function(d,_,C){Cn(c,_,a(d,_,C))}),c}var H_=cs(function(n,a,c){_o(n,a,c)}),ap=cs(function(n,a,c,d){_o(n,a,c,d)}),K_=$n(function(n,a){var c={};if(n==null)return c;var d=!1;a=Pt(a,function(C){return C=ri(C,n),d||(d=C.length>1),C}),bn(n,Lu(n),c),d&&(c=Jr(c,S|y|w,kv));for(var _=a.length;_--;)Au(c,a[_]);return c});function V_(n,a){return op(n,Mo(Ne(a)))}var W_=$n(function(n,a){return n==null?{}:wv(n,a)});function op(n,a){if(n==null)return{};var c=Pt(Lu(n),function(d){return[d]});return a=Ne(a),Zf(n,c,function(d,_){return a(d,_[0])})}function G_(n,a,c){a=ri(a,n);var d=-1,_=a.length;for(_||(_=1,n=t);++d<_;){var C=n==null?t:n[vn(a[d])];C===t&&(d=_,C=c),n=Rn(C)?C.call(n):C}return n}function Y_(n,a,c){return n==null?n:Ws(n,a,c)}function J_(n,a,c,d){return d=typeof d=="function"?d:t,n==null?n:Ws(n,a,c,d)}var cp=wd(ar),up=wd(Cr);function X_(n,a,c){var d=We(n),_=d||ii(n)||hs(n);if(a=Ne(a,4),c==null){var C=n&&n.constructor;_?c=d?new C:[]:Ct(n)?c=Rn(C)?os(uo(n)):{}:c={}}return(_?Wr:mn)(n,function(M,U,X){return a(c,M,U,X)}),c}function Z_(n,a){return n==null?!0:Au(n,a)}function Q_(n,a,c){return n==null?n:nd(n,a,$u(c))}function eE(n,a,c,d){return d=typeof d=="function"?d:t,n==null?n:nd(n,a,$u(c),d)}function fs(n){return n==null?[]:lu(n,ar(n))}function tE(n){return n==null?[]:lu(n,Cr(n))}function rE(n,a,c){return c===t&&(c=a,a=t),c!==t&&(c=Qr(c),c=c===c?c:0),a!==t&&(a=Qr(a),a=a===a?a:0),Ii(Qr(n),a,c)}function nE(n,a,c){return a=Fn(a),c===t?(c=a,a=0):c=Fn(c),n=Qr(n),uv(n,a,c)}function iE(n,a,c){if(c&&typeof c!="boolean"&&br(n,a,c)&&(a=c=t),c===t&&(typeof a=="boolean"?(c=a,a=t):typeof n=="boolean"&&(c=n,n=t)),n===t&&a===t?(n=0,a=1):(n=Fn(n),a===t?(a=n,n=0):a=Fn(a)),n>a){var d=n;n=a,a=d}if(c||n%1||a%1){var _=Nf();return hr(n+_*(a-n+bt("1e-"+((_+"").length-1))),a)}return Iu(n,a)}var sE=us(function(n,a,c){return a=a.toLowerCase(),n+(c?lp(a):a)});function lp(n){return Qu(ft(n).toLowerCase())}function hp(n){return n=ft(n),n&&n.replace(In,Ym).replace(tu,"")}function aE(n,a,c){n=ft(n),a=jr(a);var d=n.length;c=c===t?d:Ii(Ze(c),0,d);var _=c;return c-=a.length,c>=0&&n.slice(c,_)==a}function oE(n){return n=ft(n),n&&It.test(n)?n.replace(mi,Jm):n}function cE(n){return n=ft(n),n&&Yt.test(n)?n.replace(Rt,"\\$&"):n}var uE=us(function(n,a,c){return n+(c?"-":"")+a.toLowerCase()}),lE=us(function(n,a,c){return n+(c?" ":"")+a.toLowerCase()}),hE=pd("toLowerCase");function fE(n,a,c){n=ft(n),a=Ze(a);var d=a?rs(n):0;if(!a||d>=a)return n;var _=(a-d)/2;return Oo(po(_),c)+n+Oo(fo(_),c)}function dE(n,a,c){n=ft(n),a=Ze(a);var d=a?rs(n):0;return a&&d<a?n+Oo(a-d,c):n}function pE(n,a,c){n=ft(n),a=Ze(a);var d=a?rs(n):0;return a&&d<a?Oo(a-d,c)+n:n}function gE(n,a,c){return c||a==null?a=0:a&&(a=+a),Eb(ft(n).replace(Ft,""),a||0)}function yE(n,a,c){return(c?br(n,a,c):a===t)?a=1:a=Ze(a),Ou(ft(n),a)}function mE(){var n=arguments,a=ft(n[0]);return n.length<3?a:a.replace(n[1],n[2])}var bE=us(function(n,a,c){return n+(c?"_":"")+a.toLowerCase()});function vE(n,a,c){return c&&typeof c!="number"&&br(n,a,c)&&(a=c=t),c=c===t?re:c>>>0,c?(n=ft(n),n&&(typeof a=="string"||a!=null&&!Ju(a))&&(a=jr(a),!a&&ts(n))?ni(on(n),0,c):n.split(a,c)):[]}var wE=us(function(n,a,c){return n+(c?" ":"")+Qu(a)});function _E(n,a,c){return n=ft(n),c=c==null?0:Ii(Ze(c),0,n.length),a=jr(a),n.slice(c,c+a.length)==a}function EE(n,a,c){var d=O.templateSettings;c&&br(n,a,c)&&(a=t),n=ft(n),a=ko({},a,d,_d);var _=ko({},a.imports,d.imports,_d),C=ar(_),M=lu(_,C),U,X,se=0,ae=a.interpolate||Wi,ce="__p += '",ye=fu((a.escape||Wi).source+"|"+ae.source+"|"+(ae===At?jc:Wi).source+"|"+(a.evaluate||Wi).source+"|$","g"),Oe="//# sourceURL="+(dt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ru+"]")+`
`;n.replace(ye,function(Me,it,ct,Ur,vr,Br){return ct||(ct=Ur),ce+=n.slice(se,Br).replace(Hc,Xm),it&&(U=!0,ce+=`' +
__e(`+it+`) +
'`),vr&&(X=!0,ce+=`';
`+vr+`;
__p += '`),ct&&(ce+=`' +
((__t = (`+ct+`)) == null ? '' : __t) +
'`),se=Br+Me.length,Me}),ce+=`';
`;var Fe=dt.call(a,"variable")&&a.variable;if(!Fe)ce=`with (obj) {
`+ce+`
}
`;else if(Mc.test(Fe))throw new He(l);ce=(X?ce.replace(pn,""):ce).replace(gr,"$1").replace(Dn,"$1;"),ce="function("+(Fe||"obj")+`) {
`+(Fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var Qe=dp(function(){return ht(C,Oe+"return "+ce).apply(t,M)});if(Qe.source=ce,Yu(Qe))throw Qe;return Qe}function xE(n){return ft(n).toLowerCase()}function SE(n){return ft(n).toUpperCase()}function DE(n,a,c){if(n=ft(n),n&&(c||a===t))return Ef(n);if(!n||!(a=jr(a)))return n;var d=on(n),_=on(a),C=xf(d,_),M=Sf(d,_)+1;return ni(d,C,M).join("")}function IE(n,a,c){if(n=ft(n),n&&(c||a===t))return n.slice(0,If(n)+1);if(!n||!(a=jr(a)))return n;var d=on(n),_=Sf(d,on(a))+1;return ni(d,0,_).join("")}function OE(n,a,c){if(n=ft(n),n&&(c||a===t))return n.replace(Ft,"");if(!n||!(a=jr(a)))return n;var d=on(n),_=xf(d,on(a));return ni(d,_).join("")}function PE(n,a){var c=$,d=B;if(Ct(a)){var _="separator"in a?a.separator:_;c="length"in a?Ze(a.length):c,d="omission"in a?jr(a.omission):d}n=ft(n);var C=n.length;if(ts(n)){var M=on(n);C=M.length}if(c>=C)return n;var U=c-rs(d);if(U<1)return d;var X=M?ni(M,0,U).join(""):n.slice(0,U);if(_===t)return X+d;if(M&&(U+=X.length-U),Ju(_)){if(n.slice(U).search(_)){var se,ae=X;for(_.global||(_=fu(_.source,ft(Kr.exec(_))+"g")),_.lastIndex=0;se=_.exec(ae);)var ce=se.index;X=X.slice(0,ce===t?U:ce)}}else if(n.indexOf(jr(_),U)!=U){var ye=X.lastIndexOf(_);ye>-1&&(X=X.slice(0,ye))}return X+d}function AE(n){return n=ft(n),n&&Tt.test(n)?n.replace(Gn,ib):n}var CE=us(function(n,a,c){return n+(c?" ":"")+a.toUpperCase()}),Qu=pd("toUpperCase");function fp(n,a,c){return n=ft(n),a=c?t:a,a===t?Qm(n)?ob(n):Hm(n):n.match(a)||[]}var dp=et(function(n,a){try{return sr(n,t,a)}catch(c){return Yu(c)?c:new He(c)}}),TE=$n(function(n,a){return Wr(a,function(c){c=vn(c),Cn(n,c,Wu(n[c],n))}),n});function $E(n){var a=n==null?0:n.length,c=Ne();return n=a?Pt(n,function(d){if(typeof d[1]!="function")throw new Gr(u);return[c(d[0]),d[1]]}):[],et(function(d){for(var _=-1;++_<a;){var C=n[_];if(sr(C[0],this,d))return sr(C[1],this,d)}})}function NE(n){return iv(Jr(n,S))}function el(n){return function(){return n}}function RE(n,a){return n==null||n!==n?a:n}var FE=yd(),ME=yd(!0);function Tr(n){return n}function tl(n){return Vf(typeof n=="function"?n:Jr(n,S))}function LE(n){return Gf(Jr(n,S))}function jE(n,a){return Yf(n,Jr(a,S))}var kE=et(function(n,a){return function(c){return Ks(c,n,a)}}),UE=et(function(n,a){return function(c){return Ks(n,c,a)}});function rl(n,a,c){var d=ar(a),_=wo(a,d);c==null&&!(Ct(a)&&(_.length||!d.length))&&(c=a,a=n,n=this,_=wo(a,ar(a)));var C=!(Ct(c)&&"chain"in c)||!!c.chain,M=Rn(n);return Wr(_,function(U){var X=a[U];n[U]=X,M&&(n.prototype[U]=function(){var se=this.__chain__;if(C||se){var ae=n(this.__wrapped__),ce=ae.__actions__=Pr(this.__actions__);return ce.push({func:X,args:arguments,thisArg:n}),ae.__chain__=se,ae}return X.apply(n,Xn([this.value()],arguments))})}),n}function BE(){return ot._===this&&(ot._=db),this}function nl(){}function qE(n){return n=Ze(n),et(function(a){return Jf(a,n)})}var zE=Ru(Pt),HE=Ru(mf),KE=Ru(su);function pp(n){return Bu(n)?au(vn(n)):_v(n)}function VE(n){return function(a){return n==null?t:Oi(n,a)}}var WE=bd(),GE=bd(!0);function il(){return[]}function sl(){return!1}function YE(){return{}}function JE(){return""}function XE(){return!0}function ZE(n,a){if(n=Ze(n),n<1||n>V)return[];var c=re,d=hr(n,re);a=Ne(a),n-=re;for(var _=uu(d,a);++c<n;)a(c);return _}function QE(n){return We(n)?Pt(n,vn):kr(n)?[n]:Pr(Rd(ft(n)))}function e2(n){var a=++hb;return ft(n)+a}var t2=Io(function(n,a){return n+a},0),r2=Fu("ceil"),n2=Io(function(n,a){return n/a},1),i2=Fu("floor");function s2(n){return n&&n.length?vo(n,Tr,wu):t}function a2(n,a){return n&&n.length?vo(n,Ne(a,2),wu):t}function o2(n){return wf(n,Tr)}function c2(n,a){return wf(n,Ne(a,2))}function u2(n){return n&&n.length?vo(n,Tr,Su):t}function l2(n,a){return n&&n.length?vo(n,Ne(a,2),Su):t}var h2=Io(function(n,a){return n*a},1),f2=Fu("round"),d2=Io(function(n,a){return n-a},0);function p2(n){return n&&n.length?cu(n,Tr):0}function g2(n,a){return n&&n.length?cu(n,Ne(a,2)):0}return O.after=L1,O.ary=Kd,O.assign=S_,O.assignIn=sp,O.assignInWith=ko,O.assignWith=D_,O.at=I_,O.before=Vd,O.bind=Wu,O.bindAll=TE,O.bindKey=Wd,O.castArray=Y1,O.chain=qd,O.chunk=iw,O.compact=sw,O.concat=aw,O.cond=$E,O.conforms=NE,O.constant=el,O.countBy=p1,O.create=O_,O.curry=Gd,O.curryRight=Yd,O.debounce=Jd,O.defaults=P_,O.defaultsDeep=A_,O.defer=j1,O.delay=k1,O.difference=ow,O.differenceBy=cw,O.differenceWith=uw,O.drop=lw,O.dropRight=hw,O.dropRightWhile=fw,O.dropWhile=dw,O.fill=pw,O.filter=y1,O.flatMap=v1,O.flatMapDeep=w1,O.flatMapDepth=_1,O.flatten=jd,O.flattenDeep=gw,O.flattenDepth=yw,O.flip=U1,O.flow=FE,O.flowRight=ME,O.fromPairs=mw,O.functions=M_,O.functionsIn=L_,O.groupBy=E1,O.initial=vw,O.intersection=ww,O.intersectionBy=_w,O.intersectionWith=Ew,O.invert=k_,O.invertBy=U_,O.invokeMap=S1,O.iteratee=tl,O.keyBy=D1,O.keys=ar,O.keysIn=Cr,O.map=No,O.mapKeys=q_,O.mapValues=z_,O.matches=LE,O.matchesProperty=jE,O.memoize=Fo,O.merge=H_,O.mergeWith=ap,O.method=kE,O.methodOf=UE,O.mixin=rl,O.negate=Mo,O.nthArg=qE,O.omit=K_,O.omitBy=V_,O.once=B1,O.orderBy=I1,O.over=zE,O.overArgs=q1,O.overEvery=HE,O.overSome=KE,O.partial=Gu,O.partialRight=Xd,O.partition=O1,O.pick=W_,O.pickBy=op,O.property=pp,O.propertyOf=VE,O.pull=Iw,O.pullAll=Ud,O.pullAllBy=Ow,O.pullAllWith=Pw,O.pullAt=Aw,O.range=WE,O.rangeRight=GE,O.rearg=z1,O.reject=C1,O.remove=Cw,O.rest=H1,O.reverse=Ku,O.sampleSize=$1,O.set=Y_,O.setWith=J_,O.shuffle=N1,O.slice=Tw,O.sortBy=M1,O.sortedUniq=jw,O.sortedUniqBy=kw,O.split=vE,O.spread=K1,O.tail=Uw,O.take=Bw,O.takeRight=qw,O.takeRightWhile=zw,O.takeWhile=Hw,O.tap=s1,O.throttle=V1,O.thru=$o,O.toArray=rp,O.toPairs=cp,O.toPairsIn=up,O.toPath=QE,O.toPlainObject=ip,O.transform=X_,O.unary=W1,O.union=Kw,O.unionBy=Vw,O.unionWith=Ww,O.uniq=Gw,O.uniqBy=Yw,O.uniqWith=Jw,O.unset=Z_,O.unzip=Vu,O.unzipWith=Bd,O.update=Q_,O.updateWith=eE,O.values=fs,O.valuesIn=tE,O.without=Xw,O.words=fp,O.wrap=G1,O.xor=Zw,O.xorBy=Qw,O.xorWith=e1,O.zip=t1,O.zipObject=r1,O.zipObjectDeep=n1,O.zipWith=i1,O.entries=cp,O.entriesIn=up,O.extend=sp,O.extendWith=ko,rl(O,O),O.add=t2,O.attempt=dp,O.camelCase=sE,O.capitalize=lp,O.ceil=r2,O.clamp=rE,O.clone=J1,O.cloneDeep=Z1,O.cloneDeepWith=Q1,O.cloneWith=X1,O.conformsTo=e_,O.deburr=hp,O.defaultTo=RE,O.divide=n2,O.endsWith=aE,O.eq=un,O.escape=oE,O.escapeRegExp=cE,O.every=g1,O.find=m1,O.findIndex=Md,O.findKey=C_,O.findLast=b1,O.findLastIndex=Ld,O.findLastKey=T_,O.floor=i2,O.forEach=zd,O.forEachRight=Hd,O.forIn=$_,O.forInRight=N_,O.forOwn=R_,O.forOwnRight=F_,O.get=Xu,O.gt=t_,O.gte=r_,O.has=j_,O.hasIn=Zu,O.head=kd,O.identity=Tr,O.includes=x1,O.indexOf=bw,O.inRange=nE,O.invoke=B_,O.isArguments=Ci,O.isArray=We,O.isArrayBuffer=n_,O.isArrayLike=Ar,O.isArrayLikeObject=qt,O.isBoolean=i_,O.isBuffer=ii,O.isDate=s_,O.isElement=a_,O.isEmpty=o_,O.isEqual=c_,O.isEqualWith=u_,O.isError=Yu,O.isFinite=l_,O.isFunction=Rn,O.isInteger=Zd,O.isLength=Lo,O.isMap=Qd,O.isMatch=h_,O.isMatchWith=f_,O.isNaN=d_,O.isNative=p_,O.isNil=y_,O.isNull=g_,O.isNumber=ep,O.isObject=Ct,O.isObjectLike=Lt,O.isPlainObject=Xs,O.isRegExp=Ju,O.isSafeInteger=m_,O.isSet=tp,O.isString=jo,O.isSymbol=kr,O.isTypedArray=hs,O.isUndefined=b_,O.isWeakMap=v_,O.isWeakSet=w_,O.join=xw,O.kebabCase=uE,O.last=Zr,O.lastIndexOf=Sw,O.lowerCase=lE,O.lowerFirst=hE,O.lt=__,O.lte=E_,O.max=s2,O.maxBy=a2,O.mean=o2,O.meanBy=c2,O.min=u2,O.minBy=l2,O.stubArray=il,O.stubFalse=sl,O.stubObject=YE,O.stubString=JE,O.stubTrue=XE,O.multiply=h2,O.nth=Dw,O.noConflict=BE,O.noop=nl,O.now=Ro,O.pad=fE,O.padEnd=dE,O.padStart=pE,O.parseInt=gE,O.random=iE,O.reduce=P1,O.reduceRight=A1,O.repeat=yE,O.replace=mE,O.result=G_,O.round=f2,O.runInContext=J,O.sample=T1,O.size=R1,O.snakeCase=bE,O.some=F1,O.sortedIndex=$w,O.sortedIndexBy=Nw,O.sortedIndexOf=Rw,O.sortedLastIndex=Fw,O.sortedLastIndexBy=Mw,O.sortedLastIndexOf=Lw,O.startCase=wE,O.startsWith=_E,O.subtract=d2,O.sum=p2,O.sumBy=g2,O.template=EE,O.times=ZE,O.toFinite=Fn,O.toInteger=Ze,O.toLength=np,O.toLower=xE,O.toNumber=Qr,O.toSafeInteger=x_,O.toString=ft,O.toUpper=SE,O.trim=DE,O.trimEnd=IE,O.trimStart=OE,O.truncate=PE,O.unescape=AE,O.uniqueId=e2,O.upperCase=CE,O.upperFirst=Qu,O.each=zd,O.eachRight=Hd,O.first=kd,rl(O,function(){var n={};return mn(O,function(a,c){dt.call(O.prototype,c)||(n[c]=a)}),n}(),{chain:!1}),O.VERSION=i,Wr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){O[n].placeholder=O}),Wr(["drop","take"],function(n,a){st.prototype[n]=function(c){c=c===t?1:nr(Ze(c),0);var d=this.__filtered__&&!a?new st(this):this.clone();return d.__filtered__?d.__takeCount__=hr(c,d.__takeCount__):d.__views__.push({size:hr(c,re),type:n+(d.__dir__<0?"Right":"")}),d},st.prototype[n+"Right"]=function(c){return this.reverse()[n](c).reverse()}}),Wr(["filter","map","takeWhile"],function(n,a){var c=a+1,d=c==v||c==H;st.prototype[n]=function(_){var C=this.clone();return C.__iteratees__.push({iteratee:Ne(_,3),type:c}),C.__filtered__=C.__filtered__||d,C}}),Wr(["head","last"],function(n,a){var c="take"+(a?"Right":"");st.prototype[n]=function(){return this[c](1).value()[0]}}),Wr(["initial","tail"],function(n,a){var c="drop"+(a?"":"Right");st.prototype[n]=function(){return this.__filtered__?new st(this):this[c](1)}}),st.prototype.compact=function(){return this.filter(Tr)},st.prototype.find=function(n){return this.filter(n).head()},st.prototype.findLast=function(n){return this.reverse().find(n)},st.prototype.invokeMap=et(function(n,a){return typeof n=="function"?new st(this):this.map(function(c){return Ks(c,n,a)})}),st.prototype.reject=function(n){return this.filter(Mo(Ne(n)))},st.prototype.slice=function(n,a){n=Ze(n);var c=this;return c.__filtered__&&(n>0||a<0)?new st(c):(n<0?c=c.takeRight(-n):n&&(c=c.drop(n)),a!==t&&(a=Ze(a),c=a<0?c.dropRight(-a):c.take(a-n)),c)},st.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},st.prototype.toArray=function(){return this.take(re)},mn(st.prototype,function(n,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),d=/^(?:head|last)$/.test(a),_=O[d?"take"+(a=="last"?"Right":""):a],C=d||/^find/.test(a);_&&(O.prototype[a]=function(){var M=this.__wrapped__,U=d?[1]:arguments,X=M instanceof st,se=U[0],ae=X||We(M),ce=function(it){var ct=_.apply(O,Xn([it],U));return d&&ye?ct[0]:ct};ae&&c&&typeof se=="function"&&se.length!=1&&(X=ae=!1);var ye=this.__chain__,Oe=!!this.__actions__.length,Fe=C&&!ye,Qe=X&&!Oe;if(!C&&ae){M=Qe?M:new st(this);var Me=n.apply(M,U);return Me.__actions__.push({func:$o,args:[ce],thisArg:t}),new Yr(Me,ye)}return Fe&&Qe?n.apply(this,U):(Me=this.thru(ce),Fe?d?Me.value()[0]:Me.value():Me)})}),Wr(["pop","push","shift","sort","splice","unshift"],function(n){var a=no[n],c=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",d=/^(?:pop|shift)$/.test(n);O.prototype[n]=function(){var _=arguments;if(d&&!this.__chain__){var C=this.value();return a.apply(We(C)?C:[],_)}return this[c](function(M){return a.apply(We(M)?M:[],_)})}}),mn(st.prototype,function(n,a){var c=O[a];if(c){var d=c.name+"";dt.call(as,d)||(as[d]=[]),as[d].push({name:a,func:c})}}),as[Do(t,z).name]=[{name:"wrapper",func:t}],st.prototype.clone=Ab,st.prototype.reverse=Cb,st.prototype.value=Tb,O.prototype.at=a1,O.prototype.chain=o1,O.prototype.commit=c1,O.prototype.next=u1,O.prototype.plant=h1,O.prototype.reverse=f1,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=d1,O.prototype.first=O.prototype.head,js&&(O.prototype[js]=l1),O},ns=cb();Bt?((Bt.exports=ns)._=ns,vt._=ns):ot._=ns}).call(ua)})(Yl,Yl.exports);var pO=Object.defineProperty,gO=Object.defineProperties,yO=Object.getOwnPropertyDescriptors,V0=Object.getOwnPropertySymbols,mO=Object.prototype.hasOwnProperty,bO=Object.prototype.propertyIsEnumerable,W0=(r,e,t)=>e in r?pO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Bo=(r,e)=>{for(var t in e||(e={}))mO.call(e,t)&&W0(r,t,e[t]);if(V0)for(var t of V0(e))bO.call(e,t)&&W0(r,t,e[t]);return r},vO=(r,e)=>gO(r,yO(e));function rn(r,e,t){let i;const s=Jl(r);return e.rpcMap&&(i=e.rpcMap[s]),i||(i=`${dO}?chainId=eip155:${s}&projectId=${t}`),i}function Jl(r){return r.includes("eip155")?Number(r.split(":")[1]):Number(r)}function wO(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function _O(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const o=e.namespaces[s].accounts;i.push(...o)}),i}function EO(r,e={}){const t=G0(r),i=G0(e);return Yl.exports.merge(t,i)}function G0(r){var e,t,i,s;const o={};if(!vs(r))return o;for(const[u,l]of Object.entries(r)){const f=ry(u)?[u]:l.chains,g=l.methods||[],b=l.events||[],S=l.rpcMap||{},y=Go(u);o[y]=vO(Bo(Bo({},o[y]),l),{chains:hl(f,(e=o[y])==null?void 0:e.chains),methods:hl(g,(t=o[y])==null?void 0:t.methods),events:hl(b,(i=o[y])==null?void 0:i.events),rpcMap:Bo(Bo({},S),(s=o[y])==null?void 0:s.rpcMap)})}return o}function xO(r){return r.includes(":")?r.split(":")[2]:r}const jy={},Kt=r=>jy[r],xl=(r,e)=>{jy[r]=e};class SO{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class DO{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const i=Jl(e);if(!this.httpProviders[i]){const s=t||rn(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.chainId=i,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Jl(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:e.chainId}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class IO{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class OO{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class PO{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class AO{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class CO{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}var TO=Object.defineProperty,$O=Object.defineProperties,NO=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,RO=Object.prototype.hasOwnProperty,FO=Object.prototype.propertyIsEnumerable,J0=(r,e,t)=>e in r?TO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qo=(r,e)=>{for(var t in e||(e={}))RO.call(e,t)&&J0(r,t,e[t]);if(Y0)for(var t of Y0(e))FO.call(e,t)&&J0(r,t,e[t]);return r},Sl=(r,e)=>$O(r,NO(e));class Hh{constructor(e){this.events=new Eh,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ut.pino(ut.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||H0})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new Hh(e);return await t.initialize(),t}async request(e,t){const[i,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:qo({},e),chainId:`${i}:${s}`,topic:this.session.topic})}sendAsync(e,t,i){this.request(e,i).then(s=>t(null,s)).catch(s=>t(s,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ht("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(o=>{this.session=o}).catch(o=>{if(o.message!==Ly)throw o;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{const[i,s]=this.validateChain(e);this.getProvider(i).setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Sn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await zh.init({logger:this.providerOpts.logger||H0,relayUrl:this.providerOpts.relayUrl||lO,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Go(t)))];xl("client",this.client),xl("events",this.events),xl("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=_O(t,this.session),s=wO(i),o=EO(this.namespaces,this.optionalNamespaces),u=Sl(qo({},o[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new DO({namespace:u});break;case"solana":this.rpcProviders[t]=new IO({namespace:u});break;case"cosmos":this.rpcProviders[t]=new OO({namespace:u});break;case"polkadot":this.rpcProviders[t]=new SO({namespace:u});break;case"cip34":this.rpcProviders[t]=new PO({namespace:u});break;case"elrond":this.rpcProviders[t]=new AO({namespace:u});break;case"multiversx":this.rpcProviders[t]=new CO({namespace:u});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const s=i.data;s&&Sn(s)&&this.events.emit("accountsChanged",s.map(xO))}else i.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:s}=t,o=(i=this.client)==null?void 0:i.session.get(e);this.session=Sl(qo({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Sl(qo({},Ht("USER_DISCONNECTED")),{data:e.topic}))}),this.on(di.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=i,this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=(e==null?void 0:e.split(":"))||["",""];if(t&&!Object.keys(this.namespaces).map(u=>Go(u)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=Go(Object.keys(this.namespaces)[0]),o=this.rpcProviders[s].getDefaultChain();return[s,o]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var i;const[s,o]=this.validateChain(e);t||this.getProvider(s).setDefaultChain(o),((i=this.namespaces[s])!=null?i:this.namespaces[`${s}:${o}`]).defaultChain=o,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",o)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${K0}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${K0}/${e}`)}}const MO=Hh,LO="wc",jO="ethereum_provider",kO=`${LO}@2:${jO}:`,UO="https://rpc.walletconnect.com/v1/",Xl=["eth_sendTransaction","personal_sign"],Zl=["chainChanged","accountsChanged"];var BO=Object.defineProperty,qO=Object.defineProperties,zO=Object.getOwnPropertyDescriptors,X0=Object.getOwnPropertySymbols,HO=Object.prototype.hasOwnProperty,KO=Object.prototype.propertyIsEnumerable,Z0=(r,e,t)=>e in r?BO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Dl=(r,e)=>{for(var t in e||(e={}))HO.call(e,t)&&Z0(r,t,e[t]);if(X0)for(var t of X0(e))KO.call(e,t)&&Z0(r,t,e[t]);return r},Q0=(r,e)=>qO(r,zO(e));function Ql(r){return Number(r[0].split(":")[1])}function Il(r){return`0x${r.toString(16)}`}function VO(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:s,events:o,optionalEvents:u,rpcMap:l}=r;if(!Sn(e))throw new Error("Invalid chains");const f=e,g=i||Xl,b=o||Zl,S={[Ql(f)]:l[Ql(f)]},y={chains:f,methods:g,events:b,rpcMap:S},w=o==null?void 0:o.filter(z=>!Zl.includes(z)),m=i==null?void 0:i.filter(z=>!Xl.includes(z));if(!t&&!u&&!s&&!(w!=null&&w.length)&&!(m!=null&&m.length))return{required:y};const I=(w==null?void 0:w.length)&&(m==null?void 0:m.length)||!t,A={chains:[...new Set(I?f.concat(t||[]):t)],methods:[...new Set(g.concat(s||[]))],events:[...new Set(b.concat(u||[]))],rpcMap:l};return{required:y,optional:A}}class Kh{constructor(){this.events=new zr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=kO,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Kh;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=VO(this.rpc);try{const s=await new Promise(async(u,l)=>{var f;this.rpc.showQrModal&&((f=this.modal)==null||f.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),l(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Q0(Dl({namespaces:{[this.namespace]:t}},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(g=>{u(g)}).catch(g=>{l(new Error(g.message))})});if(!s)return;this.setChainIds(this.rpc.chains);const o=Q3(s.namespaces,[this.namespace]);this.setAccounts(o),this.events.emit("connect",{chainId:Il(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Il(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Q0(Dl({},Ht("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Il(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,s]=e.split(":");return{chainId:`${t}:${i}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;return{chains:((t=e.chains)==null?void 0:t.map(s=>this.formatChainId(s)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(s=>this.formatChainId(s)):void 0,methods:(e==null?void 0:e.methods)||Xl,events:(e==null?void 0:e.events)||Zl,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(i=e==null?void 0:e.qrModalOptions)!=null?i:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(s=>{i[s]=this.getRpcUrl(s,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=Ql(this.rpc.chains),this.signer=await MO.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await wh(()=>import("./index-3d10b430.js").then(s=>s.a),[]);t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Dl({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:s}=e;t&&Sn(t)&&(this.rpc.chains=t.map(o=>this.formatChainId(o)),t.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)})),i&&Sn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(o=>this.formatChainId(o)),i.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${UO}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const WO=Kh;function Vi(r,{includeName:e=!1}={}){if(r.type!=="function"&&r.type!=="event"&&r.type!=="error")throw new lP(r.type);return`${r.name}(${Ec(r.inputs,{includeName:e})})`}function Ec(r,{includeName:e=!1}={}){return r?r.map(t=>GO(t,{includeName:e})).join(e?", ":","):""}function GO(r,{includeName:e}){return r.type.startsWith("tuple")?`(${Ec(r.components,{includeName:e})})${r.type.slice(5)}`:r.type+(e&&r.name?` ${r.name}`:"")}function Kn(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function Vt(r){return Kn(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const YO="1.0.7",JO=r=>r,xc=r=>r,XO=()=>`viem@${YO}`;class ge extends Error{constructor(e,t={}){var o;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:XO()});const i=t.cause instanceof ge?t.cause.details:(o=t.cause)!=null&&o.message?t.cause.message:t.details,s=t.cause instanceof ge&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: https://viem.sh${s}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...i?[`Details: ${i}`]:[],`Version: ${this.version}`].join(`
`),t.cause&&(this.cause=t.cause),this.details=i,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return ky(this,e)}}function ky(r,e){return e!=null&&e(r)?r:r.cause?ky(r.cause,e):r}class ZO extends ge{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class eg extends ge{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class Vh extends ge{constructor({data:e,params:t,size:i}){super([`Data size of ${i} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Ec(t,{includeName:!0})})`,`Data:   ${e} (${i} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=i}}class Sc extends ge{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class QO extends ge{constructor({expectedLength:e,givenLength:t,type:i}){super([`ABI encoding array length mismatch for type ${i}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class eP extends ge{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Vt(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class tP extends ge{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class rP extends ge{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"})}}class nP extends ge{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class iP extends ge{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class tg extends ge{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class nc extends ge{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class sP extends ge{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class aP extends ge{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class ma extends ge{constructor({abiItem:e,data:t,params:i,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Ec(i,{includeName:!0})})`,`Data:   ${t} (${s} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=i,this.size=s}}class Dc extends ge{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${Vi(e,{includeName:!0})}".`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class oP extends ge{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class cP extends ge{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class uP extends ge{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class lP extends ge{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class hP extends ge{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}class Uy extends ge{constructor({offset:e,position:t,size:i}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${i}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class By extends ge{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function Os(r,{dir:e,size:t=32}={}){return typeof r=="string"?oi(r,{dir:e,size:t}):fP(r,{dir:e,size:t})}function oi(r,{dir:e,size:t=32}={}){if(t===null)return r;const i=r.replace("0x","");if(i.length>t*2)throw new By({size:Math.ceil(i.length/2),targetSize:t,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function fP(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new By({size:r.length,targetSize:t,type:"bytes"});const i=new Uint8Array(t);for(let s=0;s<t;s++){const o=e==="right";i[o?s:t-s-1]=r[o?s:r.length-s-1]}return i}class dP extends ge{constructor({max:e,min:t,signed:i,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class pP extends ge{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class gP extends ge{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function ws(r,{dir:e="left"}={}){let t=typeof r=="string"?r.replace("0x",""):r,i=0;for(let s=0;s<t.length-1&&t[e==="left"?s:t.length-s-1].toString()==="0";s++)i++;return t=e==="left"?t.slice(i):t.slice(0,t.length-i),typeof r=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}function pi(r,{size:e}){if(Vt(r)>e)throw new gP({givenSize:Vt(r),maxSize:e})}function Wh(r,e={}){const{signed:t}=e;e.size&&pi(r,{size:e.size});const i=BigInt(r);if(!t)return i;const s=(r.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return i<=o?i:i-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function yP(r,e={}){let t=r;if(e.size&&(pi(t,{size:e.size}),t=ws(t)),ws(t)==="0x00")return!1;if(ws(t)==="0x01")return!0;throw new pP(t)}function xr(r,e={}){return Number(Wh(r,e))}function mP(r,e={}){let t=Yh(r);return e.size&&(pi(t,{size:e.size}),t=ws(t,{dir:"right"})),new TextDecoder().decode(t)}const bP=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Wn(r,e={}){return typeof r=="number"||typeof r=="bigint"?at(r,e):typeof r=="string"?Gh(r,e):typeof r=="boolean"?qy(r,e):ba(r,e)}function qy(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(pi(t,{size:e.size}),Os(t,{size:e.size})):t}function ba(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=bP[r[s]];const i=`0x${t}`;return typeof e.size=="number"?(pi(i,{size:e.size}),Os(i,{dir:"right",size:e.size})):i}function at(r,e={}){const{signed:t,size:i}=e,s=BigInt(r);let o;i?t?o=(1n<<BigInt(i)*8n-1n)-1n:o=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const u=typeof o=="bigint"&&t?-o-1n:0;if(o&&s>o||s<u){const f=typeof r=="bigint"?"n":"";throw new dP({max:o?`${o}${f}`:void 0,min:`${u}${f}`,signed:t,size:i,value:`${r}${f}`})}const l=`0x${(t&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?Os(l,{size:i}):l}const vP=new TextEncoder;function Gh(r,e={}){const t=vP.encode(r);return ba(t,e)}const wP=new TextEncoder;function Ui(r,e={}){return typeof r=="number"||typeof r=="bigint"?EP(r,e):typeof r=="boolean"?_P(r,e):Kn(r)?Yh(r,e):Bn(r,e)}function _P(r,e={}){const t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(pi(t,{size:e.size}),Os(t,{size:e.size})):t}function Yh(r,e={}){let t=r;e.size&&(pi(t,{size:e.size}),t=Os(t,{dir:"right",size:e.size}));let i=t.slice(2);i.length%2&&(i=`0${i}`);const s=new Uint8Array(i.length/2);for(let o=0;o<s.length;o++){const u=o*2,l=i.slice(u,u+2),f=Number.parseInt(l,16);if(Number.isNaN(f)||f<0)throw new ge(`Invalid byte sequence ("${l}" in "${i}").`);s[o]=f}return s}function EP(r,e){const t=at(r,e);return Yh(t)}function Bn(r,e={}){const t=wP.encode(r);return typeof e.size=="number"?(pi(t,{size:e.size}),Os(t,{dir:"right",size:e.size})):t}const xP=/((function|event)\s)?(.*)(\((.*)\))/;function zy(r){const e=r.match(xP),t=(e==null?void 0:e[2])||void 0,i=e==null?void 0:e[3],s=(e==null?void 0:e[5])||void 0;return{type:t,name:i,params:s}}function SP(r){return zy(r).name}function DP(r){const e=zy(r).params,t=e==null?void 0:e.split(",").map(i=>i.trim().split(" "));return t==null?void 0:t.map(i=>({type:i[0],name:i[1]==="indexed"?i[2]:i[1],...i[1]==="indexed"?{indexed:!0}:{}}))}function eh(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function IP(r){if(typeof r!="boolean")throw new Error(`Expected boolean, not ${r}`)}function Hy(r,...e){if(!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function OP(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");eh(r.outputLen),eh(r.blockLen)}function PP(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function AP(r,e){Hy(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const ps={number:eh,bool:IP,bytes:Hy,hash:OP,exists:PP,output:AP},zo=BigInt(2**32-1),th=BigInt(32);function Ky(r,e=!1){return e?{h:Number(r&zo),l:Number(r>>th&zo)}:{h:Number(r>>th&zo)|0,l:Number(r&zo)|0}}function CP(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:o,l:u}=Ky(r[s],e);[t[s],i[s]]=[o,u]}return[t,i]}const TP=(r,e)=>BigInt(r>>>0)<<th|BigInt(e>>>0),$P=(r,e,t)=>r>>>t,NP=(r,e,t)=>r<<32-t|e>>>t,RP=(r,e,t)=>r>>>t|e<<32-t,FP=(r,e,t)=>r<<32-t|e>>>t,MP=(r,e,t)=>r<<64-t|e>>>t-32,LP=(r,e,t)=>r>>>t-32|e<<64-t,jP=(r,e)=>e,kP=(r,e)=>r,UP=(r,e,t)=>r<<t|e>>>32-t,BP=(r,e,t)=>e<<t|r>>>32-t,qP=(r,e,t)=>e<<t-32|r>>>64-t,zP=(r,e,t)=>r<<t-32|e>>>64-t;function HP(r,e,t,i){const s=(e>>>0)+(i>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const KP=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),VP=(r,e,t,i)=>e+t+i+(r/2**32|0)|0,WP=(r,e,t,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0),GP=(r,e,t,i,s)=>e+t+i+s+(r/2**32|0)|0,YP=(r,e,t,i,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0)+(s>>>0),JP=(r,e,t,i,s,o)=>e+t+i+s+o+(r/2**32|0)|0,va={fromBig:Ky,split:CP,toBig:TP,shrSH:$P,shrSL:NP,rotrSH:RP,rotrSL:FP,rotrBH:MP,rotrBL:LP,rotr32H:jP,rotr32L:kP,rotlSH:UP,rotlSL:BP,rotlBH:qP,rotlBL:zP,add:HP,add3L:KP,add3H:VP,add4L:WP,add4H:GP,add5H:JP,add5L:YP};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XP=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),ZP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ZP)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function QP(r){if(typeof r!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof r}`);return new TextEncoder().encode(r)}function Jh(r){if(typeof r=="string"&&(r=QP(r)),!(r instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof r})`);return r}class eA{clone(){return this._cloneInto()}}function tA(r){const e=i=>r().update(Jh(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function rA(r){const e=(i,s)=>r(s).update(Jh(i)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=i=>r(i),e}const[Vy,Wy,Gy]=[[],[],[]],nA=BigInt(0),la=BigInt(1),iA=BigInt(2),sA=BigInt(7),aA=BigInt(256),oA=BigInt(113);for(let r=0,e=la,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],Vy.push(2*(5*i+t)),Wy.push((r+1)*(r+2)/2%64);let s=nA;for(let o=0;o<7;o++)e=(e<<la^(e>>sA)*oA)%aA,e&iA&&(s^=la<<(la<<BigInt(o))-la);Gy.push(s)}const[cA,uA]=va.split(Gy,!0),rg=(r,e,t)=>t>32?va.rotlBH(r,e,t):va.rotlSH(r,e,t),ng=(r,e,t)=>t>32?va.rotlBL(r,e,t):va.rotlSL(r,e,t);function lA(r,e=24){const t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let u=0;u<10;u++)t[u]=r[u]^r[u+10]^r[u+20]^r[u+30]^r[u+40];for(let u=0;u<10;u+=2){const l=(u+8)%10,f=(u+2)%10,g=t[f],b=t[f+1],S=rg(g,b,1)^t[l],y=ng(g,b,1)^t[l+1];for(let w=0;w<50;w+=10)r[u+w]^=S,r[u+w+1]^=y}let s=r[2],o=r[3];for(let u=0;u<24;u++){const l=Wy[u],f=rg(s,o,l),g=ng(s,o,l),b=Vy[u];s=r[b],o=r[b+1],r[b]=f,r[b+1]=g}for(let u=0;u<50;u+=10){for(let l=0;l<10;l++)t[l]=r[u+l];for(let l=0;l<10;l++)r[u+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=cA[i],r[1]^=uA[i]}t.fill(0)}class Ic extends eA{constructor(e,t,i,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ps.number(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=XP(this.state)}keccak(){lA(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ps.exists(this);const{blockLen:t,state:i}=this;e=Jh(e);const s=e.length;for(let o=0;o<s;){const u=Math.min(t-this.pos,s-o);for(let l=0;l<u;l++)i[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:i,blockLen:s}=this;e[i]^=t,t&128&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ps.exists(this,!1),ps.bytes(e),this.finish();const t=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();const u=Math.min(i-this.posOut,o-s);e.set(t.subarray(this.posOut,this.posOut+u),s),this.posOut+=u,s+=u}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ps.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ps.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:i,outputLen:s,rounds:o,enableXOF:u}=this;return e||(e=new Ic(t,i,s,u,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=u,e.destroyed=this.destroyed,e}}const gi=(r,e,t)=>tA(()=>new Ic(e,r,t));gi(6,144,224/8);gi(6,136,256/8);gi(6,104,384/8);gi(6,72,512/8);gi(1,144,224/8);const hA=gi(1,136,256/8);gi(1,104,384/8);gi(1,72,512/8);const Yy=(r,e,t)=>rA((i={})=>new Ic(e,r,i.dkLen===void 0?t:i.dkLen,!0));Yy(31,168,128/8);Yy(31,136,256/8);function Rr(r,e){const t=e||"hex",i=hA(Kn(r,{strict:!1})?Ui(r):r);return t==="bytes"?i:Wn(i)}const Jy=r=>Rr(Ui(r));function Xy(r){const e=SP(r),t=DP(r)||[];return Jy(`${e}(${t.map(({type:i})=>i).join(",")})`)}function Zy(r){return Jy(`${r.name}(${r.inputs.map(({type:e})=>e).join(",")})`)}const Qy=r=>typeof r=="string"?Xy(r):Zy(r);class wa extends ge{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}const fA=/^0x[a-fA-F0-9]{40}$/;function qn(r){return fA.test(r)}function Vn(r){return typeof r[0]=="string"?Xh(r):dA(r)}function dA(r){let e=0;for(const s of r)e+=s.length;const t=new Uint8Array(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return t}function Xh(r){return`0x${r.reduce((e,t)=>e+t.replace("0x",""),"")}`}function kt(r,e,t,{strict:i}={}){return Kn(r,{strict:!1})?gA(r,e,t,{strict:i}):pA(r,e,t,{strict:i})}function em(r,e){if(typeof e=="number"&&e>0&&e>Vt(r)-1)throw new Uy({offset:e,position:"start",size:Vt(r)})}function tm(r,e,t){if(typeof e=="number"&&typeof t=="number"&&Vt(r)!==t-e)throw new Uy({offset:t,position:"end",size:Vt(r)})}function pA(r,e,t,{strict:i}={}){em(r,e);const s=r.slice(e,t);return i&&tm(s,e,t),s}function gA(r,e,t,{strict:i}={}){em(r,e);const s=`0x${r.replace("0x","").slice((e??0)*2,(t??r.length)*2)}`;return i&&tm(s,e,t),s}function Ca(r,e){if(r.length!==e.length)throw new tP({expectedLength:r.length,givenLength:e.length});const t=yA({params:r,values:e}),i=Qh(t);return i.length===0?"0x":i}function yA({params:r,values:e}){const t=[];for(let i=0;i<r.length;i++)t.push(Zh({param:r[i],value:e[i]}));return t}function Zh({param:r,value:e}){const t=Oc(r.type);if(t){const[i,s]=t;return bA(e,{length:i,param:{...r,type:s}})}if(r.type==="tuple")return xA(e,{param:r});if(r.type==="address")return mA(e);if(r.type==="bool")return wA(e);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int");return _A(e,{signed:i})}if(r.type.startsWith("bytes"))return vA(e,{param:r});if(r.type==="string")return EA(e);throw new oP(r.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Qh(r){let e=0;for(let o=0;o<r.length;o++){const{dynamic:u,encoded:l}=r[o];u?e+=32:e+=Vt(l)}const t=[],i=[];let s=0;for(let o=0;o<r.length;o++){const{dynamic:u,encoded:l}=r[o];u?(t.push(at(e+s,{size:32})),i.push(l),s+=Vt(l)):t.push(l)}return Vn([...t,...i])}function mA(r){if(!qn(r))throw new wa({address:r});return{dynamic:!1,encoded:oi(r.toLowerCase())}}function bA(r,{length:e,param:t}){const i=e===null;if(!Array.isArray(r))throw new uP(r);if(!i&&r.length!==e)throw new QO({expectedLength:e,givenLength:r.length,type:`${t.type}[${e}]`});let s=!1;const o=[];for(let u=0;u<r.length;u++){const l=Zh({param:t,value:r[u]});l.dynamic&&(s=!0),o.push(l)}if(i||s){const u=Qh(o);if(i){const l=at(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Vn([l,u]):l}}if(s)return{dynamic:!0,encoded:u}}return{dynamic:!1,encoded:Vn(o.map(({encoded:u})=>u))}}function vA(r,{param:e}){const[t,i]=e.type.split("bytes");if(!i){const s=Math.ceil(Vt(r)/32),o=[];for(let u=0;u<s;u++)o.push(oi(kt(r,u*32,(u+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Vn([oi(at(Vt(r),{size:32})),...o])}}if(Vt(r)!==parseInt(i))throw new eP({expectedSize:parseInt(i),value:r});return{dynamic:!1,encoded:oi(r,{dir:"right"})}}function wA(r){return{dynamic:!1,encoded:oi(qy(r))}}function _A(r,{signed:e}){return{dynamic:!1,encoded:at(r,{size:32,signed:e})}}function EA(r){const e=Gh(r),t=Math.ceil(Vt(e)/32),i=[];for(let s=0;s<t;s++)i.push(oi(kt(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Vn([oi(at(Vt(e),{size:32})),...i])}}function xA(r,{param:e}){let t=!1;const i=[];for(let s=0;s<e.components.length;s++){const o=e.components[s],u=Array.isArray(r)?s:o.name,l=Zh({param:o,value:r[u]});i.push(l),l.dynamic&&(t=!0)}return{dynamic:t,encoded:t?Qh(i):Vn(i.map(({encoded:s})=>s))}}function Oc(r){const e=r.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Ta({abi:r,args:e=[],name:t}){const i=r.filter(s=>"name"in s&&s.name===t);if(i.length!==0){if(i.length===1)return i[0];for(const s of i){if(!("inputs"in s))continue;if(!e||e.length===0){if(!s.inputs||s.inputs.length===0)return s;continue}if(!s.inputs||s.inputs.length===0||s.inputs.length!==e.length)continue;if(e.every((u,l)=>{const f="inputs"in s&&s.inputs[l];return f?rh(u,f):!1}))return s}return i[0]}}function rh(r,e){const t=typeof r,i=e.type;switch(i){case"address":return qn(r);case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return i==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>rh(Object.values(r)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?t==="string"||r instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(r)&&r.every(s=>rh(s,{...e,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ef({abi:r,eventName:e,args:t}){var l;let i=r[0];if(e&&(i=Ta({abi:r,args:t,name:e}),!i))throw new tg(e,{docsPath:"/docs/contract/encodeEventTopics"});if(i.type!=="event")throw new tg(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const s=Vi(i),o=Qy(s);let u=[];if(t&&"inputs"in i){const f=(l=i.inputs)==null?void 0:l.filter(b=>"indexed"in b&&b.indexed),g=Array.isArray(t)?t:Object.values(t).length>0?(f==null?void 0:f.map(b=>t[b.name]))??[]:[];g.length>0&&(u=(f==null?void 0:f.map((b,S)=>Array.isArray(g[S])?g[S].map((y,w)=>ig({param:b,value:g[S][w]})):g[S]?ig({param:b,value:g[S]}):null))??[])}return[o,...u]}function ig({param:r,value:e}){if(r.type==="string"||r.type==="bytes")return Rr(Ui(e));if(r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/))throw new hP(r.type);return Ca([r],[e])}function Pc(r,{method:e}){var i,s;const t={};return r.transport.type==="fallback"&&((s=(i=r.transport).onResponse)==null||s.call(i,({method:o,response:u,status:l,transport:f})=>{l==="success"&&e===o&&(t[u]=f.request)})),o=>t[o]||r.request}async function rm(r,{address:e,abi:t,args:i,eventName:s,fromBlock:o,strict:u,toBlock:l}){const f=Pc(r,{method:"eth_newFilter"}),g=s?ef({abi:t,args:i,eventName:s}):void 0,b=await r.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof o=="bigint"?at(o):o,toBlock:typeof l=="bigint"?at(l):l,topics:g}]});return{abi:t,args:i,eventName:s,id:b,request:f(b),strict:u,type:"event"}}function dn(r){return typeof r=="string"?{address:r,type:"json-rpc"}:r}const nm=r=>kt(typeof r=="string"?Xy(r):Zy(r),0,4);function yi({abi:r,args:e,functionName:t}){let i=r[0];if(t&&(i=Ta({abi:r,args:e,name:t}),!i))throw new nc(t,{docsPath:"/docs/contract/encodeFunctionData"});if(i.type!=="function")throw new nc(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const s=Vi(i),o=nm(s),u="inputs"in i&&i.inputs?Ca(i.inputs,e??[]):void 0;return Xh([o,u??"0x"])}const im={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},SA={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},DA={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function tf(r,e){const t=e?`${e}${r.toLowerCase()}`:r.substring(2).toLowerCase(),i=Rr(Bn(t),"bytes"),s=(e?t.substring(`${e}0x`.length):t).split("");for(let o=0;o<40;o+=2)i[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(i[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());return`0x${s.join("")}`}function IA(r,e){if(!qn(r))throw new wa({address:r});return tf(r,e)}function Ac(r,e){if(e==="0x"&&r.length>0)throw new Sc;if(Vt(e)&&Vt(e)<32)throw new Vh({data:e,params:r,size:Vt(e)});return OA({data:e,params:r})}function OA({data:r,params:e}){const t=[];let i=0;for(let s=0;s<e.length;s++){if(i>=Vt(r))throw new Vh({data:r,params:e,size:Vt(r)});const o=e[s],{consumed:u,value:l}=_s({data:r,param:o,position:i});t.push(l),i+=u}return t}function _s({data:r,param:e,position:t}){const i=Oc(e.type);if(i){const[o,u]=i;return AA(r,{length:o,param:{...e,type:u},position:t})}if(e.type==="tuple")return RA(r,{param:e,position:t});if(e.type==="string")return NA(r,{position:t});if(e.type.startsWith("bytes"))return TA(r,{param:e,position:t});const s=kt(r,t,t+32,{strict:!0});if(e.type.startsWith("uint")||e.type.startsWith("int"))return $A(s,{param:e});if(e.type==="address")return PA(s);if(e.type==="bool")return CA(s);throw new cP(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function PA(r){return{consumed:32,value:tf(kt(r,-20))}}function AA(r,{param:e,length:t,position:i}){if(!t){const u=xr(kt(r,i,i+32,{strict:!0})),l=xr(kt(r,u,u+32,{strict:!0}));let f=0;const g=[];for(let b=0;b<l;++b){const S=_s({data:kt(r,u+32),param:e,position:f});f+=S.consumed,g.push(S.value)}return{value:g,consumed:32}}if(ic(e)){const u=Oc(e.type),l=!(u!=null&&u[0]);let f=0;const g=[];for(let b=0;b<t;++b){const S=xr(kt(r,i,i+32,{strict:!0})),y=_s({data:kt(r,S),param:e,position:l?f:b*32});f+=y.consumed,g.push(y.value)}return{value:g,consumed:32}}let s=0;const o=[];for(let u=0;u<t;++u){const l=_s({data:r,param:e,position:i+s});s+=l.consumed,o.push(l.value)}return{value:o,consumed:s}}function CA(r){return{consumed:32,value:yP(r)}}function TA(r,{param:e,position:t}){const[i,s]=e.type.split("bytes");if(!s){const u=xr(kt(r,t,t+32,{strict:!0})),l=xr(kt(r,u,u+32,{strict:!0}));return l===0?{consumed:32,value:"0x"}:{consumed:32,value:kt(r,u+32,u+32+l,{strict:!0})}}return{consumed:32,value:kt(r,t,t+parseInt(s),{strict:!0})}}function $A(r,{param:e}){const t=e.type.startsWith("int");return{consumed:32,value:parseInt(e.type.split("int")[1]||"256")>48?Wh(r,{signed:t}):xr(r,{signed:t})}}function NA(r,{position:e}){const t=xr(kt(r,e,e+32,{strict:!0})),i=xr(kt(r,t,t+32,{strict:!0}));return i===0?{consumed:32,value:""}:{consumed:32,value:mP(ws(kt(r,t+32,t+32+i,{strict:!0})))}}function RA(r,{param:e,position:t}){const i=e.components.length===0||e.components.some(({name:u})=>!u),s=i?[]:{};let o=0;if(ic(e)){const u=xr(kt(r,t,t+32,{strict:!0}));for(let l=0;l<e.components.length;++l){const f=e.components[l],g=_s({data:kt(r,u),param:f,position:o});o+=g.consumed,s[i?l:f==null?void 0:f.name]=g.value}return{consumed:32,value:s}}for(let u=0;u<e.components.length;++u){const l=e.components[u],f=_s({data:r,param:l,position:t+o});o+=f.consumed,s[i?u:l==null?void 0:l.name]=f.value}return{consumed:o,value:s}}function ic(r){var i;const{type:e}=r;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(i=r.components)==null?void 0:i.some(ic);const t=Oc(r.type);return!!(t&&ic({...r,type:t[1]}))}function FA({abi:r,data:e}){const t=kt(e,0,4);if(t==="0x")throw new Sc;const s=[...r||[],SA,DA].find(o=>o.type==="error"&&t===nm(Vi(o)));if(!s)throw new rP(t,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Ac(s.inputs,kt(e,4)):void 0,errorName:s.name}}const Sr=(r,e,t)=>JSON.stringify(r,(i,s)=>{const o=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(i,o):o},t);function sm({abiItem:r,args:e,includeFunctionName:t=!0,includeName:i=!1}){if("name"in r&&"inputs"in r&&r.inputs)return`${t?r.name:""}(${r.inputs.map((s,o)=>`${i&&s.name?`${s.name}: `:""}${typeof e[o]=="object"?Sr(e[o]):e[o]}`).join(", ")})`}const am={gwei:9,wei:18},MA={ether:-9,wei:9};function ki(r,e){let t=r.toString();const i=t.startsWith("-");i&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,o]=[t.slice(0,t.length-e),t.slice(t.length-e)];return o=o.replace(/(0+)$/,""),`${i?"-":""}${s||"0"}${o?`.${o}`:""}`}function tr(r,e="wei"){return ki(r,am[e])}function qr(r,e="wei"){return ki(r,MA[e])}function Cc(r){const e=Object.entries(r).map(([i,s])=>s===void 0||s===!1?null:[i,s]).filter(Boolean),t=e.reduce((i,[s])=>Math.max(i,s.length),0);return e.map(([i,s])=>`  ${`${i}:`.padEnd(t+1)}  ${s}`).join(`
`)}class LA extends ge{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class jA extends ge{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:S,value:y}){const w=Cc({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:t==null?void 0:t.address,to:S,value:typeof y<"u"&&`${tr(y)} ${(s==null?void 0:s.nativeCurrency.symbol)||"ETH"}`,data:o,gas:u,gasPrice:typeof l<"u"&&`${qr(l)} gwei`,maxFeePerGas:typeof f<"u"&&`${qr(f)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${qr(g)} gwei`,nonce:b});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",w].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class om extends ge{constructor({blockHash:e,blockNumber:t,blockTag:i,hash:s,index:o}){let u="Transaction";i&&o!==void 0&&(u=`Transaction at block time "${i}" at index "${o}"`),e&&o!==void 0&&(u=`Transaction at block hash "${e}" at index "${o}"`),t&&o!==void 0&&(u=`Transaction at block number "${t}" at index "${o}"`),s&&(u=`Transaction with hash "${s}"`),super(`${u} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class cm extends ge{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class kA extends ge{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}class um extends ge{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:S,value:y}){const w=t?dn(t):void 0,m=Cc({from:w==null?void 0:w.address,to:S,value:typeof y<"u"&&`${tr(y)} ${(s==null?void 0:s.nativeCurrency.symbol)||"ETH"}`,data:o,gas:u,gasPrice:typeof l<"u"&&`${qr(l)} gwei`,maxFeePerGas:typeof f<"u"&&`${qr(f)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${qr(g)} gwei`,nonce:b});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class rf extends ge{constructor(e,{abi:t,args:i,contractAddress:s,docsPath:o,functionName:u,sender:l}){const f=Ta({abi:t,args:i,name:u}),g=f?sm({abiItem:f,args:i,includeFunctionName:!1,includeName:!1}):void 0,b=f?Vi(f,{includeName:!0}):void 0,S=Cc({address:s&&JO(s),function:b,args:g&&g!=="()"&&`${[...Array((u==null?void 0:u.length)??0).keys()].map(()=>" ").join("")}${g}`,sender:l});super(e.shortMessage||`An unknown error occurred while executing the contract function "${u}".`,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",S].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=t,this.args=i,this.cause=e,this.contractAddress=s,this.functionName=u,this.sender=l}}class UA extends ge{constructor({abi:e,data:t,functionName:i,message:s}){let o,u,l;if(t&&t!=="0x"){o=FA({abi:e,data:t});const{abiItem:f,errorName:g,args:b}=o;if(g==="Error")l=b[0];else if(g==="Panic"){const[S]=b;l=im[S]}else{const S=f?Vi(f,{includeName:!0}):void 0,y=f&&b?sm({abiItem:f,args:b,includeFunctionName:!1,includeName:!1}):void 0;u=[S?`Error: ${S}`:"",y&&y!=="()"?`       ${[...Array((g==null?void 0:g.length)??0).keys()].map(()=>" ").join("")}${y}`:""]}}else s&&(l=s);super(l&&l!=="execution reverted"?[`The contract function "${i}" reverted with the following reason:`,l].join(`
`):`The contract function "${i}" reverted.`,{metaMessages:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.reason=l,this.data=o}}class BA extends ge{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class nf extends ge{constructor({data:e,message:t}){super(t||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}const qA=3;function _a(r,{abi:e,address:t,args:i,docsPath:s,functionName:o,sender:u}){const{code:l,data:f,message:g,shortMessage:b}=r instanceof nf?r:r instanceof ge?r.walk(y=>"data"in y):{};let S=r;return r instanceof Sc?S=new BA({functionName:o}):l===qA&&(f||g||b)&&(S=new UA({abi:e,data:typeof f=="object"?f.data:f,functionName:o,message:b??g})),new rf(S,{abi:e,args:i,contractAddress:t,docsPath:s,functionName:o,sender:u})}class $a extends ge{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join(`
`),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}class zA extends ge{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:S,value:y}){const w=Cc({from:t==null?void 0:t.address,to:S,value:typeof y<"u"&&`${tr(y)} ${(s==null?void 0:s.nativeCurrency.symbol)||"ETH"}`,data:o,gas:u,gasPrice:typeof l<"u"&&`${qr(l)} gwei`,maxFeePerGas:typeof f<"u"&&`${qr(f)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${qr(g)} gwei`,nonce:b});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",w].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}class Es extends ge{constructor({cause:e,message:t}={}){var s;const i=(s=t==null?void 0:t.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(Es,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Es,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class sc extends ge{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${qr(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(sc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class nh extends ge{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${qr(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(nh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class ih extends ge{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(ih,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class sh extends ge{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(sh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported/});class ah extends ge{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(ah,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class oh extends ge{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(oh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class ch extends ge{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(ch,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class uh extends ge{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(uh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class lh extends ge{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(lh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class ac extends ge{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:i}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${qr(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${i?` = ${qr(i)} gwei`:""}).`].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(ac,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class HA extends ge{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.message}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}class pa extends ge{constructor({body:e,details:t,headers:i,status:s,url:o}){super("HTTP request failed.",{details:t,metaMessages:[s&&`Status: ${s}`,`URL: ${xc(o)}`,e&&`Request body: ${Sr(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class KA extends ge{constructor({body:e,details:t,url:i}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${xc(i)}`,`Request body: ${Sr(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class sf extends ge{constructor({body:e,error:t,url:i}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${xc(i)}`,`Request body: ${Sr(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class hh extends ge{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${xc(t)}`,`Request body: ${Sr(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}const VA=-1;class Fr extends ge{constructor(e,{code:t,docsPath:i,metaMessages:s,shortMessage:o}){super(o,{cause:e,docsPath:i,metaMessages:s||(e==null?void 0:e.metaMessages)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof sf?e.code:t??VA}}class Ps extends Fr{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class WA extends Fr{constructor(e){super(e,{code:-32700,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}class GA extends Fr{constructor(e){super(e,{code:-32600,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}class YA extends Fr{constructor(e){super(e,{code:-32601,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}class JA extends Fr{constructor(e){super(e,{code:-32602,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}class XA extends Fr{constructor(e){super(e,{code:-32603,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}class lm extends Fr{constructor(e){super(e,{code:-32e3,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}class ZA extends Fr{constructor(e){super(e,{code:-32001,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}class QA extends Fr{constructor(e){super(e,{code:-32002,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}class hm extends Fr{constructor(e){super(e,{code:-32003,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}class sg extends Fr{constructor(e){super(e,{code:-32004,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}class e8 extends Fr{constructor(e){super(e,{code:-32005,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}class t8 extends Fr{constructor(e){super(e,{code:-32006,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}class r8 extends Ps{constructor(e){super(e,{code:4001,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}class n8 extends Ps{constructor(e){super(e,{code:4100,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}class i8 extends Ps{constructor(e){super(e,{code:4200,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}class s8 extends Ps{constructor(e){super(e,{code:4900,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}class a8 extends Ps{constructor(e){super(e,{code:4901,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}class o8 extends Ps{constructor(e){super(e,{code:4902,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}class c8 extends Fr{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}function af(r){return r instanceof hm||r instanceof lm||r instanceof sf&&r.code===Es.code}function of(r,e){var i;const t=r.details.toLowerCase();return sc.nodeMessage.test(t)?new sc({cause:r,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):nh.nodeMessage.test(t)?new nh({cause:r,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):ih.nodeMessage.test(t)?new ih({cause:r,nonce:e==null?void 0:e.nonce}):sh.nodeMessage.test(t)?new sh({cause:r,nonce:e==null?void 0:e.nonce}):ah.nodeMessage.test(t)?new ah({cause:r,nonce:e==null?void 0:e.nonce}):oh.nodeMessage.test(t)?new oh({cause:r}):ch.nodeMessage.test(t)?new ch({cause:r,gas:e==null?void 0:e.gas}):uh.nodeMessage.test(t)?new uh({cause:r,gas:e==null?void 0:e.gas}):lh.nodeMessage.test(t)?new lh({cause:r}):ac.nodeMessage.test(t)?new ac({cause:r,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):t.match(Es.nodeMessage)||"code"in r.cause&&((i=r.cause)==null?void 0:i.code)===Es.code?new Es({cause:r,message:r.cause.details||r.details}):new HA({cause:r.cause.cause})}function u8(r,{docsPath:e,...t}){let i=r;return af(r)&&(i=of(r,t)),new zA(i,{docsPath:e,...t})}function cf(r,{formatter:e}){return e?Object.keys(e({})).reduce((i,s)=>(r!=null&&r.hasOwnProperty(s)&&(i[s]=r[s]),i),{}):{}}function As(r,{formatter:e}){return e(r)}function uf(r){return{...r,gas:typeof r.gas<"u"?at(r.gas):void 0,gasPrice:typeof r.gasPrice<"u"?at(r.gasPrice):void 0,maxFeePerGas:typeof r.maxFeePerGas<"u"?at(r.maxFeePerGas):void 0,maxPriorityFeePerGas:typeof r.maxPriorityFeePerGas<"u"?at(r.maxPriorityFeePerGas):void 0,nonce:typeof r.nonce<"u"?at(r.nonce):void 0,value:typeof r.value<"u"?at(r.value):void 0}}function Tc(r){const{account:e,gasPrice:t,maxFeePerGas:i,maxPriorityFeePerGas:s,to:o}=r,u=e?dn(e):void 0;if(u&&!qn(u.address))throw new wa({address:u.address});if(o&&!qn(o))throw new wa({address:o});if(typeof t<"u"&&(typeof i<"u"||typeof s<"u"))throw new LA;if(i&&i>2n**256n-1n)throw new sc({maxFeePerGas:i});if(s&&i&&s>i)throw new ac({maxFeePerGas:i,maxPriorityFeePerGas:s})}class l8 extends ge{constructor({blockHash:e,blockNumber:t}){let i="Block";e&&(i=`Block at hash "${e}"`),t&&(i=`Block at number "${t}"`),super(`${i} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const fm={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function dm(r){const e={...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,chainId:r.chainId?xr(r.chainId):void 0,gas:r.gas?BigInt(r.gas):void 0,gasPrice:r.gasPrice?BigInt(r.gasPrice):void 0,maxFeePerGas:r.maxFeePerGas?BigInt(r.maxFeePerGas):void 0,maxPriorityFeePerGas:r.maxPriorityFeePerGas?BigInt(r.maxPriorityFeePerGas):void 0,nonce:r.nonce?xr(r.nonce):void 0,to:r.to?r.to:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,type:r.type?fm[r.type]:void 0,value:r.value?BigInt(r.value):void 0,v:r.v?BigInt(r.v):void 0};return e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip2930"&&(delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e}function h8(r){var t;const e=(t=r.transactions)==null?void 0:t.map(i=>typeof i=="string"?i:dm(i));return{...r,baseFeePerGas:r.baseFeePerGas?BigInt(r.baseFeePerGas):null,difficulty:r.difficulty?BigInt(r.difficulty):void 0,gasLimit:r.gasLimit?BigInt(r.gasLimit):void 0,gasUsed:r.gasUsed?BigInt(r.gasUsed):void 0,hash:r.hash?r.hash:null,logsBloom:r.logsBloom?r.logsBloom:null,nonce:r.nonce?r.nonce:null,number:r.number?BigInt(r.number):null,size:r.size?BigInt(r.size):void 0,timestamp:r.timestamp?BigInt(r.timestamp):void 0,transactions:e,totalDifficulty:r.totalDifficulty?BigInt(r.totalDifficulty):null}}async function Ea(r,{blockHash:e,blockNumber:t,blockTag:i="latest",includeTransactions:s=!1}={}){var l,f;const o=t!==void 0?at(t):void 0;let u=null;if(e?u=await r.request({method:"eth_getBlockByHash",params:[e,s]}):u=await r.request({method:"eth_getBlockByNumber",params:[o||i,s]}),!u)throw new l8({blockHash:e,blockNumber:t});return As(u,{formatter:((f=(l=r.chain)==null?void 0:l.formatters)==null?void 0:f.block)||h8})}async function pm(r){const e=await r.request({method:"eth_gasPrice"});return BigInt(e)}async function gm(r,{address:e,blockTag:t="latest",blockNumber:i}){const s=await r.request({method:"eth_getTransactionCount",params:[e,i?at(i):t]});return xr(s)}const Ol=1500000000n;async function ym(r,e){const{account:t,gas:i,gasPrice:s,maxFeePerGas:o,maxPriorityFeePerGas:u,nonce:l}=e;if(!t)throw new $a;const f=dn(t),g=await Ea(r,{blockTag:"latest"}),b={...e,from:f.address};if(typeof l>"u"&&(b.nonce=await gm(r,{address:f.address,blockTag:"pending"})),g.baseFeePerGas){if(typeof s<"u")throw new ge("Chain does not support legacy `gasPrice`.");if(typeof o>"u")b.maxPriorityFeePerGas=u??Ol,b.maxFeePerGas=g.baseFeePerGas*120n/100n+b.maxPriorityFeePerGas;else{if(typeof u>"u"&&o<Ol)throw new ge("`maxFeePerGas` cannot be less than the default `maxPriorityFeePerGas` (1.5 gwei).");b.maxFeePerGas=o,b.maxPriorityFeePerGas=u??Ol}}else{if(typeof o<"u"||typeof u<"u")throw new ge("Chain does not support EIP-1559 fees.");typeof s>"u"&&(b.gasPrice=await pm(r)*120n/100n)}return typeof i>"u"&&(b.gas=await lf(r,{...b,account:{address:f.address,type:"json-rpc"}})),Tc(b),b}async function lf(r,e){var s,o;const t=e.account??r.account;if(!t)throw new $a({docsPath:"/docs/actions/public/estimateGas"});const i=dn(t);try{const{accessList:u,blockNumber:l,blockTag:f,data:g,gas:b,gasPrice:S,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:m,to:I,value:A,...z}=i.type==="local"?await ym(r,e):e,N=(l?at(l):void 0)||f;Tc(e);const P=(o=(s=r.chain)==null?void 0:s.formatters)==null?void 0:o.transactionRequest,T=As({from:i.address,accessList:u,data:g,gas:b,gasPrice:S,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:m,to:I,value:A,...cf(z,{formatter:P})},{formatter:P||uf}),x=await r.request({method:"eth_estimateGas",params:N?[T,N]:[T]});return BigInt(x)}catch(u){throw u8(u,{...e,account:i,chain:r.chain})}}async function f8(r,{abi:e,address:t,args:i,functionName:s,...o}){const u=yi({abi:e,args:i,functionName:s});try{return await lf(r,{data:u,to:t,...o})}catch(l){const f=o.account?dn(o.account):void 0;throw _a(l,{abi:e,address:t,args:i,docsPath:"/docs/contract/simulateContract",functionName:s,sender:f==null?void 0:f.address})}}const Pl="/docs/contract/decodeFunctionResult";function Cs({abi:r,args:e,functionName:t,data:i}){let s=r[0];if(t&&(s=Ta({abi:r,args:e,name:t}),!s))throw new nc(t,{docsPath:Pl});if(s.type!=="function")throw new nc(void 0,{docsPath:Pl});if(!s.outputs)throw new sP(s.name,{docsPath:Pl});const o=Ac(s.outputs,i);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const fh=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],mm=[{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],ag=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],og=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]}],d8=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}],p8="0x82ad56cb";class dh extends ge{constructor({blockNumber:e,chain:t,contract:i}){super(`Chain "${t.name}" does not support contract "${i.name}".`,{metaMessages:["This could be due to any of the following:",...e&&i.blockCreated&&i.blockCreated>e?[`- The contract "${i.name}" was not deployed until block ${i.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${i.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class g8 extends ge{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class y8 extends ge{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class bm extends ge{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}function m8({chain:r,currentChainId:e}){if(!r)throw new y8;if(e!==r.id)throw new g8({chain:r,currentChainId:e})}function Ts({blockNumber:r,chain:e,contract:t}){var s;const i=(s=e==null?void 0:e.contracts)==null?void 0:s[t];if(!i)throw new dh({chain:e,contract:{name:t}});if(r&&i.blockCreated&&i.blockCreated>r)throw new dh({blockNumber:r,chain:e,contract:{name:t,blockCreated:i.blockCreated}});return i.address}function b8(r,{docsPath:e,...t}){let i=r;return af(r)&&(i=of(r,t)),new um(i,{docsPath:e,...t})}const Al=new Map;function vm({fn:r,id:e,shouldSplitBatch:t,wait:i=0}){const s=async()=>{const g=l();o();const b=g.map(({args:S})=>S);b.length!==0&&r(b).then(S=>{g.forEach(({pendingPromise:y},w)=>{var m;return(m=y.resolve)==null?void 0:m.call(y,[S[w],S])})}).catch(S=>{g.forEach(({pendingPromise:y})=>{var w;return(w=y.reject)==null?void 0:w.call(y,S)})})},o=()=>Al.delete(e),u=()=>l().map(({args:g})=>g),l=()=>Al.get(e)||[],f=g=>Al.set(e,[...l(),g]);return{flush:o,async schedule(g){const b={},S=new Promise((m,I)=>{b.resolve=m,b.reject=I});return(t==null?void 0:t([...u(),g]))&&s(),l().length>0?(f({args:g,pendingPromise:b}),S):(f({args:g,pendingPromise:b}),setTimeout(s,i),S)}}}async function $c(r,e){var z,F,N;const{account:t,batch:i=!!((z=r.batch)!=null&&z.multicall),blockNumber:s,blockTag:o="latest",accessList:u,data:l,gas:f,gasPrice:g,maxFeePerGas:b,maxPriorityFeePerGas:S,nonce:y,to:w,value:m,...I}=e,A=t?dn(t):void 0;try{Tc(e);const T=(s?at(s):void 0)||o,x=(N=(F=r.chain)==null?void 0:F.formatters)==null?void 0:N.transactionRequest,h=As({from:A==null?void 0:A.address,accessList:u,data:l,gas:f,gasPrice:g,maxFeePerGas:b,maxPriorityFeePerGas:S,nonce:y,to:w,value:m,...cf(I,{formatter:x})},{formatter:x||uf});if(i&&v8({request:h}))try{return await w8(r,{...h,blockNumber:s,blockTag:o})}catch(K){if(!(K instanceof bm)&&!(K instanceof dh))throw K}const E=await r.request({method:"eth_call",params:T?[h,T]:[h]});return E==="0x"?{data:void 0}:{data:E}}catch(P){const T=_8(P),{offchainLookup:x,offchainLookupSignature:h}=await wh(()=>import("./ccip-80608058.js"),[]);if((T==null?void 0:T.slice(0,10))===h&&w)return{data:await x(r,{data:T,to:w})};throw b8(P,{...e,account:A,chain:r.chain})}}function v8({request:r}){const{data:e,to:t,...i}=r;return!(!e||e.startsWith(p8)||!t||Object.values(i).filter(s=>typeof s<"u").length>0)}async function w8(r,e){var I;const{batchSize:t=1024,wait:i=0}=typeof((I=r.batch)==null?void 0:I.multicall)=="object"?r.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:u,multicallAddress:l,to:f}=e;let g=l;if(!g){if(!r.chain)throw new bm;g=Ts({blockNumber:s,chain:r.chain,contract:"multicall3"})}const S=(s?at(s):void 0)||o,{schedule:y}=vm({id:`${r.uid}.${S}`,wait:i,shouldSplitBatch(A){return A.reduce((F,{data:N})=>F+(N.length-2),0)>t*2},fn:async A=>{const z=A.map(P=>({allowFailure:!0,callData:P.data,target:P.to})),F=yi({abi:fh,args:[z],functionName:"aggregate3"}),N=await r.request({method:"eth_call",params:[{data:F,to:g},S]});return Cs({abi:fh,args:[z],functionName:"aggregate3",data:N||"0x"})}}),[{returnData:w,success:m}]=await y({data:u,to:f});if(!m)throw new nf({data:w});return w==="0x"?{data:void 0}:{data:w}}function _8(r){if(!(r instanceof ge))return;const e=r.walk();return typeof e.data=="object"?e.data.data:e.data}async function li(r,{abi:e,address:t,args:i,functionName:s,...o}){const u=yi({abi:e,args:i,functionName:s});try{const{data:l}=await $c(r,{data:u,to:t,...o});return Cs({abi:e,args:i,functionName:s,data:l||"0x"})}catch(l){throw _a(l,{abi:e,address:t,args:i,docsPath:"/docs/contract/readContract",functionName:s})}}async function E8(r,{abi:e,address:t,args:i,dataSuffix:s,functionName:o,...u}){const l=u.account?dn(u.account):void 0,f=yi({abi:e,args:i,functionName:o});try{const{data:g}=await $c(r,{batch:!1,data:`${f}${s?s.replace("0x",""):""}`,to:t,...u});return{result:Cs({abi:e,args:i,functionName:o,data:g||"0x"}),request:{abi:e,address:t,args:i,functionName:o,...u}}}catch(g){throw _a(g,{abi:e,address:t,args:i,docsPath:"/docs/contract/simulateContract",functionName:o,sender:l==null?void 0:l.address})}}const Cl=new Map,cg=new Map;let x8=0;function $s(r,e,t){const i=++x8,s=()=>Cl.get(r)||[],o=()=>{const b=s();Cl.set(r,b.filter(S=>S.id!==i))},u=()=>{const b=cg.get(r);s().length===1&&b&&b(),o()},l=s();if(Cl.set(r,[...l,{id:i,fns:e}]),l&&l.length>0)return u;const f={};for(const b in e)f[b]=(...S)=>{const y=s();y.length!==0&&y.forEach(w=>{var m,I;return(I=(m=w.fns)[b])==null?void 0:I.call(m,...S)})};const g=t(f);return typeof g=="function"&&cg.set(r,g),u}async function ph(r){return new Promise(e=>setTimeout(e,r))}function Na(r,{emitOnBegin:e,initialWaitTime:t,interval:i}){let s=!0;const o=()=>s=!1;return(async()=>{let l;e&&(l=await r({unpoll:o}));const f=await(t==null?void 0:t(l))??i;await ph(f);const g=async()=>{s&&(await r({unpoll:o}),await ph(i),g())};g()})(),o}const S8=new Map,D8=new Map;function I8(r){const e=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:u=>o.set(s,u)}),t=e(r,S8),i=e(r,D8);return{clear:()=>{t.clear(),i.clear()},promise:t,response:i}}async function O8(r,{cacheKey:e,maxAge:t=1/0}){const i=I8(e),s=i.response.get();if(s&&t>0&&new Date().getTime()-s.created.getTime()<t)return s.data;let o=i.promise.get();o||(o=r(),i.promise.set(o));try{const u=await o;return i.response.set({created:new Date,data:u}),u}finally{i.promise.clear()}}const P8=r=>`blockNumber.${r}`;async function Ra(r,{maxAge:e=r.pollingInterval}={}){const t=await O8(()=>r.request({method:"eth_blockNumber"}),{cacheKey:P8(r.uid),maxAge:e});return BigInt(t)}const ug="/docs/contract/decodeEventLog";function hf({abi:r,data:e,strict:t,topics:i}){const s=t??!0,[o,...u]=i;if(!o)throw new nP({docsPath:ug});const l=r.find(m=>m.type==="event"&&o===Qy(Vi(m)));if(!(l&&"name"in l)||l.type!=="event")throw new iP(o,{docsPath:ug});const{name:f,inputs:g}=l,b=g==null?void 0:g.some(m=>!("name"in m&&m.name));let S=b?[]:{};const y=g.filter(m=>"indexed"in m&&m.indexed);if(u.length>0)for(let m=0;m<y.length;m++){const I=y[m],A=u[m];if(!A)throw new Dc({abiItem:l,param:I});S[I.name||m]=A8({param:I,value:A})}const w=g.filter(m=>!("indexed"in m&&m.indexed));if(w.length>0){if(e&&e!=="0x")try{const m=Ac(w,e);if(m)if(b)S=[...S,...m];else for(let I=0;I<w.length;I++)S[w[I].name]=m[I]}catch(m){if(s)throw m instanceof Vh?new ma({abiItem:l,data:m.data,params:m.params,size:m.size}):m}else if(s)throw new ma({abiItem:l,data:"0x",params:w,size:0})}return{eventName:f,args:Object.values(S).length>0?S:void 0}}function A8({param:r,value:e}){return r.type==="string"||r.type==="bytes"||r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/)?e:(Ac([r],e)||[])[0]}function Bi(r,{args:e,eventName:t}={}){return{...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,logIndex:r.logIndex?Number(r.logIndex):null,transactionHash:r.transactionHash?r.transactionHash:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,...t?{args:e,eventName:t}:{}}}async function Nc(r,{filter:e}){const t="strict"in e&&e.strict;return(await e.request({method:"eth_getFilterChanges",params:[e.id]})).map(s=>{var o;if(typeof s=="string")return s;try{const{eventName:u,args:l}="abi"in e&&e.abi?hf({abi:e.abi,data:s.data,topics:s.topics,strict:t}):{eventName:void 0,args:void 0};return Bi(s,{args:l,eventName:u})}catch(u){let l,f;if(u instanceof ma||u instanceof Dc){if("strict"in e&&e.strict)return;l=u.abiItem.name,f=(o=u.abiItem.inputs)==null?void 0:o.some(g=>!("name"in g&&g.name))}return Bi(s,{args:f?[]:{},eventName:l})}}).filter(Boolean)}async function ff(r,{address:e,blockHash:t,fromBlock:i,toBlock:s,event:o,args:u,strict:l}={}){const f=l??!1;let g=[];o&&(g=ef({abi:[o],eventName:o.name,args:u}));let b;return t?b=await r.request({method:"eth_getLogs",params:[{address:e,topics:g,blockHash:t}]}):b=await r.request({method:"eth_getLogs",params:[{address:e,topics:g,fromBlock:typeof i=="bigint"?at(i):i,toBlock:typeof s=="bigint"?at(s):s}]}),b.map(S=>{var y;try{const{eventName:w,args:m}=o?hf({abi:[o],data:S.data,topics:S.topics,strict:f}):{eventName:void 0,args:void 0};return Bi(S,{args:m,eventName:w})}catch(w){let m,I;if(w instanceof ma||w instanceof Dc){if(f)return;m=w.abiItem.name,I=(y=w.abiItem.inputs)==null?void 0:y.some(A=>!("name"in A&&A.name))}return Bi(S,{args:I?[]:{},eventName:m})}}).filter(Boolean)}async function Rc(r,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function C8(r,{abi:e,address:t,args:i,batch:s=!0,eventName:o,onError:u,onLogs:l,pollingInterval:f=r.pollingInterval,strict:g}){const b=Sr(["watchContractEvent",t,i,s,r.uid,o,f]),S=g??!1;return $s(b,{onLogs:l,onError:u},y=>{let w,m,I=!1;const A=Na(async()=>{var z;if(!I){try{m=await rm(r,{abi:e,address:t,args:i,eventName:o,strict:S})}catch{}I=!0;return}try{let F;if(m)F=await Nc(r,{filter:m});else{const N=await Ra(r);w&&w!==N?F=await ff(r,{address:t,args:i,fromBlock:w+1n,toBlock:N,event:Ta({abi:e,name:o})}):F=[],w=N}if(F.length===0)return;s?y.onLogs(F):F.forEach(N=>y.onLogs([N]))}catch(F){(z=y.onError)==null||z.call(y,F)}},{emitOnBegin:!0,interval:f});return async()=>{m&&await Rc(r,{filter:m}),A()}})}function T8(r,{docsPath:e,...t}){let i=r;return af(r)&&(i=of(r,t)),new jA(i,{docsPath:e,...t})}async function oc(r){const e=await r.request({method:"eth_chainId"});return xr(e)}async function df(r,e){var I;const{account:t=r.account,chain:i=r.chain,accessList:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:S,value:y,...w}=e;if(!t)throw new $a({docsPath:"/docs/actions/wallet/sendTransaction"});const m=dn(t);try{Tc(e);let A;if(i!==null&&(A=await oc(r),m8({currentChainId:A,chain:i})),m.type==="local"){const N=await ym(r,{account:m,accessList:s,chain:i,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:S,value:y,...w});A||(A=await oc(r));const P=await m.signTransaction({...N,chainId:A});return await r.request({method:"eth_sendRawTransaction",params:[P]})}const z=(I=i==null?void 0:i.formatters)==null?void 0:I.transactionRequest,F=As({accessList:s,data:o,from:m.address,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:S,value:y,...cf(w,{formatter:z})},{formatter:z||uf});return await r.request({method:"eth_sendTransaction",params:[F]})}catch(A){throw T8(A,{...e,account:m,chain:e.chain||void 0})}}async function $8(r,{abi:e,address:t,args:i,dataSuffix:s,functionName:o,...u}){const l=yi({abi:e,args:i,functionName:o});return await df(r,{data:`${l}${s?s.replace("0x",""):""}`,to:t,...u})}const gh=256;let Ho=gh,Ko;function N8(r=11){if(!Ko||Ho+r>gh*2){Ko="",Ho=0;for(let e=0;e<gh;e++)Ko+=(256+Math.random()*256|0).toString(16).substring(1)}return Ko.substring(Ho,Ho+++r)}function wm({chain:r,key:e="base",name:t="Base Client",pollingInterval:i=4e3,transport:s,type:o="base"}){const{config:u,request:l,value:f}=s({chain:r,pollingInterval:i});return{chain:r,key:e,name:t,pollingInterval:i,request:l,transport:{...u,...f},type:o,uid:N8()}}function _m(r,{delay:e=100,retryCount:t=2,shouldRetry:i=()=>!0}={}){return new Promise((s,o)=>{const u=async({count:l=0}={})=>{const f=async({error:g})=>{const b=typeof e=="function"?e({count:l,error:g}):e;b&&await ph(b),u({count:l+1})};try{const g=await r();s(g)}catch(g){if(l<t&&await i({count:l,error:g}))return f({error:g});o(g)}};u()})}const R8=r=>"code"in r?r.code!==-1&&r.code!==-32004&&r.code!==-32005&&r.code!==-32042&&r.code!==-32603:r instanceof pa&&r.status?r.status!==403&&r.status!==408&&r.status!==413&&r.status!==429&&r.status!==500&&r.status!==502&&r.status!==503&&r.status!==504:!1;function F8(r,{retryDelay:e=150,retryCount:t=3}={}){return async i=>_m(async()=>{try{return await r(i)}catch(s){const o=s;throw o.code===-32700?new WA(o):o.code===-32600?new GA(o):o.code===-32601?new YA(o):o.code===-32602?new JA(o):o.code===-32603?new XA(o):o.code===-32e3?new lm(o):o.code===-32001?new ZA(o):o.code===-32002?new QA(o):o.code===-32003?new hm(o):o.code===-32004?new sg(o):o.code===-32005?new e8(o):o.code===-32006?new t8(o):o.code===-32042?new sg(o):o.code===4001?new r8(o):o.code===4100?new n8(o):o.code===4200?new i8(o):o.code===4900?new s8(o):o.code===4901?new a8(o):o.code===4902?new o8(o):s instanceof ge?s:new c8(o)}},{delay:({count:s,error:o})=>{var u;if(o&&o instanceof pa){const l=(u=o==null?void 0:o.headers)==null?void 0:u.get("Retry-After");if(l!=null&&l.match(/\d/))return parseInt(l)*1e3}return~~(1<<s)*e},retryCount:t,shouldRetry:({error:s})=>!R8(s)})}function Em({key:r,name:e,request:t,retryCount:i=3,retryDelay:s=150,timeout:o,type:u},l){return{config:{key:r,name:e,request:t,retryCount:i,retryDelay:s,timeout:o,type:u},request:F8(t,{retryCount:i,retryDelay:s}),value:l}}function lg(r,e={}){const{key:t="custom",name:i="Custom Provider",retryDelay:s}=e;return({retryCount:o})=>Em({key:t,name:i,request:r.request.bind(r),retryCount:e.retryCount??o,retryDelay:s,type:"custom"})}class M8 extends ge{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}function xm(r,{errorInstance:e,timeout:t,signal:i}){return new Promise((s,o)=>{(async()=>{let u;try{const l=new AbortController;t>0&&(u=setTimeout(()=>{i?l.abort():o(e)},t)),s(await r({signal:l==null?void 0:l.signal}))}catch(l){l.name==="AbortError"&&o(e),o(l)}finally{clearTimeout(u)}})()})}let yh=0;async function L8(r,{body:e,fetchOptions:t={},timeout:i=1e4}){var l;const{headers:s,method:o,signal:u}=t;try{const f=await xm(async({signal:b})=>await fetch(r,{...t,body:Array.isArray(e)?Sr(e.map(y=>({jsonrpc:"2.0",id:yh++,...y}))):Sr({jsonrpc:"2.0",id:yh++,...e}),headers:{...s,"Content-Type":"application/json"},method:o||"POST",signal:u||(i>0?b:void 0)}),{errorInstance:new hh({body:e,url:r}),timeout:i,signal:!0});let g;if((l=f.headers.get("Content-Type"))!=null&&l.startsWith("application/json")?g=await f.json():g=await f.text(),!f.ok)throw new pa({body:e,details:Sr(g.error)||f.statusText,headers:f.headers,status:f.status,url:r});return g}catch(f){throw f instanceof pa||f instanceof hh?f:new pa({body:e,details:f.message,url:r})}}function j8(r,{body:e,onResponse:t}){if(r.readyState===r.CLOSED||r.readyState===r.CLOSING)throw new KA({body:e,url:r.url,details:"Socket is closed."});const i=yh++,s=({data:o})=>{var l;const u=JSON.parse(o);typeof u.id=="number"&&i!==u.id||(t==null||t(u),e.method==="eth_subscribe"&&typeof u.result=="string"&&r.subscriptions.set(u.result,s),e.method==="eth_unsubscribe"&&r.subscriptions.delete((l=e.params)==null?void 0:l[0]))};return r.requests.set(i,s),r.send(JSON.stringify({jsonrpc:"2.0",...e,id:i})),r}async function k8(r,{body:e,timeout:t=1e4}){return xm(()=>new Promise(i=>mh.webSocket(r,{body:e,onResponse:i})),{errorInstance:new hh({body:e,url:r.url}),timeout:t})}const mh={http:L8,webSocket:j8,webSocketAsync:k8};function U8(r,e={}){const{batch:t,fetchOptions:i,key:s="http",name:o="HTTP JSON-RPC",retryDelay:u}=e;return({chain:l,retryCount:f,timeout:g})=>{const{batchSize:b=1e3,wait:S=0}=typeof t=="object"?t:{},y=e.retryCount??f,w=g??e.timeout??1e4,m=r||(l==null?void 0:l.rpcUrls.default.http[0]);if(!m)throw new M8;return Em({key:s,name:o,async request({method:I,params:A}){const z={method:I,params:A},{schedule:F}=vm({id:`${r}`,wait:S,shouldSplitBatch(x){return x.length>b},fn:x=>mh.http(m,{body:x,fetchOptions:i,timeout:w})}),N=async x=>t?F(x):[await mh.http(m,{body:x,fetchOptions:i,timeout:w})],[{error:P,result:T}]=await N(z);if(P)throw new sf({body:z,error:P,url:m});return T},retryCount:y,retryDelay:u,timeout:w,type:"http"},{url:r})}}const B8=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,q8=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Sm({domain:r,message:e,primaryType:t,types:i}){const s=i,o=(u,l)=>{for(const f of u){const{name:g,type:b}=f,S=b,y=l[g],w=S.match(q8);if(w&&(typeof y=="number"||typeof y=="bigint")){const[A,z,F]=w;at(y,{signed:z==="int",size:parseInt(F)/8})}if(S==="address"&&typeof y=="string"&&!qn(y))throw new wa({address:y});const m=S.match(B8);if(m){const[A,z]=m;if(z&&Vt(y)!==parseInt(z))throw new aP({expectedSize:parseInt(z),givenSize:Vt(y)})}const I=s[S];I&&o(I,y)}};if(s.EIP712Domain&&r&&o(s.EIP712Domain,r),t!=="EIP712Domain"){const u=s[t];o(u,e)}}const Tl="/docs/contract/encodeDeployData";function Dm({abi:r,args:e,bytecode:t}){if(!e||e.length===0)return t;const i=r.find(o=>"type"in o&&o.type==="constructor");if(!i)throw new ZO({docsPath:Tl});if(!("inputs"in i))throw new eg({docsPath:Tl});if(!i.inputs||i.inputs.length===0)throw new eg({docsPath:Tl});const s=Ca(i.inputs,e);return Xh([t,s])}const z8={"0x0":"reverted","0x1":"success"};function H8(r){return{...r,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,contractAddress:r.contractAddress?r.contractAddress:null,cumulativeGasUsed:r.cumulativeGasUsed?BigInt(r.cumulativeGasUsed):null,effectiveGasPrice:r.effectiveGasPrice?BigInt(r.effectiveGasPrice):null,gasUsed:r.gasUsed?BigInt(r.gasUsed):null,logs:r.logs?r.logs.map(e=>Bi(e)):null,to:r.to?r.to:null,transactionIndex:r.transactionIndex?xr(r.transactionIndex):null,status:r.status?z8[r.status]:null,type:r.type?fm[r.type]:null}}function K8({domain:r,message:e,primaryType:t,types:i}){const s=typeof r>"u"?{}:r,o={EIP712Domain:[(s==null?void 0:s.name)&&{name:"name",type:"string"},(s==null?void 0:s.version)&&{name:"version",type:"string"},(s==null?void 0:s.chainId)&&{name:"chainId",type:"uint256"},(s==null?void 0:s.verifyingContract)&&{name:"verifyingContract",type:"address"},(s==null?void 0:s.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean),...i};Sm({domain:s,message:e,primaryType:t,types:o});const u=["0x1901"];return s&&u.push(V8({domain:s,types:o})),t!=="EIP712Domain"&&u.push(Im({data:e,primaryType:t,types:o})),Rr(Vn(u))}function V8({domain:r,types:e}){return Im({data:r,primaryType:"EIP712Domain",types:e})}function Im({data:r,primaryType:e,types:t}){const i=Om({data:r,primaryType:e,types:t});return Rr(i)}function Om({data:r,primaryType:e,types:t}){const i=[{type:"bytes32"}],s=[W8({primaryType:e,types:t})];for(const o of t[e]){const[u,l]=Am({types:t,name:o.name,type:o.type,value:r[o.name]});i.push(u),s.push(l)}return Ca(i,s)}function W8({primaryType:r,types:e}){const t=Wn(G8({primaryType:r,types:e}));return Rr(t)}function G8({primaryType:r,types:e}){let t="";const i=Pm({primaryType:r,types:e});i.delete(r);const s=[r,...Array.from(i).sort()];for(const o of s)t+=`${o}(${e[o].map(({name:u,type:l})=>`${l} ${u}`).join(",")})`;return t}function Pm({primaryType:r,types:e},t=new Set){const i=r.match(/^\w*/u),s=i==null?void 0:i[0];if(t.has(s)||e[s]===void 0)return t;t.add(s);for(const o of e[s])Pm({primaryType:o.type,types:e},t);return t}function Am({types:r,name:e,type:t,value:i}){if(r[t]!==void 0)return[{type:"bytes32"},Rr(Om({data:i,primaryType:t,types:r}))];if(t==="bytes")return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},Rr(i)];if(t==="string")return[{type:"bytes32"},Rr(Wn(i))];if(t.lastIndexOf("]")===t.length-1){const s=t.slice(0,t.lastIndexOf("[")),o=i.map(u=>Am({name:e,type:s,types:r,value:u}));return[{type:"bytes32"},Rr(Ca(o.map(([u])=>u),o.map(([,u])=>u)))]}return[{type:t},i]}function Y8(r,e){const t=(()=>typeof r=="string"?Bn(r):r.raw instanceof Uint8Array?r.raw:Ui(r.raw))(),i=Bn(`Ethereum Signed Message:
${t.length}`);return Rr(Vn([i,t]),e)}function zn(r,e){let[t,i="0"]=r.split(".");const s=t.startsWith("-");if(s&&(t=t.slice(1)),i=i.replace(/(0+)$/,""),e===0)t=`${Math.round(+`${t}.${i}`)}`,i="";else if(i.length>e){const[o,u,l]=[i.slice(0,e-1),i.slice(e-1,e),i.slice(e)],f=Math.round(+`${u}.${l}`);f>9?i=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):i=`${o}${f}`,i.length>e&&(i=i.slice(1),t=`${BigInt(t)+1n}`),i=i.slice(0,e)}else i=i.padEnd(e,"0");return BigInt(`${s?"-":""}${t}${i}`)}function Un(r,e="wei"){return zn(r,am[e])}function Cm(r){if(r.length!==66||r.indexOf("[")!==0||r.indexOf("]")!==65)return null;const e=`0x${r.slice(1,65)}`;return Kn(e)?e:null}function Tm(r){let e=new Uint8Array(32).fill(0);if(!r)return ba(e);const t=r.split(".");for(let i=t.length-1;i>=0;i-=1){const s=Cm(t[i]),o=s?Ui(s):Rr(Bn(t[i]),"bytes");e=Rr(Vn([e,o]),"bytes")}return ba(e)}function J8(r){return`[${r.slice(2)}]`}function X8(r){const e=new Uint8Array(32).fill(0);return r?Cm(r)||Rr(Bn(r)):ba(e)}function Fc(r){const e=r.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const t=new Uint8Array(Bn(e).byteLength+2);let i=0;const s=e.split(".");for(let o=0;o<s.length;o++){let u=Bn(s[o]);u.byteLength>255&&(u=Bn(J8(X8(s[o])))),t[i]=u.length,t.set(u,i+1),i+=u.length+1}return t.byteLength!==i+1?t.slice(0,i+1):t}async function Z8(r,{blockNumber:e,blockTag:t,name:i,universalResolverAddress:s}){var u;let o=s;if(!o){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Ts({blockNumber:e,chain:r.chain,contract:"ensUniversalResolver"})}try{const l=await li(r,{address:o,abi:mm,functionName:"resolve",args:[Wn(Fc(i)),yi({abi:og,functionName:"addr",args:[Tm(i)]})],blockNumber:e,blockTag:t});if(l[0]==="0x")return null;const f=Cs({abi:og,functionName:"addr",data:l[0]});return ws(f)==="0x00"?null:f}catch(l){if(l instanceof rf){const f=(u=l.cause)==null?void 0:u.reason;if(f!=null&&f.includes("Wildcard on non-extended resolvers is not supported"))return null}throw l}}class Q8 extends ge{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class ha extends ge{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class pf extends ge{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class eC extends ge{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const tC=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,rC=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,nC=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,iC=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function sC(r){try{const e=await fetch(r,{method:"HEAD"});if(e.status===200){const t=e.headers.get("content-type");return t==null?void 0:t.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(t=>{const i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=r})}}function hg(r,e){return r?r.endsWith("/")?r.slice(0,-1):r:e}function $m({uri:r,gatewayUrls:e}){const t=nC.test(r);if(t)return{uri:r,isOnChain:!0,isEncoded:t};const i=hg(e==null?void 0:e.ipfs,"https://ipfs.io"),s=hg(e==null?void 0:e.arweave,"https://arweave.net"),o=r.match(tC),{protocol:u,subpath:l,target:f,subtarget:g=""}=(o==null?void 0:o.groups)||{},b=u==="ipns:/"||l==="ipns/",S=u==="ipfs:/"||l==="ipfs/"||rC.test(r);if(r.startsWith("http")&&!b&&!S){let w=r;return e!=null&&e.arweave&&(w=r.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:w,isOnChain:!1,isEncoded:!1}}if((b||S)&&f)return{uri:`${i}/${b?"ipns":"ipfs"}/${f}${g}`,isOnChain:!1,isEncoded:!1};if(u==="ar:/"&&f)return{uri:`${s}/${f}${g||""}`,isOnChain:!1,isEncoded:!1};let y=r.replace(iC,"");if(y.startsWith("<svg")&&(y=`data:image/svg+xml;base64,${btoa(y)}`),y.startsWith("data:")||y.startsWith("{"))return{uri:y,isOnChain:!0,isEncoded:!1};throw new pf({uri:r})}function Nm(r){if(typeof r!="object"||!("image"in r)&&!("image_url"in r)&&!("image_data"in r))throw new Q8({data:r});return r.image||r.image_url||r.image_data}async function aC({gatewayUrls:r,uri:e}){try{const t=await fetch(e).then(s=>s.json());return await gf({gatewayUrls:r,uri:Nm(t)})}catch{throw new pf({uri:e})}}async function gf({gatewayUrls:r,uri:e}){const{uri:t,isOnChain:i}=$m({uri:e,gatewayUrls:r});if(i||await sC(t))return t;throw new pf({uri:e})}function oC(r){r.startsWith("did:nft:")&&(r=r.replace("did:nft:","").replace(/_/g,"/"));const[e,t,i]=r.split("/"),[s,o]=e.split(":"),[u,l]=t.split(":");if(!s||s.toLowerCase()!=="eip155")throw new ha({reason:"Only EIP-155 supported"});if(!o)throw new ha({reason:"Chain ID not found"});if(!l)throw new ha({reason:"Contract address not found"});if(!i)throw new ha({reason:"Token ID not found"});if(!u)throw new ha({reason:"ERC namespace not found"});return{chainID:parseInt(o),namespace:u.toLowerCase(),contractAddress:l,tokenID:i}}async function cC(r,{nft:e}){if(e.namespace==="erc721")return li(r,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return li(r,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new eC({namespace:e.namespace})}async function uC(r,{gatewayUrls:e,record:t}){return/eip155:/i.test(t)?lC(r,{gatewayUrls:e,record:t}):gf({uri:t,gatewayUrls:e})}async function lC(r,{gatewayUrls:e,record:t}){const i=oC(t),s=await cC(r,{nft:i}),{uri:o,isOnChain:u,isEncoded:l}=$m({uri:s,gatewayUrls:e});if(u&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const g=l?atob(o.replace("data:application/json;base64,","")):o,b=JSON.parse(g);return gf({uri:Nm(b),gatewayUrls:e})}let f=i.tokenID;return i.namespace==="erc1155"&&(f=f.replace("0x","").padStart(64,"0")),aC({gatewayUrls:e,uri:o.replace(/(?:0x)?{id}/,f)})}async function Rm(r,{blockNumber:e,blockTag:t,name:i,key:s,universalResolverAddress:o}){let u=o;if(!u){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=Ts({blockNumber:e,chain:r.chain,contract:"ensUniversalResolver"})}const l=await li(r,{address:u,abi:mm,functionName:"resolve",args:[Wn(Fc(i)),yi({abi:ag,functionName:"text",args:[Tm(i),s]})],blockNumber:e,blockTag:t});if(l[0]==="0x")return null;const f=Cs({abi:ag,functionName:"text",data:l[0]});return f===""?null:f}async function hC(r,{blockNumber:e,blockTag:t,gatewayUrls:i,name:s,universalResolverAddress:o}){const u=await Rm(r,{blockNumber:e,blockTag:t,key:"avatar",name:s,universalResolverAddress:o});if(!u)return null;try{return await uC(r,{record:u,gatewayUrls:i})}catch{return null}}async function fC(r,{address:e,blockNumber:t,blockTag:i,universalResolverAddress:s}){let o=s;if(!o){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Ts({blockNumber:t,chain:r.chain,contract:"ensUniversalResolver"})}const u=`${e.toLowerCase().substring(2)}.addr.reverse`;try{return(await li(r,{address:o,abi:[{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],functionName:"reverse",args:[Wn(Fc(u))],blockNumber:t,blockTag:i}))[0]}catch(l){if(l instanceof rf&&l.cause.reason===im[50])return null;throw l}}async function dC(r,{blockNumber:e,blockTag:t,name:i,universalResolverAddress:s}){let o=s;if(!o){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Ts({blockNumber:e,chain:r.chain,contract:"ensUniversalResolver"})}const[u]=await li(r,{address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Wn(Fc(i))],blockNumber:e,blockTag:t});return u}async function pC(r){const e=Pc(r,{method:"eth_newBlockFilter"}),t=await r.request({method:"eth_newBlockFilter"});return{id:t,request:e(t),type:"block"}}async function Fm(r,{address:e,args:t,event:i,fromBlock:s,strict:o,toBlock:u}={}){const l=Pc(r,{method:"eth_newFilter"});let f=[];i&&(f=ef({abi:[i],eventName:i.name,args:t}));const g=await r.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?at(s):s,toBlock:typeof u=="bigint"?at(u):u,...f.length?{topics:f}:{}}]});return{abi:i?[i]:void 0,args:t,eventName:i?i.name:void 0,id:g,request:l(g),strict:o,type:"event"}}async function Mm(r){const e=Pc(r,{method:"eth_newPendingTransactionFilter"}),t=await r.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}async function gC(r,{address:e,blockNumber:t,blockTag:i="latest"}){const s=t?at(t):void 0,o=await r.request({method:"eth_getBalance",params:[e,s||i]});return BigInt(o)}async function yC(r,{blockHash:e,blockNumber:t,blockTag:i="latest"}={}){const s=t!==void 0?at(t):void 0;let o;return e?o=await r.request({method:"eth_getBlockTransactionCountByHash",params:[e]}):o=await r.request({method:"eth_getBlockTransactionCountByNumber",params:[s||i]}),xr(o)}async function mC(r,{address:e,blockNumber:t,blockTag:i="latest"}){const s=t!==void 0?at(t):void 0,o=await r.request({method:"eth_getCode",params:[e,s||i]});if(o!=="0x")return o}function bC(r){var e;return{baseFeePerGas:r.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:r.gasUsedRatio,oldestBlock:BigInt(r.oldestBlock),reward:(e=r.reward)==null?void 0:e.map(t=>t.map(i=>BigInt(i)))}}async function vC(r,{blockCount:e,blockNumber:t,blockTag:i="latest",rewardPercentiles:s}){const o=t?at(t):void 0,u=await r.request({method:"eth_feeHistory",params:[at(e),o||i,s]});return bC(u)}async function wC(r,{filter:e}){const t=e.strict??!1;return(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>{var o;try{const{eventName:u,args:l}="abi"in e&&e.abi?hf({abi:e.abi,data:s.data,topics:s.topics,strict:t}):{eventName:void 0,args:void 0};return Bi(s,{args:l,eventName:u})}catch(u){let l,f;if(u instanceof ma||u instanceof Dc){if("strict"in e&&e.strict)return;l=u.abiItem.name,f=(o=u.abiItem.inputs)==null?void 0:o.some(g=>!("name"in g&&g.name))}return Bi(s,{args:f?[]:{},eventName:l})}}).filter(Boolean)}async function _C(r,{address:e,blockNumber:t,blockTag:i="latest",slot:s}){const o=t!==void 0?at(t):void 0;return await r.request({method:"eth_getStorageAt",params:[e,s,o||i]})}async function yf(r,{blockHash:e,blockNumber:t,blockTag:i="latest",hash:s,index:o}){var f,g;const u=t!==void 0?at(t):void 0;let l=null;if(s?l=await r.request({method:"eth_getTransactionByHash",params:[s]}):e?l=await r.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,at(o)]}):(u||i)&&(l=await r.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||i,at(o)]})),!l)throw new om({blockHash:e,blockNumber:t,blockTag:i,hash:s,index:o});return As(l,{formatter:((g=(f=r.chain)==null?void 0:f.formatters)==null?void 0:g.transaction)||dm})}async function EC(r,{hash:e,transactionReceipt:t}){const[i,s]=await Promise.all([Ra(r),e?yf(r,{hash:e}):void 0]),o=(t==null?void 0:t.blockNumber)||(s==null?void 0:s.blockNumber);return o?i-o+1n:0n}async function bh(r,{hash:e}){var i,s;const t=await r.request({method:"eth_getTransactionReceipt",params:[e]});if(!t)throw new cm({hash:e});return As(t,{formatter:((s=(i=r.chain)==null?void 0:i.formatters)==null?void 0:s.transactionReceipt)||H8})}async function xC(r,e){var I;const{allowFailure:t=!0,batchSize:i,blockNumber:s,blockTag:o,contracts:u,multicallAddress:l}=e,f=i??(typeof((I=r.batch)==null?void 0:I.multicall)=="object"&&r.batch.multicall.batchSize||1024),g=u;let b=l;if(!b){if(!r.chain)throw new Error("client chain not configured. multicallAddress is required.");b=Ts({blockNumber:s,chain:r.chain,contract:"multicall3"})}const S=[[]];let y=0,w=0;for(let A=0;A<g.length;A++){const{abi:z,address:F,args:N,functionName:P}=g[A];try{const T=yi({abi:z,args:N,functionName:P});w+=T.length,f>0&&w>f&&(y++,w=(T.length-2)/2,S[y]=[]),S[y]=[...S[y],{allowFailure:!0,callData:T,target:F}]}catch(T){const x=_a(T,{abi:z,address:F,args:N,docsPath:"/docs/contract/multicall",functionName:P});if(!t)throw x;S[y]=[...S[y],{allowFailure:!0,callData:"0x",target:F}]}}return(await Promise.all(S.map(A=>li(r,{abi:fh,address:b,args:[A],blockNumber:s,blockTag:o,functionName:"aggregate3"})))).flat().map(({returnData:A,success:z},F)=>{const N=S.flat(),{callData:P}=N[F],{abi:T,address:x,functionName:h,args:E}=g[F];try{if(P==="0x")throw new Sc;if(!z)throw new nf({data:A});const K=Cs({abi:T,data:A,functionName:h});return t?{result:K,status:"success"}:K}catch(K){const $=_a(K,{abi:T,address:x,args:E,docsPath:"/docs/contract/multicall",functionName:h});if(!t)throw $;return{error:$,result:void 0,status:"failure"}}})}const SC="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);BigInt(1);BigInt(2);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function DC(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function IC(r,e){const t=Kn(r)?Ui(r):r,i=Kn(e)?Ui(e):e;return DC(t,i)}async function Lm(r,{address:e,hash:t,signature:i,...s}){const o=Kn(i)?i:Wn(i);try{const{data:u}=await $c(r,{data:Dm({abi:d8,args:[e,t,o],bytecode:SC}),...s});return IC(u??"0x0","0x1")}catch(u){if(u instanceof um)return!1;throw u}}async function OC(r,{address:e,message:t,signature:i,...s}){const o=Y8(t);return Lm(r,{address:e,hash:o,signature:i,...s})}async function PC(r,{address:e,signature:t,message:i,primaryType:s,types:o,domain:u,...l}){const f=K8({message:i,primaryType:s,types:o,domain:u});return Lm(r,{address:e,hash:f,signature:t,...l})}function jm(r,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:i,onError:s,poll:o,pollingInterval:u=r.pollingInterval}){const l=typeof o<"u"?o:r.transport.type!=="webSocket";let f;return l?(()=>{const S=Sr(["watchBlockNumber",r.uid,e,t,u]);return $s(S,{onBlockNumber:i,onError:s},y=>Na(async()=>{var w;try{const m=await Ra(r,{maxAge:0});if(f){if(m===f)return;if(m-f>1&&t)for(let I=f+1n;I<m;I++)y.onBlockNumber(I,f),f=I}(!f||m>f)&&(y.onBlockNumber(m,f),f=m)}catch(m){(w=y.onError)==null||w.call(y,m)}},{emitOnBegin:e,interval:u}))})():(()=>{let S=!0,y=()=>S=!1;return(async()=>{try{const{unsubscribe:w}=await r.transport.subscribe({params:["newHeads"],onData(m){var A;if(!S)return;const I=Wh((A=m.result)==null?void 0:A.number);i(I,f),f=I},onError(m){s==null||s(m)}});y=w,S||y()}catch(w){s==null||s(w)}})(),y})()}async function AC(r,{confirmations:e=1,hash:t,onReplaced:i,pollingInterval:s=r.pollingInterval,timeout:o}){const u=Sr(["waitForTransactionReceipt",r.uid,t]);let l,f,g,b=!1;return new Promise((S,y)=>{o&&setTimeout(()=>y(new kA({hash:t})),o);const w=$s(u,{onReplaced:i,resolve:S,reject:y},m=>{const I=jm(r,{emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){if(b)return;let z=A;const F=async N=>{I(),N(),w()};try{if(g){if(z-g.blockNumber+1n<e)return;F(()=>m.resolve(g));return}if(l||(b=!0,await _m(async()=>{l=await yf(r,{hash:t}),l.blockNumber&&(z=l.blockNumber)},{delay:({count:N})=>~~(1<<N)*200,retryCount:6}),b=!1),g=await bh(r,{hash:t}),e>0&&z-g.blockNumber+1n<e)return;F(()=>m.resolve(g))}catch(N){if(l&&(N instanceof om||N instanceof cm)){f=l;const T=(await Ea(r,{blockNumber:z,includeTransactions:!0})).transactions.find(({from:h,nonce:E})=>h===f.from&&E===f.nonce);if(!T||(g=await bh(r,{hash:T.hash}),z-g.blockNumber+1n<e))return;let x="replaced";T.to===f.to&&T.value===f.value?x="repriced":T.from===T.to&&T.value===0n&&(x="cancelled"),F(()=>{var h;(h=m.onReplaced)==null||h.call(m,{reason:x,replacedTransaction:f,transaction:T,transactionReceipt:g}),m.resolve(g)})}else F(()=>m.reject(N))}}});return I})})}function CC(r,{blockTag:e="latest",emitMissed:t=!1,emitOnBegin:i=!1,onBlock:s,onError:o,includeTransactions:u=!1,poll:l,pollingInterval:f=r.pollingInterval}){const g=typeof l<"u"?l:r.transport.type!=="webSocket";let b;return g?(()=>{const w=Sr(["watchBlocks",r.uid,t,i,u,f]);return $s(w,{onBlock:s,onError:o},m=>Na(async()=>{var I;try{const A=await Ea(r,{blockTag:e,includeTransactions:u});if(A.number&&(b!=null&&b.number)){if(A.number===b.number)return;if(A.number-b.number>1&&t)for(let z=(b==null?void 0:b.number)+1n;z<A.number;z++){const F=await Ea(r,{blockNumber:z,includeTransactions:u});m.onBlock(F,b),b=F}}(!(b!=null&&b.number)||e==="pending"&&!(A!=null&&A.number)||A.number&&A.number>b.number)&&(m.onBlock(A,b),b=A)}catch(A){(I=m.onError)==null||I.call(m,A)}},{emitOnBegin:i,interval:f}))})():(()=>{let w=!0,m=()=>w=!1;return(async()=>{try{const{unsubscribe:I}=await r.transport.subscribe({params:["newHeads"],onData(A){if(!w)return;const z=A.result;s(z,b),b=z},onError(A){o==null||o(A)}});m=I,w||m()}catch(I){o==null||o(I)}})(),m})()}function TC(r,{address:e,args:t,batch:i=!0,event:s,onError:o,onLogs:u,pollingInterval:l=r.pollingInterval,strict:f}){const g=Sr(["watchEvent",e,t,i,r.uid,s,l]),b=f??!1;return $s(g,{onLogs:u,onError:o},S=>{let y,w,m=!1;const I=Na(async()=>{var A;if(!m){try{w=await Fm(r,{address:e,args:t,event:s,strict:b})}catch{}m=!0;return}try{let z;if(w)z=await Nc(r,{filter:w});else{const F=await Ra(r);y&&y!==F?z=await ff(r,{address:e,args:t,fromBlock:y+1n,toBlock:F,event:s}):z=[],y=F}if(z.length===0)return;i?S.onLogs(z):z.forEach(F=>S.onLogs([F]))}catch(z){(A=S.onError)==null||A.call(S,z)}},{emitOnBegin:!0,interval:l});return async()=>{w&&await Rc(r,{filter:w}),I()}})}function $C(r,{batch:e=!0,onError:t,onTransactions:i,poll:s,pollingInterval:o=r.pollingInterval}){return(typeof s<"u"?s:r.transport.type!=="webSocket")?(()=>{const g=Sr(["watchPendingTransactions",r.uid,e,o]);return $s(g,{onTransactions:i,onError:t},b=>{let S;const y=Na(async()=>{var w;try{if(!S)try{S=await Mm(r);return}catch(I){throw y(),I}const m=await Nc(r,{filter:S});if(m.length===0)return;e?b.onTransactions(m):m.forEach(I=>b.onTransactions([I]))}catch(m){(w=b.onError)==null||w.call(b,m)}},{emitOnBegin:!0,interval:o});return async()=>{S&&await Rc(r,{filter:S}),y()}})})():(()=>{let g=!0,b=()=>g=!1;return(async()=>{try{const{unsubscribe:S}=await r.transport.subscribe({params:["newPendingTransactions"],onData(y){if(!g)return;const w=y.result;i([w])},onError(y){t==null||t(y)}});b=S,g||b()}catch(S){t==null||t(S)}})(),b})()}const NC=r=>({call:e=>$c(r,e),createBlockFilter:()=>pC(r),createContractEventFilter:e=>rm(r,e),createEventFilter:e=>Fm(r,e),createPendingTransactionFilter:()=>Mm(r),estimateContractGas:e=>f8(r,e),estimateGas:e=>lf(r,e),getBalance:e=>gC(r,e),getBlock:e=>Ea(r,e),getBlockNumber:e=>Ra(r,e),getBlockTransactionCount:e=>yC(r,e),getBytecode:e=>mC(r,e),getChainId:()=>oc(r),getEnsAddress:e=>Z8(r,e),getEnsAvatar:e=>hC(r,e),getEnsName:e=>fC(r,e),getEnsResolver:e=>dC(r,e),getEnsText:e=>Rm(r,e),getFeeHistory:e=>vC(r,e),getFilterChanges:e=>Nc(r,e),getFilterLogs:e=>wC(r,e),getGasPrice:()=>pm(r),getLogs:e=>ff(r,e),getStorageAt:e=>_C(r,e),getTransaction:e=>yf(r,e),getTransactionConfirmations:e=>EC(r,e),getTransactionCount:e=>gm(r,e),getTransactionReceipt:e=>bh(r,e),multicall:e=>xC(r,e),readContract:e=>li(r,e),simulateContract:e=>E8(r,e),verifyMessage:e=>OC(r,e),verifyTypedData:e=>PC(r,e),uninstallFilter:e=>Rc(r,e),waitForTransactionReceipt:e=>AC(r,e),watchBlocks:e=>CC(r,e),watchBlockNumber:e=>jm(r,e),watchContractEvent:e=>C8(r,e),watchEvent:e=>TC(r,e),watchPendingTransactions:e=>$C(r,e)});function RC({batch:r,chain:e,key:t="public",name:i="Public Client",transport:s,pollingInterval:o}){const u={batch:r,...wm({chain:e,key:t,name:i,pollingInterval:o,transport:s,type:"publicClient"})};return{...u,...NC(u)}}async function FC(r,{chain:e}){const{id:t,name:i,nativeCurrency:s,rpcUrls:o,blockExplorers:u}=e;await r.request({method:"wallet_addEthereumChain",params:[{chainId:at(t),chainName:i,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:u?Object.values(u).map(({url:l})=>l):void 0}]})}function MC(r,{abi:e,args:t,bytecode:i,...s}){const o=Dm({abi:e,args:t,bytecode:i});return df(r,{...s,data:o})}async function LC(r){return(await r.request({method:"eth_accounts"})).map(t=>tf(t))}async function jC(r){return await r.request({method:"wallet_getPermissions"})}async function kC(r){return(await r.request({method:"eth_requestAccounts"})).map(t=>IA(t))}async function UC(r,e){return r.request({method:"wallet_requestPermissions",params:[e]})}async function BC(r,{account:e=r.account,message:t}){if(!e)throw new $a({docsPath:"/docs/actions/wallet/signMessage"});const i=dn(e);if(i.type==="local")return i.signMessage({message:t});const s=(()=>typeof t=="string"?Gh(t):t.raw instanceof Uint8Array?Wn(t.raw):t.raw)();return r.request({method:"personal_sign",params:[s,i.address]})}async function qC(r,{account:e=r.account,domain:t,message:i,primaryType:s,types:o}){if(!e)throw new $a({docsPath:"/docs/actions/wallet/signTypedData"});const u=dn(e),l={EIP712Domain:[(t==null?void 0:t.name)&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(t==null?void 0:t.chainId)&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean),...o};if(Sm({domain:t,message:i,primaryType:s,types:l}),u.type==="local")return u.signTypedData({domain:t,primaryType:s,types:l,message:i});const f=Sr({domain:t??{},primaryType:s,types:l,message:i},(g,b)=>Kn(b)?b.toLowerCase():b);return r.request({method:"eth_signTypedData_v4",params:[u.address,f]})}async function zC(r,{id:e}){await r.request({method:"wallet_switchEthereumChain",params:[{chainId:at(e)}]})}async function HC(r,e){return await r.request({method:"wallet_watchAsset",params:e})}const KC=r=>({addChain:e=>FC(r,e),deployContract:e=>MC(r,e),getAddresses:()=>LC(r),getChainId:()=>oc(r),getPermissions:()=>jC(r),requestAddresses:()=>kC(r),requestPermissions:e=>UC(r,e),sendTransaction:e=>df(r,e),signMessage:e=>BC(r,e),signTypedData:e=>qC(r,e),switchChain:e=>zC(r,e),watchAsset:e=>HC(r,e),writeContract:e=>$8(r,e)});function fg({account:r,chain:e,transport:t,key:i="wallet",name:s="Wallet Client",pollingInterval:o}){const u={...wm({chain:e,key:i,name:s,pollingInterval:o,transport:l=>t({...l,retryCount:0}),type:"walletClient"}),account:r?dn(r):void 0};return{...u,...KC(u)}}const $l={id:65,name:"OKTC Testnet",network:"oktc-testnet",nativeCurrency:{decimals:18,name:"OKT",symbol:"OKT"},rpcUrls:{default:{http:["https://exchaintestrpc.okex.org"]},public:{http:["https://exchaintestrpc.okex.org"]}},blockExplorers:{default:{name:"oklink",url:"https://www.oklink.com/oktc-test"}},testnet:!0},cc=r=>new Promise(e=>setTimeout(e,r)),Fi=["USDC","USDT","KUSD"],VC=["USDC","USDT"],Be={},Ue={};let Nl,fa,Ge,Mi,Ce,_e={},vh=!1,lt;async function Hn(r){const{request:e}=await Ge.simulateContract(r);await Mi.writeContract(e),window.alert("Transaction has been successfully sent to the blockchain. You can view the transaction's details in your wallet.")}function ci(r){console.error(r),r.message.includes("Details:")===!0?window.alert(r.message.substring(r.message.indexOf("Details:"),r.message.indexOf("Version:"))):window.alert(r.message)}window.addEventListener("load",async()=>{Nl=new _2.UAParser().getResult().device,_e=(await(await fetch("../json/conf.json")).json()).testnet;let e="",t=[];lt=document.querySelector("#loading");const i=document.querySelector("footer"),s=document.querySelector("#home"),o=document.querySelector("#defi"),u=document.querySelector("#docs"),l=document.querySelector("#account-access");function f(y){y.preventDefault();const w=y.target.id||y.target.parentElement.id;if(w===e)return;window.scrollTo({top:0,behavior:"instant"});const m=document.querySelector("main");if(m&&m.remove(),w==="home"){document.body.insertBefore(document.querySelector("#template-home").content.cloneNode(!0),i),e=w,s.classList.add("linked"),o.classList.remove("linked"),u.classList.remove("linked");const I=document.querySelector("#countdown");xn.extend(b2);const A=xn("2023-7-15 19:00");xn()<A?(I.innerHTML=xn.duration(A.diff(xn())).format("[<div>]D [<small>days</small></div><div>]H [<small>hours</small></div><div>]m [<small>minutes</small></div>]"),setInterval(()=>{I.innerHTML=xn.duration(A.diff(xn())).format("[<div>]D [<small>days</small></div><div>]H [<small>hours</small></div><div>]m [<small>minutes</small></div>]")},3e4)):I.style.display="none"}else w==="defi"?(document.body.insertBefore(document.querySelector("#template-defi").content.cloneNode(!0),i),e=w,s.classList.remove("linked"),o.classList.add("linked"),u.classList.remove("linked"),WC(),YC(),GC(),JC()):w==="docs"&&(document.body.insertBefore(document.querySelector("#template-docs").content.cloneNode(!0),i),e=w,s.classList.remove("linked"),o.classList.remove("linked"),u.classList.add("linked"));w&&y.action!=="back"?t.push(w):y.action==="back"&&t.pop(),window.history.replaceState(t,null)}async function g(){console.log("fetchAccountData");const[y]=await Mi.getAddresses();Ce=y,vh=await Ge.readContract({address:_e.accounts.address,abi:Be.accounts,functionName:"isAgent",args:[Ce],account:Ce})}async function b(){l.setAttribute("disabled",!0),lt.style.display="flex",Ge=RC({chain:$l,transport:U8()});try{if(Nl&&["mobile","tablet"].includes(Nl.type))fa=await WO.init({projectId:"8e8d1e31f5a5649a8b3c4cacfc494138",showQrModal:!0,qrModalOptions:{themeMode:"light",themeVariables:{"--wcm-accent-color":"#000000","--wcm-background-color":"#000000","--wcm-background-border-radius":"0px","--wcm-container-border-radius":"0px"},explorerRecommendedWalletIds:["c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96","4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0","971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709","20459438007b75f4f4acb98bf29aa3b800550309646d375da5fd4aac6c2a2c66","38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662","dceb063851b1833cbb209e3717a0a0b06bf3fb500fe9db8cd3a553e4b1d02137"],explorerExcludedWalletIds:"ALL"},chains:[65],events:["chainChanged","accountsChanged"],metadata:{name:"Kudisika",description:"African Cryptocurrencies, DeFi, etc",url:"https://kudisika.com",icons:["https://kudisika.com/icons/logo.png"]}}),Mi=fg({chain:$l,transport:lg(fa)}),fa.on("chainChanged",g),fa.on("accountsChanged",g),await fa.enable();else if(window.ethereum!==void 0)window.ethereum.on("chainChanged",g),window.ethereum.on("accountsChanged",g),Mi=fg({chain:$l,transport:lg(window.ethereum)}),window.ethereum.isConnected()===!0&&window.trustwallet===void 0?await Mi.requestPermissions({eth_accounts:{}}):await Mi.requestAddresses();else{window.alert("Unsupported device");return}Be.presale=(await(await fetch(`../json/${_e.presale.abi}`)).json()).abi,Be.accounts=(await(await fetch(`../json/${_e.accounts.abi}`)).json()).abi,Be.exchange=(await(await fetch(`../json/${_e.exchange.abi}`)).json()).abi,Be.stakingpool=(await(await fetch(`../json/${_e.stakingpool.abi}`)).json()).abi;for(const w in _e.tokens)Be[w]=(await(await fetch(`../json/${_e.tokens[w].abi}`)).json()).abi;Ce===void 0&&await g();const y=await Ge.getBalance({address:Ce});console.log(`Balance: ${tr(y)} OKT`),o.style.display="flex",l.textContent="Disconnect",l.onclick=S,l.removeAttribute("disabled")}catch(y){l.removeAttribute("disabled"),y.code===4001?console.log("Please connect to Wallet."):console.error(y),window.alert(y.message)}finally{lt.style.display="none"}}async function S(){t[t.length-1]==="docs"?(t=["home","docs"],window.history.replaceState(t,null)):t[t.length-1]==="defi"?(t=[],f({preventDefault:()=>{},target:{id:"home"},action:""})):t[t.length-1]==="home"&&(t=["home"],window.history.replaceState(t,null)),Ce=void 0,Ge=void 0,Mi=void 0,l.textContent="Connect",l.onclick=b,o.style.display="none"}s.onclick=f,o.onclick=f,u.onclick=f,l.onclick=b,window.history.pushState(t,null),f({preventDefault:()=>{},target:{id:"home"},action:""}),window.addEventListener("popstate",y=>{t.length>1&&(f({preventDefault:()=>{},target:{id:t[t.length-2]},action:"back"}),window.history.pushState(t,null))})});async function xa([r,e,t]){lt.style.display="flex";try{const i=await Ge.getBlockNumber(),s=await Ge.createContractEventFilter({address:_e.tokens[r].address,abi:Be[r],eventName:"Approval",args:{owner:Ce},fromBlock:i}),o=Date.now();await Hn({address:_e.tokens[r].address,abi:Be[r],functionName:"approve",args:[e,t],account:Ce});const u=Date.now()-o;console.log(u);const l=4e4;u<l&&(console.log(l-u),await cc(l-u));let f=await Ge.getFilterLogs({filter:s});for(;f.length===0;)f=await Ge.getFilterLogs({filter:s}),await cc(5e3);f.length>0&&(console.log(f),Ue[r].approved=!0,clearInterval(Ue[r].approveId))}catch(i){ci(i)}finally{lt.style.display="none"}}async function ai(r){const e=await Ge.readContract({address:_e.tokens[r].address,abi:Be[r],functionName:"balanceOf",args:[Ce],account:Ce}),t=await Ge.readContract({address:_e.tokens[r].address,abi:Be[r],functionName:"decimals",account:Ce});return[e,t]}async function WC(){const r=document.querySelector("#kdsk"),e=document.querySelector("#presale .unlock-date"),t=document.querySelector("#presale input[name=kdsk]"),i=document.querySelector("#presale select[name=usd]"),s=document.querySelector("#presale input[name=usd]"),o=document.querySelector("#presale .warning"),u=document.querySelector("#presale button[name=buy]"),l=document.querySelector("#presale button[name=claim]");let f=await Ge.readContract({address:_e.presale.address,abi:Be.presale,functionName:"getParticipant",account:Ce});f.lockedAmount>0&&(r.textContent=tr(f.lockedAmount),e.textContent=xn(Number(f.unlockDate)*1e3).format("ddd, MMM D, YYYY h:mm A")),i.onchange=async()=>{const[b,S]=await ai(i.value);b<zn(t.value,S)?o.style.display="inline":o.style.display="none"},t.oninput=async()=>{if(!(t.value.length>0&&parseFloat(t.value)>0)){t.value="",s.textContent="0",o.style.display="none";return}const[b,S]=await Ge.readContract({address:_e.presale.address,abi:Be.presale,functionName:"getRate",account:Ce});s.value=tr(Un(t.value)*S/b);const[y,w]=await ai(i.value);y<zn(s.value,w)?o.style.display="inline":o.style.display="none"};async function g(){if(t.value.length>0&&parseFloat(t.value)>0){if(parseFloat(t.value)<2500)return window.alert(`Minimum amount you can buy is 2500 KDSK.

The amount you're buying is lesser than the minimum allowed`);lt.style.display="flex";try{const b=await Ge.readContract({address:_e.tokens[i.value].address,abi:Be[i.value],functionName:"allowance",args:[Ce,_e.presale.address],account:Ce}),S=await Ge.readContract({address:_e.tokens[i.value].address,abi:Be[i.value],functionName:"decimals",account:Ce}),y=zn(s.value,S);if(b<y){window.alert(`"Approve" this dapp to access ${s.value} ${i.value}. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),u.classList.add("approve"),u.innerHTML="<div></div>Approve<span>7723</span>",u.onclick=xa.bind(this,[i.value,_e.presale.address,y]),(Ue[i.value]===void 0||Ue[i.value].handled===!0)&&(Ue[i.value]={approveId:null,approved:!1,handleId:null,handled:!1},Ue[i.value].handleId=setInterval(()=>{if(Ue[i.value].handled===!0){clearInterval(Ue[i.value].handleId);return}Ue[i.value].approved===!0&&(u.classList.remove("approve"),u.innerHTML="<div></div>Buy<span>7723</span>",u.onclick=g,lt.style.display="none",clearInterval(Ue[i.value].handleId),Ue[i.value].handled=!0)},1500)),lt.style.display="none";return}const w=await Ge.getBlockNumber(),m=await Ge.createContractEventFilter({address:_e.presale.address,abi:Be.presale,eventName:"Sold",args:{buyer:Ce},fromBlock:w}),I=Date.now();await Hn({address:_e.presale.address,abi:Be.presale,functionName:"buy",args:[_e.tokens[i.value].address,y],account:Ce});const A=Date.now()-I;console.log(A);const z=4e4;A<z&&(console.log(z-A),await cc(z-A));let F=await Ge.getFilterLogs({filter:m});for(;F.length===0;)F=await Ge.getFilterLogs({filter:m}),await cc(5e3);F.length>0&&(console.log(F),s.value="",t.value="",f=await Ge.readContract({address:_e.presale.address,abi:Be.presale,functionName:"getParticipant",account:Ce}),f.lockedAmount>0&&(r.textContent=tr(f.lockedAmount),e.textContent=xn(Number(f.unlockDate)*1e3).format("ddd, MMM D, YYYY h:mm A")))}catch(b){ci(b)}finally{lt.style.display="none"}}}u.onclick=g,l.onclick=async()=>{lt.style.display="flex";try{const[b]=await ai("KDSK");await Hn({address:_e.presale.address,abi:Be.presale,functionName:"claim",account:Ce});const[S]=await ai("KDSK"),y=S-b;window.alert(`You have successfully claimed ${tr(y)} KDSK`)}catch(b){ci(b)}finally{lt.style.display="none"}}}function GC(){const r=document.querySelector("video"),e=document.querySelector("#cash input[name=address]"),t=document.querySelector("#cash button[name=scan]"),i=document.querySelector("#cash input[name=amount]"),s=document.querySelector("#cash .cash-amount.warning"),o=document.querySelector("#cash button[name=all]"),u=document.querySelector("#cash select[name=token]"),l=document.querySelector("#cash-in"),f=document.querySelector("#cash-out"),g=document.querySelector("#claim");let b;g.onclick=async()=>{try{const w=await Ge.getBlock();if(xn(Number(w.timestamp)*1e3).day()!==6)return window.alert("Commissions can only be claimed on Saturdays");if(vh===!0)return window.alert(`You're not an agent. Only agents should press the "Claim" button`);const m=await Ge.readContract({address:_e.exchange.address,abi:Be.exchange,functionName:"getAgentCommissions",account:Ce});window.confirm(`You have ${tr(m)} ${u.value}, Do you want to claim it now?`)&&await Hn({address:_e.exchange.address,abi:Be.exchange,functionName:"claimCommissions",args:[_e.tokens[u.value].address],account:Ce})}catch(w){ci(w)}finally{lt.style.display="none"}},i.oninput=async()=>{clearTimeout(b),b=setTimeout(async()=>{if(i.value.length===0){s.style.display="none";return}const[w,m]=await ai(u.value);w<zn(i.value,m)?s.style.display="inline":s.style.display="none"},1e3)},t.onclick=()=>{r.style.display="block",y.start()},o.onclick=async()=>{i.value=tr(await Ge.readContract({address:_e.tokens[u.value].address,abi:Be[u.value],functionName:"balanceOf",args:[Ce],account:Ce}))},l.onclick=async()=>{if(!(i.value.trim()&&parseFloat(i.value)>0))return;if(qn(e.value)===!1)return window.alert("The agent's address is invalid. Please check!");if(vh===!1)return window.alert(`You're not an agent. Only agents should press the "Cash In" button`);const[w,m]=await ai(u.value),I=zn(i.value,m);if(w<I)return window.alert("Agent has insufficient balance!");lt.style.display="flex";try{await Hn({address:_e.exchange.address,abi:Be.exchange,functionName:"cashIn",args:[Be[u.value].address,e.value,I],account:Ce})}catch(A){console.error(A),window.alert(A.message)}finally{lt.style.display="none"}};async function S(){if(!(i.value.trim()&&parseFloat(i.value)>0))return;if(qn(e.value)===!1)return window.alert("The agent's address is invalid. Please check!");lt.style.display="flex";const[w,m]=await ai(u.value),I=zn(i.value,m);if(w<I)return lt.style.display="none",window.alert("You have insufficient balance!");try{const A=await Ge.readContract({address:_e.exchange.address,abi:Be.exchange,functionName:"getStableTokenOptions",args:[_e.tokens[u.value].address],account:Ce});let z;if(I>A.minTariffAmount&&I<=A.maxTariffAmount?z=I*A.tariffPercentMultiplier/A.tariffPercentDivider:I<=A.minTariffAmount?z=A.minTariff:I>A.maxTariffAmount&&(z=A.maxTariff),window.alert(`You are about cash out ${ki(I,m)} ${u.value}.

You will be charged a fee of ${parseFloat(ki(z,m)).toFixed(2)} ${u.value}.

TOTAL = ${parseFloat(ki(I+z,m)).toFixed(2)} ${u.value}`),await Ge.readContract({address:"0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2",abi:Be[u.value],functionName:"allowance",args:[Ce,_e.exchange.address],account:Ce})<I){window.alert(`"Approve" this dapp to access ${i.value} ${u.value}. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),l.style.display="none",f.classList.add("approve"),f.innerHTML="<div></div>Approve<span>009</span>",f.onclick=xa.bind(this,[u.value,_e.exchange.address,I]),(Ue[u.value]===void 0||Ue[u.value].handled===!0)&&(Ue[u.value]={approveId:null,approved:!1,handleId:null,handled:!1},Ue[u.value].handleId=setInterval(()=>{if(Ue[u.value].handled===!0){clearInterval(Ue[u.value].handleId);return}Ue[u.value].approved===!0&&(l.style.display="flex",f.classList.remove("approve"),f.innerHTML="<div></div>Cash Out<span>009</span>",f.onclick=S,lt.style.display="none",clearInterval(Ue[u.value].handleId),Ue[u.value].handled=!0)},1500)),lt.style.display="none";return}await Hn({address:_e.exchange.address,abi:Be.exchange,functionName:"cashOut",args:[_e.tokens[u.value].address,e.value,I],account:Ce})}catch(A){console.error(A),window.alert(A.message)}finally{lt.style.display="none"}}f.onclick=S;for(const w of _e.cashExchangeSelect){const m=document.createElement("option");m.text=w,u.add(m)}const y=new nt(r,w=>{if(console.log("decoded qr code:",w),qn(w)===!1)return window.alert("The scanned qr-code returned an invalid address");e.value=w,r.style.display="none"},{highlightScanRegion:!0,highlightCodeOutline:!0,returnDetailedScanResult:!0,onDecodeError:w=>{r.style.display="none",console.log(w),window.alert(w),y.stop()}})}function YC(){const r=document.querySelector("#exchange input[name=from_token]"),e=document.querySelector("#exchange button[name=from_token]"),t=document.querySelector("#exchange select[name=from_token"),i=document.querySelector("#exchange .warning"),s=document.querySelector("#switch"),o=document.querySelector("#exchange input[name=to_token]"),u=document.querySelector("#exchange select[name=to_token"),l=document.querySelector("#exchange button[name=swap]");async function f(b=!1){if(t.value===u.value)return;let S;Fi.includes(t.value)===!1&&(console.trace("fromTokenRate"),S=await Ge.readContract({address:_e.exchange.address,abi:Be.exchange,functionName:"getRate",args:[_e.tokens[t.value].address],account:Ce}));let y;if(Fi.includes(u.value)===!1&&(console.trace("toTokenRate"),y=await Ge.readContract({address:_e.exchange.address,abi:Be.exchange,functionName:"getRate",args:[_e.tokens[u.value].address],account:Ce})),Fi.includes(t.value)===!0&&Fi.includes(u.value)===!0&&(S={multiplier:1n,divider:1n},y={multiplier:1n,divider:1n}),b===!0){if(!(o.value.length&&parseFloat(o.value)>0))return;Fi.includes(u.value)===!0?r.value=tr(Un(o.value)*S.divider/S.multiplier):r.value=tr(Un(o.value)*y.multiplier/y.divider)}else{if(!(r.value.length>0&&parseFloat(r.value)>0)){i.style.display="none";return}Fi.includes(t.value)===!0?o.value=tr(Un(r.value)*y.divider/y.multiplier):o.value=tr(Un(r.value)*S.multiplier/S.divider)}const w=await Ge.readContract({address:_e.tokens[t.value].address,abi:Be[t.value],functionName:"balanceOf",args:[Ce],account:Ce}),m=await Ge.readContract({address:_e.tokens[t.value].address,abi:Be[t.value],functionName:"decimals",account:Ce});w<zn(r.value,m)?i.style.display="inline":i.style.display="none"}r.oninput=()=>{if(!(r.value.length>0&&parseFloat(r.value)>0)){o.value="",i.style.display="none";return}f()},e.onclick=async()=>{const b=await Ge.readContract({address:_e.tokens[t.value].address,abi:Be[t.value],functionName:"decimals",account:Ce});r.value=ki(await Ge.readContract({address:_e.tokens[t.value].address,abi:Be[t.value],functionName:"balanceOf",args:[Ce],account:Ce}),b),f()},t.onchange=b=>{const S=_e.tokenExchangeSelect.length-1;let y=b.target.selectedIndex;u.selectedIndex===S&&y===S?u.selectedIndex=--y:y===u.selectedIndex&&(u.selectedIndex=++y),f()},s.onclick=()=>{const b=t.selectedIndex,S=u.selectedIndex;u.selectedIndex=b,t.selectedIndex=S;const y=r.value,w=o.value;r.value=w,o.value=y,Fi.includes(t.value)===!0?f(!0):f()},o.oninput=()=>{f(!0)},u.onchange=b=>{const S=_e.tokenExchangeSelect.length-1;let y=b.target.selectedIndex;t.selectedIndex===S&&y===S?t.selectedIndex=--y:y===t.selectedIndex&&(t.selectedIndex=++y),f()};async function g(){if(r.value.length&&parseFloat(r.value)>0){lt.style.display="flex";try{const b=await Ge.readContract({address:_e.tokens[t.value].address,abi:Be[t.value],functionName:"allowance",args:[Ce,_e.exchange.address],account:Ce}),S=await Ge.readContract({address:_e.tokens[t.value].address,abi:Be[t.value],functionName:"decimals",account:Ce}),y=zn(r.value,S);if(b<y){window.alert(`"Approve" this dapp to access ${r.value} ${t.value}. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),l.classList.add("approve"),l.innerHTML="<div></div>Approve<span>007</span>",l.onclick=xa.bind(this,[t.value,_e.exchange.address,y]),(Ue[t.value]===void 0||Ue[t.value].handled===!0)&&(Ue[t.value]={approveId:null,approved:!1,handleId:null,handled:!1},Ue[t.value].handleId=setInterval(()=>{if(Ue[t.value].handled===!0){clearInterval(Ue[t.value].handleId);return}Ue[t.value].approved===!0&&(l.classList.remove("approve"),l.innerHTML="<div></div>Swap<span>007</span>",l.onclick=g,lt.style.display="none",clearInterval(Ue[t.value].handleId),Ue[t.value].handled=!0)},1500)),lt.style.display="none";return}await Hn({address:_e.exchange.address,abi:Be.exchange,functionName:"convert",args:[_e.tokens[t.value].address,_e.tokens[u.value].address,y],account:Ce}),r.value="",o.value="";const w=await Ge.readContract({address:_e.exchange.address,abi:Be.exchange,functionName:"tradeFeePercentMultiplier",account:Ce}),m=await Ge.readContract({address:_e.exchange.address,abi:Be.exchange,functionName:"tradeFeePercentDivider",account:Ce}),I=y*w/m;let A;VC.includes(t.value)===!0?A=u.value:A=t.value,window.alert(`You have been deducted ${ki(I,S)} ${A} as trade fee.`)}catch(b){ci(b)}finally{lt.style.display="none"}}}l.onclick=g;for(let b=0;b<_e.tokenExchangeSelect.length;b++){const S=document.createElement("option"),y=document.createElement("option");S.text=y.text=_e.tokenExchangeSelect[b],t.add(S),u.add(y)}t.selectedIndex=0,u.selectedIndex=1}function JC(){const r=new Intl.NumberFormat("en",{minimumFractionDigits:2}),e=document.querySelector("#pool input[type=range]"),t=document.querySelector("#locking-days"),i=document.querySelector("#fixed-apy"),s=document.querySelector("#days"),o=document.querySelector("#forecast"),u=document.querySelector("#pool input[name=stake]"),l=document.querySelector("#pool .stake-balance.warning"),f=document.querySelector("#pool button[name=stake-all]"),g=document.querySelector("#pool button[name=stake]"),b=document.querySelector("#pool button[name=stakes]"),S=document.querySelector("#pool input[name=unstake]"),y=document.querySelector("#pool .unstake-balance.warning"),w=document.querySelector("#pool button[name=unstake-all]"),m=document.querySelector("#pool button[name=unstake]");let I,A;function z(){if(!(u.value.length>0&&parseFloat(u.value)>0))return;const P=parseFloat(u.value);let T=0;t.value==="91"?T=.230391:t.value==="182"?T=.328012:t.value==="364"&&(T=.626479),o.textContent=r.format((P+P*((1+T/364)**parseInt(e.value)-1)).toFixed(2))}u.oninput=async()=>{clearTimeout(I),I=setTimeout(async()=>{const P=await Ge.readContract({address:_e.tokens.KDSK.address,abi:Be.KDSK,functionName:"balanceOf",args:[Ce],account:Ce});if(u.value.length===0){l.style.display="none";return}P<Un(u.value)?l.style.display="inline":l.style.display="none"},1e3),z()},f.onclick=async()=>{u.value=tr(await Ge.readContract({address:_e.tokens.KDSK.address,abi:Be.KDSK,functionName:"balanceOf",args:[Ce],account:Ce})),z()},w.onclick=async()=>{S.value=tr(await Ge.readContract({address:_e.stakingpool.address,abi:Be.stakingpool,functionName:"getUnlockedAmount",account:Ce}))},t.onchange=P=>{i.textContent=P.target.selectedOptions[0].dataset.apy,z()};async function F(){if(S.value.length&&S.value>0){lt.style.display="flex";try{const P=await Ge.readContract({address:_e.tokens.stKDSK.address,abi:Be.stKDSK,functionName:"allowance",args:[Ce,_e.stakingpool.address],account:Ce}),T=Un(S.value);if(P<T){window.alert(`"Approve" this dapp to access ${S.value} stKDSK. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),m.innerHTML="Approve",m.classList.add("approve"),m.onclick=xa.bind(this,["stKDSK",_e.stakingpool.address,T]),(Ue.stKDSK===void 0||Ue.stKDSK.handled===!0)&&(Ue.stKDSK={approveId:null,approved:!1,handleId:null,handled:!1},Ue.stKDSK.handleId=setInterval(()=>{if(Ue.stKDSK.handled===!0){clearInterval(Ue.stKDSK.handleId);return}Ue.stKDSK.approved===!0&&(m.classList.remove("approve"),m.innerHTML='<i class="fas fa-coins"></i>&nbsp;Unstake',m.onclick=F,lt.style.display="none",clearInterval(Ue.stKDSK.handleId),Ue.stKDSK.handled=!0)},1500)),lt.style.display="none";return}await Hn({address:_e.stakingpool.address,abi:Be.stakingpool,functionName:"unstake",args:[T],account:Ce}),S.value=""}catch(P){ci(P)}finally{lt.style.display="none"}}}m.onclick=F,S.oninput=async()=>{clearTimeout(A),A=setTimeout(async()=>{const[P]=await ai("stKDSK");if(S.value.length===0){y.style.display="none";return}P<Un(S.value)?y.style.display="inline":y.style.display="none"},1e3)};async function N(){if(u.value.length&&u.value>0){lt.style.display="flex";try{const P=await Ge.readContract({address:_e.tokens.KDSK.address,abi:Be.KDSK,functionName:"allowance",args:[Ce,_e.stakingpool.address],account:Ce}),T=Un(u.value);if(P<T){window.alert(`"Approve" this dapp to access ${u.value} KDSK. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),g.innerHTML="Approve",g.classList.add("approve"),g.onclick=xa.bind(this,["KDSK",_e.stakingpool.address,T]),(Ue.KDSK===void 0||Ue.KDSK.handled===!0)&&(console.log("Watching..."),Ue.KDSK={approveId:null,approved:!1,handleId:null,handled:!1},Ue.KDSK.handleId=setInterval(()=>{if(Ue.KDSK.handled===!0){clearInterval(Ue.KDSK.handleId);return}Ue.KDSK.approved===!0&&(g.classList.remove("approve"),g.innerHTML='<i class="fas fa-piggy-bank"></i>&nbsp;Stake',g.onclick=N,lt.style.display="none",clearInterval(Ue.KDSK.handleId),Ue.KDSK.handled=!0)},1500)),lt.style.display="none";return}await Hn({address:_e.stakingpool.address,abi:Be.stakingpool,functionName:"stake",args:[BigInt(t.value),T],account:Ce}),u.value=""}catch(P){ci(P)}finally{lt.style.display="none"}}}g.onclick=N,e.oninput=function(){s.textContent=e.value,z()},i.textContent=t.selectedOptions[0].dataset.apy,s.textContent=e.value,b.onclick=async()=>{lt.style.display="flex";try{const P=await Ge.readContract({address:_e.stakingpool.address,abi:Be.stakingpool,functionName:"getUnlockedAmount",account:Ce}),T=await Ge.readContract({address:_e.stakingpool.address,abi:Be.stakingpool,functionName:"issuedEarningsIndex",account:Ce}),x=await Ge.readContract({address:_e.stakingpool.address,abi:Be.stakingpool,functionName:"getStakes",account:Ce});if(x.length===0)return window.alert("You have no amount staked.");let h=0n;const E=x.filter(K=>K.amount!=="0").map(K=>{h+=K.amount;let $="";K.lockingDays===91?$="25.9%":K.lockingDays===182?$="38.8%":K.lockingDays===364&&($="87.0%");const B=Number(T-K.startedAtEarningsIndex),G=K.lockingDays-B;return B>=K.lockingDays?` ${parseFloat(tr(K.amount)).toFixed(2)} stKDSK @ ${$} APY`:` ${parseFloat(tr(K.amount)).toFixed(2)} stKDSK @ ${$} APY ( ${G} ${G>1?"days":"day"} more)`});E.unshift("Stakes:"),E.push(`
 Total Locked: ${parseFloat(tr(h)).toFixed(2)} stKDSK`),E.push(` Total Unlocked: ${parseFloat(tr(P)).toFixed(2)} stKDSK`),lt.style.display="none",window.alert(E.join(`
`))}catch(P){ci(P)}finally{lt.style.display="none"}}}export{ge as B,pa as H,wa as I,wh as _,Vn as a,Kn as b,$c as c,FA as d,Ca as e,xc as g,qn as i,Sr as s};
