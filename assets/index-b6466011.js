(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();window.global||(window.global=window);var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sa(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function hg(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(e,s);return new o}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var fg={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ar,function(){var t=1e3,i=6e4,s=36e5,o="millisecond",u="second",l="minute",f="hour",g="day",y="week",b="month",x="quarter",D="year",S="date",N="Invalid Date",R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,K=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(J){var m=["th","st","nd","rd"],E=J%100;return"["+J+(m[(E-20)%10]||m[E]||m[0])+"]"}},M=function(J,m,E){var z=String(J);return!z||z.length>=m?J:""+Array(m+1-z.length).join(E)+J},O={s:M,z:function(J){var m=-J.utcOffset(),E=Math.abs(m),z=Math.floor(E/60),j=E%60;return(m<=0?"+":"-")+M(z,2,"0")+":"+M(j,2,"0")},m:function J(m,E){if(m.date()<E.date())return-J(E,m);var z=12*(E.year()-m.year())+(E.month()-m.month()),j=m.clone().add(z,b),V=E-j<0,U=m.clone().add(z+(V?-1:1),b);return+(-(z+(E-j)/(V?j-U:U-j))||0)},a:function(J){return J<0?Math.ceil(J)||0:Math.floor(J)},p:function(J){return{M:b,y:D,w:y,d:g,D:S,h:f,m:l,s:u,ms:o,Q:x}[J]||String(J||"").toLowerCase().replace(/s$/,"")},u:function(J){return J===void 0}},A="en",_={};_[A]=$;var h=function(J){return J instanceof B},w=function J(m,E,z){var j;if(!m)return A;if(typeof m=="string"){var V=m.toLowerCase();_[V]&&(j=V),E&&(_[V]=E,j=V);var U=m.split("-");if(!j&&U.length>1)return J(U[0])}else{var ee=m.name;_[ee]=m,j=ee}return!z&&j&&(A=j),j||!z&&A},H=function(J,m){if(h(J))return J.clone();var E=typeof m=="object"?m:{};return E.date=J,E.args=arguments,new B(E)},C=O;C.l=w,C.i=h,C.w=function(J,m){return H(J,{locale:m.$L,utc:m.$u,x:m.$x,$offset:m.$offset})};var B=function(){function J(E){this.$L=w(E.locale,null,!0),this.parse(E)}var m=J.prototype;return m.parse=function(E){this.$d=function(z){var j=z.date,V=z.utc;if(j===null)return new Date(NaN);if(C.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var U=j.match(R);if(U){var ee=U[2]-1||0,re=(U[7]||"0").substring(0,3);return V?new Date(Date.UTC(U[1],ee,U[3]||1,U[4]||0,U[5]||0,U[6]||0,re)):new Date(U[1],ee,U[3]||1,U[4]||0,U[5]||0,U[6]||0,re)}}return new Date(j)}(E),this.$x=E.x||{},this.init()},m.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},m.$utils=function(){return C},m.isValid=function(){return this.$d.toString()!==N},m.isSame=function(E,z){var j=H(E);return this.startOf(z)<=j&&j<=this.endOf(z)},m.isAfter=function(E,z){return H(E)<this.startOf(z)},m.isBefore=function(E,z){return this.endOf(z)<H(E)},m.$g=function(E,z,j){return C.u(E)?this[z]:this.set(j,E)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(E,z){var j=this,V=!!C.u(z)||z,U=C.p(E),ee=function(Z,q){var p=C.w(j.$u?Date.UTC(j.$y,q,Z):new Date(j.$y,q,Z),j);return V?p:p.endOf(g)},re=function(Z,q){return C.w(j.toDate()[Z].apply(j.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(q)),j)},le=this.$W,ae=this.$M,be=this.$D,he="set"+(this.$u?"UTC":"");switch(U){case D:return V?ee(1,0):ee(31,11);case b:return V?ee(1,ae):ee(0,ae+1);case y:var _e=this.$locale().weekStart||0,Q=(le<_e?le+7:le)-_e;return ee(V?be-Q:be+(6-Q),ae);case g:case S:return re(he+"Hours",0);case f:return re(he+"Minutes",1);case l:return re(he+"Seconds",2);case u:return re(he+"Milliseconds",3);default:return this.clone()}},m.endOf=function(E){return this.startOf(E,!1)},m.$set=function(E,z){var j,V=C.p(E),U="set"+(this.$u?"UTC":""),ee=(j={},j[g]=U+"Date",j[S]=U+"Date",j[b]=U+"Month",j[D]=U+"FullYear",j[f]=U+"Hours",j[l]=U+"Minutes",j[u]=U+"Seconds",j[o]=U+"Milliseconds",j)[V],re=V===g?this.$D+(z-this.$W):z;if(V===b||V===D){var le=this.clone().set(S,1);le.$d[ee](re),le.init(),this.$d=le.set(S,Math.min(this.$D,le.daysInMonth())).$d}else ee&&this.$d[ee](re);return this.init(),this},m.set=function(E,z){return this.clone().$set(E,z)},m.get=function(E){return this[C.p(E)]()},m.add=function(E,z){var j,V=this;E=Number(E);var U=C.p(z),ee=function(ae){var be=H(V);return C.w(be.date(be.date()+Math.round(ae*E)),V)};if(U===b)return this.set(b,this.$M+E);if(U===D)return this.set(D,this.$y+E);if(U===g)return ee(1);if(U===y)return ee(7);var re=(j={},j[l]=i,j[f]=s,j[u]=t,j)[U]||1,le=this.$d.getTime()+E*re;return C.w(le,this)},m.subtract=function(E,z){return this.add(-1*E,z)},m.format=function(E){var z=this,j=this.$locale();if(!this.isValid())return j.invalidDate||N;var V=E||"YYYY-MM-DDTHH:mm:ssZ",U=C.z(this),ee=this.$H,re=this.$m,le=this.$M,ae=j.weekdays,be=j.months,he=function(q,p,L,ue){return q&&(q[p]||q(z,V))||L[p].slice(0,ue)},_e=function(q){return C.s(ee%12||12,q,"0")},Q=j.meridiem||function(q,p,L){var ue=q<12?"AM":"PM";return L?ue.toLowerCase():ue},Z={YY:String(this.$y).slice(-2),YYYY:C.s(this.$y,4,"0"),M:le+1,MM:C.s(le+1,2,"0"),MMM:he(j.monthsShort,le,be,3),MMMM:he(be,le),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:he(j.weekdaysMin,this.$W,ae,2),ddd:he(j.weekdaysShort,this.$W,ae,3),dddd:ae[this.$W],H:String(ee),HH:C.s(ee,2,"0"),h:_e(1),hh:_e(2),a:Q(ee,re,!0),A:Q(ee,re,!1),m:String(re),mm:C.s(re,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:U};return V.replace(K,function(q,p){return p||Z[q]||U.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(E,z,j){var V,U=C.p(z),ee=H(E),re=(ee.utcOffset()-this.utcOffset())*i,le=this-ee,ae=C.m(this,ee);return ae=(V={},V[D]=ae/12,V[b]=ae,V[x]=ae/3,V[y]=(le-re)/6048e5,V[g]=(le-re)/864e5,V[f]=le/s,V[l]=le/i,V[u]=le/t,V)[U]||le,j?ae:C.a(ae)},m.daysInMonth=function(){return this.endOf(b).$D},m.$locale=function(){return _[this.$L]},m.locale=function(E,z){if(!E)return this.$L;var j=this.clone(),V=w(E,z,!0);return V&&(j.$L=V),j},m.clone=function(){return C.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},J}(),Y=B.prototype;return H.prototype=Y,[["$ms",o],["$s",u],["$m",l],["$H",f],["$W",g],["$M",b],["$y",D],["$D",S]].forEach(function(J){Y[J[1]]=function(m){return this.$g(m,J[0],J[1])}}),H.extend=function(J,m){return J.$i||(J(m,B,H),J.$i=!0),H},H.locale=w,H.isDayjs=h,H.unix=function(J){return H(1e3*J)},H.en=_[A],H.Ls=_,H.p={},H})})(fg);var p6=fg.exports;const xn=Sa(p6);var dg={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ar,function(){var t,i,s=1e3,o=6e4,u=36e5,l=864e5,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g=31536e6,y=2592e6,b=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,x={years:g,months:y,days:l,hours:u,minutes:o,seconds:s,milliseconds:1,weeks:6048e5},D=function(A){return A instanceof O},S=function(A,_,h){return new O(A,h,_.$l)},N=function(A){return i.p(A)+"s"},R=function(A){return A<0},K=function(A){return R(A)?Math.ceil(A):Math.floor(A)},$=function(A){return Math.abs(A)},M=function(A,_){return A?R(A)?{negative:!0,format:""+$(A)+_}:{negative:!1,format:""+A+_}:{negative:!1,format:""}},O=function(){function A(h,w,H){var C=this;if(this.$d={},this.$l=H,h===void 0&&(this.$ms=0,this.parseFromMilliseconds()),w)return S(h*x[N(w)],this);if(typeof h=="number")return this.$ms=h,this.parseFromMilliseconds(),this;if(typeof h=="object")return Object.keys(h).forEach(function(J){C.$d[N(J)]=h[J]}),this.calMilliseconds(),this;if(typeof h=="string"){var B=h.match(b);if(B){var Y=B.slice(2).map(function(J){return J!=null?Number(J):0});return this.$d.years=Y[0],this.$d.months=Y[1],this.$d.weeks=Y[2],this.$d.days=Y[3],this.$d.hours=Y[4],this.$d.minutes=Y[5],this.$d.seconds=Y[6],this.calMilliseconds(),this}}return this}var _=A.prototype;return _.calMilliseconds=function(){var h=this;this.$ms=Object.keys(this.$d).reduce(function(w,H){return w+(h.$d[H]||0)*x[H]},0)},_.parseFromMilliseconds=function(){var h=this.$ms;this.$d.years=K(h/g),h%=g,this.$d.months=K(h/y),h%=y,this.$d.days=K(h/l),h%=l,this.$d.hours=K(h/u),h%=u,this.$d.minutes=K(h/o),h%=o,this.$d.seconds=K(h/s),h%=s,this.$d.milliseconds=h},_.toISOString=function(){var h=M(this.$d.years,"Y"),w=M(this.$d.months,"M"),H=+this.$d.days||0;this.$d.weeks&&(H+=7*this.$d.weeks);var C=M(H,"D"),B=M(this.$d.hours,"H"),Y=M(this.$d.minutes,"M"),J=this.$d.seconds||0;this.$d.milliseconds&&(J+=this.$d.milliseconds/1e3);var m=M(J,"S"),E=h.negative||w.negative||C.negative||B.negative||Y.negative||m.negative,z=B.format||Y.format||m.format?"T":"",j=(E?"-":"")+"P"+h.format+w.format+C.format+z+B.format+Y.format+m.format;return j==="P"||j==="-P"?"P0D":j},_.toJSON=function(){return this.toISOString()},_.format=function(h){var w=h||"YYYY-MM-DDTHH:mm:ss",H={Y:this.$d.years,YY:i.s(this.$d.years,2,"0"),YYYY:i.s(this.$d.years,4,"0"),M:this.$d.months,MM:i.s(this.$d.months,2,"0"),D:this.$d.days,DD:i.s(this.$d.days,2,"0"),H:this.$d.hours,HH:i.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:i.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:i.s(this.$d.seconds,2,"0"),SSS:i.s(this.$d.milliseconds,3,"0")};return w.replace(f,function(C,B){return B||String(H[C])})},_.as=function(h){return this.$ms/x[N(h)]},_.get=function(h){var w=this.$ms,H=N(h);return H==="milliseconds"?w%=1e3:w=H==="weeks"?K(w/x[H]):this.$d[H],w===0?0:w},_.add=function(h,w,H){var C;return C=w?h*x[N(w)]:D(h)?h.$ms:S(h,this).$ms,S(this.$ms+C*(H?-1:1),this)},_.subtract=function(h,w){return this.add(h,w,!0)},_.locale=function(h){var w=this.clone();return w.$l=h,w},_.clone=function(){return S(this.$ms,this)},_.humanize=function(h){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!h)},_.valueOf=function(){return this.asMilliseconds()},_.milliseconds=function(){return this.get("milliseconds")},_.asMilliseconds=function(){return this.as("milliseconds")},_.seconds=function(){return this.get("seconds")},_.asSeconds=function(){return this.as("seconds")},_.minutes=function(){return this.get("minutes")},_.asMinutes=function(){return this.as("minutes")},_.hours=function(){return this.get("hours")},_.asHours=function(){return this.as("hours")},_.days=function(){return this.get("days")},_.asDays=function(){return this.as("days")},_.weeks=function(){return this.get("weeks")},_.asWeeks=function(){return this.as("weeks")},_.months=function(){return this.get("months")},_.asMonths=function(){return this.as("months")},_.years=function(){return this.get("years")},_.asYears=function(){return this.as("years")},A}();return function(A,_,h){t=h,i=h().$utils(),h.duration=function(C,B){var Y=h.locale();return S(C,{$l:Y},B)},h.isDuration=D;var w=_.prototype.add,H=_.prototype.subtract;_.prototype.add=function(C,B){return D(C)&&(C=C.asMilliseconds()),w.bind(this)(C,B)},_.prototype.subtract=function(C,B){return D(C)&&(C=C.asMilliseconds()),H.bind(this)(C,B)}}})})(dg);var g6=dg.exports;const y6=Sa(g6),m6="modulepreload",v6=function(r){return"/"+r},pp={},vh=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=v6(o),o in pp)return;pp[o]=!0;const u=o.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(!!i)for(let y=s.length-1;y>=0;y--){const b=s[y];if(b.href===o&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":m6,u||(g.as="script",g.crossOrigin=""),g.href=o,document.head.appendChild(g),u)return new Promise((y,b)=>{g.addEventListener("load",y),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};class Xe{constructor(e,t,i,s,o){this._legacyCanvasSize=Xe.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=t:(console.warn(i||s||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof i=="object"?i:{},this._onDecodeError=t.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof s=="function"?s:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof s=="number"?s:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let u=!1;if(e.hidden&&(e.hidden=!1,u=!0),document.body.contains(e)||(document.body.appendChild(e),u=!0),i=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(s=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!s&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let l=window.getComputedStyle(e);l.display==="none"&&(e.style.setProperty("display","block","important"),u=!0),l.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),u=!0),u&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=Xe.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await Xe.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),i;try{e&&(await t()).every(s=>!s.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((s,o)=>({id:s.deviceId,label:s.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),Xe._stopVideoStream(i))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),Xe._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),Xe._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?Xe._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(Xe._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,i,s,o=!1,u=!1){let l,f=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(l=t.scanRegion,i=t.qrEngine,s=t.canvas,o=t.disallowCanvasResizing||!1,u=t.alsoTryWithoutScanRegion||!1,f=!0):console.warn(t||i||s||o||u?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!i;try{let g,y;[i,g]=await Promise.all([i||Xe.createQrEngine(),Xe._loadImage(e)]),[s,y]=Xe._drawToCanvas(g,l,s,o);let b;if(i instanceof Worker){let x=i;t||Xe._postWorkerMessageSync(x,"inversionMode","both"),b=await new Promise((D,S)=>{let N,R,K,$=-1;R=O=>{O.data.id===$&&(x.removeEventListener("message",R),x.removeEventListener("error",K),clearTimeout(N),O.data.data!==null?D({data:O.data.data,cornerPoints:Xe._convertPoints(O.data.cornerPoints,l)}):S(Xe.NO_QR_CODE_FOUND))},K=O=>{x.removeEventListener("message",R),x.removeEventListener("error",K),clearTimeout(N),S("Scanner error: "+(O?O.message||O:"Unknown Error"))},x.addEventListener("message",R),x.addEventListener("error",K),N=setTimeout(()=>K("timeout"),1e4);let M=y.getImageData(0,0,s.width,s.height);$=Xe._postWorkerMessageSync(x,"decode",M,[M.data.buffer])})}else b=await Promise.race([new Promise((x,D)=>window.setTimeout(()=>D("Scanner error: timeout"),1e4)),(async()=>{try{var[x]=await i.detect(s);if(!x)throw Xe.NO_QR_CODE_FOUND;return{data:x.rawValue,cornerPoints:Xe._convertPoints(x.cornerPoints,l)}}catch(D){if(x=D.message||D,/not implemented|service unavailable/.test(x))return Xe._disableBarcodeDetector=!0,Xe.scanImage(e,{scanRegion:l,canvas:s,disallowCanvasResizing:o,alsoTryWithoutScanRegion:u});throw`Scanner error: ${x}`}})()]);return f?b:b.data}catch(g){if(!l||!u)throw g;let y=await Xe.scanImage(e,{qrEngine:i,canvas:s,disallowCanvasResizing:o});return f?y:y.data}finally{t||Xe._postWorkerMessage(i,"close")}}setGrayscaleWeights(e,t,i,s=!0){Xe._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:i,useIntegerApproximation:s})}setInversionMode(e){Xe._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>vh(()=>import("./qr-scanner-worker.min-5f44a019.js"),[]).then(i=>i.createWorker()),!(!Xe._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:s})=>/arm/i.test(i||"arm")&&13<=parseInt(s||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,i=e.videoHeight,s=e.offsetWidth,o=e.offsetHeight,u=e.offsetLeft,l=e.offsetTop,f=window.getComputedStyle(e),g=f.objectFit,y=t/i,b=s/o;switch(g){case"none":var x=t,D=i;break;case"fill":x=s,D=o;break;default:(g==="cover"?y>b:y<b)?(D=o,x=D*y):(x=s,D=x/y),g==="scale-down"&&(x=Math.min(x,t),D=Math.min(D,i))}var[S,N]=f.objectPosition.split(" ").map((K,$)=>{const M=parseFloat(K);return K.endsWith("%")?($?o-D:s-x)*M/100:M});f=this._scanRegion.width||t,b=this._scanRegion.height||i,g=this._scanRegion.x||0;var R=this._scanRegion.y||0;y=this.$overlay.style,y.width=`${f/t*x}px`,y.height=`${b/i*D}px`,y.top=`${l+N+R/i*D}px`,i=/scaleX\(-1\)/.test(e.style.transform),y.left=`${u+(i?s-S-x:S)+(i?t-g-f:g)/t*x}px`,y.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,s=t.y||0,o=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let u of e)u.x=u.x*o+i,u.y=u.y*t+s;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(s=>setTimeout(s,t-e)),this._lastScanTimestamp=Date.now();try{var i=await Xe.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(s){if(!this._active)return;this._onDecodeError(s)}!Xe._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=Xe.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:s,y:o})=>`${s},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==Xe.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(s=>Object.assign({},s,{[e]:{exact:this._preferredCamera}}));for(let s of[...i,...t])try{let o=await navigator.mediaDevices.getUserMedia({video:s,audio:!1}),u=this._getFacingMode(o)||(s.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:u}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,s=!1){i=i||document.createElement("canvas");let o=t&&t.x?t.x:0,u=t&&t.y?t.y:0,l=t&&t.width?t.width:e.videoWidth||e.width,f=t&&t.height?t.height:e.videoHeight||e.height;return s||(s=t&&t.downScaledWidth?t.downScaledWidth:l,t=t&&t.downScaledHeight?t.downScaledHeight:f,i.width!==s&&(i.width=s),i.height!==t&&(i.height=t)),t=i.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,o,u,l,f,0,0,i.width,i.height),[i,t]}static async _loadImage(e){if(e instanceof Image)return await Xe._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await Xe._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,i)=>{let s=o=>{e.removeEventListener("load",s),e.removeEventListener("error",s),o instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",s),e.addEventListener("error",s)})}static async _postWorkerMessage(e,t,i,s){return Xe._postWorkerMessageSync(await e,t,i,s)}static _postWorkerMessageSync(e,t,i,s){if(!(e instanceof Worker))return-1;let o=Xe._workerMessageId++;return e.postMessage({id:o,type:t,data:i},s),o}}Xe.DEFAULT_CANVAS_SIZE=400;Xe.NO_QR_CODE_FOUND="No QR code found";Xe._disableBarcodeDetector=!1;Xe._workerMessageId=0;var bh={exports:{}},vs=typeof Reflect=="object"?Reflect:null,gp=vs&&typeof vs.apply=="function"?vs.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Vo;vs&&typeof vs.ownKeys=="function"?Vo=vs.ownKeys:Object.getOwnPropertySymbols?Vo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vo=function(e){return Object.getOwnPropertyNames(e)};function b6(r){console&&console.warn&&console.warn(r)}var pg=Number.isNaN||function(e){return e!==e};function gt(){gt.init.call(this)}bh.exports=gt;bh.exports.once=x6;gt.EventEmitter=gt;gt.prototype._events=void 0;gt.prototype._eventsCount=0;gt.prototype._maxListeners=void 0;var yp=10;function uc(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(gt,"defaultMaxListeners",{enumerable:!0,get:function(){return yp},set:function(r){if(typeof r!="number"||r<0||pg(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");yp=r}});gt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};gt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||pg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gg(r){return r._maxListeners===void 0?gt.defaultMaxListeners:r._maxListeners}gt.prototype.getMaxListeners=function(){return gg(this)};gt.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var s=e==="error",o=this._events;if(o!==void 0)s=s&&o.error===void 0;else if(!s)return!1;if(s){var u;if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var l=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var f=o[e];if(f===void 0)return!1;if(typeof f=="function")gp(f,this,t);else for(var g=f.length,y=wg(f,g),i=0;i<g;++i)gp(y[i],this,t);return!0};function yg(r,e,t,i){var s,o,u;if(uc(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),u=o[e]),u===void 0)u=o[e]=t,++r._eventsCount;else if(typeof u=="function"?u=o[e]=i?[t,u]:[u,t]:i?u.unshift(t):u.push(t),s=gg(r),s>0&&u.length>s&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=e,l.count=u.length,b6(l)}return r}gt.prototype.addListener=function(e,t){return yg(this,e,t,!1)};gt.prototype.on=gt.prototype.addListener;gt.prototype.prependListener=function(e,t){return yg(this,e,t,!0)};function w6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mg(r,e,t){var i={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},s=w6.bind(i);return s.listener=t,i.wrapFn=s,s}gt.prototype.once=function(e,t){return uc(t),this.on(e,mg(this,e,t)),this};gt.prototype.prependOnceListener=function(e,t){return uc(t),this.prependListener(e,mg(this,e,t)),this};gt.prototype.removeListener=function(e,t){var i,s,o,u,l;if(uc(t),s=this._events,s===void 0)return this;if(i=s[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(o=-1,u=i.length-1;u>=0;u--)if(i[u]===t||i[u].listener===t){l=i[u].listener,o=u;break}if(o<0)return this;o===0?i.shift():_6(i,o),i.length===1&&(s[e]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this};gt.prototype.off=gt.prototype.removeListener;gt.prototype.removeAllListeners=function(e){var t,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var o=Object.keys(i),u;for(s=0;s<o.length;++s)u=o[s],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this};function vg(r,e,t){var i=r._events;if(i===void 0)return[];var s=i[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?E6(s):wg(s,s.length)}gt.prototype.listeners=function(e){return vg(this,e,!0)};gt.prototype.rawListeners=function(e){return vg(this,e,!1)};gt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):bg.call(r,e)};gt.prototype.listenerCount=bg;function bg(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}gt.prototype.eventNames=function(){return this._eventsCount>0?Vo(this._events):[]};function wg(r,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=r[i];return t}function _6(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function E6(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function x6(r,e){return new Promise(function(t,i){function s(u){r.removeListener(e,o),i(u)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",s),t([].slice.call(arguments))}_g(r,e,o,{once:!0}),e!=="error"&&S6(r,s,{once:!0})})}function S6(r,e,t){typeof r.on=="function"&&_g(r,"error",e,t)}function _g(r,e,t,i){if(typeof r.on=="function")i.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function s(o){i.once&&r.removeEventListener(e,s),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var zr=bh.exports;const wh=Sa(zr);var _h={},lc={},qe={},Eg={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(l,f){var g=l>>>16&65535,y=l&65535,b=f>>>16&65535,x=f&65535;return y*x+(g*x+y*b<<16>>>0)|0}r.mul=Math.imul||e;function t(l,f){return l+f|0}r.add=t;function i(l,f){return l-f|0}r.sub=i;function s(l,f){return l<<f|l>>>32-f}r.rotl=s;function o(l,f){return l<<32-f|l>>>f}r.rotr=o;function u(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}r.isInteger=Number.isInteger||u,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(l){return r.isInteger(l)&&l>=-r.MAX_SAFE_INTEGER&&l<=r.MAX_SAFE_INTEGER}})(Eg);Object.defineProperty(qe,"__esModule",{value:!0});var xg=Eg;function D6(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}qe.readInt16BE=D6;function I6(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}qe.readUint16BE=I6;function P6(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}qe.readInt16LE=P6;function O6(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}qe.readUint16LE=O6;function Sg(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}qe.writeUint16BE=Sg;qe.writeInt16BE=Sg;function Dg(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}qe.writeUint16LE=Dg;qe.writeInt16LE=Dg;function Nl(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}qe.readInt32BE=Nl;function Rl(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}qe.readUint32BE=Rl;function Fl(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}qe.readInt32LE=Fl;function Ml(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}qe.readUint32LE=Ml;function Jo(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}qe.writeUint32BE=Jo;qe.writeInt32BE=Jo;function Xo(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}qe.writeUint32LE=Xo;qe.writeInt32LE=Xo;function A6(r,e){e===void 0&&(e=0);var t=Nl(r,e),i=Nl(r,e+4);return t*4294967296+i-(i>>31)*4294967296}qe.readInt64BE=A6;function C6(r,e){e===void 0&&(e=0);var t=Rl(r,e),i=Rl(r,e+4);return t*4294967296+i}qe.readUint64BE=C6;function T6(r,e){e===void 0&&(e=0);var t=Fl(r,e),i=Fl(r,e+4);return i*4294967296+t-(t>>31)*4294967296}qe.readInt64LE=T6;function $6(r,e){e===void 0&&(e=0);var t=Ml(r,e),i=Ml(r,e+4);return i*4294967296+t}qe.readUint64LE=$6;function Ig(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Jo(r/4294967296>>>0,e,t),Jo(r>>>0,e,t+4),e}qe.writeUint64BE=Ig;qe.writeInt64BE=Ig;function Pg(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Xo(r>>>0,e,t),Xo(r/4294967296>>>0,e,t+4),e}qe.writeUint64LE=Pg;qe.writeInt64LE=Pg;function N6(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,s=1,o=r/8+t-1;o>=t;o--)i+=e[o]*s,s*=256;return i}qe.readUintBE=N6;function R6(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,s=1,o=t;o<t+r/8;o++)i+=e[o]*s,s*=256;return i}qe.readUintLE=R6;function F6(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!xg.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,o=r/8+i-1;o>=i;o--)t[o]=e/s&255,s*=256;return t}qe.writeUintBE=F6;function M6(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!xg.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+r/8;o++)t[o]=e/s&255,s*=256;return t}qe.writeUintLE=M6;function L6(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}qe.readFloat32BE=L6;function j6(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}qe.readFloat32LE=j6;function U6(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}qe.readFloat64BE=U6;function k6(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}qe.readFloat64LE=k6;function B6(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r),e}qe.writeFloat32BE=B6;function q6(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r,!0),e}qe.writeFloat32LE=q6;function z6(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r),e}qe.writeFloat64BE=z6;function H6(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r,!0),e}qe.writeFloat64LE=H6;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});function K6(r){for(var e=0;e<r.length;e++)r[e]=0;return r}Hr.wipe=K6;Object.defineProperty(lc,"__esModule",{value:!0});var dr=qe,Ll=Hr,V6=20;function W6(r,e,t){for(var i=1634760805,s=857760878,o=2036477234,u=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],f=t[7]<<24|t[6]<<16|t[5]<<8|t[4],g=t[11]<<24|t[10]<<16|t[9]<<8|t[8],y=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=t[19]<<24|t[18]<<16|t[17]<<8|t[16],x=t[23]<<24|t[22]<<16|t[21]<<8|t[20],D=t[27]<<24|t[26]<<16|t[25]<<8|t[24],S=t[31]<<24|t[30]<<16|t[29]<<8|t[28],N=e[3]<<24|e[2]<<16|e[1]<<8|e[0],R=e[7]<<24|e[6]<<16|e[5]<<8|e[4],K=e[11]<<24|e[10]<<16|e[9]<<8|e[8],$=e[15]<<24|e[14]<<16|e[13]<<8|e[12],M=i,O=s,A=o,_=u,h=l,w=f,H=g,C=y,B=b,Y=x,J=D,m=S,E=N,z=R,j=K,V=$,U=0;U<V6;U+=2)M=M+h|0,E^=M,E=E>>>32-16|E<<16,B=B+E|0,h^=B,h=h>>>32-12|h<<12,O=O+w|0,z^=O,z=z>>>32-16|z<<16,Y=Y+z|0,w^=Y,w=w>>>32-12|w<<12,A=A+H|0,j^=A,j=j>>>32-16|j<<16,J=J+j|0,H^=J,H=H>>>32-12|H<<12,_=_+C|0,V^=_,V=V>>>32-16|V<<16,m=m+V|0,C^=m,C=C>>>32-12|C<<12,A=A+H|0,j^=A,j=j>>>32-8|j<<8,J=J+j|0,H^=J,H=H>>>32-7|H<<7,_=_+C|0,V^=_,V=V>>>32-8|V<<8,m=m+V|0,C^=m,C=C>>>32-7|C<<7,O=O+w|0,z^=O,z=z>>>32-8|z<<8,Y=Y+z|0,w^=Y,w=w>>>32-7|w<<7,M=M+h|0,E^=M,E=E>>>32-8|E<<8,B=B+E|0,h^=B,h=h>>>32-7|h<<7,M=M+w|0,V^=M,V=V>>>32-16|V<<16,J=J+V|0,w^=J,w=w>>>32-12|w<<12,O=O+H|0,E^=O,E=E>>>32-16|E<<16,m=m+E|0,H^=m,H=H>>>32-12|H<<12,A=A+C|0,z^=A,z=z>>>32-16|z<<16,B=B+z|0,C^=B,C=C>>>32-12|C<<12,_=_+h|0,j^=_,j=j>>>32-16|j<<16,Y=Y+j|0,h^=Y,h=h>>>32-12|h<<12,A=A+C|0,z^=A,z=z>>>32-8|z<<8,B=B+z|0,C^=B,C=C>>>32-7|C<<7,_=_+h|0,j^=_,j=j>>>32-8|j<<8,Y=Y+j|0,h^=Y,h=h>>>32-7|h<<7,O=O+H|0,E^=O,E=E>>>32-8|E<<8,m=m+E|0,H^=m,H=H>>>32-7|H<<7,M=M+w|0,V^=M,V=V>>>32-8|V<<8,J=J+V|0,w^=J,w=w>>>32-7|w<<7;dr.writeUint32LE(M+i|0,r,0),dr.writeUint32LE(O+s|0,r,4),dr.writeUint32LE(A+o|0,r,8),dr.writeUint32LE(_+u|0,r,12),dr.writeUint32LE(h+l|0,r,16),dr.writeUint32LE(w+f|0,r,20),dr.writeUint32LE(H+g|0,r,24),dr.writeUint32LE(C+y|0,r,28),dr.writeUint32LE(B+b|0,r,32),dr.writeUint32LE(Y+x|0,r,36),dr.writeUint32LE(J+D|0,r,40),dr.writeUint32LE(m+S|0,r,44),dr.writeUint32LE(E+N|0,r,48),dr.writeUint32LE(z+R|0,r,52),dr.writeUint32LE(j+K|0,r,56),dr.writeUint32LE(V+$|0,r,60)}function Og(r,e,t,i,s){if(s===void 0&&(s=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var o,u;if(s===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),u=o.length-e.length,o.set(e,u)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,u=s}for(var l=new Uint8Array(64),f=0;f<t.length;f+=64){W6(l,o,r);for(var g=f;g<f+64&&g<t.length;g++)i[g]=t[g]^l[g-f];Y6(o,0,u)}return Ll.wipe(l),s===0&&Ll.wipe(o),i}lc.streamXOR=Og;function G6(r,e,t,i){return i===void 0&&(i=0),Ll.wipe(t),Og(r,e,t,t,i)}lc.stream=G6;function Y6(r,e,t){for(var i=1;t--;)i=i+(r[e]&255)|0,r[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var Ag={},hi={};Object.defineProperty(hi,"__esModule",{value:!0});function J6(r,e,t){return~(r-1)&e|r-1&t}hi.select=J6;function X6(r,e){return(r|0)-(e|0)-1>>>31&1}hi.lessOrEqual=X6;function Cg(r,e){if(r.length!==e.length)return 0;for(var t=0,i=0;i<r.length;i++)t|=r[i]^e[i];return 1&t-1>>>8}hi.compare=Cg;function Z6(r,e){return r.length===0||e.length===0?!1:Cg(r,e)!==0}hi.equal=Z6;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=hi,t=Hr;r.DIGEST_LENGTH=16;var i=function(){function u(l){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var f=l[0]|l[1]<<8;this._r[0]=f&8191;var g=l[2]|l[3]<<8;this._r[1]=(f>>>13|g<<3)&8191;var y=l[4]|l[5]<<8;this._r[2]=(g>>>10|y<<6)&7939;var b=l[6]|l[7]<<8;this._r[3]=(y>>>7|b<<9)&8191;var x=l[8]|l[9]<<8;this._r[4]=(b>>>4|x<<12)&255,this._r[5]=x>>>1&8190;var D=l[10]|l[11]<<8;this._r[6]=(x>>>14|D<<2)&8191;var S=l[12]|l[13]<<8;this._r[7]=(D>>>11|S<<5)&8065;var N=l[14]|l[15]<<8;this._r[8]=(S>>>8|N<<8)&8191,this._r[9]=N>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return u.prototype._blocks=function(l,f,g){for(var y=this._fin?0:2048,b=this._h[0],x=this._h[1],D=this._h[2],S=this._h[3],N=this._h[4],R=this._h[5],K=this._h[6],$=this._h[7],M=this._h[8],O=this._h[9],A=this._r[0],_=this._r[1],h=this._r[2],w=this._r[3],H=this._r[4],C=this._r[5],B=this._r[6],Y=this._r[7],J=this._r[8],m=this._r[9];g>=16;){var E=l[f+0]|l[f+1]<<8;b+=E&8191;var z=l[f+2]|l[f+3]<<8;x+=(E>>>13|z<<3)&8191;var j=l[f+4]|l[f+5]<<8;D+=(z>>>10|j<<6)&8191;var V=l[f+6]|l[f+7]<<8;S+=(j>>>7|V<<9)&8191;var U=l[f+8]|l[f+9]<<8;N+=(V>>>4|U<<12)&8191,R+=U>>>1&8191;var ee=l[f+10]|l[f+11]<<8;K+=(U>>>14|ee<<2)&8191;var re=l[f+12]|l[f+13]<<8;$+=(ee>>>11|re<<5)&8191;var le=l[f+14]|l[f+15]<<8;M+=(re>>>8|le<<8)&8191,O+=le>>>5|y;var ae=0,be=ae;be+=b*A,be+=x*(5*m),be+=D*(5*J),be+=S*(5*Y),be+=N*(5*B),ae=be>>>13,be&=8191,be+=R*(5*C),be+=K*(5*H),be+=$*(5*w),be+=M*(5*h),be+=O*(5*_),ae+=be>>>13,be&=8191;var he=ae;he+=b*_,he+=x*A,he+=D*(5*m),he+=S*(5*J),he+=N*(5*Y),ae=he>>>13,he&=8191,he+=R*(5*B),he+=K*(5*C),he+=$*(5*H),he+=M*(5*w),he+=O*(5*h),ae+=he>>>13,he&=8191;var _e=ae;_e+=b*h,_e+=x*_,_e+=D*A,_e+=S*(5*m),_e+=N*(5*J),ae=_e>>>13,_e&=8191,_e+=R*(5*Y),_e+=K*(5*B),_e+=$*(5*C),_e+=M*(5*H),_e+=O*(5*w),ae+=_e>>>13,_e&=8191;var Q=ae;Q+=b*w,Q+=x*h,Q+=D*_,Q+=S*A,Q+=N*(5*m),ae=Q>>>13,Q&=8191,Q+=R*(5*J),Q+=K*(5*Y),Q+=$*(5*B),Q+=M*(5*C),Q+=O*(5*H),ae+=Q>>>13,Q&=8191;var Z=ae;Z+=b*H,Z+=x*w,Z+=D*h,Z+=S*_,Z+=N*A,ae=Z>>>13,Z&=8191,Z+=R*(5*m),Z+=K*(5*J),Z+=$*(5*Y),Z+=M*(5*B),Z+=O*(5*C),ae+=Z>>>13,Z&=8191;var q=ae;q+=b*C,q+=x*H,q+=D*w,q+=S*h,q+=N*_,ae=q>>>13,q&=8191,q+=R*A,q+=K*(5*m),q+=$*(5*J),q+=M*(5*Y),q+=O*(5*B),ae+=q>>>13,q&=8191;var p=ae;p+=b*B,p+=x*C,p+=D*H,p+=S*w,p+=N*h,ae=p>>>13,p&=8191,p+=R*_,p+=K*A,p+=$*(5*m),p+=M*(5*J),p+=O*(5*Y),ae+=p>>>13,p&=8191;var L=ae;L+=b*Y,L+=x*B,L+=D*C,L+=S*H,L+=N*w,ae=L>>>13,L&=8191,L+=R*h,L+=K*_,L+=$*A,L+=M*(5*m),L+=O*(5*J),ae+=L>>>13,L&=8191;var ue=ae;ue+=b*J,ue+=x*Y,ue+=D*B,ue+=S*C,ue+=N*H,ae=ue>>>13,ue&=8191,ue+=R*w,ue+=K*h,ue+=$*_,ue+=M*A,ue+=O*(5*m),ae+=ue>>>13,ue&=8191;var ge=ae;ge+=b*m,ge+=x*J,ge+=D*Y,ge+=S*B,ge+=N*C,ae=ge>>>13,ge&=8191,ge+=R*H,ge+=K*w,ge+=$*h,ge+=M*_,ge+=O*A,ae+=ge>>>13,ge&=8191,ae=(ae<<2)+ae|0,ae=ae+be|0,be=ae&8191,ae=ae>>>13,he+=ae,b=be,x=he,D=_e,S=Q,N=Z,R=q,K=p,$=L,M=ue,O=ge,f+=16,g-=16}this._h[0]=b,this._h[1]=x,this._h[2]=D,this._h[3]=S,this._h[4]=N,this._h[5]=R,this._h[6]=K,this._h[7]=$,this._h[8]=M,this._h[9]=O},u.prototype.finish=function(l,f){f===void 0&&(f=0);var g=new Uint16Array(10),y,b,x,D;if(this._leftover){for(D=this._leftover,this._buffer[D++]=1;D<16;D++)this._buffer[D]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(y=this._h[1]>>>13,this._h[1]&=8191,D=2;D<10;D++)this._h[D]+=y,y=this._h[D]>>>13,this._h[D]&=8191;for(this._h[0]+=y*5,y=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=y,y=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=y,g[0]=this._h[0]+5,y=g[0]>>>13,g[0]&=8191,D=1;D<10;D++)g[D]=this._h[D]+y,y=g[D]>>>13,g[D]&=8191;for(g[9]-=8192,b=(y^1)-1,D=0;D<10;D++)g[D]&=b;for(b=~b,D=0;D<10;D++)this._h[D]=this._h[D]&b|g[D];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,x=this._h[0]+this._pad[0],this._h[0]=x&65535,D=1;D<8;D++)x=(this._h[D]+this._pad[D]|0)+(x>>>16)|0,this._h[D]=x&65535;return l[f+0]=this._h[0]>>>0,l[f+1]=this._h[0]>>>8,l[f+2]=this._h[1]>>>0,l[f+3]=this._h[1]>>>8,l[f+4]=this._h[2]>>>0,l[f+5]=this._h[2]>>>8,l[f+6]=this._h[3]>>>0,l[f+7]=this._h[3]>>>8,l[f+8]=this._h[4]>>>0,l[f+9]=this._h[4]>>>8,l[f+10]=this._h[5]>>>0,l[f+11]=this._h[5]>>>8,l[f+12]=this._h[6]>>>0,l[f+13]=this._h[6]>>>8,l[f+14]=this._h[7]>>>0,l[f+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(l){var f=0,g=l.length,y;if(this._leftover){y=16-this._leftover,y>g&&(y=g);for(var b=0;b<y;b++)this._buffer[this._leftover+b]=l[f+b];if(g-=y,f+=y,this._leftover+=y,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(g>=16&&(y=g-g%16,this._blocks(l,f,y),f+=y,g-=y),g){for(var b=0;b<g;b++)this._buffer[this._leftover+b]=l[f+b];this._leftover+=g}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},u.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();r.Poly1305=i;function s(u,l){var f=new i(u);f.update(l);var g=f.digest();return f.clean(),g}r.oneTimeAuth=s;function o(u,l){return u.length!==r.DIGEST_LENGTH||l.length!==r.DIGEST_LENGTH?!1:e.equal(u,l)}r.equal=o})(Ag);(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=lc,t=Ag,i=Hr,s=qe,o=hi;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var u=new Uint8Array(16),l=function(){function f(g){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,g.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(g)}return f.prototype.seal=function(g,y,b,x){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var D=new Uint8Array(16);D.set(g,D.length-g.length);var S=new Uint8Array(32);e.stream(this._key,D,S,4);var N=y.length+this.tagLength,R;if(x){if(x.length!==N)throw new Error("ChaCha20Poly1305: incorrect destination length");R=x}else R=new Uint8Array(N);return e.streamXOR(this._key,D,y,R,4),this._authenticate(R.subarray(R.length-this.tagLength,R.length),S,R.subarray(0,R.length-this.tagLength),b),i.wipe(D),R},f.prototype.open=function(g,y,b,x){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(y.length<this.tagLength)return null;var D=new Uint8Array(16);D.set(g,D.length-g.length);var S=new Uint8Array(32);e.stream(this._key,D,S,4);var N=new Uint8Array(this.tagLength);if(this._authenticate(N,S,y.subarray(0,y.length-this.tagLength),b),!o.equal(N,y.subarray(y.length-this.tagLength,y.length)))return null;var R=y.length-this.tagLength,K;if(x){if(x.length!==R)throw new Error("ChaCha20Poly1305: incorrect destination length");K=x}else K=new Uint8Array(R);return e.streamXOR(this._key,D,y.subarray(0,y.length-this.tagLength),K,4),i.wipe(D),K},f.prototype.clean=function(){return i.wipe(this._key),this},f.prototype._authenticate=function(g,y,b,x){var D=new t.Poly1305(y);x&&(D.update(x),x.length%16>0&&D.update(u.subarray(x.length%16))),D.update(b),b.length%16>0&&D.update(u.subarray(b.length%16));var S=new Uint8Array(8);x&&s.writeUint64LE(x.length,S),D.update(S),s.writeUint64LE(b.length,S),D.update(S);for(var N=D.digest(),R=0;R<N.length;R++)g[R]=N[R];D.clean(),i.wipe(N),i.wipe(S)},f}();r.ChaCha20Poly1305=l})(_h);var Tg={},Da={},Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});function Q6(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}Eh.isSerializableHash=Q6;Object.defineProperty(Da,"__esModule",{value:!0});var wn=Eh,e2=hi,t2=Hr,$g=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var s=0;s<i.length;s++)i[s]^=54;this._inner.update(i);for(var s=0;s<i.length;s++)i[s]^=106;this._outer.update(i),wn.isSerializableHash(this._inner)&&wn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),t2.wipe(i)}return r.prototype.reset=function(){if(!wn.isSerializableHash(this._inner)||!wn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){wn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),wn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!wn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!wn.isSerializableHash(this._inner)||!wn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!wn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Da.HMAC=$g;function r2(r,e,t){var i=new $g(r,e);i.update(t);var s=i.digest();return i.clean(),s}Da.hmac=r2;Da.equal=e2.equal;Object.defineProperty(Tg,"__esModule",{value:!0});var mp=Da,vp=Hr,n2=function(){function r(e,t,i,s){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=s;var o=mp.hmac(this._hash,i,t);this._hmac=new mp.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),vp.wipe(this._buffer),vp.wipe(this._counter),this._bufpos=0},r}(),i2=Tg.HKDF=n2,Ss={},hc={},fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.BrowserRandomSource=void 0;const bp=65536;class s2{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let i=0;i<t.length;i+=bp)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,bp)));return t}}fc.BrowserRandomSource=s2;function a2(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dc={};const o2={},c2=Object.freeze(Object.defineProperty({__proto__:null,default:o2},Symbol.toStringTag,{value:"Module"})),u2=hg(c2);Object.defineProperty(dc,"__esModule",{value:!0});dc.NodeRandomSource=void 0;const l2=Hr;class h2{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof a2<"u"){const e=u2;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let s=0;s<i.length;s++)i[s]=t[s];return(0,l2.wipe)(t),i}}dc.NodeRandomSource=h2;Object.defineProperty(hc,"__esModule",{value:!0});hc.SystemRandomSource=void 0;const f2=fc,d2=dc;class p2{constructor(){if(this.isAvailable=!1,this.name="",this._source=new f2.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new d2.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}hc.SystemRandomSource=p2;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=hc,t=qe,i=Hr;r.defaultRandomSource=new e.SystemRandomSource;function s(g,y=r.defaultRandomSource){return y.randomBytes(g)}r.randomBytes=s;function o(g=r.defaultRandomSource){const y=s(4,g),b=(0,t.readUint32LE)(y);return(0,i.wipe)(y),b}r.randomUint32=o;const u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(g,y=u,b=r.defaultRandomSource){if(y.length<2)throw new Error("randomString charset is too short");if(y.length>256)throw new Error("randomString charset is too long");let x="";const D=y.length,S=256-256%D;for(;g>0;){const N=s(Math.ceil(g*256/S),b);for(let R=0;R<N.length&&g>0;R++){const K=N[R];K<S&&(x+=y.charAt(K%D),g--)}(0,i.wipe)(N)}return x}r.randomString=l;function f(g,y=u,b=r.defaultRandomSource){const x=Math.ceil(g/(Math.log(y.length)/Math.LN2));return l(x,y,b)}r.randomStringForEntropy=f})(Ss);var pc={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=qe,t=Hr;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var i=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},l.prototype.update=function(f,g){if(g===void 0&&(g=f.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var y=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&g>0;)this._buffer[this._bufferLength++]=f[y++],g--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(y=o(this._temp,this._state,f,y,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=f[y++],g--;return this},l.prototype.finish=function(f){if(!this._finished){var g=this._bytesHashed,y=this._bufferLength,b=g/536870912|0,x=g<<3,D=g%64<56?64:128;this._buffer[y]=128;for(var S=y+1;S<D-8;S++)this._buffer[S]=0;e.writeUint32BE(b,this._buffer,D-8),e.writeUint32BE(x,this._buffer,D-4),o(this._temp,this._state,this._buffer,0,D),this._finished=!0}for(var S=0;S<this.digestLength/4;S++)e.writeUint32BE(this._state[S],f,S*4);return this},l.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(f){return this._state.set(f.state),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(f){t.wipe(f.state),f.buffer&&t.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},l}();r.SHA256=i;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(l,f,g,y,b){for(;b>=64;){for(var x=f[0],D=f[1],S=f[2],N=f[3],R=f[4],K=f[5],$=f[6],M=f[7],O=0;O<16;O++){var A=y+O*4;l[O]=e.readUint32BE(g,A)}for(var O=16;O<64;O++){var _=l[O-2],h=(_>>>17|_<<32-17)^(_>>>19|_<<32-19)^_>>>10;_=l[O-15];var w=(_>>>7|_<<32-7)^(_>>>18|_<<32-18)^_>>>3;l[O]=(h+l[O-7]|0)+(w+l[O-16]|0)}for(var O=0;O<64;O++){var h=(((R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7))+(R&K^~R&$)|0)+(M+(s[O]+l[O]|0)|0)|0,w=((x>>>2|x<<32-2)^(x>>>13|x<<32-13)^(x>>>22|x<<32-22))+(x&D^x&S^D&S)|0;M=$,$=K,K=R,R=N+h|0,N=S,S=D,D=x,x=h+w|0}f[0]+=x,f[1]+=D,f[2]+=S,f[3]+=N,f[4]+=R,f[5]+=K,f[6]+=$,f[7]+=M,y+=64,b-=64}return y}function u(l){var f=new i;f.update(l);var g=f.digest();return f.clean(),g}r.hash=u})(pc);var xh={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=Ss,t=Hr;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(O){const A=new Float64Array(16);if(O)for(let _=0;_<O.length;_++)A[_]=O[_];return A}const s=new Uint8Array(32);s[0]=9;const o=i([56129,1]);function u(O){let A=1;for(let _=0;_<16;_++){let h=O[_]+A+65535;A=Math.floor(h/65536),O[_]=h-A*65536}O[0]+=A-1+37*(A-1)}function l(O,A,_){const h=~(_-1);for(let w=0;w<16;w++){const H=h&(O[w]^A[w]);O[w]^=H,A[w]^=H}}function f(O,A){const _=i(),h=i();for(let w=0;w<16;w++)h[w]=A[w];u(h),u(h),u(h);for(let w=0;w<2;w++){_[0]=h[0]-65517;for(let C=1;C<15;C++)_[C]=h[C]-65535-(_[C-1]>>16&1),_[C-1]&=65535;_[15]=h[15]-32767-(_[14]>>16&1);const H=_[15]>>16&1;_[14]&=65535,l(h,_,1-H)}for(let w=0;w<16;w++)O[2*w]=h[w]&255,O[2*w+1]=h[w]>>8}function g(O,A){for(let _=0;_<16;_++)O[_]=A[2*_]+(A[2*_+1]<<8);O[15]&=32767}function y(O,A,_){for(let h=0;h<16;h++)O[h]=A[h]+_[h]}function b(O,A,_){for(let h=0;h<16;h++)O[h]=A[h]-_[h]}function x(O,A,_){let h,w,H=0,C=0,B=0,Y=0,J=0,m=0,E=0,z=0,j=0,V=0,U=0,ee=0,re=0,le=0,ae=0,be=0,he=0,_e=0,Q=0,Z=0,q=0,p=0,L=0,ue=0,ge=0,Oe=0,Ge=0,Ze=0,ze=0,St=0,Dt=0,Ke=_[0],Ae=_[1],Ue=_[2],ke=_[3],Ve=_[4],Ne=_[5],Be=_[6],Pe=_[7],Re=_[8],Ye=_[9],$e=_[10],Qe=_[11],tt=_[12],ct=_[13],ut=_[14],it=_[15];h=A[0],H+=h*Ke,C+=h*Ae,B+=h*Ue,Y+=h*ke,J+=h*Ve,m+=h*Ne,E+=h*Be,z+=h*Pe,j+=h*Re,V+=h*Ye,U+=h*$e,ee+=h*Qe,re+=h*tt,le+=h*ct,ae+=h*ut,be+=h*it,h=A[1],C+=h*Ke,B+=h*Ae,Y+=h*Ue,J+=h*ke,m+=h*Ve,E+=h*Ne,z+=h*Be,j+=h*Pe,V+=h*Re,U+=h*Ye,ee+=h*$e,re+=h*Qe,le+=h*tt,ae+=h*ct,be+=h*ut,he+=h*it,h=A[2],B+=h*Ke,Y+=h*Ae,J+=h*Ue,m+=h*ke,E+=h*Ve,z+=h*Ne,j+=h*Be,V+=h*Pe,U+=h*Re,ee+=h*Ye,re+=h*$e,le+=h*Qe,ae+=h*tt,be+=h*ct,he+=h*ut,_e+=h*it,h=A[3],Y+=h*Ke,J+=h*Ae,m+=h*Ue,E+=h*ke,z+=h*Ve,j+=h*Ne,V+=h*Be,U+=h*Pe,ee+=h*Re,re+=h*Ye,le+=h*$e,ae+=h*Qe,be+=h*tt,he+=h*ct,_e+=h*ut,Q+=h*it,h=A[4],J+=h*Ke,m+=h*Ae,E+=h*Ue,z+=h*ke,j+=h*Ve,V+=h*Ne,U+=h*Be,ee+=h*Pe,re+=h*Re,le+=h*Ye,ae+=h*$e,be+=h*Qe,he+=h*tt,_e+=h*ct,Q+=h*ut,Z+=h*it,h=A[5],m+=h*Ke,E+=h*Ae,z+=h*Ue,j+=h*ke,V+=h*Ve,U+=h*Ne,ee+=h*Be,re+=h*Pe,le+=h*Re,ae+=h*Ye,be+=h*$e,he+=h*Qe,_e+=h*tt,Q+=h*ct,Z+=h*ut,q+=h*it,h=A[6],E+=h*Ke,z+=h*Ae,j+=h*Ue,V+=h*ke,U+=h*Ve,ee+=h*Ne,re+=h*Be,le+=h*Pe,ae+=h*Re,be+=h*Ye,he+=h*$e,_e+=h*Qe,Q+=h*tt,Z+=h*ct,q+=h*ut,p+=h*it,h=A[7],z+=h*Ke,j+=h*Ae,V+=h*Ue,U+=h*ke,ee+=h*Ve,re+=h*Ne,le+=h*Be,ae+=h*Pe,be+=h*Re,he+=h*Ye,_e+=h*$e,Q+=h*Qe,Z+=h*tt,q+=h*ct,p+=h*ut,L+=h*it,h=A[8],j+=h*Ke,V+=h*Ae,U+=h*Ue,ee+=h*ke,re+=h*Ve,le+=h*Ne,ae+=h*Be,be+=h*Pe,he+=h*Re,_e+=h*Ye,Q+=h*$e,Z+=h*Qe,q+=h*tt,p+=h*ct,L+=h*ut,ue+=h*it,h=A[9],V+=h*Ke,U+=h*Ae,ee+=h*Ue,re+=h*ke,le+=h*Ve,ae+=h*Ne,be+=h*Be,he+=h*Pe,_e+=h*Re,Q+=h*Ye,Z+=h*$e,q+=h*Qe,p+=h*tt,L+=h*ct,ue+=h*ut,ge+=h*it,h=A[10],U+=h*Ke,ee+=h*Ae,re+=h*Ue,le+=h*ke,ae+=h*Ve,be+=h*Ne,he+=h*Be,_e+=h*Pe,Q+=h*Re,Z+=h*Ye,q+=h*$e,p+=h*Qe,L+=h*tt,ue+=h*ct,ge+=h*ut,Oe+=h*it,h=A[11],ee+=h*Ke,re+=h*Ae,le+=h*Ue,ae+=h*ke,be+=h*Ve,he+=h*Ne,_e+=h*Be,Q+=h*Pe,Z+=h*Re,q+=h*Ye,p+=h*$e,L+=h*Qe,ue+=h*tt,ge+=h*ct,Oe+=h*ut,Ge+=h*it,h=A[12],re+=h*Ke,le+=h*Ae,ae+=h*Ue,be+=h*ke,he+=h*Ve,_e+=h*Ne,Q+=h*Be,Z+=h*Pe,q+=h*Re,p+=h*Ye,L+=h*$e,ue+=h*Qe,ge+=h*tt,Oe+=h*ct,Ge+=h*ut,Ze+=h*it,h=A[13],le+=h*Ke,ae+=h*Ae,be+=h*Ue,he+=h*ke,_e+=h*Ve,Q+=h*Ne,Z+=h*Be,q+=h*Pe,p+=h*Re,L+=h*Ye,ue+=h*$e,ge+=h*Qe,Oe+=h*tt,Ge+=h*ct,Ze+=h*ut,ze+=h*it,h=A[14],ae+=h*Ke,be+=h*Ae,he+=h*Ue,_e+=h*ke,Q+=h*Ve,Z+=h*Ne,q+=h*Be,p+=h*Pe,L+=h*Re,ue+=h*Ye,ge+=h*$e,Oe+=h*Qe,Ge+=h*tt,Ze+=h*ct,ze+=h*ut,St+=h*it,h=A[15],be+=h*Ke,he+=h*Ae,_e+=h*Ue,Q+=h*ke,Z+=h*Ve,q+=h*Ne,p+=h*Be,L+=h*Pe,ue+=h*Re,ge+=h*Ye,Oe+=h*$e,Ge+=h*Qe,Ze+=h*tt,ze+=h*ct,St+=h*ut,Dt+=h*it,H+=38*he,C+=38*_e,B+=38*Q,Y+=38*Z,J+=38*q,m+=38*p,E+=38*L,z+=38*ue,j+=38*ge,V+=38*Oe,U+=38*Ge,ee+=38*Ze,re+=38*ze,le+=38*St,ae+=38*Dt,w=1,h=H+w+65535,w=Math.floor(h/65536),H=h-w*65536,h=C+w+65535,w=Math.floor(h/65536),C=h-w*65536,h=B+w+65535,w=Math.floor(h/65536),B=h-w*65536,h=Y+w+65535,w=Math.floor(h/65536),Y=h-w*65536,h=J+w+65535,w=Math.floor(h/65536),J=h-w*65536,h=m+w+65535,w=Math.floor(h/65536),m=h-w*65536,h=E+w+65535,w=Math.floor(h/65536),E=h-w*65536,h=z+w+65535,w=Math.floor(h/65536),z=h-w*65536,h=j+w+65535,w=Math.floor(h/65536),j=h-w*65536,h=V+w+65535,w=Math.floor(h/65536),V=h-w*65536,h=U+w+65535,w=Math.floor(h/65536),U=h-w*65536,h=ee+w+65535,w=Math.floor(h/65536),ee=h-w*65536,h=re+w+65535,w=Math.floor(h/65536),re=h-w*65536,h=le+w+65535,w=Math.floor(h/65536),le=h-w*65536,h=ae+w+65535,w=Math.floor(h/65536),ae=h-w*65536,h=be+w+65535,w=Math.floor(h/65536),be=h-w*65536,H+=w-1+37*(w-1),w=1,h=H+w+65535,w=Math.floor(h/65536),H=h-w*65536,h=C+w+65535,w=Math.floor(h/65536),C=h-w*65536,h=B+w+65535,w=Math.floor(h/65536),B=h-w*65536,h=Y+w+65535,w=Math.floor(h/65536),Y=h-w*65536,h=J+w+65535,w=Math.floor(h/65536),J=h-w*65536,h=m+w+65535,w=Math.floor(h/65536),m=h-w*65536,h=E+w+65535,w=Math.floor(h/65536),E=h-w*65536,h=z+w+65535,w=Math.floor(h/65536),z=h-w*65536,h=j+w+65535,w=Math.floor(h/65536),j=h-w*65536,h=V+w+65535,w=Math.floor(h/65536),V=h-w*65536,h=U+w+65535,w=Math.floor(h/65536),U=h-w*65536,h=ee+w+65535,w=Math.floor(h/65536),ee=h-w*65536,h=re+w+65535,w=Math.floor(h/65536),re=h-w*65536,h=le+w+65535,w=Math.floor(h/65536),le=h-w*65536,h=ae+w+65535,w=Math.floor(h/65536),ae=h-w*65536,h=be+w+65535,w=Math.floor(h/65536),be=h-w*65536,H+=w-1+37*(w-1),O[0]=H,O[1]=C,O[2]=B,O[3]=Y,O[4]=J,O[5]=m,O[6]=E,O[7]=z,O[8]=j,O[9]=V,O[10]=U,O[11]=ee,O[12]=re,O[13]=le,O[14]=ae,O[15]=be}function D(O,A){x(O,A,A)}function S(O,A){const _=i();for(let h=0;h<16;h++)_[h]=A[h];for(let h=253;h>=0;h--)D(_,_),h!==2&&h!==4&&x(_,_,A);for(let h=0;h<16;h++)O[h]=_[h]}function N(O,A){const _=new Uint8Array(32),h=new Float64Array(80),w=i(),H=i(),C=i(),B=i(),Y=i(),J=i();for(let j=0;j<31;j++)_[j]=O[j];_[31]=O[31]&127|64,_[0]&=248,g(h,A);for(let j=0;j<16;j++)H[j]=h[j];w[0]=B[0]=1;for(let j=254;j>=0;--j){const V=_[j>>>3]>>>(j&7)&1;l(w,H,V),l(C,B,V),y(Y,w,C),b(w,w,C),y(C,H,B),b(H,H,B),D(B,Y),D(J,w),x(w,C,w),x(C,H,Y),y(Y,w,C),b(w,w,C),D(H,w),b(C,B,J),x(w,C,o),y(w,w,B),x(C,C,w),x(w,B,J),x(B,H,h),D(H,Y),l(w,H,V),l(C,B,V)}for(let j=0;j<16;j++)h[j+16]=w[j],h[j+32]=C[j],h[j+48]=H[j],h[j+64]=B[j];const m=h.subarray(32),E=h.subarray(16);S(m,m),x(E,E,m);const z=new Uint8Array(32);return f(z,E),z}r.scalarMult=N;function R(O){return N(O,s)}r.scalarMultBase=R;function K(O){if(O.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const A=new Uint8Array(O);return{publicKey:R(A),secretKey:A}}r.generateKeyPairFromSeed=K;function $(O){const A=(0,e.randomBytes)(32,O),_=K(A);return(0,t.wipe)(A),_}r.generateKeyPair=$;function M(O,A,_=!1){if(O.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(A.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const h=N(O,A);if(_){let w=0;for(let H=0;H<h.length;H++)w|=h[H];if(w===0)throw new Error("X25519: invalid shared key")}return h}r.sharedKey=M})(xh);function Sh(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Ng(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Sh(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function jl(r,e){e||(e=r.reduce((s,o)=>s+o.length,0));const t=Ng(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return Sh(t)}function g2(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),u=o.charCodeAt(0);if(t[u]!==255)throw new TypeError(o+" is ambiguous");t[u]=s}var l=r.length,f=r.charAt(0),g=Math.log(l)/Math.log(256),y=Math.log(256)/Math.log(l);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,R=0,K=0,$=S.length;K!==$&&S[K]===0;)K++,N++;for(var M=($-K)*y+1>>>0,O=new Uint8Array(M);K!==$;){for(var A=S[K],_=0,h=M-1;(A!==0||_<R)&&h!==-1;h--,_++)A+=256*O[h]>>>0,O[h]=A%l>>>0,A=A/l>>>0;if(A!==0)throw new Error("Non-zero carry");R=_,K++}for(var w=M-R;w!==M&&O[w]===0;)w++;for(var H=f.repeat(N);w<M;++w)H+=r.charAt(O[w]);return H}function x(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var R=0,K=0;S[N]===f;)R++,N++;for(var $=(S.length-N)*g+1>>>0,M=new Uint8Array($);S[N];){var O=t[S.charCodeAt(N)];if(O===255)return;for(var A=0,_=$-1;(O!==0||A<K)&&_!==-1;_--,A++)O+=l*M[_]>>>0,M[_]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");K=A,N++}if(S[N]!==" "){for(var h=$-K;h!==$&&M[h]===0;)h++;for(var w=new Uint8Array(R+($-h)),H=R;h!==$;)w[H++]=M[h++];return w}}}function D(S){var N=x(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:x,decode:D}}var y2=g2,m2=y2;const v2=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},b2=r=>new TextEncoder().encode(r),w2=r=>new TextDecoder().decode(r);class _2{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class E2{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rg(this,e)}}class x2{constructor(e){this.decoders=e}or(e){return Rg(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Rg=(r,e)=>new x2({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class S2{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new _2(e,t,i),this.decoder=new E2(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const gc=({name:r,prefix:e,encode:t,decode:i})=>new S2(r,e,t,i),Ia=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=m2(t,e);return gc({prefix:r,name:e,encode:i,decode:o=>v2(s(o))})},D2=(r,e,t,i)=>{const s={};for(let y=0;y<e.length;++y)s[e[y]]=y;let o=r.length;for(;r[o-1]==="=";)--o;const u=new Uint8Array(o*t/8|0);let l=0,f=0,g=0;for(let y=0;y<o;++y){const b=s[r[y]];if(b===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<t|b,l+=t,l>=8&&(l-=8,u[g++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return u},I2=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let o="",u=0,l=0;for(let f=0;f<r.length;++f)for(l=l<<8|r[f],u+=8;u>t;)u-=t,o+=e[s&l>>u];if(u&&(o+=e[s&l<<t-u]),i)for(;o.length*t&7;)o+="=";return o},ur=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>gc({prefix:e,name:r,encode(s){return I2(s,i,t)},decode(s){return D2(s,i,t,r)}}),P2=gc({prefix:"\0",name:"identity",encode:r=>w2(r),decode:r=>b2(r)}),O2=Object.freeze(Object.defineProperty({__proto__:null,identity:P2},Symbol.toStringTag,{value:"Module"})),A2=ur({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),C2=Object.freeze(Object.defineProperty({__proto__:null,base2:A2},Symbol.toStringTag,{value:"Module"})),T2=ur({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),$2=Object.freeze(Object.defineProperty({__proto__:null,base8:T2},Symbol.toStringTag,{value:"Module"})),N2=Ia({prefix:"9",name:"base10",alphabet:"0123456789"}),R2=Object.freeze(Object.defineProperty({__proto__:null,base10:N2},Symbol.toStringTag,{value:"Module"})),F2=ur({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),M2=ur({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),L2=Object.freeze(Object.defineProperty({__proto__:null,base16:F2,base16upper:M2},Symbol.toStringTag,{value:"Module"})),j2=ur({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),U2=ur({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),k2=ur({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),B2=ur({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),q2=ur({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),z2=ur({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),H2=ur({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),K2=ur({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),V2=ur({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),W2=Object.freeze(Object.defineProperty({__proto__:null,base32:j2,base32hex:q2,base32hexpad:H2,base32hexpadupper:K2,base32hexupper:z2,base32pad:k2,base32padupper:B2,base32upper:U2,base32z:V2},Symbol.toStringTag,{value:"Module"})),G2=Ia({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Y2=Ia({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),J2=Object.freeze(Object.defineProperty({__proto__:null,base36:G2,base36upper:Y2},Symbol.toStringTag,{value:"Module"})),X2=Ia({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Z2=Ia({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Q2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:X2,base58flickr:Z2},Symbol.toStringTag,{value:"Module"})),e3=ur({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),t3=ur({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),r3=ur({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),n3=ur({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),i3=Object.freeze(Object.defineProperty({__proto__:null,base64:e3,base64pad:t3,base64url:r3,base64urlpad:n3},Symbol.toStringTag,{value:"Module"})),Fg=Array.from(""),s3=Fg.reduce((r,e,t)=>(r[t]=e,r),[]),a3=Fg.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function o3(r){return r.reduce((e,t)=>(e+=s3[t],e),"")}function c3(r){const e=[];for(const t of r){const i=a3[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const u3=gc({prefix:"",name:"base256emoji",encode:o3,decode:c3}),l3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:u3},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const wp={...O2,...C2,...$2,...R2,...L2,...W2,...J2,...Q2,...i3,...l3};function Mg(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const _p=Mg("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),al=Mg("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Ng(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Lg={utf8:_p,"utf-8":_p,hex:wp.base16,latin1:al,ascii:al,binary:al,...wp};function Nr(r,e="utf8"){const t=Lg[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Sh(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function Dr(r,e="utf8"){const t=Lg[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Ep=globalThis&&globalThis.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return r.concat(o||Array.prototype.slice.call(e))},h3=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}(),f3=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),d3=function(){function r(e,t,i,s){this.name=e,this.version=t,this.os=i,this.bot=s,this.type="bot-device"}return r}(),p3=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),g3=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),y3=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,m3=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,xp=3,v3=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",y3]],Sp=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function b3(r){return r?Dp(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new g3:typeof navigator<"u"?Dp(navigator.userAgent):E3()}function w3(r){return r!==""&&v3.reduce(function(e,t){var i=t[0],s=t[1];if(e)return e;var o=s.exec(r);return!!o&&[i,o]},!1)}function Dp(r){var e=w3(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new p3;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<xp&&(s=Ep(Ep([],s,!0),x3(xp-s.length),!0)):s=[];var o=s.join("."),u=_3(r),l=m3.exec(r);return l&&l[1]?new d3(t,o,u,l[1]):new h3(t,o,u)}function _3(r){for(var e=0,t=Sp.length;e<t;e++){var i=Sp[e],s=i[0],o=i[1],u=o.exec(r);if(u)return s}return null}function E3(){var r=typeof process<"u"&&process.version;return r?new f3(process.version.slice(1)):null}function x3(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var Ee={},jg={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(r){var e,t,i,s,o,u,l,f,g,y,b,x,D,S,N,R,K,$,M,O,A,_,h;(function(w){var H=typeof ar=="object"?ar:typeof self=="object"?self:typeof this=="object"?this:{};w(C(H,C(r.exports)));function C(B,Y){return B!==H&&(typeof Object.create=="function"?Object.defineProperty(B,"__esModule",{value:!0}):B.__esModule=!0),function(J,m){return B[J]=Y?Y(J,m):m}}})(function(w){var H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var Y in B)B.hasOwnProperty(Y)&&(C[Y]=B[Y])};e=function(C,B){H(C,B);function Y(){this.constructor=C}C.prototype=B===null?Object.create(B):(Y.prototype=B.prototype,new Y)},t=Object.assign||function(C){for(var B,Y=1,J=arguments.length;Y<J;Y++){B=arguments[Y];for(var m in B)Object.prototype.hasOwnProperty.call(B,m)&&(C[m]=B[m])}return C},i=function(C,B){var Y={};for(var J in C)Object.prototype.hasOwnProperty.call(C,J)&&B.indexOf(J)<0&&(Y[J]=C[J]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,J=Object.getOwnPropertySymbols(C);m<J.length;m++)B.indexOf(J[m])<0&&Object.prototype.propertyIsEnumerable.call(C,J[m])&&(Y[J[m]]=C[J[m]]);return Y},s=function(C,B,Y,J){var m=arguments.length,E=m<3?B:J===null?J=Object.getOwnPropertyDescriptor(B,Y):J,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(C,B,Y,J);else for(var j=C.length-1;j>=0;j--)(z=C[j])&&(E=(m<3?z(E):m>3?z(B,Y,E):z(B,Y))||E);return m>3&&E&&Object.defineProperty(B,Y,E),E},o=function(C,B){return function(Y,J){B(Y,J,C)}},u=function(C,B){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(C,B)},l=function(C,B,Y,J){function m(E){return E instanceof Y?E:new Y(function(z){z(E)})}return new(Y||(Y=Promise))(function(E,z){function j(ee){try{U(J.next(ee))}catch(re){z(re)}}function V(ee){try{U(J.throw(ee))}catch(re){z(re)}}function U(ee){ee.done?E(ee.value):m(ee.value).then(j,V)}U((J=J.apply(C,B||[])).next())})},f=function(C,B){var Y={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},J,m,E,z;return z={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function j(U){return function(ee){return V([U,ee])}}function V(U){if(J)throw new TypeError("Generator is already executing.");for(;Y;)try{if(J=1,m&&(E=U[0]&2?m.return:U[0]?m.throw||((E=m.return)&&E.call(m),0):m.next)&&!(E=E.call(m,U[1])).done)return E;switch(m=0,E&&(U=[U[0]&2,E.value]),U[0]){case 0:case 1:E=U;break;case 4:return Y.label++,{value:U[1],done:!1};case 5:Y.label++,m=U[1],U=[0];continue;case 7:U=Y.ops.pop(),Y.trys.pop();continue;default:if(E=Y.trys,!(E=E.length>0&&E[E.length-1])&&(U[0]===6||U[0]===2)){Y=0;continue}if(U[0]===3&&(!E||U[1]>E[0]&&U[1]<E[3])){Y.label=U[1];break}if(U[0]===6&&Y.label<E[1]){Y.label=E[1],E=U;break}if(E&&Y.label<E[2]){Y.label=E[2],Y.ops.push(U);break}E[2]&&Y.ops.pop(),Y.trys.pop();continue}U=B.call(C,Y)}catch(ee){U=[6,ee],m=0}finally{J=E=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},h=function(C,B,Y,J){J===void 0&&(J=Y),C[J]=B[Y]},g=function(C,B){for(var Y in C)Y!=="default"&&!B.hasOwnProperty(Y)&&(B[Y]=C[Y])},y=function(C){var B=typeof Symbol=="function"&&Symbol.iterator,Y=B&&C[B],J=0;if(Y)return Y.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&J>=C.length&&(C=void 0),{value:C&&C[J++],done:!C}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(C,B){var Y=typeof Symbol=="function"&&C[Symbol.iterator];if(!Y)return C;var J=Y.call(C),m,E=[],z;try{for(;(B===void 0||B-- >0)&&!(m=J.next()).done;)E.push(m.value)}catch(j){z={error:j}}finally{try{m&&!m.done&&(Y=J.return)&&Y.call(J)}finally{if(z)throw z.error}}return E},x=function(){for(var C=[],B=0;B<arguments.length;B++)C=C.concat(b(arguments[B]));return C},D=function(){for(var C=0,B=0,Y=arguments.length;B<Y;B++)C+=arguments[B].length;for(var J=Array(C),m=0,B=0;B<Y;B++)for(var E=arguments[B],z=0,j=E.length;z<j;z++,m++)J[m]=E[z];return J},S=function(C){return this instanceof S?(this.v=C,this):new S(C)},N=function(C,B,Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=Y.apply(C,B||[]),m,E=[];return m={},z("next"),z("throw"),z("return"),m[Symbol.asyncIterator]=function(){return this},m;function z(le){J[le]&&(m[le]=function(ae){return new Promise(function(be,he){E.push([le,ae,be,he])>1||j(le,ae)})})}function j(le,ae){try{V(J[le](ae))}catch(be){re(E[0][3],be)}}function V(le){le.value instanceof S?Promise.resolve(le.value.v).then(U,ee):re(E[0][2],le)}function U(le){j("next",le)}function ee(le){j("throw",le)}function re(le,ae){le(ae),E.shift(),E.length&&j(E[0][0],E[0][1])}},R=function(C){var B,Y;return B={},J("next"),J("throw",function(m){throw m}),J("return"),B[Symbol.iterator]=function(){return this},B;function J(m,E){B[m]=C[m]?function(z){return(Y=!Y)?{value:S(C[m](z)),done:m==="return"}:E?E(z):z}:E}},K=function(C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B=C[Symbol.asyncIterator],Y;return B?B.call(C):(C=typeof y=="function"?y(C):C[Symbol.iterator](),Y={},J("next"),J("throw"),J("return"),Y[Symbol.asyncIterator]=function(){return this},Y);function J(E){Y[E]=C[E]&&function(z){return new Promise(function(j,V){z=C[E](z),m(j,V,z.done,z.value)})}}function m(E,z,j,V){Promise.resolve(V).then(function(U){E({value:U,done:j})},z)}},$=function(C,B){return Object.defineProperty?Object.defineProperty(C,"raw",{value:B}):C.raw=B,C},M=function(C){if(C&&C.__esModule)return C;var B={};if(C!=null)for(var Y in C)Object.hasOwnProperty.call(C,Y)&&(B[Y]=C[Y]);return B.default=C,B},O=function(C){return C&&C.__esModule?C:{default:C}},A=function(C,B){if(!B.has(C))throw new TypeError("attempted to get private field on non-instance");return B.get(C)},_=function(C,B,Y){if(!B.has(C))throw new TypeError("attempted to set private field on non-instance");return B.set(C,Y),Y},w("__extends",e),w("__assign",t),w("__rest",i),w("__decorate",s),w("__param",o),w("__metadata",u),w("__awaiter",l),w("__generator",f),w("__exportStar",g),w("__createBinding",h),w("__values",y),w("__read",b),w("__spread",x),w("__spreadArrays",D),w("__await",S),w("__asyncGenerator",N),w("__asyncDelegator",R),w("__asyncValues",K),w("__makeTemplateObject",$),w("__importStar",M),w("__importDefault",O),w("__classPrivateFieldGet",A),w("__classPrivateFieldSet",_)})})(jg);var nn=jg.exports,ol={},Qs={},Ip;function S3(){if(Ip)return Qs;Ip=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Qs.delay=r,Qs}var Ti={},cl={},$i={},Pp;function D3(){return Pp||(Pp=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.ONE_THOUSAND=$i.ONE_HUNDRED=void 0,$i.ONE_HUNDRED=100,$i.ONE_THOUSAND=1e3),$i}var ul={},Op;function I3(){return Op||(Op=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(ul)),ul}var Ap;function Ug(){return Ap||(Ap=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(D3(),r),e.__exportStar(I3(),r)}(cl)),cl}var Cp;function P3(){if(Cp)return Ti;Cp=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.fromMiliseconds=Ti.toMiliseconds=void 0;const r=Ug();function e(i){return i*r.ONE_THOUSAND}Ti.toMiliseconds=e;function t(i){return Math.floor(i/r.ONE_THOUSAND)}return Ti.fromMiliseconds=t,Ti}var Tp;function O3(){return Tp||(Tp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(S3(),r),e.__exportStar(P3(),r)}(ol)),ol}var ds={},$p;function A3(){if($p)return ds;$p=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:s})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return ds.Watch=r,ds.default=r,ds}var ll={},ea={},Np;function C3(){if(Np)return ea;Np=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.IWatch=void 0;class r{}return ea.IWatch=r,ea}var Rp;function T3(){return Rp||(Rp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),nn.__exportStar(C3(),r)}(ll)),ll}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(O3(),r),e.__exportStar(A3(),r),e.__exportStar(T3(),r),e.__exportStar(Ug(),r)})(Ee);var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.getLocalStorage=_t.getLocalStorageOrThrow=_t.getCrypto=_t.getCryptoOrThrow=Bg=_t.getLocation=_t.getLocationOrThrow=Dh=_t.getNavigator=_t.getNavigatorOrThrow=kg=_t.getDocument=_t.getDocumentOrThrow=_t.getFromWindowOrThrow=_t.getFromWindow=void 0;function qi(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}_t.getFromWindow=qi;function Ds(r){const e=qi(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}_t.getFromWindowOrThrow=Ds;function $3(){return Ds("document")}_t.getDocumentOrThrow=$3;function N3(){return qi("document")}var kg=_t.getDocument=N3;function R3(){return Ds("navigator")}_t.getNavigatorOrThrow=R3;function F3(){return qi("navigator")}var Dh=_t.getNavigator=F3;function M3(){return Ds("location")}_t.getLocationOrThrow=M3;function L3(){return qi("location")}var Bg=_t.getLocation=L3;function j3(){return Ds("crypto")}_t.getCryptoOrThrow=j3;function U3(){return qi("crypto")}_t.getCrypto=U3;function k3(){return Ds("localStorage")}_t.getLocalStorageOrThrow=k3;function B3(){return qi("localStorage")}_t.getLocalStorage=B3;var Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});var qg=Ih.getWindowMetadata=void 0;const Fp=_t;function q3(){let r,e;try{r=Fp.getDocumentOrThrow(),e=Fp.getLocationOrThrow()}catch{return null}function t(){const b=r.getElementsByTagName("link"),x=[];for(let D=0;D<b.length;D++){const S=b[D],N=S.getAttribute("rel");if(N&&N.toLowerCase().indexOf("icon")>-1){const R=S.getAttribute("href");if(R)if(R.toLowerCase().indexOf("https:")===-1&&R.toLowerCase().indexOf("http:")===-1&&R.indexOf("//")!==0){let K=e.protocol+"//"+e.host;if(R.indexOf("/")===0)K+=R;else{const $=e.pathname.split("/");$.pop();const M=$.join("/");K+=M+"/"+R}x.push(K)}else if(R.indexOf("//")===0){const K=e.protocol+R;x.push(K)}else x.push(R)}}return x}function i(...b){const x=r.getElementsByTagName("meta");for(let D=0;D<x.length;D++){const S=x[D],N=["itemprop","property","name"].map(R=>S.getAttribute(R)).filter(R=>R?b.includes(R):!1);if(N.length&&N){const R=S.getAttribute("content");if(R)return R}}return""}function s(){let b=i("name","og:site_name","og:title","twitter:title");return b||(b=r.title),b}function o(){return i("description","og:description","twitter:description","keywords")}const u=s(),l=o(),f=e.origin,g=t();return{description:l,url:f,icons:g,name:u}}qg=Ih.getWindowMetadata=q3;var ga={},z3=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),zg="%[a-f0-9]{2}",Mp=new RegExp("("+zg+")|([^%]+?)","gi"),Lp=new RegExp("("+zg+")+","gi");function Ul(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),i=r.slice(e);return Array.prototype.concat.call([],Ul(t),Ul(i))}function H3(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(Mp)||[],t=1;t<e.length;t++)r=Ul(e,t).join(""),e=r.match(Mp)||[];return r}}function K3(r){for(var e={"%FE%FF":"","%FF%FE":""},t=Lp.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=H3(t[0]);i!==t[0]&&(e[t[0]]=i)}t=Lp.exec(r)}e["%C2"]="";for(var s=Object.keys(e),o=0;o<s.length;o++){var u=s[o];r=r.replace(new RegExp(u,"g"),e[u])}return r}var V3=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return K3(r)}},W3=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]},G3=function(r,e){for(var t={},i=Object.keys(r),s=Array.isArray(e),o=0;o<i.length;o++){var u=i[o],l=r[u];(s?e.indexOf(u)!==-1:e(u,l,r))&&(t[u]=l)}return t};(function(r){const e=z3,t=V3,i=W3,s=G3,o=$=>$==null,u=Symbol("encodeFragmentIdentifier");function l($){switch($.arrayFormat){case"index":return M=>(O,A)=>{const _=O.length;return A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?O:A===null?[...O,[y(M,$),"[",_,"]"].join("")]:[...O,[y(M,$),"[",y(_,$),"]=",y(A,$)].join("")]};case"bracket":return M=>(O,A)=>A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?O:A===null?[...O,[y(M,$),"[]"].join("")]:[...O,[y(M,$),"[]=",y(A,$)].join("")];case"colon-list-separator":return M=>(O,A)=>A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?O:A===null?[...O,[y(M,$),":list="].join("")]:[...O,[y(M,$),":list=",y(A,$)].join("")];case"comma":case"separator":case"bracket-separator":{const M=$.arrayFormat==="bracket-separator"?"[]=":"=";return O=>(A,_)=>_===void 0||$.skipNull&&_===null||$.skipEmptyString&&_===""?A:(_=_===null?"":_,A.length===0?[[y(O,$),M,y(_,$)].join("")]:[[A,y(_,$)].join($.arrayFormatSeparator)])}default:return M=>(O,A)=>A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?O:A===null?[...O,y(M,$)]:[...O,[y(M,$),"=",y(A,$)].join("")]}}function f($){let M;switch($.arrayFormat){case"index":return(O,A,_)=>{if(M=/\[(\d*)\]$/.exec(O),O=O.replace(/\[\d*\]$/,""),!M){_[O]=A;return}_[O]===void 0&&(_[O]={}),_[O][M[1]]=A};case"bracket":return(O,A,_)=>{if(M=/(\[\])$/.exec(O),O=O.replace(/\[\]$/,""),!M){_[O]=A;return}if(_[O]===void 0){_[O]=[A];return}_[O]=[].concat(_[O],A)};case"colon-list-separator":return(O,A,_)=>{if(M=/(:list)$/.exec(O),O=O.replace(/:list$/,""),!M){_[O]=A;return}if(_[O]===void 0){_[O]=[A];return}_[O]=[].concat(_[O],A)};case"comma":case"separator":return(O,A,_)=>{const h=typeof A=="string"&&A.includes($.arrayFormatSeparator),w=typeof A=="string"&&!h&&b(A,$).includes($.arrayFormatSeparator);A=w?b(A,$):A;const H=h||w?A.split($.arrayFormatSeparator).map(C=>b(C,$)):A===null?A:b(A,$);_[O]=H};case"bracket-separator":return(O,A,_)=>{const h=/(\[\])$/.test(O);if(O=O.replace(/\[\]$/,""),!h){_[O]=A&&b(A,$);return}const w=A===null?[]:A.split($.arrayFormatSeparator).map(H=>b(H,$));if(_[O]===void 0){_[O]=w;return}_[O]=[].concat(_[O],w)};default:return(O,A,_)=>{if(_[O]===void 0){_[O]=A;return}_[O]=[].concat(_[O],A)}}}function g($){if(typeof $!="string"||$.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function y($,M){return M.encode?M.strict?e($):encodeURIComponent($):$}function b($,M){return M.decode?t($):$}function x($){return Array.isArray($)?$.sort():typeof $=="object"?x(Object.keys($)).sort((M,O)=>Number(M)-Number(O)).map(M=>$[M]):$}function D($){const M=$.indexOf("#");return M!==-1&&($=$.slice(0,M)),$}function S($){let M="";const O=$.indexOf("#");return O!==-1&&(M=$.slice(O)),M}function N($){$=D($);const M=$.indexOf("?");return M===-1?"":$.slice(M+1)}function R($,M){return M.parseNumbers&&!Number.isNaN(Number($))&&typeof $=="string"&&$.trim()!==""?$=Number($):M.parseBooleans&&$!==null&&($.toLowerCase()==="true"||$.toLowerCase()==="false")&&($=$.toLowerCase()==="true"),$}function K($,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),g(M.arrayFormatSeparator);const O=f(M),A=Object.create(null);if(typeof $!="string"||($=$.trim().replace(/^[?#&]/,""),!$))return A;for(const _ of $.split("&")){if(_==="")continue;let[h,w]=i(M.decode?_.replace(/\+/g," "):_,"=");w=w===void 0?null:["comma","separator","bracket-separator"].includes(M.arrayFormat)?w:b(w,M),O(b(h,M),w,A)}for(const _ of Object.keys(A)){const h=A[_];if(typeof h=="object"&&h!==null)for(const w of Object.keys(h))h[w]=R(h[w],M);else A[_]=R(h,M)}return M.sort===!1?A:(M.sort===!0?Object.keys(A).sort():Object.keys(A).sort(M.sort)).reduce((_,h)=>{const w=A[h];return w&&typeof w=="object"&&!Array.isArray(w)?_[h]=x(w):_[h]=w,_},Object.create(null))}r.extract=N,r.parse=K,r.stringify=($,M)=>{if(!$)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),g(M.arrayFormatSeparator);const O=w=>M.skipNull&&o($[w])||M.skipEmptyString&&$[w]==="",A=l(M),_={};for(const w of Object.keys($))O(w)||(_[w]=$[w]);const h=Object.keys(_);return M.sort!==!1&&h.sort(M.sort),h.map(w=>{const H=$[w];return H===void 0?"":H===null?y(w,M):Array.isArray(H)?H.length===0&&M.arrayFormat==="bracket-separator"?y(w,M)+"[]":H.reduce(A(w),[]).join("&"):y(w,M)+"="+y(H,M)}).filter(w=>w.length>0).join("&")},r.parseUrl=($,M)=>{M=Object.assign({decode:!0},M);const[O,A]=i($,"#");return Object.assign({url:O.split("?")[0]||"",query:K(N($),M)},M&&M.parseFragmentIdentifier&&A?{fragmentIdentifier:b(A,M)}:{})},r.stringifyUrl=($,M)=>{M=Object.assign({encode:!0,strict:!0,[u]:!0},M);const O=D($.url).split("?")[0]||"",A=r.extract($.url),_=r.parse(A,{sort:!1}),h=Object.assign(_,$.query);let w=r.stringify(h,M);w&&(w=`?${w}`);let H=S($.url);return $.fragmentIdentifier&&(H=`#${M[u]?y($.fragmentIdentifier,M):$.fragmentIdentifier}`),`${O}${w}${H}`},r.pick=($,M,O)=>{O=Object.assign({parseFragmentIdentifier:!0,[u]:!1},O);const{url:A,query:_,fragmentIdentifier:h}=r.parseUrl($,O);return r.stringifyUrl({url:A,query:s(_,M),fragmentIdentifier:h},O)},r.exclude=($,M,O)=>{const A=Array.isArray(M)?_=>!M.includes(_):(_,h)=>!M(_,h);return r.pick($,A,O)}})(ga);const Y3={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function J3(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const s=r[i];t.push(...s.accounts)}),t}function Hg(r,e){return r.includes(":")?[r]:e.chains||[]}const Kg="base10",Er="base16",kl="base64pad",Ph="utf8",Vg=0,zi=1,X3=0,jp=1,Bl=12,Oh=32;function Z3(){const r=xh.generateKeyPair();return{privateKey:Dr(r.secretKey,Er),publicKey:Dr(r.publicKey,Er)}}function ql(){const r=Ss.randomBytes(Oh);return Dr(r,Er)}function Q3(r,e){const t=xh.sharedKey(Nr(r,Er),Nr(e,Er)),i=new i2(pc.SHA256,t).expand(Oh);return Dr(i,Er)}function e5(r){const e=pc.hash(Nr(r,Er));return Dr(e,Er)}function bs(r){const e=pc.hash(Nr(r,Ph));return Dr(e,Er)}function t5(r){return Nr(`${r}`,Kg)}function Pa(r){return Number(Dr(r,Kg))}function r5(r){const e=t5(typeof r.type<"u"?r.type:Vg);if(Pa(e)===zi&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Nr(r.senderPublicKey,Er):void 0,i=typeof r.iv<"u"?Nr(r.iv,Er):Ss.randomBytes(Bl),s=new _h.ChaCha20Poly1305(Nr(r.symKey,Er)).seal(i,Nr(r.message,Ph));return i5({type:e,sealed:s,iv:i,senderPublicKey:t})}function n5(r){const e=new _h.ChaCha20Poly1305(Nr(r.symKey,Er)),{sealed:t,iv:i}=Zo(r.encoded),s=e.open(i,t);if(s===null)throw new Error("Failed to decrypt");return Dr(s,Ph)}function i5(r){if(Pa(r.type)===zi){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Dr(jl([r.type,r.senderPublicKey,r.iv,r.sealed]),kl)}return Dr(jl([r.type,r.iv,r.sealed]),kl)}function Zo(r){const e=Nr(r,kl),t=e.slice(X3,jp),i=jp;if(Pa(t)===zi){const l=i+Oh,f=l+Bl,g=e.slice(i,l),y=e.slice(l,f),b=e.slice(f);return{type:t,sealed:b,iv:y,senderPublicKey:g}}const s=i+Bl,o=e.slice(i,s),u=e.slice(s);return{type:t,sealed:u,iv:o}}function s5(r,e){const t=Zo(r);return Wg({type:Pa(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Dr(t.senderPublicKey,Er):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Wg(r){const e=(r==null?void 0:r.type)||Vg;if(e===zi){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function Up(r){return r.type===zi&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}var a5=Object.defineProperty,kp=Object.getOwnPropertySymbols,o5=Object.prototype.hasOwnProperty,c5=Object.prototype.propertyIsEnumerable,Bp=(r,e,t)=>e in r?a5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qp=(r,e)=>{for(var t in e||(e={}))o5.call(e,t)&&Bp(r,t,e[t]);if(kp)for(var t of kp(e))c5.call(e,t)&&Bp(r,t,e[t]);return r};const u5="ReactNative",Li={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},l5="js";function Ah(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Gg(){return!kg()&&!!Dh()&&navigator.product===u5}function Ch(){return!Ah()&&!!Dh()}function Yg(){return Gg()?Li.reactNative:Ah()?Li.node:Ch()?Li.browser:Li.unknown}function h5(r,e){let t=ga.parse(r);return t=qp(qp({},t),e),r=ga.stringify(t),r}function f5(){return qg()||{name:"",description:"",url:"",icons:[""]}}function d5(){if(typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const r=b3();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function p5(){var r;const e=Yg();return e===Li.browser?[e,((r=Bg())==null?void 0:r.host)||"unknown"].join(":"):e}function g5(r,e,t){const i=d5(),s=p5();return[[r,e].join("-"),[l5,t].join("-"),i,s].join("/")}function y5({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:o,useOnCloseEvent:u}){const l=t.split("?"),f=g5(r,e,i),g={auth:s,ua:f,projectId:o,useOnCloseEvent:u||void 0},y=h5(l[1]||"",g);return l[0]+"?"+y}function ji(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Jg(r){return Object.fromEntries(r.entries())}function Xg(r){return new Map(Object.entries(r))}function ys(r=Ee.FIVE_MINUTES,e){const t=Ee.toMiliseconds(r||Ee.FIVE_MINUTES);let i,s,o;return{resolve:u=>{o&&i&&(clearTimeout(o),i(u))},reject:u=>{o&&s&&(clearTimeout(o),s(u))},done:()=>new Promise((u,l)=>{o=setTimeout(()=>{l(new Error(e))},t),i=u,s=l})}}function Qo(r,e,t){return new Promise(async(i,s)=>{const o=setTimeout(()=>s(new Error(t)),e);try{const u=await r;i(u)}catch(u){s(u)}clearTimeout(o)})}function Zg(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function m5(r){return Zg("topic",r)}function v5(r){return Zg("id",r)}function Qg(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function hn(r,e){return Ee.fromMiliseconds((e||Date.now())+Ee.toMiliseconds(r))}function si(r){return Date.now()>=Ee.toMiliseconds(r)}function er(r,e){return`${r}${e?`:${e}`:""}`}function hl(r=[],e=[]){return[...new Set([...r,...e])]}async function b5({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t;let s=i==null?void 0:i.href;if(typeof s!="string")return;s.endsWith("/")&&(s=s.slice(0,-1));const o=`${s}/wc?requestId=${r}&sessionTopic=${e}`,u=Yg();u===Li.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):u===Li.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}const w5="irn";function zl(r){return(r==null?void 0:r.relay)||{protocol:w5}}function Wo(r){const e=Y3[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var _5=Object.defineProperty,zp=Object.getOwnPropertySymbols,E5=Object.prototype.hasOwnProperty,x5=Object.prototype.propertyIsEnumerable,Hp=(r,e,t)=>e in r?_5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S5=(r,e)=>{for(var t in e||(e={}))E5.call(e,t)&&Hp(r,t,e[t]);if(zp)for(var t of zp(e))x5.call(e,t)&&Hp(r,t,e[t]);return r};function D5(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const o=s.replace(i,""),u=r[s];t[o]=u}}),t}function I5(r){const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),o=typeof t<"u"?r.substring(t):"",u=ga.parse(o);return{protocol:i,topic:P5(s[0]),version:parseInt(s[1],10),symKey:u.symKey,relay:D5(u)}}function P5(r){return r.startsWith("//")?r.substring(2):r}function O5(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const o=t+e+s;r[s]&&(i[o]=r[s])}),i}function A5(r){return`${r.protocol}:${r.topic}@${r.version}?`+ga.stringify(S5({symKey:r.symKey},O5(r.relay)))}function Is(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function C5(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Is(t.accounts))}),e}function T5(r,e){const t=[];return Object.values(r).forEach(i=>{Is(i.accounts).includes(e)&&t.push(...i.methods)}),t}function $5(r,e){const t=[];return Object.values(r).forEach(i=>{Is(i.accounts).includes(e)&&t.push(...i.events)}),t}function N5(r,e){const t=Yo(r,e);if(t)throw new Error(t.message);const i={};for(const[s,o]of Object.entries(r))i[s]={methods:o.methods,events:o.events,chains:o.accounts.map(u=>`${u.split(":")[0]}:${u.split(":")[1]}`)};return i}function ey(r){return r.includes(":")}function Go(r){return ey(r)?r.split(":")[0]:r}const R5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},F5={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pe(r,e){const{message:t,code:i}=F5[r];return{message:e?`${t} ${e}`:t,code:i}}function Ht(r,e){const{message:t,code:i}=R5[r];return{message:e?`${t} ${e}`:t,code:i}}function Sn(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function ws(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function _r(r){return typeof r>"u"}function or(r,e){return e&&_r(r)?!0:typeof r=="string"&&!!r.trim().length}function Th(r,e){return e&&_r(r)?!0:typeof r=="number"&&!isNaN(r)}function M5(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let o=!0;return ji(s,i)?(i.forEach(u=>{const{accounts:l,methods:f,events:g}=r.namespaces[u],y=Is(l),b=t[u];(!ji(Hg(u,b),y)||!ji(b.methods,f)||!ji(b.events,g))&&(o=!1)}),o):!1}function ec(r){return or(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function L5(r){if(or(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ec(t)}}return!1}function j5(r){if(or(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function U5(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function k5(r){return r==null?void 0:r.topic}function B5(r,e){let t=null;return or(r==null?void 0:r.publicKey,!1)||(t=pe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Kp(r){let e=!0;return Sn(r)?r.length&&(e=r.every(t=>or(t,!1))):e=!1,e}function q5(r,e,t){let i=null;return Sn(e)&&e.length?e.forEach(s=>{i||ec(s)||(i=Ht("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ec(r)||(i=Ht("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function z5(r,e,t){let i=null;return Object.entries(r).forEach(([s,o])=>{if(i)return;const u=q5(s,Hg(s,o),`${e} ${t}`);u&&(i=u)}),i}function H5(r,e){let t=null;return Sn(r)?r.forEach(i=>{t||L5(i)||(t=Ht("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=Ht("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function K5(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=H5(i==null?void 0:i.accounts,`${e} namespace`);s&&(t=s)}),t}function V5(r,e){let t=null;return Kp(r==null?void 0:r.methods)?Kp(r==null?void 0:r.events)||(t=Ht("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Ht("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function ty(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=V5(i,`${e}, namespace`);s&&(t=s)}),t}function W5(r,e,t){let i=null;if(r&&ws(r)){const s=ty(r,e);s&&(i=s);const o=z5(r,e,t);o&&(i=o)}else i=pe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function Yo(r,e){let t=null;if(r&&ws(r)){const i=ty(r,e);i&&(t=i);const s=K5(r,e);s&&(t=s)}else t=pe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function ry(r){return or(r.protocol,!0)}function G5(r,e){let t=!1;return e&&!r?t=!0:r&&Sn(r)&&r.length&&r.forEach(i=>{t=ry(i)}),t}function Y5(r){return typeof r=="number"}function $r(r){return typeof r<"u"&&typeof r!==null}function J5(r){return!(!r||typeof r!="object"||!r.code||!Th(r.code,!1)||!r.message||!or(r.message,!1))}function X5(r){return!(_r(r)||!or(r.method,!1))}function Z5(r){return!(_r(r)||_r(r.result)&&_r(r.error)||!Th(r.id,!1)||!or(r.jsonrpc,!1))}function Q5(r){return!(_r(r)||!or(r.name,!1))}function Vp(r,e){return!(!ec(e)||!C5(r).includes(e))}function ex(r,e,t){return or(t,!1)?T5(r,e).includes(t):!1}function tx(r,e,t){return or(t,!1)?$5(r,e).includes(t):!1}function Wp(r,e,t){let i=null;const s=rx(r),o=nx(e),u=Object.keys(s),l=Object.keys(o),f=Gp(Object.keys(r)),g=Gp(Object.keys(e)),y=f.filter(b=>!g.includes(b));return y.length&&(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${y.toString()}
      Received: ${Object.keys(e).toString()}`)),ji(u,l)||(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${u.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(b=>{if(!b.includes(":")||i)return;const x=Is(e[b].accounts);x.includes(b)||(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${x.toString()}`))}),u.forEach(b=>{i||(ji(s[b].methods,o[b].methods)?ji(s[b].events,o[b].events)||(i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${b}`)):i=pe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${b}`))}),i}function rx(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function Gp(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function nx(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const i=Is(r[t].accounts);i==null||i.forEach(s=>{e[s]={accounts:r[t].accounts.filter(o=>o.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function ix(r,e){return Th(r,!1)&&r<=e.max&&r>=e.min}var yc={},Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});function sx(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSON.parse(r)}catch{return r}}Oa.safeJsonParse=sx;function ax(r){return typeof r=="string"?r:JSON.stringify(r,(e,t)=>typeof t>"u"?null:t)}Oa.safeJsonStringify=ax;var ta={exports:{}},Yp;function ox(){return Yp||(Yp=1,function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ar<"u"&&ar.localStorage?ta.exports=ar.localStorage:typeof window<"u"&&window.localStorage?ta.exports=window.localStorage:ta.exports=new e}()),ta.exports}var fl={},ra={},Jp;function cx(){if(Jp)return ra;Jp=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.IKeyValueStorage=void 0;class r{}return ra.IKeyValueStorage=r,ra}var na={},Xp;function ux(){if(Xp)return na;Xp=1,Object.defineProperty(na,"__esModule",{value:!0}),na.parseEntry=void 0;const r=Oa;function e(t){var i;return[t[0],r.safeJsonParse((i=t[1])!==null&&i!==void 0?i:"")]}return na.parseEntry=e,na}var Zp;function lx(){return Zp||(Zp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(cx(),r),e.__exportStar(ux(),r)}(fl)),fl}Object.defineProperty(yc,"__esModule",{value:!0});yc.KeyValueStorage=void 0;const ms=nn,Qp=Oa,hx=ms.__importDefault(ox()),fx=lx();class ny{constructor(){this.localStorage=hx.default}getKeys(){return ms.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ms.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(fx.parseEntry)})}getItem(e){return ms.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return Qp.safeJsonParse(t)})}setItem(e,t){return ms.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Qp.safeJsonStringify(t))})}removeItem(e){return ms.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}yc.KeyValueStorage=ny;var dx=yc.default=ny,Ps={},ia={},dl={},sa={};let Hi=class{};const px=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Hi},Symbol.toStringTag,{value:"Module"})),gx=hg(px);var e0;function yx(){if(e0)return sa;e0=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.IHeartBeat=void 0;const r=gx;class e extends r.IEvents{constructor(i){super()}}return sa.IHeartBeat=e,sa}var t0;function iy(){return t0||(t0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),nn.__exportStar(yx(),r)}(dl)),dl}var pl={},Ni={},r0;function mx(){if(r0)return Ni;r0=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.HEARTBEAT_EVENTS=Ni.HEARTBEAT_INTERVAL=void 0;const r=Ee;return Ni.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,Ni.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Ni}var n0;function sy(){return n0||(n0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),nn.__exportStar(mx(),r)}(pl)),pl}var i0;function vx(){if(i0)return ia;i0=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.HeartBeat=void 0;const r=nn,e=zr,t=Ee,i=iy(),s=sy();class o extends i.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=s.HEARTBEAT_INTERVAL,this.interval=(l==null?void 0:l.interval)||s.HEARTBEAT_INTERVAL}static init(l){return r.__awaiter(this,void 0,void 0,function*(){const f=new o(l);return yield f.init(),f})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,f){this.events.on(l,f)}once(l,f){this.events.once(l,f)}off(l,f){this.events.off(l,f)}removeListener(l,f){this.events.removeListener(l,f)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(s.HEARTBEAT_EVENTS.pulse)}}return ia.HeartBeat=o,ia}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(vx(),r),e.__exportStar(iy(),r),e.__exportStar(sy(),r)})(Ps);var ot={},gl,s0;function bx(){if(s0)return gl;s0=1;function r(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}gl=e;function e(t,i,s){var o=s&&s.stringify||r,u=1;if(typeof t=="object"&&t!==null){var l=i.length+u;if(l===1)return t;var f=new Array(l);f[0]=o(t);for(var g=1;g<l;g++)f[g]=o(i[g]);return f.join(" ")}if(typeof t!="string")return t;var y=i.length;if(y===0)return t;for(var b="",x=1-u,D=-1,S=t&&t.length||0,N=0;N<S;){if(t.charCodeAt(N)===37&&N+1<S){switch(D=D>-1?D:0,t.charCodeAt(N+1)){case 100:case 102:if(x>=y||i[x]==null)break;D<N&&(b+=t.slice(D,N)),b+=Number(i[x]),D=N+2,N++;break;case 105:if(x>=y||i[x]==null)break;D<N&&(b+=t.slice(D,N)),b+=Math.floor(Number(i[x])),D=N+2,N++;break;case 79:case 111:case 106:if(x>=y||i[x]===void 0)break;D<N&&(b+=t.slice(D,N));var R=typeof i[x];if(R==="string"){b+="'"+i[x]+"'",D=N+2,N++;break}if(R==="function"){b+=i[x].name||"<anonymous>",D=N+2,N++;break}b+=o(i[x]),D=N+2,N++;break;case 115:if(x>=y)break;D<N&&(b+=t.slice(D,N)),b+=String(i[x]),D=N+2,N++;break;case 37:D<N&&(b+=t.slice(D,N)),b+="%",D=N+2,N++,x--;break}++x}++N}return D===-1?t:(D<S&&(b+=t.slice(D)),b)}return gl}var yl,a0;function wx(){if(a0)return yl;a0=1;const r=bx();yl=s;const e=A().console||{},t={mapHttpRequest:S,mapHttpResponse:S,wrapRequestSerializer:N,wrapResponseSerializer:N,wrapErrorSerializer:N,req:S,res:S,err:x};function i(_,h){return Array.isArray(_)?_.filter(function(H){return H!=="!stdSerializers.err"}):_===!0?Object.keys(h):!1}function s(_){_=_||{},_.browser=_.browser||{};const h=_.browser.transmit;if(h&&typeof h.send!="function")throw Error("pino: transmit option must have a send function");const w=_.browser.write||e;_.browser.write&&(_.browser.asObject=!0);const H=_.serializers||{},C=i(_.browser.serialize,H);let B=_.browser.serialize;Array.isArray(_.browser.serialize)&&_.browser.serialize.indexOf("!stdSerializers.err")>-1&&(B=!1);const Y=["error","fatal","warn","info","debug","trace"];typeof w=="function"&&(w.error=w.fatal=w.warn=w.info=w.debug=w.trace=w),_.enabled===!1&&(_.level="silent");const J=_.level||"info",m=Object.create(w);m.log||(m.log=R),Object.defineProperty(m,"levelVal",{get:z}),Object.defineProperty(m,"level",{get:j,set:V});const E={transmit:h,serialize:C,asObject:_.browser.asObject,levels:Y,timestamp:D(_)};m.levels=s.levels,m.level=J,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=R,m.serializers=H,m._serialize=C,m._stdErrSerialize=B,m.child=U,h&&(m._logEvent=b());function z(){return this.level==="silent"?1/0:this.levels.values[this.level]}function j(){return this._level}function V(ee){if(ee!=="silent"&&!this.levels.values[ee])throw Error("unknown level "+ee);this._level=ee,o(E,m,"error","log"),o(E,m,"fatal","error"),o(E,m,"warn","error"),o(E,m,"info","log"),o(E,m,"debug","log"),o(E,m,"trace","log")}function U(ee,re){if(!ee)throw new Error("missing bindings for child Pino");re=re||{},C&&ee.serializers&&(re.serializers=ee.serializers);const le=re.serializers;if(C&&le){var ae=Object.assign({},H,le),be=_.browser.serialize===!0?Object.keys(ae):C;delete ee.serializers,f([ee],be,ae,this._stdErrSerialize)}function he(_e){this._childLevel=(_e._childLevel|0)+1,this.error=g(_e,ee,"error"),this.fatal=g(_e,ee,"fatal"),this.warn=g(_e,ee,"warn"),this.info=g(_e,ee,"info"),this.debug=g(_e,ee,"debug"),this.trace=g(_e,ee,"trace"),ae&&(this.serializers=ae,this._serialize=be),h&&(this._logEvent=b([].concat(_e._logEvent.bindings,ee)))}return he.prototype=this,new he(this)}return m}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:K,epochTime:$,unixTime:M,isoTime:O});function o(_,h,w,H){const C=Object.getPrototypeOf(h);h[w]=h.levelVal>h.levels.values[w]?R:C[w]?C[w]:e[w]||e[H]||R,u(_,h,w)}function u(_,h,w){!_.transmit&&h[w]===R||(h[w]=function(H){return function(){const B=_.timestamp(),Y=new Array(arguments.length),J=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var m=0;m<Y.length;m++)Y[m]=arguments[m];if(_.serialize&&!_.asObject&&f(Y,this._serialize,this.serializers,this._stdErrSerialize),_.asObject?H.call(J,l(this,w,Y,B)):H.apply(J,Y),_.transmit){const E=_.transmit.level||h.level,z=s.levels.values[E],j=s.levels.values[w];if(j<z)return;y(this,{ts:B,methodLevel:w,methodValue:j,transmitLevel:E,transmitValue:s.levels.values[_.transmit.level||h.level],send:_.transmit.send,val:h.levelVal},Y)}}}(h[w]))}function l(_,h,w,H){_._serialize&&f(w,_._serialize,_.serializers,_._stdErrSerialize);const C=w.slice();let B=C[0];const Y={};H&&(Y.time=H),Y.level=s.levels.values[h];let J=(_._childLevel|0)+1;if(J<1&&(J=1),B!==null&&typeof B=="object"){for(;J--&&typeof C[0]=="object";)Object.assign(Y,C.shift());B=C.length?r(C.shift(),C):void 0}else typeof B=="string"&&(B=r(C.shift(),C));return B!==void 0&&(Y.msg=B),Y}function f(_,h,w,H){for(const C in _)if(H&&_[C]instanceof Error)_[C]=s.stdSerializers.err(_[C]);else if(typeof _[C]=="object"&&!Array.isArray(_[C]))for(const B in _[C])h&&h.indexOf(B)>-1&&B in w&&(_[C][B]=w[B](_[C][B]))}function g(_,h,w){return function(){const H=new Array(1+arguments.length);H[0]=h;for(var C=1;C<H.length;C++)H[C]=arguments[C-1];return _[w].apply(this,H)}}function y(_,h,w){const H=h.send,C=h.ts,B=h.methodLevel,Y=h.methodValue,J=h.val,m=_._logEvent.bindings;f(w,_._serialize||Object.keys(_.serializers),_.serializers,_._stdErrSerialize===void 0?!0:_._stdErrSerialize),_._logEvent.ts=C,_._logEvent.messages=w.filter(function(E){return m.indexOf(E)===-1}),_._logEvent.level.label=B,_._logEvent.level.value=Y,H(B,_._logEvent,J),_._logEvent=b(m)}function b(_){return{ts:0,messages:[],bindings:_||[],level:{label:"",value:0}}}function x(_){const h={type:_.constructor.name,msg:_.message,stack:_.stack};for(const w in _)h[w]===void 0&&(h[w]=_[w]);return h}function D(_){return typeof _.timestamp=="function"?_.timestamp:_.timestamp===!1?K:$}function S(){return{}}function N(_){return _}function R(){}function K(){return!1}function $(){return Date.now()}function M(){return Math.round(Date.now()/1e3)}function O(){return new Date(Date.now()).toISOString()}function A(){function _(h){return typeof h<"u"&&h}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return _(self)||_(window)||_(this)||{}}}return yl}var Ri={},o0;function ay(){return o0||(o0=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.PINO_CUSTOM_CONTEXT_KEY=Ri.PINO_LOGGER_DEFAULTS=void 0,Ri.PINO_LOGGER_DEFAULTS={level:"info"},Ri.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Ri}var wr={},c0;function _x(){if(c0)return wr;c0=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.generateChildLogger=wr.formatChildLoggerContext=wr.getLoggerContext=wr.setBrowserLoggerContext=wr.getBrowserLoggerContext=wr.getDefaultLoggerOptions=void 0;const r=ay();function e(l){return Object.assign(Object.assign({},l),{level:(l==null?void 0:l.level)||r.PINO_LOGGER_DEFAULTS.level})}wr.getDefaultLoggerOptions=e;function t(l,f=r.PINO_CUSTOM_CONTEXT_KEY){return l[f]||""}wr.getBrowserLoggerContext=t;function i(l,f,g=r.PINO_CUSTOM_CONTEXT_KEY){return l[g]=f,l}wr.setBrowserLoggerContext=i;function s(l,f=r.PINO_CUSTOM_CONTEXT_KEY){let g="";return typeof l.bindings>"u"?g=t(l,f):g=l.bindings().context||"",g}wr.getLoggerContext=s;function o(l,f,g=r.PINO_CUSTOM_CONTEXT_KEY){const y=s(l,g);return y.trim()?`${y}/${f}`:f}wr.formatChildLoggerContext=o;function u(l,f,g=r.PINO_CUSTOM_CONTEXT_KEY){const y=o(l,f,g),b=l.child({context:y});return i(b,y,g)}return wr.generateChildLogger=u,wr}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=nn,t=e.__importDefault(wx());Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(ay(),r),e.__exportStar(_x(),r)})(ot);class Ex extends Hi{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class xx extends Hi{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Sx{constructor(e,t){this.logger=e,this.core=t}}let Dx=class extends Hi{constructor(e,t){super(),this.relayer=e,this.logger=t}},Ix=class extends Hi{constructor(e){super()}},Px=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}};class Ox extends Hi{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Ax extends Hi{constructor(e,t){super(),this.core=e,this.logger=t}}let Cx=class{constructor(e,t){this.projectId=e,this.logger=t}},Tx=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class $x{constructor(e){this.client=e}}const Nx=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Rx=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function $h(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return Rx(r)}catch{return r}}function ya(r){return typeof r=="string"?r:Nx(r)||""}var Nh={},oy={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=qe,t=Hr;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},l.prototype.update=function(f,g){if(g===void 0&&(g=f.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var y=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=f[y++],g--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(y=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,f,y,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=f[y++],g--;return this},l.prototype.finish=function(f){if(!this._finished){var g=this._bytesHashed,y=this._bufferLength,b=g/536870912|0,x=g<<3,D=g%128<112?128:256;this._buffer[y]=128;for(var S=y+1;S<D-8;S++)this._buffer[S]=0;e.writeUint32BE(b,this._buffer,D-8),e.writeUint32BE(x,this._buffer,D-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,D),this._finished=!0}for(var S=0;S<this.digestLength/8;S++)e.writeUint32BE(this._stateHi[S],f,S*8),e.writeUint32BE(this._stateLo[S],f,S*8+4);return this},l.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(f){return this._stateHi.set(f.stateHi),this._stateLo.set(f.stateLo),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(f){t.wipe(f.stateHi),t.wipe(f.stateLo),f.buffer&&t.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},l}();r.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(l,f,g,y,b,x,D){for(var S=g[0],N=g[1],R=g[2],K=g[3],$=g[4],M=g[5],O=g[6],A=g[7],_=y[0],h=y[1],w=y[2],H=y[3],C=y[4],B=y[5],Y=y[6],J=y[7],m,E,z,j,V,U,ee,re;D>=128;){for(var le=0;le<16;le++){var ae=8*le+x;l[le]=e.readUint32BE(b,ae),f[le]=e.readUint32BE(b,ae+4)}for(var le=0;le<80;le++){var be=S,he=N,_e=R,Q=K,Z=$,q=M,p=O,L=A,ue=_,ge=h,Oe=w,Ge=H,Ze=C,ze=B,St=Y,Dt=J;if(m=A,E=J,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=($>>>14|C<<32-14)^($>>>18|C<<32-18)^(C>>>41-32|$<<32-(41-32)),E=(C>>>14|$<<32-14)^(C>>>18|$<<32-18)^($>>>41-32|C<<32-(41-32)),V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,m=$&M^~$&O,E=C&B^~C&Y,V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,m=s[le*2],E=s[le*2+1],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,m=l[le%16],E=f[le%16],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,z=ee&65535|re<<16,j=V&65535|U<<16,m=z,E=j,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=(S>>>28|_<<32-28)^(_>>>34-32|S<<32-(34-32))^(_>>>39-32|S<<32-(39-32)),E=(_>>>28|S<<32-28)^(S>>>34-32|_<<32-(34-32))^(S>>>39-32|_<<32-(39-32)),V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,m=S&N^S&R^N&R,E=_&h^_&w^h&w,V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,L=ee&65535|re<<16,Dt=V&65535|U<<16,m=Q,E=Ge,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=z,E=j,V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,Q=ee&65535|re<<16,Ge=V&65535|U<<16,N=be,R=he,K=_e,$=Q,M=Z,O=q,A=p,S=L,h=ue,w=ge,H=Oe,C=Ge,B=Ze,Y=ze,J=St,_=Dt,le%16===15)for(var ae=0;ae<16;ae++)m=l[ae],E=f[ae],V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=l[(ae+9)%16],E=f[(ae+9)%16],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,z=l[(ae+1)%16],j=f[(ae+1)%16],m=(z>>>1|j<<32-1)^(z>>>8|j<<32-8)^z>>>7,E=(j>>>1|z<<32-1)^(j>>>8|z<<32-8)^(j>>>7|z<<32-7),V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,z=l[(ae+14)%16],j=f[(ae+14)%16],m=(z>>>19|j<<32-19)^(j>>>61-32|z<<32-(61-32))^z>>>6,E=(j>>>19|z<<32-19)^(z>>>61-32|j<<32-(61-32))^(j>>>6|z<<32-6),V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,l[ae]=ee&65535|re<<16,f[ae]=V&65535|U<<16}m=S,E=_,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[0],E=y[0],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[0]=S=ee&65535|re<<16,y[0]=_=V&65535|U<<16,m=N,E=h,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[1],E=y[1],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[1]=N=ee&65535|re<<16,y[1]=h=V&65535|U<<16,m=R,E=w,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[2],E=y[2],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[2]=R=ee&65535|re<<16,y[2]=w=V&65535|U<<16,m=K,E=H,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[3],E=y[3],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[3]=K=ee&65535|re<<16,y[3]=H=V&65535|U<<16,m=$,E=C,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[4],E=y[4],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[4]=$=ee&65535|re<<16,y[4]=C=V&65535|U<<16,m=M,E=B,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[5],E=y[5],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[5]=M=ee&65535|re<<16,y[5]=B=V&65535|U<<16,m=O,E=Y,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[6],E=y[6],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[6]=O=ee&65535|re<<16,y[6]=Y=V&65535|U<<16,m=A,E=J,V=E&65535,U=E>>>16,ee=m&65535,re=m>>>16,m=g[7],E=y[7],V+=E&65535,U+=E>>>16,ee+=m&65535,re+=m>>>16,U+=V>>>16,ee+=U>>>16,re+=ee>>>16,g[7]=A=ee&65535|re<<16,y[7]=J=V&65535|U<<16,x+=128,D-=128}return x}function u(l){var f=new i;f.update(l);var g=f.digest();return f.clean(),g}r.hash=u})(oy);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=Ss,t=oy,i=Hr;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function s(Q){const Z=new Float64Array(16);if(Q)for(let q=0;q<Q.length;q++)Z[q]=Q[q];return Z}const o=new Uint8Array(32);o[0]=9;const u=s(),l=s([1]),f=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),y=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),b=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),x=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function D(Q,Z){for(let q=0;q<16;q++)Q[q]=Z[q]|0}function S(Q){let Z=1;for(let q=0;q<16;q++){let p=Q[q]+Z+65535;Z=Math.floor(p/65536),Q[q]=p-Z*65536}Q[0]+=Z-1+37*(Z-1)}function N(Q,Z,q){const p=~(q-1);for(let L=0;L<16;L++){const ue=p&(Q[L]^Z[L]);Q[L]^=ue,Z[L]^=ue}}function R(Q,Z){const q=s(),p=s();for(let L=0;L<16;L++)p[L]=Z[L];S(p),S(p),S(p);for(let L=0;L<2;L++){q[0]=p[0]-65517;for(let ge=1;ge<15;ge++)q[ge]=p[ge]-65535-(q[ge-1]>>16&1),q[ge-1]&=65535;q[15]=p[15]-32767-(q[14]>>16&1);const ue=q[15]>>16&1;q[14]&=65535,N(p,q,1-ue)}for(let L=0;L<16;L++)Q[2*L]=p[L]&255,Q[2*L+1]=p[L]>>8}function K(Q,Z){let q=0;for(let p=0;p<32;p++)q|=Q[p]^Z[p];return(1&q-1>>>8)-1}function $(Q,Z){const q=new Uint8Array(32),p=new Uint8Array(32);return R(q,Q),R(p,Z),K(q,p)}function M(Q){const Z=new Uint8Array(32);return R(Z,Q),Z[0]&1}function O(Q,Z){for(let q=0;q<16;q++)Q[q]=Z[2*q]+(Z[2*q+1]<<8);Q[15]&=32767}function A(Q,Z,q){for(let p=0;p<16;p++)Q[p]=Z[p]+q[p]}function _(Q,Z,q){for(let p=0;p<16;p++)Q[p]=Z[p]-q[p]}function h(Q,Z,q){let p,L,ue=0,ge=0,Oe=0,Ge=0,Ze=0,ze=0,St=0,Dt=0,Ke=0,Ae=0,Ue=0,ke=0,Ve=0,Ne=0,Be=0,Pe=0,Re=0,Ye=0,$e=0,Qe=0,tt=0,ct=0,ut=0,it=0,pr=0,Ir=0,pn=0,gr=0,Dn=0,Gn=0,mi=0,Tt=q[0],It=q[1],$t=q[2],Nt=q[3],At=q[4],Pt=q[5],Wt=q[6],Gt=q[7],Rt=q[8],Yt=q[9],Ft=q[10],kt=q[11],Mt=q[12],wt=q[13],Jt=q[14],Xt=q[15];p=Z[0],ue+=p*Tt,ge+=p*It,Oe+=p*$t,Ge+=p*Nt,Ze+=p*At,ze+=p*Pt,St+=p*Wt,Dt+=p*Gt,Ke+=p*Rt,Ae+=p*Yt,Ue+=p*Ft,ke+=p*kt,Ve+=p*Mt,Ne+=p*wt,Be+=p*Jt,Pe+=p*Xt,p=Z[1],ge+=p*Tt,Oe+=p*It,Ge+=p*$t,Ze+=p*Nt,ze+=p*At,St+=p*Pt,Dt+=p*Wt,Ke+=p*Gt,Ae+=p*Rt,Ue+=p*Yt,ke+=p*Ft,Ve+=p*kt,Ne+=p*Mt,Be+=p*wt,Pe+=p*Jt,Re+=p*Xt,p=Z[2],Oe+=p*Tt,Ge+=p*It,Ze+=p*$t,ze+=p*Nt,St+=p*At,Dt+=p*Pt,Ke+=p*Wt,Ae+=p*Gt,Ue+=p*Rt,ke+=p*Yt,Ve+=p*Ft,Ne+=p*kt,Be+=p*Mt,Pe+=p*wt,Re+=p*Jt,Ye+=p*Xt,p=Z[3],Ge+=p*Tt,Ze+=p*It,ze+=p*$t,St+=p*Nt,Dt+=p*At,Ke+=p*Pt,Ae+=p*Wt,Ue+=p*Gt,ke+=p*Rt,Ve+=p*Yt,Ne+=p*Ft,Be+=p*kt,Pe+=p*Mt,Re+=p*wt,Ye+=p*Jt,$e+=p*Xt,p=Z[4],Ze+=p*Tt,ze+=p*It,St+=p*$t,Dt+=p*Nt,Ke+=p*At,Ae+=p*Pt,Ue+=p*Wt,ke+=p*Gt,Ve+=p*Rt,Ne+=p*Yt,Be+=p*Ft,Pe+=p*kt,Re+=p*Mt,Ye+=p*wt,$e+=p*Jt,Qe+=p*Xt,p=Z[5],ze+=p*Tt,St+=p*It,Dt+=p*$t,Ke+=p*Nt,Ae+=p*At,Ue+=p*Pt,ke+=p*Wt,Ve+=p*Gt,Ne+=p*Rt,Be+=p*Yt,Pe+=p*Ft,Re+=p*kt,Ye+=p*Mt,$e+=p*wt,Qe+=p*Jt,tt+=p*Xt,p=Z[6],St+=p*Tt,Dt+=p*It,Ke+=p*$t,Ae+=p*Nt,Ue+=p*At,ke+=p*Pt,Ve+=p*Wt,Ne+=p*Gt,Be+=p*Rt,Pe+=p*Yt,Re+=p*Ft,Ye+=p*kt,$e+=p*Mt,Qe+=p*wt,tt+=p*Jt,ct+=p*Xt,p=Z[7],Dt+=p*Tt,Ke+=p*It,Ae+=p*$t,Ue+=p*Nt,ke+=p*At,Ve+=p*Pt,Ne+=p*Wt,Be+=p*Gt,Pe+=p*Rt,Re+=p*Yt,Ye+=p*Ft,$e+=p*kt,Qe+=p*Mt,tt+=p*wt,ct+=p*Jt,ut+=p*Xt,p=Z[8],Ke+=p*Tt,Ae+=p*It,Ue+=p*$t,ke+=p*Nt,Ve+=p*At,Ne+=p*Pt,Be+=p*Wt,Pe+=p*Gt,Re+=p*Rt,Ye+=p*Yt,$e+=p*Ft,Qe+=p*kt,tt+=p*Mt,ct+=p*wt,ut+=p*Jt,it+=p*Xt,p=Z[9],Ae+=p*Tt,Ue+=p*It,ke+=p*$t,Ve+=p*Nt,Ne+=p*At,Be+=p*Pt,Pe+=p*Wt,Re+=p*Gt,Ye+=p*Rt,$e+=p*Yt,Qe+=p*Ft,tt+=p*kt,ct+=p*Mt,ut+=p*wt,it+=p*Jt,pr+=p*Xt,p=Z[10],Ue+=p*Tt,ke+=p*It,Ve+=p*$t,Ne+=p*Nt,Be+=p*At,Pe+=p*Pt,Re+=p*Wt,Ye+=p*Gt,$e+=p*Rt,Qe+=p*Yt,tt+=p*Ft,ct+=p*kt,ut+=p*Mt,it+=p*wt,pr+=p*Jt,Ir+=p*Xt,p=Z[11],ke+=p*Tt,Ve+=p*It,Ne+=p*$t,Be+=p*Nt,Pe+=p*At,Re+=p*Pt,Ye+=p*Wt,$e+=p*Gt,Qe+=p*Rt,tt+=p*Yt,ct+=p*Ft,ut+=p*kt,it+=p*Mt,pr+=p*wt,Ir+=p*Jt,pn+=p*Xt,p=Z[12],Ve+=p*Tt,Ne+=p*It,Be+=p*$t,Pe+=p*Nt,Re+=p*At,Ye+=p*Pt,$e+=p*Wt,Qe+=p*Gt,tt+=p*Rt,ct+=p*Yt,ut+=p*Ft,it+=p*kt,pr+=p*Mt,Ir+=p*wt,pn+=p*Jt,gr+=p*Xt,p=Z[13],Ne+=p*Tt,Be+=p*It,Pe+=p*$t,Re+=p*Nt,Ye+=p*At,$e+=p*Pt,Qe+=p*Wt,tt+=p*Gt,ct+=p*Rt,ut+=p*Yt,it+=p*Ft,pr+=p*kt,Ir+=p*Mt,pn+=p*wt,gr+=p*Jt,Dn+=p*Xt,p=Z[14],Be+=p*Tt,Pe+=p*It,Re+=p*$t,Ye+=p*Nt,$e+=p*At,Qe+=p*Pt,tt+=p*Wt,ct+=p*Gt,ut+=p*Rt,it+=p*Yt,pr+=p*Ft,Ir+=p*kt,pn+=p*Mt,gr+=p*wt,Dn+=p*Jt,Gn+=p*Xt,p=Z[15],Pe+=p*Tt,Re+=p*It,Ye+=p*$t,$e+=p*Nt,Qe+=p*At,tt+=p*Pt,ct+=p*Wt,ut+=p*Gt,it+=p*Rt,pr+=p*Yt,Ir+=p*Ft,pn+=p*kt,gr+=p*Mt,Dn+=p*wt,Gn+=p*Jt,mi+=p*Xt,ue+=38*Re,ge+=38*Ye,Oe+=38*$e,Ge+=38*Qe,Ze+=38*tt,ze+=38*ct,St+=38*ut,Dt+=38*it,Ke+=38*pr,Ae+=38*Ir,Ue+=38*pn,ke+=38*gr,Ve+=38*Dn,Ne+=38*Gn,Be+=38*mi,L=1,p=ue+L+65535,L=Math.floor(p/65536),ue=p-L*65536,p=ge+L+65535,L=Math.floor(p/65536),ge=p-L*65536,p=Oe+L+65535,L=Math.floor(p/65536),Oe=p-L*65536,p=Ge+L+65535,L=Math.floor(p/65536),Ge=p-L*65536,p=Ze+L+65535,L=Math.floor(p/65536),Ze=p-L*65536,p=ze+L+65535,L=Math.floor(p/65536),ze=p-L*65536,p=St+L+65535,L=Math.floor(p/65536),St=p-L*65536,p=Dt+L+65535,L=Math.floor(p/65536),Dt=p-L*65536,p=Ke+L+65535,L=Math.floor(p/65536),Ke=p-L*65536,p=Ae+L+65535,L=Math.floor(p/65536),Ae=p-L*65536,p=Ue+L+65535,L=Math.floor(p/65536),Ue=p-L*65536,p=ke+L+65535,L=Math.floor(p/65536),ke=p-L*65536,p=Ve+L+65535,L=Math.floor(p/65536),Ve=p-L*65536,p=Ne+L+65535,L=Math.floor(p/65536),Ne=p-L*65536,p=Be+L+65535,L=Math.floor(p/65536),Be=p-L*65536,p=Pe+L+65535,L=Math.floor(p/65536),Pe=p-L*65536,ue+=L-1+37*(L-1),L=1,p=ue+L+65535,L=Math.floor(p/65536),ue=p-L*65536,p=ge+L+65535,L=Math.floor(p/65536),ge=p-L*65536,p=Oe+L+65535,L=Math.floor(p/65536),Oe=p-L*65536,p=Ge+L+65535,L=Math.floor(p/65536),Ge=p-L*65536,p=Ze+L+65535,L=Math.floor(p/65536),Ze=p-L*65536,p=ze+L+65535,L=Math.floor(p/65536),ze=p-L*65536,p=St+L+65535,L=Math.floor(p/65536),St=p-L*65536,p=Dt+L+65535,L=Math.floor(p/65536),Dt=p-L*65536,p=Ke+L+65535,L=Math.floor(p/65536),Ke=p-L*65536,p=Ae+L+65535,L=Math.floor(p/65536),Ae=p-L*65536,p=Ue+L+65535,L=Math.floor(p/65536),Ue=p-L*65536,p=ke+L+65535,L=Math.floor(p/65536),ke=p-L*65536,p=Ve+L+65535,L=Math.floor(p/65536),Ve=p-L*65536,p=Ne+L+65535,L=Math.floor(p/65536),Ne=p-L*65536,p=Be+L+65535,L=Math.floor(p/65536),Be=p-L*65536,p=Pe+L+65535,L=Math.floor(p/65536),Pe=p-L*65536,ue+=L-1+37*(L-1),Q[0]=ue,Q[1]=ge,Q[2]=Oe,Q[3]=Ge,Q[4]=Ze,Q[5]=ze,Q[6]=St,Q[7]=Dt,Q[8]=Ke,Q[9]=Ae,Q[10]=Ue,Q[11]=ke,Q[12]=Ve,Q[13]=Ne,Q[14]=Be,Q[15]=Pe}function w(Q,Z){h(Q,Z,Z)}function H(Q,Z){const q=s();let p;for(p=0;p<16;p++)q[p]=Z[p];for(p=253;p>=0;p--)w(q,q),p!==2&&p!==4&&h(q,q,Z);for(p=0;p<16;p++)Q[p]=q[p]}function C(Q,Z){const q=s();let p;for(p=0;p<16;p++)q[p]=Z[p];for(p=250;p>=0;p--)w(q,q),p!==1&&h(q,q,Z);for(p=0;p<16;p++)Q[p]=q[p]}function B(Q,Z){const q=s(),p=s(),L=s(),ue=s(),ge=s(),Oe=s(),Ge=s(),Ze=s(),ze=s();_(q,Q[1],Q[0]),_(ze,Z[1],Z[0]),h(q,q,ze),A(p,Q[0],Q[1]),A(ze,Z[0],Z[1]),h(p,p,ze),h(L,Q[3],Z[3]),h(L,L,g),h(ue,Q[2],Z[2]),A(ue,ue,ue),_(ge,p,q),_(Oe,ue,L),A(Ge,ue,L),A(Ze,p,q),h(Q[0],ge,Oe),h(Q[1],Ze,Ge),h(Q[2],Ge,Oe),h(Q[3],ge,Ze)}function Y(Q,Z,q){for(let p=0;p<4;p++)N(Q[p],Z[p],q)}function J(Q,Z){const q=s(),p=s(),L=s();H(L,Z[2]),h(q,Z[0],L),h(p,Z[1],L),R(Q,p),Q[31]^=M(q)<<7}function m(Q,Z,q){D(Q[0],u),D(Q[1],l),D(Q[2],l),D(Q[3],u);for(let p=255;p>=0;--p){const L=q[p/8|0]>>(p&7)&1;Y(Q,Z,L),B(Z,Q),B(Q,Q),Y(Q,Z,L)}}function E(Q,Z){const q=[s(),s(),s(),s()];D(q[0],y),D(q[1],b),D(q[2],l),h(q[3],y,b),m(Q,q,Z)}function z(Q){if(Q.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const Z=(0,t.hash)(Q);Z[0]&=248,Z[31]&=127,Z[31]|=64;const q=new Uint8Array(32),p=[s(),s(),s(),s()];E(p,Z),J(q,p);const L=new Uint8Array(64);return L.set(Q),L.set(q,32),{publicKey:q,secretKey:L}}r.generateKeyPairFromSeed=z;function j(Q){const Z=(0,e.randomBytes)(32,Q),q=z(Z);return(0,i.wipe)(Z),q}r.generateKeyPair=j;function V(Q){if(Q.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Q.subarray(32))}r.extractPublicKeyFromSecretKey=V;const U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ee(Q,Z){let q,p,L,ue;for(p=63;p>=32;--p){for(q=0,L=p-32,ue=p-12;L<ue;++L)Z[L]+=q-16*Z[p]*U[L-(p-32)],q=Math.floor((Z[L]+128)/256),Z[L]-=q*256;Z[L]+=q,Z[p]=0}for(q=0,L=0;L<32;L++)Z[L]+=q-(Z[31]>>4)*U[L],q=Z[L]>>8,Z[L]&=255;for(L=0;L<32;L++)Z[L]-=q*U[L];for(p=0;p<32;p++)Z[p+1]+=Z[p]>>8,Q[p]=Z[p]&255}function re(Q){const Z=new Float64Array(64);for(let q=0;q<64;q++)Z[q]=Q[q];for(let q=0;q<64;q++)Q[q]=0;ee(Q,Z)}function le(Q,Z){const q=new Float64Array(64),p=[s(),s(),s(),s()],L=(0,t.hash)(Q.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const ue=new Uint8Array(64);ue.set(L.subarray(32),32);const ge=new t.SHA512;ge.update(ue.subarray(32)),ge.update(Z);const Oe=ge.digest();ge.clean(),re(Oe),E(p,Oe),J(ue,p),ge.reset(),ge.update(ue.subarray(0,32)),ge.update(Q.subarray(32)),ge.update(Z);const Ge=ge.digest();re(Ge);for(let Ze=0;Ze<32;Ze++)q[Ze]=Oe[Ze];for(let Ze=0;Ze<32;Ze++)for(let ze=0;ze<32;ze++)q[Ze+ze]+=Ge[Ze]*L[ze];return ee(ue.subarray(32),q),ue}r.sign=le;function ae(Q,Z){const q=s(),p=s(),L=s(),ue=s(),ge=s(),Oe=s(),Ge=s();return D(Q[2],l),O(Q[1],Z),w(L,Q[1]),h(ue,L,f),_(L,L,Q[2]),A(ue,Q[2],ue),w(ge,ue),w(Oe,ge),h(Ge,Oe,ge),h(q,Ge,L),h(q,q,ue),C(q,q),h(q,q,L),h(q,q,ue),h(q,q,ue),h(Q[0],q,ue),w(p,Q[0]),h(p,p,ue),$(p,L)&&h(Q[0],Q[0],x),w(p,Q[0]),h(p,p,ue),$(p,L)?-1:(M(Q[0])===Z[31]>>7&&_(Q[0],u,Q[0]),h(Q[3],Q[0],Q[1]),0)}function be(Q,Z,q){const p=new Uint8Array(32),L=[s(),s(),s(),s()],ue=[s(),s(),s(),s()];if(q.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(ae(ue,Q))return!1;const ge=new t.SHA512;ge.update(q.subarray(0,32)),ge.update(Q),ge.update(Z);const Oe=ge.digest();return re(Oe),m(L,ue,Oe),E(ue,q.subarray(32)),B(L,ue),J(p,L),!K(q,p)}r.verify=be;function he(Q){let Z=[s(),s(),s(),s()];if(ae(Z,Q))throw new Error("Ed25519: invalid public key");let q=s(),p=s(),L=Z[1];A(q,l,L),_(p,l,L),H(p,p),h(q,q,p);let ue=new Uint8Array(32);return R(ue,q),ue}r.convertPublicKeyToX25519=he;function _e(Q){const Z=(0,t.hash)(Q.subarray(0,32));Z[0]&=248,Z[31]&=127,Z[31]|=64;const q=new Uint8Array(Z.subarray(0,32));return(0,i.wipe)(Z),q}r.convertSecretKeyToX25519=_e})(Nh);const Fx="EdDSA",Mx="JWT",cy=".",uy="base64url",Lx="utf8",jx="utf8",Ux=":",kx="did",Bx="key",u0="base58btc",qx="z",zx="K36",Hx=32;function tc(r){return Dr(Nr(ya(r),Lx),uy)}function ly(r){const e=Nr(zx,u0),t=qx+Dr(jl([e,r]),u0);return[kx,Bx,t].join(Ux)}function Kx(r){return Dr(r,uy)}function Vx(r){return Nr([tc(r.header),tc(r.payload)].join(cy),jx)}function Wx(r){return[tc(r.header),tc(r.payload),Kx(r.signature)].join(cy)}function l0(r=Ss.randomBytes(Hx)){return Nh.generateKeyPairFromSeed(r)}async function Gx(r,e,t,i,s=Ee.fromMiliseconds(Date.now())){const o={alg:Fx,typ:Mx},u=ly(i.publicKey),l=s+t,f={iss:u,sub:r,aud:e,iat:s,exp:l},g=Vx({header:o,payload:f}),y=Nh.sign(i.secretKey,g);return Wx({header:o,payload:f,signature:y})}const Yx="PARSE_ERROR",Jx="INVALID_REQUEST",Xx="METHOD_NOT_FOUND",Zx="INVALID_PARAMS",hy="INTERNAL_ERROR",Rh="SERVER_ERROR",Qx=[-32700,-32600,-32601,-32602,-32603],da={[Yx]:{code:-32700,message:"Parse error"},[Jx]:{code:-32600,message:"Invalid Request"},[Xx]:{code:-32601,message:"Method not found"},[Zx]:{code:-32602,message:"Invalid params"},[hy]:{code:-32603,message:"Internal error"},[Rh]:{code:-32e3,message:"Server error"}},fy=Rh;function eS(r){return Qx.includes(r)}function h0(r){return Object.keys(da).includes(r)?da[r]:da[fy]}function tS(r){const e=Object.values(da).find(t=>t.code===r);return e||da[fy]}function dy(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var py={},Ln={},f0;function rS(){if(f0)return Ln;f0=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.isBrowserCryptoAvailable=Ln.getSubtleCrypto=Ln.getBrowerCrypto=void 0;function r(){return(ar==null?void 0:ar.crypto)||(ar==null?void 0:ar.msCrypto)||{}}Ln.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}Ln.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return Ln.isBrowserCryptoAvailable=t,Ln}var jn={},d0;function nS(){if(d0)return jn;d0=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.isBrowser=jn.isNode=jn.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}jn.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}jn.isNode=e;function t(){return!r()&&!e()}return jn.isBrowser=t,jn}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=nn;e.__exportStar(rS(),r),e.__exportStar(nS(),r)})(py);function gy(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function Fh(r=6){return BigInt(gy(r))}function mc(r,e,t){return{id:t||gy(),jsonrpc:"2.0",method:r,params:e}}function Mh(r,e){return{id:r,jsonrpc:"2.0",result:e}}function vc(r,e,t){return{id:r,jsonrpc:"2.0",error:iS(e,t)}}function iS(r,e){return typeof r>"u"?h0(hy):(typeof r=="string"&&(r=Object.assign(Object.assign({},h0(Rh)),{message:r})),typeof e<"u"&&(r.data=e),eS(r.code)&&(r=tS(r.code)),r)}class sS{}class aS extends sS{constructor(){super()}}class oS extends aS{constructor(e){super()}}const cS="^https?:",uS="^wss?:";function lS(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function yy(r,e){const t=lS(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function p0(r){return yy(r,cS)}function g0(r){return yy(r,uS)}function hS(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function my(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function Lh(r){return my(r)&&"method"in r}function bc(r){return my(r)&&(Un(r)||fn(r))}function Un(r){return"result"in r}function fn(r){return"error"in r}class fi extends oS{constructor(e){super(e),this.events=new zr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(mc(e.method,e.params||[],e.id||Fh().toString()),t)}async requestStrict(e,t){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(o){s(o)}this.events.on(`${e.id}`,o=>{fn(o)?s(o.error):i(o.result)});try{await this.connection.send(e,t)}catch(o){s(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),bc(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const fS=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),dS=()=>typeof window<"u",y0=r=>r.split("?")[0],m0=10,pS=fS();class gS{constructor(e){if(this.url=e,this.events=new zr.EventEmitter,this.registering=!1,!g0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ya(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!g0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const s=py.isReactNative()?void 0:{rejectUnauthorized:!hS(e)},o=new pS(e,[],s);dS()?o.onerror=u=>{const l=u;i(this.emitError(l.error))}:o.on("error",u=>{i(this.emitError(u))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?$h(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),o=vc(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return dy(e,y0(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>m0&&this.events.setMaxListeners(m0)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${y0(this.url)}`));return this.events.emit("register_error",t),t}}var rc={exports:{}};rc.exports;(function(r,e){var t=200,i="__lodash_hash_undefined__",s=1,o=2,u=9007199254740991,l="[object Arguments]",f="[object Array]",g="[object AsyncFunction]",y="[object Boolean]",b="[object Date]",x="[object Error]",D="[object Function]",S="[object GeneratorFunction]",N="[object Map]",R="[object Number]",K="[object Null]",$="[object Object]",M="[object Promise]",O="[object Proxy]",A="[object RegExp]",_="[object Set]",h="[object String]",w="[object Symbol]",H="[object Undefined]",C="[object WeakMap]",B="[object ArrayBuffer]",Y="[object DataView]",J="[object Float32Array]",m="[object Float64Array]",E="[object Int8Array]",z="[object Int16Array]",j="[object Int32Array]",V="[object Uint8Array]",U="[object Uint8ClampedArray]",ee="[object Uint16Array]",re="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,he={};he[J]=he[m]=he[E]=he[z]=he[j]=he[V]=he[U]=he[ee]=he[re]=!0,he[l]=he[f]=he[B]=he[y]=he[Y]=he[b]=he[x]=he[D]=he[N]=he[R]=he[$]=he[A]=he[_]=he[h]=he[C]=!1;var _e=typeof ar=="object"&&ar&&ar.Object===Object&&ar,Q=typeof self=="object"&&self&&self.Object===Object&&self,Z=_e||Q||Function("return this")(),q=e&&!e.nodeType&&e,p=q&&!0&&r&&!r.nodeType&&r,L=p&&p.exports===q,ue=L&&_e.process,ge=function(){try{return ue&&ue.binding&&ue.binding("util")}catch{}}(),Oe=ge&&ge.isTypedArray;function Ge(T,W){for(var oe=-1,me=T==null?0:T.length,mt=0,Me=[];++oe<me;){var Et=T[oe];W(Et,oe,T)&&(Me[mt++]=Et)}return Me}function Ze(T,W){for(var oe=-1,me=W.length,mt=T.length;++oe<me;)T[mt+oe]=W[oe];return T}function ze(T,W){for(var oe=-1,me=T==null?0:T.length;++oe<me;)if(W(T[oe],oe,T))return!0;return!1}function St(T,W){for(var oe=-1,me=Array(T);++oe<T;)me[oe]=W(oe);return me}function Dt(T){return function(W){return T(W)}}function Ke(T,W){return T.has(W)}function Ae(T,W){return T==null?void 0:T[W]}function Ue(T){var W=-1,oe=Array(T.size);return T.forEach(function(me,mt){oe[++W]=[mt,me]}),oe}function ke(T,W){return function(oe){return T(W(oe))}}function Ve(T){var W=-1,oe=Array(T.size);return T.forEach(function(me){oe[++W]=me}),oe}var Ne=Array.prototype,Be=Function.prototype,Pe=Object.prototype,Re=Z["__core-js_shared__"],Ye=Be.toString,$e=Pe.hasOwnProperty,Qe=function(){var T=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),tt=Pe.toString,ct=RegExp("^"+Ye.call($e).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ut=L?Z.Buffer:void 0,it=Z.Symbol,pr=Z.Uint8Array,Ir=Pe.propertyIsEnumerable,pn=Ne.splice,gr=it?it.toStringTag:void 0,Dn=Object.getOwnPropertySymbols,Gn=ut?ut.isBuffer:void 0,mi=ke(Object.keys,Object),Tt=Mr(Z,"DataView"),It=Mr(Z,"Map"),$t=Mr(Z,"Promise"),Nt=Mr(Z,"Set"),At=Mr(Z,"WeakMap"),Pt=Mr(Object,"create"),Wt=Pn(Tt),Gt=Pn(It),Rt=Pn($t),Yt=Pn(Nt),Ft=Pn(At),kt=it?it.prototype:void 0,Mt=kt?kt.valueOf:void 0;function wt(T){var W=-1,oe=T==null?0:T.length;for(this.clear();++W<oe;){var me=T[W];this.set(me[0],me[1])}}function Jt(){this.__data__=Pt?Pt(null):{},this.size=0}function Xt(T){var W=this.has(T)&&delete this.__data__[T];return this.size-=W?1:0,W}function Mc(T){var W=this.__data__;if(Pt){var oe=W[T];return oe===i?void 0:oe}return $e.call(W,T)?W[T]:void 0}function Lc(T){var W=this.__data__;return Pt?W[T]!==void 0:$e.call(W,T)}function jc(T,W){var oe=this.__data__;return this.size+=this.has(T)?0:1,oe[T]=Pt&&W===void 0?i:W,this}wt.prototype.clear=Jt,wt.prototype.delete=Xt,wt.prototype.get=Mc,wt.prototype.has=Lc,wt.prototype.set=jc;function Kr(T){var W=-1,oe=T==null?0:T.length;for(this.clear();++W<oe;){var me=T[W];this.set(me[0],me[1])}}function Uc(){this.__data__=[],this.size=0}function kc(T){var W=this.__data__,oe=vi(W,T);if(oe<0)return!1;var me=W.length-1;return oe==me?W.pop():pn.call(W,oe,1),--this.size,!0}function Bc(T){var W=this.__data__,oe=vi(W,T);return oe<0?void 0:W[oe][1]}function qc(T){return vi(this.__data__,T)>-1}function zc(T,W){var oe=this.__data__,me=vi(oe,T);return me<0?(++this.size,oe.push([T,W])):oe[me][1]=W,this}Kr.prototype.clear=Uc,Kr.prototype.delete=kc,Kr.prototype.get=Bc,Kr.prototype.has=qc,Kr.prototype.set=zc;function In(T){var W=-1,oe=T==null?0:T.length;for(this.clear();++W<oe;){var me=T[W];this.set(me[0],me[1])}}function Wi(){this.size=0,this.__data__={hash:new wt,map:new(It||Kr),string:new wt}}function Hc(T){var W=Yn(this,T).delete(T);return this.size-=W?1:0,W}function Gi(T){return Yn(this,T).get(T)}function Kc(T){return Yn(this,T).has(T)}function Vc(T,W){var oe=Yn(this,T),me=oe.size;return oe.set(T,W),this.size+=oe.size==me?0:1,this}In.prototype.clear=Wi,In.prototype.delete=Hc,In.prototype.get=Gi,In.prototype.has=Kc,In.prototype.set=Vc;function Yi(T){var W=-1,oe=T==null?0:T.length;for(this.__data__=new In;++W<oe;)this.add(T[W])}function Fa(T){return this.__data__.set(T,i),this}function Ma(T){return this.__data__.has(T)}Yi.prototype.add=Yi.prototype.push=Fa,Yi.prototype.has=Ma;function sn(T){var W=this.__data__=new Kr(T);this.size=W.size}function Wc(){this.__data__=new Kr,this.size=0}function Gc(T){var W=this.__data__,oe=W.delete(T);return this.size=W.size,oe}function Yc(T){return this.__data__.get(T)}function Jc(T){return this.__data__.has(T)}function La(T,W){var oe=this.__data__;if(oe instanceof Kr){var me=oe.__data__;if(!It||me.length<t-1)return me.push([T,W]),this.size=++oe.size,this;oe=this.__data__=new In(me)}return oe.set(T,W),this.size=oe.size,this}sn.prototype.clear=Wc,sn.prototype.delete=Gc,sn.prototype.get=Yc,sn.prototype.has=Jc,sn.prototype.set=La;function ja(T,W){var oe=Zi(T),me=!oe&&Ja(T),mt=!oe&&!me&&Ms(T),Me=!oe&&!me&&!mt&&Qa(T),Et=oe||me||mt||Me,Zt=Et?St(T.length,String):[],st=Zt.length;for(var vt in T)(W||$e.call(T,vt))&&!(Et&&(vt=="length"||mt&&(vt=="offset"||vt=="parent")||Me&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Ka(vt,st)))&&Zt.push(vt);return Zt}function vi(T,W){for(var oe=T.length;oe--;)if(Ya(T[oe][0],W))return oe;return-1}function Rs(T,W,oe){var me=W(T);return Zi(T)?me:Ze(me,oe(T))}function bi(T){return T==null?T===void 0?H:K:gr&&gr in Object(T)?za(T):Qc(T)}function Fs(T){return _i(T)&&bi(T)==l}function wi(T,W,oe,me,mt){return T===W?!0:T==null||W==null||!_i(T)&&!_i(W)?T!==T&&W!==W:Ua(T,W,oe,me,wi,mt)}function Ua(T,W,oe,me,mt,Me){var Et=Zi(T),Zt=Zi(W),st=Et?f:gn(T),vt=Zt?f:gn(W);st=st==l?$:st,vt=vt==l?$:vt;var Bt=st==$,Pr=vt==$,Qt=st==vt;if(Qt&&Ms(T)){if(!Ms(W))return!1;Et=!0,Bt=!1}if(Qt&&!Bt)return Me||(Me=new sn),Et||Qa(T)?Ji(T,W,oe,me,mt,Me):Zc(T,W,st,oe,me,mt,Me);if(!(oe&s)){var xt=Bt&&$e.call(T,"__wrapped__"),yr=Pr&&$e.call(W,"__wrapped__");if(xt||yr){var an=xt?T.value():T,Vr=yr?W.value():W;return Me||(Me=new sn),mt(an,Vr,oe,me,Me)}}return Qt?(Me||(Me=new sn),qa(T,W,oe,me,mt,Me)):!1}function Xc(T){if(!Za(T)||Wa(T))return!1;var W=Qi(T)?ct:ae;return W.test(Pn(T))}function ka(T){return _i(T)&&Xa(T.length)&&!!he[bi(T)]}function Ba(T){if(!Ga(T))return mi(T);var W=[];for(var oe in Object(T))$e.call(T,oe)&&oe!="constructor"&&W.push(oe);return W}function Ji(T,W,oe,me,mt,Me){var Et=oe&s,Zt=T.length,st=W.length;if(Zt!=st&&!(Et&&st>Zt))return!1;var vt=Me.get(T);if(vt&&Me.get(W))return vt==W;var Bt=-1,Pr=!0,Qt=oe&o?new Yi:void 0;for(Me.set(T,W),Me.set(W,T);++Bt<Zt;){var xt=T[Bt],yr=W[Bt];if(me)var an=Et?me(yr,xt,Bt,W,T,Me):me(xt,yr,Bt,T,W,Me);if(an!==void 0){if(an)continue;Pr=!1;break}if(Qt){if(!ze(W,function(Vr,yn){if(!Ke(Qt,yn)&&(xt===Vr||mt(xt,Vr,oe,me,Me)))return Qt.push(yn)})){Pr=!1;break}}else if(!(xt===yr||mt(xt,yr,oe,me,Me))){Pr=!1;break}}return Me.delete(T),Me.delete(W),Pr}function Zc(T,W,oe,me,mt,Me,Et){switch(oe){case Y:if(T.byteLength!=W.byteLength||T.byteOffset!=W.byteOffset)return!1;T=T.buffer,W=W.buffer;case B:return!(T.byteLength!=W.byteLength||!Me(new pr(T),new pr(W)));case y:case b:case R:return Ya(+T,+W);case x:return T.name==W.name&&T.message==W.message;case A:case h:return T==W+"";case N:var Zt=Ue;case _:var st=me&s;if(Zt||(Zt=Ve),T.size!=W.size&&!st)return!1;var vt=Et.get(T);if(vt)return vt==W;me|=o,Et.set(T,W);var Bt=Ji(Zt(T),Zt(W),me,mt,Me,Et);return Et.delete(T),Bt;case w:if(Mt)return Mt.call(T)==Mt.call(W)}return!1}function qa(T,W,oe,me,mt,Me){var Et=oe&s,Zt=Xi(T),st=Zt.length,vt=Xi(W),Bt=vt.length;if(st!=Bt&&!Et)return!1;for(var Pr=st;Pr--;){var Qt=Zt[Pr];if(!(Et?Qt in W:$e.call(W,Qt)))return!1}var xt=Me.get(T);if(xt&&Me.get(W))return xt==W;var yr=!0;Me.set(T,W),Me.set(W,T);for(var an=Et;++Pr<st;){Qt=Zt[Pr];var Vr=T[Qt],yn=W[Qt];if(me)var Ls=Et?me(yn,Vr,Qt,W,T,Me):me(Vr,yn,Qt,T,W,Me);if(!(Ls===void 0?Vr===yn||mt(Vr,yn,oe,me,Me):Ls)){yr=!1;break}an||(an=Qt=="constructor")}if(yr&&!an){var Ei=T.constructor,ir=W.constructor;Ei!=ir&&"constructor"in T&&"constructor"in W&&!(typeof Ei=="function"&&Ei instanceof Ei&&typeof ir=="function"&&ir instanceof ir)&&(yr=!1)}return Me.delete(T),Me.delete(W),yr}function Xi(T){return Rs(T,ru,Ha)}function Yn(T,W){var oe=T.__data__;return Va(W)?oe[typeof W=="string"?"string":"hash"]:oe.map}function Mr(T,W){var oe=Ae(T,W);return Xc(oe)?oe:void 0}function za(T){var W=$e.call(T,gr),oe=T[gr];try{T[gr]=void 0;var me=!0}catch{}var mt=tt.call(T);return me&&(W?T[gr]=oe:delete T[gr]),mt}var Ha=Dn?function(T){return T==null?[]:(T=Object(T),Ge(Dn(T),function(W){return Ir.call(T,W)}))}:yt,gn=bi;(Tt&&gn(new Tt(new ArrayBuffer(1)))!=Y||It&&gn(new It)!=N||$t&&gn($t.resolve())!=M||Nt&&gn(new Nt)!=_||At&&gn(new At)!=C)&&(gn=function(T){var W=bi(T),oe=W==$?T.constructor:void 0,me=oe?Pn(oe):"";if(me)switch(me){case Wt:return Y;case Gt:return N;case Rt:return M;case Yt:return _;case Ft:return C}return W});function Ka(T,W){return W=W??u,!!W&&(typeof T=="number"||be.test(T))&&T>-1&&T%1==0&&T<W}function Va(T){var W=typeof T;return W=="string"||W=="number"||W=="symbol"||W=="boolean"?T!=="__proto__":T===null}function Wa(T){return!!Qe&&Qe in T}function Ga(T){var W=T&&T.constructor,oe=typeof W=="function"&&W.prototype||Pe;return T===oe}function Qc(T){return tt.call(T)}function Pn(T){if(T!=null){try{return Ye.call(T)}catch{}try{return T+""}catch{}}return""}function Ya(T,W){return T===W||T!==T&&W!==W}var Ja=Fs(function(){return arguments}())?Fs:function(T){return _i(T)&&$e.call(T,"callee")&&!Ir.call(T,"callee")},Zi=Array.isArray;function eu(T){return T!=null&&Xa(T.length)&&!Qi(T)}var Ms=Gn||pt;function tu(T,W){return wi(T,W)}function Qi(T){if(!Za(T))return!1;var W=bi(T);return W==D||W==S||W==g||W==O}function Xa(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=u}function Za(T){var W=typeof T;return T!=null&&(W=="object"||W=="function")}function _i(T){return T!=null&&typeof T=="object"}var Qa=Oe?Dt(Oe):ka;function ru(T){return eu(T)?ja(T):Ba(T)}function yt(){return[]}function pt(){return!1}r.exports=tu})(rc,rc.exports);var yS=rc.exports;const mS=Sa(yS);function vS(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),u=o.charCodeAt(0);if(t[u]!==255)throw new TypeError(o+" is ambiguous");t[u]=s}var l=r.length,f=r.charAt(0),g=Math.log(l)/Math.log(256),y=Math.log(256)/Math.log(l);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var N=0,R=0,K=0,$=S.length;K!==$&&S[K]===0;)K++,N++;for(var M=($-K)*y+1>>>0,O=new Uint8Array(M);K!==$;){for(var A=S[K],_=0,h=M-1;(A!==0||_<R)&&h!==-1;h--,_++)A+=256*O[h]>>>0,O[h]=A%l>>>0,A=A/l>>>0;if(A!==0)throw new Error("Non-zero carry");R=_,K++}for(var w=M-R;w!==M&&O[w]===0;)w++;for(var H=f.repeat(N);w<M;++w)H+=r.charAt(O[w]);return H}function x(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var N=0;if(S[N]!==" "){for(var R=0,K=0;S[N]===f;)R++,N++;for(var $=(S.length-N)*g+1>>>0,M=new Uint8Array($);S[N];){var O=t[S.charCodeAt(N)];if(O===255)return;for(var A=0,_=$-1;(O!==0||A<K)&&_!==-1;_--,A++)O+=l*M[_]>>>0,M[_]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");K=A,N++}if(S[N]!==" "){for(var h=$-K;h!==$&&M[h]===0;)h++;for(var w=new Uint8Array(R+($-h)),H=R;h!==$;)w[H++]=M[h++];return w}}}function D(S){var N=x(S);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:x,decode:D}}var bS=vS,wS=bS;const vy=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},_S=r=>new TextEncoder().encode(r),ES=r=>new TextDecoder().decode(r);class xS{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class SS{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return by(this,e)}}class DS{constructor(e){this.decoders=e}or(e){return by(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const by=(r,e)=>new DS({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class IS{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new xS(e,t,i),this.decoder=new SS(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const wc=({name:r,prefix:e,encode:t,decode:i})=>new IS(r,e,t,i),Aa=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=wS(t,e);return wc({prefix:r,name:e,encode:i,decode:o=>vy(s(o))})},PS=(r,e,t,i)=>{const s={};for(let y=0;y<e.length;++y)s[e[y]]=y;let o=r.length;for(;r[o-1]==="=";)--o;const u=new Uint8Array(o*t/8|0);let l=0,f=0,g=0;for(let y=0;y<o;++y){const b=s[r[y]];if(b===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<t|b,l+=t,l>=8&&(l-=8,u[g++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return u},OS=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let o="",u=0,l=0;for(let f=0;f<r.length;++f)for(l=l<<8|r[f],u+=8;u>t;)u-=t,o+=e[s&l>>u];if(u&&(o+=e[s&l<<t-u]),i)for(;o.length*t&7;)o+="=";return o},lr=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>wc({prefix:e,name:r,encode(s){return OS(s,i,t)},decode(s){return PS(s,i,t,r)}}),AS=wc({prefix:"\0",name:"identity",encode:r=>ES(r),decode:r=>_S(r)});var CS=Object.freeze({__proto__:null,identity:AS});const TS=lr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $S=Object.freeze({__proto__:null,base2:TS});const NS=lr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var RS=Object.freeze({__proto__:null,base8:NS});const FS=Aa({prefix:"9",name:"base10",alphabet:"0123456789"});var MS=Object.freeze({__proto__:null,base10:FS});const LS=lr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jS=lr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var US=Object.freeze({__proto__:null,base16:LS,base16upper:jS});const kS=lr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),BS=lr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qS=lr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zS=lr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),HS=lr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),KS=lr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),VS=lr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),WS=lr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),GS=lr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var YS=Object.freeze({__proto__:null,base32:kS,base32upper:BS,base32pad:qS,base32padupper:zS,base32hex:HS,base32hexupper:KS,base32hexpad:VS,base32hexpadupper:WS,base32z:GS});const JS=Aa({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),XS=Aa({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ZS=Object.freeze({__proto__:null,base36:JS,base36upper:XS});const QS=Aa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eD=Aa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tD=Object.freeze({__proto__:null,base58btc:QS,base58flickr:eD});const rD=lr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nD=lr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iD=lr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sD=lr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var aD=Object.freeze({__proto__:null,base64:rD,base64pad:nD,base64url:iD,base64urlpad:sD});const wy=Array.from(""),oD=wy.reduce((r,e,t)=>(r[t]=e,r),[]),cD=wy.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function uD(r){return r.reduce((e,t)=>(e+=oD[t],e),"")}function lD(r){const e=[];for(const t of r){const i=cD[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const hD=wc({prefix:"",name:"base256emoji",encode:uD,decode:lD});var fD=Object.freeze({__proto__:null,base256emoji:hD}),dD=_y,v0=128,pD=127,gD=~pD,yD=Math.pow(2,31);function _y(r,e,t){e=e||[],t=t||0;for(var i=t;r>=yD;)e[t++]=r&255|v0,r/=128;for(;r&gD;)e[t++]=r&255|v0,r>>>=7;return e[t]=r|0,_y.bytes=t-i+1,e}var mD=Hl,vD=128,b0=127;function Hl(r,i){var t=0,i=i||0,s=0,o=i,u,l=r.length;do{if(o>=l)throw Hl.bytes=0,new RangeError("Could not decode varint");u=r[o++],t+=s<28?(u&b0)<<s:(u&b0)*Math.pow(2,s),s+=7}while(u>=vD);return Hl.bytes=o-i,t}var bD=Math.pow(2,7),wD=Math.pow(2,14),_D=Math.pow(2,21),ED=Math.pow(2,28),xD=Math.pow(2,35),SD=Math.pow(2,42),DD=Math.pow(2,49),ID=Math.pow(2,56),PD=Math.pow(2,63),OD=function(r){return r<bD?1:r<wD?2:r<_D?3:r<ED?4:r<xD?5:r<SD?6:r<DD?7:r<ID?8:r<PD?9:10},AD={encode:dD,decode:mD,encodingLength:OD},Ey=AD;const w0=(r,e,t=0)=>(Ey.encode(r,e,t),e),_0=r=>Ey.encodingLength(r),Kl=(r,e)=>{const t=e.byteLength,i=_0(r),s=i+_0(t),o=new Uint8Array(s+t);return w0(r,o,0),w0(t,o,i),o.set(e,s),new CD(r,t,e,o)};class CD{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const xy=({name:r,code:e,encode:t})=>new TD(r,e,t);class TD{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Kl(this.code,t):t.then(i=>Kl(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Sy=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),$D=xy({name:"sha2-256",code:18,encode:Sy("SHA-256")}),ND=xy({name:"sha2-512",code:19,encode:Sy("SHA-512")});var RD=Object.freeze({__proto__:null,sha256:$D,sha512:ND});const Dy=0,FD="identity",Iy=vy,MD=r=>Kl(Dy,Iy(r)),LD={code:Dy,name:FD,encode:Iy,digest:MD};var jD=Object.freeze({__proto__:null,identity:LD});new TextEncoder,new TextDecoder;const E0={...CS,...$S,...RS,...MS,...US,...YS,...ZS,...tD,...aD,...fD};({...RD,...jD});function Py(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function UD(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Py(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Oy(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const x0=Oy("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ml=Oy("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=UD(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),kD={utf8:x0,"utf-8":x0,hex:E0.base16,latin1:ml,ascii:ml,binary:ml,...E0};function BD(r,e="utf8"){const t=kD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Py(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const Ay="wc",qD=2,jh="core",ui=`${Ay}@2:${jh}:`,zD={name:jh,logger:"error"},HD={database:":memory:"},KD="crypto",S0="client_ed25519_seed",VD=Ee.ONE_DAY,WD="keychain",GD="0.3",YD="messages",JD="0.3",XD=Ee.SIX_HOURS,ZD="publisher",Cy="irn",QD="error",Ty="wss://relay.walletconnect.com",D0="wss://relay.walletconnect.org",eI="relayer",jt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},tI="_subscription",aa={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},rI=Ee.ONE_SECOND/2,nI="2.8.6",iI=1e4,sI="0.3",aI="WALLETCONNECT_CLIENT_ID",En={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},oI="subscription",cI="0.3",uI=Ee.FIVE_SECONDS*1e3,lI="pairing",hI="0.3",oa={wc_pairingDelete:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:0}}},_n={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},fI="history",dI="0.3",pI="expirer",tn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},gI="0.3",vl="verify-api",I0="https://verify.walletconnect.com";class yI{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=WD,this.version=GD,this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:o}=pe("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(o)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=ot.generateChildLogger(t,this.name)}get context(){return ot.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Jg(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Xg(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class mI{constructor(e,t,i){this.core=e,this.logger=t,this.name=KD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),o=l0(s);return ly(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=Z3();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const o=await this.getClientSeed(),u=l0(o),l=ql();return await Gx(l,s,VD,u)},this.generateSharedKey=(s,o,u)=>{this.isInitialized();const l=this.getPrivateKey(s),f=Q3(l,o);return this.setSymKey(f,u)},this.setSymKey=async(s,o)=>{this.isInitialized();const u=o||e5(s);return await this.keychain.set(u,s),u},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,o,u)=>{this.isInitialized();const l=Wg(u),f=ya(o);if(Up(l)){const x=l.senderPublicKey,D=l.receiverPublicKey;s=await this.generateSharedKey(x,D)}const g=this.getSymKey(s),{type:y,senderPublicKey:b}=l;return r5({type:y,symKey:g,message:f,senderPublicKey:b})},this.decode=async(s,o,u)=>{this.isInitialized();const l=s5(o,u);if(Up(l)){const y=l.receiverPublicKey,b=l.senderPublicKey;s=await this.generateSharedKey(y,b)}const f=this.getSymKey(s),g=n5({symKey:f,encoded:o});return $h(g)},this.getPayloadType=s=>{const o=Zo(s);return Pa(o.type)},this.getPayloadSenderPublicKey=s=>{const o=Zo(s);return o.senderPublicKey?Dr(o.senderPublicKey,Er):void 0},this.core=e,this.logger=ot.generateChildLogger(t,this.name),this.keychain=i||new yI(this.core,this.logger)}get context(){return ot.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(S0)}catch{e=ql(),await this.keychain.set(S0,e)}return BD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class vI extends Sx{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=YD,this.version=JD,this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const o=bs(s);let u=this.messages.get(i);return typeof u>"u"&&(u={}),typeof u[o]<"u"||(u[o]=s,this.messages.set(i,u),await this.persist()),o},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const o=this.get(i),u=bs(s);return typeof o[u]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=ot.generateChildLogger(e,this.name),this.core=t}get context(){return ot.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Jg(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Xg(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class bI extends Dx{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new zr.EventEmitter,this.name=ZD,this.queue=new Map,this.publishTimeout=Ee.toMiliseconds(Ee.TEN_SECONDS),this.queueTimeout=Ee.toMiliseconds(Ee.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,s,o)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:o}});try{const u=(o==null?void 0:o.ttl)||XD,l=zl(o),f=(o==null?void 0:o.prompt)||!1,g=(o==null?void 0:o.tag)||0,y=(o==null?void 0:o.id)||Fh().toString(),b={topic:i,message:s,opts:{ttl:u,relay:l,prompt:f,tag:g,id:y}},x=setTimeout(()=>this.queue.set(y,b),this.queueTimeout);try{await await Qo(this.rpcPublish(i,s,u,l,f,g,y),this.publishTimeout),clearTimeout(x),this.relayer.events.emit(jt.publish,b)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:o}})}catch(u){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(u),u}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=ot.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return ot.getLoggerContext(this.logger)}rpcPublish(e,t,i,s,o,u,l){var f,g,y,b;const x={method:Wo(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:o,tag:u},id:l};return _r((f=x.params)==null?void 0:f.prompt)&&((g=x.params)==null||delete g.prompt),_r((y=x.params)==null?void 0:y.tag)&&((b=x.params)==null||delete b.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:x}),this.relayer.request(x)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(jt.connection_stalled);return}this.checkQueue()}),this.relayer.on(jt.message_ack,e=>{this.onPublish(e.id.toString())})}}class wI{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(o=>o!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var _I=Object.defineProperty,EI=Object.defineProperties,xI=Object.getOwnPropertyDescriptors,P0=Object.getOwnPropertySymbols,SI=Object.prototype.hasOwnProperty,DI=Object.prototype.propertyIsEnumerable,O0=(r,e,t)=>e in r?_I(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ca=(r,e)=>{for(var t in e||(e={}))SI.call(e,t)&&O0(r,t,e[t]);if(P0)for(var t of P0(e))DI.call(e,t)&&O0(r,t,e[t]);return r},bl=(r,e)=>EI(r,xI(e));class II extends Ox{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new wI,this.events=new zr.EventEmitter,this.name=oI,this.version=cI,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ui,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const o=zl(s),u={topic:i,relay:o};this.pending.set(i,u);const l=await this.rpcSubscribe(i,o);return this.onSubscribe(l,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),l}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((s,o)=>{const u=new Ee.Watch;u.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(l),u.stop(this.pendingSubscriptionWatchLabel),s(!0)),u.elapsed(this.pendingSubscriptionWatchLabel)>=uI&&(clearInterval(l),u.stop(this.pendingSubscriptionWatchLabel),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=ot.generateChildLogger(t,this.name),this.clientId=""}get context(){return ot.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=zl(i);await this.rpcUnsubscribe(e,t,s);const o=Ht("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t){const i={method:Wo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await Qo(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(jt.connection_stalled)}return bs(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Wo(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Qo(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(jt.connection_stalled)}}rpcUnsubscribe(e,t,i){const s={method:Wo(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,bl(ca({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ca({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ca({},t)),this.topicMap.set(t.topic,e),this.events.emit(En.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(En.deleted,bl(ca({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(En.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(En.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Sn(t)&&this.onBatchSubscribe(t.map((i,s)=>bl(ca({},e[s]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(jt.connect,async()=>{await this.onConnect()}),this.relayer.on(jt.disconnect,()=>{this.onDisconnect()}),this.events.on(En.created,async e=>{const t=En.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(En.deleted,async e=>{const t=En.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var PI=Object.defineProperty,A0=Object.getOwnPropertySymbols,OI=Object.prototype.hasOwnProperty,AI=Object.prototype.propertyIsEnumerable,C0=(r,e,t)=>e in r?PI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,CI=(r,e)=>{for(var t in e||(e={}))OI.call(e,t)&&C0(r,t,e[t]);if(A0)for(var t of A0(e))AI.call(e,t)&&C0(r,t,e[t]);return r};class TI extends Ix{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new zr.EventEmitter,this.name=eI,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ot.generateChildLogger(e.logger,this.name):ot.pino(ot.getDefaultLoggerOptions({level:e.logger||QD})),this.messages=new vI(this.logger,e.core),this.subscriber=new II(this,this.logger),this.publisher=new bI(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Ty,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${D0}...`),await this.restartTransport(D0)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},iI)}get context(){return ot.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let s=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";return s||(await Promise.all([new Promise(o=>{this.subscriber.once(En.created,u=>{u.topic===e&&o()})}),new Promise(async o=>{s=await this.subscriber.subscribe(e,t),o()})]),s)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(jt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(En.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,i)=>{await Qo(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>i(s)).then(()=>t()).finally(()=>this.removeListener(jt.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(jt.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.events.emit(jt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(aa.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new fi(new gS(y5({sdkVersion:nI,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,i):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Lh(e)){if(!e.method.endsWith(tI))return;const t=e.params,{topic:i,message:s,publishedAt:o}=t.data,u={topic:i,message:s,publishedAt:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(CI({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else bc(e)&&this.events.emit(jt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(jt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Mh(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(aa.payload,e=>this.onProviderPayload(e)),this.provider.on(aa.connect,()=>{this.events.emit(jt.connect)}),this.provider.on(aa.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(aa.error,e=>{this.logger.error(e),this.events.emit(jt.error,e)})}registerEventListeners(){this.events.on(jt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(jt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},Ee.toMiliseconds(rI))}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var $I=Object.defineProperty,T0=Object.getOwnPropertySymbols,NI=Object.prototype.hasOwnProperty,RI=Object.prototype.propertyIsEnumerable,$0=(r,e,t)=>e in r?$I(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,N0=(r,e)=>{for(var t in e||(e={}))NI.call(e,t)&&$0(r,t,e[t]);if(T0)for(var t of T0(e))RI.call(e,t)&&$0(r,t,e[t]);return r};class _c extends Px{constructor(e,t,i,s=ui,o=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=sI,this.cached=[],this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(u=>{this.getKey&&u!==null&&!_r(u)?this.map.set(this.getKey(u),u):U5(u)?this.map.set(u.id,u):k5(u)&&this.map.set(u.topic,u)}),this.cached=[],this.initialized=!0)},this.set=async(u,l)=>{this.isInitialized(),this.map.has(u)?await this.update(u,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:u,value:l}),this.map.set(u,l),await this.persist())},this.get=u=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:u}),this.getData(u)),this.getAll=u=>(this.isInitialized(),u?this.values.filter(l=>Object.keys(u).every(f=>mS(l[f],u[f]))):this.values),this.update=async(u,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:u,update:l});const f=N0(N0({},this.getData(u)),l);this.map.set(u,f),await this.persist()},this.delete=async(u,l)=>{this.isInitialized(),this.map.has(u)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:u,reason:l}),this.map.delete(u),await this.persist())},this.logger=ot.generateChildLogger(t,this.name),this.storagePrefix=s,this.getKey=o}get context(){return ot.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class FI{constructor(e,t){this.core=e,this.logger=t,this.name=lI,this.version=hI,this.events=new wh,this.initialized=!1,this.storagePrefix=ui,this.ignoredPayloadTypes=[zi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=ql(),s=await this.core.crypto.setSymKey(i),o=hn(Ee.FIVE_MINUTES),u={protocol:Cy},l={topic:s,expiry:o,relay:u,active:!1},f=A5({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:u});return await this.pairings.set(s,l),await this.core.relayer.subscribe(s),this.core.expirer.set(s,o),{topic:s,uri:f}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:s,symKey:o,relay:u}=I5(i.uri);if(this.pairings.keys.includes(s))throw new Error(`Pairing already exists: ${s}`);if(this.core.crypto.hasKeys(s))throw new Error(`Keychain already exists: ${s}`);const l=hn(Ee.FIVE_MINUTES),f={topic:s,relay:u,expiry:l,active:!1};return await this.pairings.set(s,f),await this.core.crypto.setSymKey(o,s),await this.core.relayer.subscribe(s,{relay:u}),this.core.expirer.set(s,l),i.activatePairing&&await this.activate({topic:s}),f},this.activate=async({topic:i})=>{this.isInitialized();const s=hn(Ee.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:s}),this.core.expirer.set(i,s)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const o=await this.sendRequest(s,"wc_pairingPing",{}),{done:u,resolve:l,reject:f}=ys();this.events.once(er("pairing_ping",o),({error:g})=>{g?f(g):l()}),await u()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Ht("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,o)=>{const u=mc(s,o),l=await this.core.crypto.encode(i,u),f=oa[s].req;return this.core.history.set(i,u),this.core.relayer.publish(i,l,f),u.id},this.sendResult=async(i,s,o)=>{const u=Mh(i,o),l=await this.core.crypto.encode(s,u),f=await this.core.history.get(s,i),g=oa[f.request.method].res;await this.core.relayer.publish(s,l,g),await this.core.history.resolve(u)},this.sendError=async(i,s,o)=>{const u=vc(i,o),l=await this.core.crypto.encode(s,u),f=await this.core.history.get(s,i),g=oa[f.request.method]?oa[f.request.method].res:oa.unregistered_method.res;await this.core.relayer.publish(s,l,g),await this.core.history.resolve(u)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Ht("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>si(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:o}=i,u=o.method;if(this.pairings.keys.includes(s))switch(u){case"wc_pairingPing":return this.onPairingPingRequest(s,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,o);default:return this.onUnknownRpcMethodRequest(s,o)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:o}=i,u=(await this.core.history.get(s,o.id)).request.method;if(this.pairings.keys.includes(s))switch(u){case"wc_pairingPing":return this.onPairingPingResponse(s,o);default:return this.onUnknownRpcMethodResponse(u)}},this.onPairingPingRequest=async(i,s)=>{const{id:o}=s;try{this.isValidPing({topic:i}),await this.sendResult(o,i,!0),this.events.emit("pairing_ping",{id:o,topic:i})}catch(u){await this.sendError(o,i,u),this.logger.error(u)}},this.onPairingPingResponse=(i,s)=>{const{id:o}=s;setTimeout(()=>{Un(s)?this.events.emit(er("pairing_ping",o),{}):fn(s)&&this.events.emit(er("pairing_ping",o),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:o,topic:i})}catch(u){await this.sendError(o,i,u),this.logger.error(u)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:o,method:u}=s;try{if(this.registeredMethods.includes(u))return;const l=Ht("WC_METHOD_UNSUPPORTED",u);await this.sendError(o,i,l),this.logger.error(l)}catch(l){await this.sendError(o,i,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Ht("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!$r(i)){const{message:s}=pe("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(s)}if(!j5(i.uri)){const{message:s}=pe("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(s)}},this.isValidPing=async i=>{if(!$r(i)){const{message:o}=pe("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!$r(i)){const{message:o}=pe("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!or(i,!1)){const{message:s}=pe("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(si(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=pe("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=ot.generateChildLogger(t,this.name),this.pairings=new _c(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ot.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(jt.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(t,i);Lh(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):bc(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))})}registerExpirerEvents(){this.core.expirer.on(tn.expired,async e=>{const{topic:t}=Qg(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class MI extends xx{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new zr.EventEmitter,this.name=fI,this.version=dI,this.cached=[],this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:o}),this.records.has(s.id))return;const u={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:o,expiry:hn(Ee.THIRTY_DAYS)};this.records.set(u.id,u),this.events.emit(_n.created,u)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=fn(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.events.emit(_n.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(o=>{if(o.topic===i){if(typeof s<"u"&&o.id!==s)return;this.records.delete(o.id),this.events.emit(_n.deleted,o)}})},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=ot.generateChildLogger(t,this.name)}get context(){return ot.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:mc(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(_n.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(_n.created,e=>{const t=_n.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(_n.updated,e=>{const t=_n.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(_n.deleted,e=>{const t=_n.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{Ee.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class LI extends Ax{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new zr.EventEmitter,this.name=pI,this.version=gI,this.cached=[],this.initialized=!1,this.storagePrefix=ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const o=this.formatTarget(i),u={target:o,expiry:s};this.expirations.set(o,u),this.checkExpiry(o,u),this.events.emit(tn.created,{target:o,expiration:u})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),o=this.getExpiration(s);this.expirations.delete(s),this.events.emit(tn.deleted,{target:s,expiration:o})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=ot.generateChildLogger(t,this.name)}get context(){return ot.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return m5(e);if(typeof e=="number")return v5(e);const{message:t}=pe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(tn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;Ee.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(tn.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(tn.created,e=>{const t=tn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(tn.expired,e=>{const t=tn.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(tn.deleted,e=>{const t=tn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class jI extends Cx{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=vl,this.initialized=!1,this.init=async i=>{Gg()||!Ch()||(this.verifyUrl=(i==null?void 0:i.verifyUrl)||I0,await this.createIframe())},this.register=async i=>{var s;if(this.initialized||await this.init(),!!this.iframe)try{(s=this.iframe.contentWindow)==null||s.postMessage(i.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${i.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async i=>{var s;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${i.attestationId}`);const o=this.startAbortTimer(Ee.FIVE_SECONDS),u=await fetch(`${this.verifyUrl}/attestation/${i.attestationId}`,{signal:this.abortController.signal});return clearTimeout(o),u.status===200?(s=await u.json())==null?void 0:s.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((i,s)=>{if(document.getElementById(vl))return i();const o=document.createElement("iframe");o.setAttribute("id",vl),o.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),o.style.display="none",o.addEventListener("load",()=>{this.initialized=!0,i()}),o.addEventListener("error",u=>{s(u)}),document.body.append(o),this.iframe=o}),new Promise(i=>{setTimeout(()=>i("iframe load timeout"),Ee.toMiliseconds(Ee.ONE_SECOND/2))})])}catch(i){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(i)}},this.logger=ot.generateChildLogger(t,this.name),this.verifyUrl=I0,this.abortController=new AbortController,this.isDevEnv=Ah()&&{}.IS_VITEST}get context(){return ot.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),Ee.toMiliseconds(e))}}var UI=Object.defineProperty,R0=Object.getOwnPropertySymbols,kI=Object.prototype.hasOwnProperty,BI=Object.prototype.propertyIsEnumerable,F0=(r,e,t)=>e in r?UI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,M0=(r,e)=>{for(var t in e||(e={}))kI.call(e,t)&&F0(r,t,e[t]);if(R0)for(var t of R0(e))BI.call(e,t)&&F0(r,t,e[t]);return r};class Uh extends Ex{constructor(e){super(e),this.protocol=Ay,this.version=qD,this.name=jh,this.events=new zr.EventEmitter,this.initialized=!1,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Ty;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ot.pino(ot.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||zD.logger}));this.logger=ot.generateChildLogger(t,this.name),this.heartbeat=new Ps.HeartBeat,this.crypto=new mI(this,this.logger,e==null?void 0:e.keychain),this.history=new MI(this,this.logger),this.expirer=new LI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new dx(M0(M0({},HD),e==null?void 0:e.storageOptions)),this.relayer=new TI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new FI(this,this.logger),this.verify=new jI(this.projectId||"",this.logger)}static async init(e){const t=new Uh(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(aI,i),t}get context(){return ot.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const qI=Uh,$y="wc",Ny=2,Ry="client",kh=`${$y}@${Ny}:${Ry}:`,wl={name:Ry,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},zI="WALLETCONNECT_DEEPLINK_CHOICE",HI="proposal",Fy="Proposal expired",KI="session",ko=Ee.SEVEN_DAYS,VI="engine",ua={wc_sessionPropose:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1115}}},_l={min:Ee.FIVE_MINUTES,max:Ee.SEVEN_DAYS},WI="request",GI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var YI=Object.defineProperty,JI=Object.defineProperties,XI=Object.getOwnPropertyDescriptors,L0=Object.getOwnPropertySymbols,ZI=Object.prototype.hasOwnProperty,QI=Object.prototype.propertyIsEnumerable,j0=(r,e,t)=>e in r?YI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,en=(r,e)=>{for(var t in e||(e={}))ZI.call(e,t)&&j0(r,t,e[t]);if(L0)for(var t of L0(e))QI.call(e,t)&&j0(r,t,e[t]);return r},El=(r,e)=>JI(r,XI(e));class eP extends $x{constructor(e){super(e),this.name=VI,this.events=new wh,this.initialized=!1,this.ignoredPayloadTypes=[zi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ua)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const i=El(en({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:u,sessionProperties:l,relays:f}=i;let g=s,y,b=!1;if(g&&(b=this.client.core.pairing.pairings.get(g).active),!g||!b){const{topic:M,uri:O}=await this.client.core.pairing.create();g=M,y=O}const x=await this.client.core.crypto.generateKeyPair(),D=en({requiredNamespaces:o,optionalNamespaces:u,relays:f??[{protocol:Cy}],proposer:{publicKey:x,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:S,resolve:N,done:R}=ys(Ee.FIVE_MINUTES,Fy);if(this.events.once(er("session_connect"),async({error:M,session:O})=>{if(M)S(M);else if(O){O.self.publicKey=x;const A=El(en({},O),{requiredNamespaces:O.requiredNamespaces,optionalNamespaces:O.optionalNamespaces});await this.client.session.set(O.topic,A),await this.setExpiry(O.topic,O.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:O.peer.metadata}),N(A)}}),!g){const{message:M}=pe("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(M)}const K=await this.sendRequest(g,"wc_sessionPropose",D),$=hn(Ee.FIVE_MINUTES);return await this.setProposal(K,en({id:K,expiry:$},D)),{uri:y,approval:R}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:i,relayProtocol:s,namespaces:o,sessionProperties:u}=t,l=this.client.proposal.get(i);let{pairingTopic:f,proposer:g,requiredNamespaces:y,optionalNamespaces:b}=l;f=f||"",ws(y)||(y=N5(o,"approve()"));const x=await this.client.core.crypto.generateKeyPair(),D=g.publicKey,S=await this.client.core.crypto.generateSharedKey(x,D);f&&i&&(await this.client.core.pairing.updateMetadata({topic:f,metadata:g.metadata}),await this.sendResult(i,f,{relay:{protocol:s??"irn"},responderPublicKey:x}),await this.client.proposal.delete(i,Ht("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:f}));const N=en({relay:{protocol:s??"irn"},namespaces:o,requiredNamespaces:y,optionalNamespaces:b,pairingTopic:f,controller:{publicKey:x,metadata:this.client.metadata},expiry:hn(ko)},u&&{sessionProperties:u});await this.client.core.relayer.subscribe(S),await this.sendRequest(S,"wc_sessionSettle",N);const R=El(en({},N),{topic:S,pairingTopic:f,acknowledged:!1,self:N.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:x});return await this.client.session.set(S,R),await this.setExpiry(S,hn(ko)),{topic:S,acknowledged:()=>new Promise(K=>setTimeout(()=>K(this.client.session.get(S)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:i,reason:s}=t,{pairingTopic:o}=this.client.proposal.get(i);o&&(await this.sendError(i,o,s),await this.client.proposal.delete(i,Ht("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:i,namespaces:s}=t,o=await this.sendRequest(i,"wc_sessionUpdate",{namespaces:s}),{done:u,resolve:l,reject:f}=ys();return this.events.once(er("session_update",o),({error:g})=>{g?f(g):l()}),await this.client.session.update(i,{namespaces:s}),{acknowledged:u}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:i}=t,s=await this.sendRequest(i,"wc_sessionExtend",{}),{done:o,resolve:u,reject:l}=ys();return this.events.once(er("session_extend",s),({error:f})=>{f?l(f):u()}),await this.setExpiry(i,hn(ko)),{acknowledged:o}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:i,request:s,topic:o,expiry:u}=t,l=await this.sendRequest(o,"wc_sessionRequest",{request:s,chainId:i},u),{done:f,resolve:g,reject:y}=ys(u);this.events.once(er("session_request",l),({error:x,result:D})=>{x?y(x):g(D)}),this.client.events.emit("session_request_sent",{topic:o,request:s,chainId:i,id:l});const b=await this.client.core.storage.getItem(zI);return b5({id:l,topic:o,wcDeepLink:b}),await f()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:o}=s;Un(s)?await this.sendResult(o,i,s.result):fn(s)&&await this.sendError(o,i,s.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=await this.sendRequest(i,"wc_sessionPing",{}),{done:o,resolve:u,reject:l}=ys();this.events.once(er("session_ping",s),({error:f})=>{f?l(f):u()}),await o()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:i,event:s,chainId:o}=t;await this.sendRequest(i,"wc_sessionEvent",{event:s,chainId:o})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=Fh().toString();let o;const u=l=>{(l==null?void 0:l.id.toString())===s&&(this.client.core.relayer.events.removeListener(jt.message_ack,u),o())};await Promise.all([new Promise(l=>{o=l,this.client.core.relayer.on(jt.message_ack,u)}),this.sendRequest(i,"wc_sessionDelete",Ht("USER_DISCONNECTED"),void 0,s)]),await this.deleteSession(i)}else await this.client.core.pairing.disconnect({topic:i})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>M5(i,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(o=>{var u,l;return((u=o.peerMetadata)==null?void 0:u.url)&&((l=o.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&o.topic&&o.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(t,i)=>{const{self:s}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Ht("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),i||this.client.core.expirer.del(t)},this.deleteProposal=async(t,i)=>{await Promise.all([this.client.proposal.delete(t,Ht("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:i}),this.client.core.expirer.set(t,i)},this.setProposal=async(t,i)=>{await this.client.proposal.set(t,i),this.client.core.expirer.set(t,i.expiry)},this.setPendingSessionRequest=async t=>{const i=ua.wc_sessionRequest.req.ttl,{id:s,topic:o,params:u}=t;await this.client.pendingRequest.set(s,{id:s,topic:o,params:u}),i&&this.client.core.expirer.set(s,hn(i))},this.sendRequest=async(t,i,s,o,u)=>{const l=mc(i,s);if(Ch()&&GI.includes(i)){const y=bs(JSON.stringify(l));await this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(t,l),g=ua[i].req;return o&&(g.ttl=o),u&&(g.id=u),this.client.core.history.set(t,l),this.client.core.relayer.publish(t,f,g),l.id},this.sendResult=async(t,i,s)=>{const o=Mh(t,s),u=await this.client.core.crypto.encode(i,o),l=await this.client.core.history.get(i,t),f=ua[l.request.method].res;this.client.core.relayer.publish(i,u,f),await this.client.core.history.resolve(o)},this.sendError=async(t,i,s)=>{const o=vc(t,s),u=await this.client.core.crypto.encode(i,o),l=await this.client.core.history.get(i,t),f=ua[l.request.method].res;this.client.core.relayer.publish(i,u,f),await this.client.core.history.resolve(o)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{si(s.expiry)&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{si(s.expiry)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession(s)),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=t=>{const{topic:i,payload:s}=t,o=s.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeRequest(i,s);case"wc_sessionSettle":return this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return this.onSessionExtendRequest(i,s);case"wc_sessionPing":return this.onSessionPingRequest(i,s);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return this.onSessionRequest(i,s);case"wc_sessionEvent":return this.onSessionEventRequest(i,s);default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:s}=t,o=(await this.client.core.history.get(i,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:s}=pe("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.onSessionProposeRequest=async(t,i)=>{const{params:s,id:o}=i;try{this.isValidConnect(en({},i.params));const u=hn(Ee.FIVE_MINUTES),l=en({id:o,pairingTopic:t,expiry:u},s);await this.setProposal(o,l);const f=bs(JSON.stringify(i)),g=await this.getVerifyContext(f,l.proposer.metadata);this.client.events.emit("session_proposal",{id:o,params:l,verifyContext:g})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionProposeResponse=async(t,i)=>{const{id:s}=i;if(Un(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const u=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const l=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const f=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const g=await this.client.core.crypto.generateSharedKey(l,f);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const y=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:y}),await this.client.core.pairing.activate({topic:t})}else fn(i)&&(await this.client.proposal.delete(s,Ht("USER_DISCONNECTED")),this.events.emit(er("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(t,i)=>{const{id:s,params:o}=i;try{this.isValidSessionSettleRequest(o);const{relay:u,controller:l,expiry:f,namespaces:g,requiredNamespaces:y,optionalNamespaces:b,sessionProperties:x,pairingTopic:D}=i.params,S=en({topic:t,relay:u,expiry:f,namespaces:g,acknowledged:!0,pairingTopic:D,requiredNamespaces:y,optionalNamespaces:b,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},x&&{sessionProperties:x});await this.sendResult(i.id,t,!0),this.events.emit(er("session_connect"),{session:S}),this.cleanupDuplicatePairings(S)}catch(u){await this.sendError(s,t,u),this.client.logger.error(u)}},this.onSessionSettleResponse=async(t,i)=>{const{id:s}=i;Un(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(er("session_approve",s),{})):fn(i)&&(await this.client.session.delete(t,Ht("USER_DISCONNECTED")),this.events.emit(er("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:s,id:o}=i;try{this.isValidUpdate(en({topic:t},s)),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult(o,t,!0),this.client.events.emit("session_update",{id:o,topic:t,params:s})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionUpdateResponse=(t,i)=>{const{id:s}=i;Un(i)?this.events.emit(er("session_update",s),{}):fn(i)&&this.events.emit(er("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,hn(ko)),await this.sendResult(s,t,!0),this.client.events.emit("session_extend",{id:s,topic:t})}catch(o){await this.sendError(s,t,o),this.client.logger.error(o)}},this.onSessionExtendResponse=(t,i)=>{const{id:s}=i;Un(i)?this.events.emit(er("session_extend",s),{}):fn(i)&&this.events.emit(er("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult(s,t,!0),this.client.events.emit("session_ping",{id:s,topic:t})}catch(o){await this.sendError(s,t,o),this.client.logger.error(o)}},this.onSessionPingResponse=(t,i)=>{const{id:s}=i;setTimeout(()=>{Un(i)?this.events.emit(er("session_ping",s),{}):fn(i)&&this.events.emit(er("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(o=>{this.client.core.relayer.once(jt.publish,async()=>{o(await this.deleteSession(t))})}),this.sendResult(s,t,!0)]),this.client.events.emit("session_delete",{id:s,topic:t})}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async(t,i)=>{const{id:s,params:o}=i;try{this.isValidRequest(en({topic:t},o)),await this.setPendingSessionRequest({id:s,topic:t,params:o});const u=bs(JSON.stringify(i)),l=this.client.session.get(t),f=await this.getVerifyContext(u,l.peer.metadata);this.client.events.emit("session_request",{id:s,topic:t,params:o,verifyContext:f})}catch(u){await this.sendError(s,t,u),this.client.logger.error(u)}},this.onSessionRequestResponse=(t,i)=>{const{id:s}=i;Un(i)?this.events.emit(er("session_request",s),{result:i.result}):fn(i)&&this.events.emit(er("session_request",s),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:s,params:o}=i;try{this.isValidEmit(en({topic:t},o)),this.client.events.emit("session_event",{id:s,topic:t,params:o})}catch(u){await this.sendError(s,t,u),this.client.logger.error(u)}},this.isValidConnect=async t=>{if(!$r(t)){const{message:f}=pe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(f)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:u,relays:l}=t;if(_r(i)||await this.isValidPairingTopic(i),!G5(l,!0)){const{message:f}=pe("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(f)}!_r(s)&&ws(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!_r(o)&&ws(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),_r(u)||this.validateSessionProps(u,"sessionProperties")},this.validateNamespaces=(t,i)=>{const s=W5(t,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!$r(t))throw new Error(pe("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:o,sessionProperties:u}=t;await this.isValidProposalId(i);const l=this.client.proposal.get(i),f=Yo(s,"approve()");if(f)throw new Error(f.message);const g=Wp(l.requiredNamespaces,s,"approve()");if(g)throw new Error(g.message);if(!or(o,!0)){const{message:y}=pe("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(y)}_r(u)||this.validateSessionProps(u,"sessionProperties")},this.isValidReject=async t=>{if(!$r(t)){const{message:o}=pe("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(o)}const{id:i,reason:s}=t;if(await this.isValidProposalId(i),!J5(s)){const{message:o}=pe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidSessionSettleRequest=t=>{if(!$r(t)){const{message:g}=pe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}const{relay:i,controller:s,namespaces:o,expiry:u}=t;if(!ry(i)){const{message:g}=pe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const l=B5(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const f=Yo(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(si(u)){const{message:g}=pe("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async t=>{if(!$r(t)){const{message:f}=pe("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(f)}const{topic:i,namespaces:s}=t;await this.isValidSessionTopic(i);const o=this.client.session.get(i),u=Yo(s,"update()");if(u)throw new Error(u.message);const l=Wp(o.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async t=>{if(!$r(t)){const{message:s}=pe("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!$r(t)){const{message:f}=pe("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(f)}const{topic:i,request:s,chainId:o,expiry:u}=t;await this.isValidSessionTopic(i);const{namespaces:l}=this.client.session.get(i);if(!Vp(l,o)){const{message:f}=pe("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(f)}if(!X5(s)){const{message:f}=pe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(f)}if(!ex(l,o,s.method)){const{message:f}=pe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(f)}if(u&&!ix(u,_l)){const{message:f}=pe("MISSING_OR_INVALID",`request() expiry: ${u}. Expiry must be a number (in seconds) between ${_l.min} and ${_l.max}`);throw new Error(f)}},this.isValidRespond=async t=>{if(!$r(t)){const{message:o}=pe("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:i,response:s}=t;if(await this.isValidSessionTopic(i),!Z5(s)){const{message:o}=pe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async t=>{if(!$r(t)){const{message:s}=pe("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!$r(t)){const{message:l}=pe("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:i,event:s,chainId:o}=t;await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!Vp(u,o)){const{message:l}=pe("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(l)}if(!Q5(s)){const{message:l}=pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!tx(u,o,s.name)){const{message:l}=pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}},this.isValidDisconnect=async t=>{if(!$r(t)){const{message:s}=pe("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(t,i)=>{const s={verified:{verifyUrl:i.verifyUrl||"",validation:"UNKNOWN",origin:i.url||""}};try{const o=await this.client.core.verify.resolve({attestationId:t,verifyUrl:i.verifyUrl});o&&(s.verified.origin=o,s.verified.validation=o===i.url?"VALID":"INVALID")}catch(o){this.client.logger.error(o)}return this.client.logger.info(`Verify context: ${JSON.stringify(s)}`),s},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(s=>{if(!or(s,!1)){const{message:o}=pe("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(o)}})}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(jt.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const s=await this.client.core.crypto.decode(t,i);Lh(s)?(this.client.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):bc(s)?(await this.client.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.client.core.history.delete(t,s.id)):this.onRelayEventUnknownPayload({topic:t,payload:s})})}registerExpirerEvents(){this.client.core.expirer.on(tn.expired,async e=>{const{topic:t,id:i}=Qg(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,pe("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}isValidPairingTopic(e){if(!or(e,!1)){const{message:t}=pe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(si(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=pe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!or(e,!1)){const{message:t}=pe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=pe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(si(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=pe("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(or(e,!1)){const{message:t}=pe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=pe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Y5(e)){const{message:t}=pe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=pe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(si(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=pe("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class tP extends _c{constructor(e,t){super(e,t,HI,kh),this.core=e,this.logger=t}}class rP extends _c{constructor(e,t){super(e,t,KI,kh),this.core=e,this.logger=t}}class nP extends _c{constructor(e,t){super(e,t,WI,kh,i=>i.id),this.core=e,this.logger=t}}class Bh extends Tx{constructor(e){super(e),this.protocol=$y,this.version=Ny,this.name=wl.name,this.events=new zr.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||wl.name,this.metadata=(e==null?void 0:e.metadata)||f5();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ot.pino(ot.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||wl.logger}));this.core=(e==null?void 0:e.core)||new qI(e),this.logger=ot.generateChildLogger(t,this.name),this.session=new rP(this.core,this.logger),this.proposal=new tP(this.core,this.logger),this.pendingRequest=new nP(this.core,this.logger),this.engine=new eP(this)}static async init(e){const t=new Bh(e);return await t.initialize(),t}get context(){return ot.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Vl={exports:{}};(function(r,e){var t=typeof self<"u"?self:ar,i=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();(function(o){(function(u){var l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function f(m){return m&&DataView.prototype.isPrototypeOf(m)}if(l.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(m){return m&&g.indexOf(Object.prototype.toString.call(m))>-1};function b(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function x(m){return typeof m!="string"&&(m=String(m)),m}function D(m){var E={next:function(){var z=m.shift();return{done:z===void 0,value:z}}};return l.iterable&&(E[Symbol.iterator]=function(){return E}),E}function S(m){this.map={},m instanceof S?m.forEach(function(E,z){this.append(z,E)},this):Array.isArray(m)?m.forEach(function(E){this.append(E[0],E[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(E){this.append(E,m[E])},this)}S.prototype.append=function(m,E){m=b(m),E=x(E);var z=this.map[m];this.map[m]=z?z+", "+E:E},S.prototype.delete=function(m){delete this.map[b(m)]},S.prototype.get=function(m){return m=b(m),this.has(m)?this.map[m]:null},S.prototype.has=function(m){return this.map.hasOwnProperty(b(m))},S.prototype.set=function(m,E){this.map[b(m)]=x(E)},S.prototype.forEach=function(m,E){for(var z in this.map)this.map.hasOwnProperty(z)&&m.call(E,this.map[z],z,this)},S.prototype.keys=function(){var m=[];return this.forEach(function(E,z){m.push(z)}),D(m)},S.prototype.values=function(){var m=[];return this.forEach(function(E){m.push(E)}),D(m)},S.prototype.entries=function(){var m=[];return this.forEach(function(E,z){m.push([z,E])}),D(m)},l.iterable&&(S.prototype[Symbol.iterator]=S.prototype.entries);function N(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function R(m){return new Promise(function(E,z){m.onload=function(){E(m.result)},m.onerror=function(){z(m.error)}})}function K(m){var E=new FileReader,z=R(E);return E.readAsArrayBuffer(m),z}function $(m){var E=new FileReader,z=R(E);return E.readAsText(m),z}function M(m){for(var E=new Uint8Array(m),z=new Array(E.length),j=0;j<E.length;j++)z[j]=String.fromCharCode(E[j]);return z.join("")}function O(m){if(m.slice)return m.slice(0);var E=new Uint8Array(m.byteLength);return E.set(new Uint8Array(m)),E.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:l.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:l.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():l.arrayBuffer&&l.blob&&f(m)?(this._bodyArrayBuffer=O(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||y(m))?this._bodyArrayBuffer=O(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var m=N(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?N(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(K)}),this.text=function(){var m=N(this);if(m)return m;if(this._bodyBlob)return $(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(m){var E=m.toUpperCase();return _.indexOf(E)>-1?E:m}function w(m,E){E=E||{};var z=E.body;if(m instanceof w){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,E.headers||(this.headers=new S(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!z&&m._bodyInit!=null&&(z=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new S(E.headers)),this.method=h(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(z)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function H(m){var E=new FormData;return m.trim().split("&").forEach(function(z){if(z){var j=z.split("="),V=j.shift().replace(/\+/g," "),U=j.join("=").replace(/\+/g," ");E.append(decodeURIComponent(V),decodeURIComponent(U))}}),E}function C(m){var E=new S,z=m.replace(/\r?\n[\t ]+/g," ");return z.split(/\r?\n/).forEach(function(j){var V=j.split(":"),U=V.shift().trim();if(U){var ee=V.join(":").trim();E.append(U,ee)}}),E}A.call(w.prototype);function B(m,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new S(E.headers),this.url=E.url||"",this._initBody(m)}A.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},B.error=function(){var m=new B(null,{status:0,statusText:""});return m.type="error",m};var Y=[301,302,303,307,308];B.redirect=function(m,E){if(Y.indexOf(E)===-1)throw new RangeError("Invalid status code");return new B(null,{status:E,headers:{location:m}})},u.DOMException=o.DOMException;try{new u.DOMException}catch{u.DOMException=function(E,z){this.message=E,this.name=z;var j=Error(E);this.stack=j.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function J(m,E){return new Promise(function(z,j){var V=new w(m,E);if(V.signal&&V.signal.aborted)return j(new u.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function ee(){U.abort()}U.onload=function(){var re={status:U.status,statusText:U.statusText,headers:C(U.getAllResponseHeaders()||"")};re.url="responseURL"in U?U.responseURL:re.headers.get("X-Request-URL");var le="response"in U?U.response:U.responseText;z(new B(le,re))},U.onerror=function(){j(new TypeError("Network request failed"))},U.ontimeout=function(){j(new TypeError("Network request failed"))},U.onabort=function(){j(new u.DOMException("Aborted","AbortError"))},U.open(V.method,V.url,!0),V.credentials==="include"?U.withCredentials=!0:V.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&l.blob&&(U.responseType="blob"),V.headers.forEach(function(re,le){U.setRequestHeader(le,re)}),V.signal&&(V.signal.addEventListener("abort",ee),U.onreadystatechange=function(){U.readyState===4&&V.signal.removeEventListener("abort",ee)}),U.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return J.polyfill=!0,o.fetch||(o.fetch=J,o.Headers=S,o.Request=w,o.Response=B),u.Headers=S,u.Request=w,u.Response=B,u.fetch=J,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(Vl,Vl.exports);var iP=Vl.exports;const U0=Sa(iP),sP={Accept:"application/json","Content-Type":"application/json"},aP="POST",k0={headers:sP,method:aP},B0=10;class Ki{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new zr.EventEmitter,this.isAvailable=!1,this.registering=!1,!p0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const i=ya(e),o=await(await U0(this.url,Object.assign(Object.assign({},k0),{body:i}))).json();this.onPayload({data:o})}catch(i){this.onError(e.id,i)}}async register(e=this.url){if(!p0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=ya({id:1,jsonrpc:"2.0",method:"test",params:[]});await U0(e,Object.assign(Object.assign({},k0),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?$h(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),o=vc(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return dy(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>B0&&this.events.setMaxListeners(B0)}}const q0="error",oP="wss://relay.walletconnect.com",cP="wc",uP="universal_provider",z0=`${cP}@2:${uP}:`,lP="https://rpc.walletconnect.com/v1",di={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wl={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",g=500,y="__lodash_placeholder__",b=1,x=2,D=4,S=1,N=2,R=1,K=2,$=4,M=8,O=16,A=32,_=64,h=128,w=256,H=512,C=30,B="...",Y=800,J=16,m=1,E=2,z=3,j=1/0,V=9007199254740991,U=17976931348623157e292,ee=0/0,re=4294967295,le=re-1,ae=re>>>1,be=[["ary",h],["bind",R],["bindKey",K],["curry",M],["curryRight",O],["flip",H],["partial",A],["partialRight",_],["rearg",w]],he="[object Arguments]",_e="[object Array]",Q="[object AsyncFunction]",Z="[object Boolean]",q="[object Date]",p="[object DOMException]",L="[object Error]",ue="[object Function]",ge="[object GeneratorFunction]",Oe="[object Map]",Ge="[object Number]",Ze="[object Null]",ze="[object Object]",St="[object Promise]",Dt="[object Proxy]",Ke="[object RegExp]",Ae="[object Set]",Ue="[object String]",ke="[object Symbol]",Ve="[object Undefined]",Ne="[object WeakMap]",Be="[object WeakSet]",Pe="[object ArrayBuffer]",Re="[object DataView]",Ye="[object Float32Array]",$e="[object Float64Array]",Qe="[object Int8Array]",tt="[object Int16Array]",ct="[object Int32Array]",ut="[object Uint8Array]",it="[object Uint8ClampedArray]",pr="[object Uint16Array]",Ir="[object Uint32Array]",pn=/\b__p \+= '';/g,gr=/\b(__p \+=) '' \+/g,Dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gn=/&(?:amp|lt|gt|quot|#39);/g,mi=/[&<>"']/g,Tt=RegExp(Gn.source),It=RegExp(mi.source),$t=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/,Gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,Yt=RegExp(Rt.source),Ft=/^\s+/,kt=/\s/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wt=/\{\n\/\* \[wrapped with (.+)\] \*/,Jt=/,? & /,Xt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Mc=/[()=,{}\[\]\/\s]/,Lc=/\\(\\)?/g,jc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kr=/\w*$/,Uc=/^[-+]0x[0-9a-f]+$/i,kc=/^0b[01]+$/i,Bc=/^\[object .+?Constructor\]$/,qc=/^0o[0-7]+$/i,zc=/^(?:0|[1-9]\d*)$/,In=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wi=/($^)/,Hc=/['\n\r\u2028\u2029\\]/g,Gi="\\ud800-\\udfff",Kc="\\u0300-\\u036f",Vc="\\ufe20-\\ufe2f",Yi="\\u20d0-\\u20ff",Fa=Kc+Vc+Yi,Ma="\\u2700-\\u27bf",sn="a-z\\xdf-\\xf6\\xf8-\\xff",Wc="\\xac\\xb1\\xd7\\xf7",Gc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yc="\\u2000-\\u206f",Jc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",La="A-Z\\xc0-\\xd6\\xd8-\\xde",ja="\\ufe0e\\ufe0f",vi=Wc+Gc+Yc+Jc,Rs="[']",bi="["+Gi+"]",Fs="["+vi+"]",wi="["+Fa+"]",Ua="\\d+",Xc="["+Ma+"]",ka="["+sn+"]",Ba="[^"+Gi+vi+Ua+Ma+sn+La+"]",Ji="\\ud83c[\\udffb-\\udfff]",Zc="(?:"+wi+"|"+Ji+")",qa="[^"+Gi+"]",Xi="(?:\\ud83c[\\udde6-\\uddff]){2}",Yn="[\\ud800-\\udbff][\\udc00-\\udfff]",Mr="["+La+"]",za="\\u200d",Ha="(?:"+ka+"|"+Ba+")",gn="(?:"+Mr+"|"+Ba+")",Ka="(?:"+Rs+"(?:d|ll|m|re|s|t|ve))?",Va="(?:"+Rs+"(?:D|LL|M|RE|S|T|VE))?",Wa=Zc+"?",Ga="["+ja+"]?",Qc="(?:"+za+"(?:"+[qa,Xi,Yn].join("|")+")"+Ga+Wa+")*",Pn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ya="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ja=Ga+Wa+Qc,Zi="(?:"+[Xc,Xi,Yn].join("|")+")"+Ja,eu="(?:"+[qa+wi+"?",wi,Xi,Yn,bi].join("|")+")",Ms=RegExp(Rs,"g"),tu=RegExp(wi,"g"),Qi=RegExp(Ji+"(?="+Ji+")|"+eu+Ja,"g"),Xa=RegExp([Mr+"?"+ka+"+"+Ka+"(?="+[Fs,Mr,"$"].join("|")+")",gn+"+"+Va+"(?="+[Fs,Mr+Ha,"$"].join("|")+")",Mr+"?"+Ha+"+"+Ka,Mr+"+"+Va,Ya,Pn,Ua,Zi].join("|"),"g"),Za=RegExp("["+za+Gi+Fa+ja+"]"),_i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ru=-1,yt={};yt[Ye]=yt[$e]=yt[Qe]=yt[tt]=yt[ct]=yt[ut]=yt[it]=yt[pr]=yt[Ir]=!0,yt[he]=yt[_e]=yt[Pe]=yt[Z]=yt[Re]=yt[q]=yt[L]=yt[ue]=yt[Oe]=yt[Ge]=yt[ze]=yt[Ke]=yt[Ae]=yt[Ue]=yt[Ne]=!1;var pt={};pt[he]=pt[_e]=pt[Pe]=pt[Re]=pt[Z]=pt[q]=pt[Ye]=pt[$e]=pt[Qe]=pt[tt]=pt[ct]=pt[Oe]=pt[Ge]=pt[ze]=pt[Ke]=pt[Ae]=pt[Ue]=pt[ke]=pt[ut]=pt[it]=pt[pr]=pt[Ir]=!0,pt[L]=pt[ue]=pt[Ne]=!1;var T={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},me={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mt=parseFloat,Me=parseInt,Et=typeof la=="object"&&la&&la.Object===Object&&la,Zt=typeof self=="object"&&self&&self.Object===Object&&self,st=Et||Zt||Function("return this")(),vt=e&&!e.nodeType&&e,Bt=vt&&!0&&r&&!r.nodeType&&r,Pr=Bt&&Bt.exports===vt,Qt=Pr&&Et.process,xt=function(){try{var G=Bt&&Bt.require&&Bt.require("util").types;return G||Qt&&Qt.binding&&Qt.binding("util")}catch{}}(),yr=xt&&xt.isArrayBuffer,an=xt&&xt.isDate,Vr=xt&&xt.isMap,yn=xt&&xt.isRegExp,Ls=xt&&xt.isSet,Ei=xt&&xt.isTypedArray;function ir(G,ne,te){switch(te.length){case 0:return G.call(ne);case 1:return G.call(ne,te[0]);case 2:return G.call(ne,te[0],te[1]);case 3:return G.call(ne,te[0],te[1],te[2])}return G.apply(ne,te)}function Lm(G,ne,te,ve){for(var Fe=-1,ht=G==null?0:G.length;++Fe<ht;){var rr=G[Fe];ne(ve,rr,te(rr),G)}return ve}function Wr(G,ne){for(var te=-1,ve=G==null?0:G.length;++te<ve&&ne(G[te],te,G)!==!1;);return G}function jm(G,ne){for(var te=G==null?0:G.length;te--&&ne(G[te],te,G)!==!1;);return G}function gf(G,ne){for(var te=-1,ve=G==null?0:G.length;++te<ve;)if(!ne(G[te],te,G))return!1;return!0}function Jn(G,ne){for(var te=-1,ve=G==null?0:G.length,Fe=0,ht=[];++te<ve;){var rr=G[te];ne(rr,te,G)&&(ht[Fe++]=rr)}return ht}function eo(G,ne){var te=G==null?0:G.length;return!!te&&es(G,ne,0)>-1}function nu(G,ne,te){for(var ve=-1,Fe=G==null?0:G.length;++ve<Fe;)if(te(ne,G[ve]))return!0;return!1}function Ot(G,ne){for(var te=-1,ve=G==null?0:G.length,Fe=Array(ve);++te<ve;)Fe[te]=ne(G[te],te,G);return Fe}function Xn(G,ne){for(var te=-1,ve=ne.length,Fe=G.length;++te<ve;)G[Fe+te]=ne[te];return G}function iu(G,ne,te,ve){var Fe=-1,ht=G==null?0:G.length;for(ve&&ht&&(te=G[++Fe]);++Fe<ht;)te=ne(te,G[Fe],Fe,G);return te}function Um(G,ne,te,ve){var Fe=G==null?0:G.length;for(ve&&Fe&&(te=G[--Fe]);Fe--;)te=ne(te,G[Fe],Fe,G);return te}function su(G,ne){for(var te=-1,ve=G==null?0:G.length;++te<ve;)if(ne(G[te],te,G))return!0;return!1}var km=au("length");function Bm(G){return G.split("")}function qm(G){return G.match(Xt)||[]}function yf(G,ne,te){var ve;return te(G,function(Fe,ht,rr){if(ne(Fe,ht,rr))return ve=ht,!1}),ve}function to(G,ne,te,ve){for(var Fe=G.length,ht=te+(ve?1:-1);ve?ht--:++ht<Fe;)if(ne(G[ht],ht,G))return ht;return-1}function es(G,ne,te){return ne===ne?ev(G,ne,te):to(G,mf,te)}function zm(G,ne,te,ve){for(var Fe=te-1,ht=G.length;++Fe<ht;)if(ve(G[Fe],ne))return Fe;return-1}function mf(G){return G!==G}function vf(G,ne){var te=G==null?0:G.length;return te?cu(G,ne)/te:ee}function au(G){return function(ne){return ne==null?t:ne[G]}}function ou(G){return function(ne){return G==null?t:G[ne]}}function bf(G,ne,te,ve,Fe){return Fe(G,function(ht,rr,bt){te=ve?(ve=!1,ht):ne(te,ht,rr,bt)}),te}function Hm(G,ne){var te=G.length;for(G.sort(ne);te--;)G[te]=G[te].value;return G}function cu(G,ne){for(var te,ve=-1,Fe=G.length;++ve<Fe;){var ht=ne(G[ve]);ht!==t&&(te=te===t?ht:te+ht)}return te}function uu(G,ne){for(var te=-1,ve=Array(G);++te<G;)ve[te]=ne(te);return ve}function Km(G,ne){return Ot(ne,function(te){return[te,G[te]]})}function wf(G){return G&&G.slice(0,Sf(G)+1).replace(Ft,"")}function Lr(G){return function(ne){return G(ne)}}function lu(G,ne){return Ot(ne,function(te){return G[te]})}function js(G,ne){return G.has(ne)}function _f(G,ne){for(var te=-1,ve=G.length;++te<ve&&es(ne,G[te],0)>-1;);return te}function Ef(G,ne){for(var te=G.length;te--&&es(ne,G[te],0)>-1;);return te}function Vm(G,ne){for(var te=G.length,ve=0;te--;)G[te]===ne&&++ve;return ve}var Wm=ou(T),Gm=ou(W);function Ym(G){return"\\"+me[G]}function Jm(G,ne){return G==null?t:G[ne]}function ts(G){return Za.test(G)}function Xm(G){return _i.test(G)}function Zm(G){for(var ne,te=[];!(ne=G.next()).done;)te.push(ne.value);return te}function hu(G){var ne=-1,te=Array(G.size);return G.forEach(function(ve,Fe){te[++ne]=[Fe,ve]}),te}function xf(G,ne){return function(te){return G(ne(te))}}function Zn(G,ne){for(var te=-1,ve=G.length,Fe=0,ht=[];++te<ve;){var rr=G[te];(rr===ne||rr===y)&&(G[te]=y,ht[Fe++]=te)}return ht}function ro(G){var ne=-1,te=Array(G.size);return G.forEach(function(ve){te[++ne]=ve}),te}function Qm(G){var ne=-1,te=Array(G.size);return G.forEach(function(ve){te[++ne]=[ve,ve]}),te}function ev(G,ne,te){for(var ve=te-1,Fe=G.length;++ve<Fe;)if(G[ve]===ne)return ve;return-1}function tv(G,ne,te){for(var ve=te+1;ve--;)if(G[ve]===ne)return ve;return ve}function rs(G){return ts(G)?nv(G):km(G)}function on(G){return ts(G)?iv(G):Bm(G)}function Sf(G){for(var ne=G.length;ne--&&kt.test(G.charAt(ne)););return ne}var rv=ou(oe);function nv(G){for(var ne=Qi.lastIndex=0;Qi.test(G);)++ne;return ne}function iv(G){return G.match(Qi)||[]}function sv(G){return G.match(Xa)||[]}var av=function G(ne){ne=ne==null?st:ns.defaults(st.Object(),ne,ns.pick(st,Qa));var te=ne.Array,ve=ne.Date,Fe=ne.Error,ht=ne.Function,rr=ne.Math,bt=ne.Object,fu=ne.RegExp,ov=ne.String,Gr=ne.TypeError,no=te.prototype,cv=ht.prototype,is=bt.prototype,io=ne["__core-js_shared__"],so=cv.toString,dt=is.hasOwnProperty,uv=0,Df=function(){var n=/[^.]+$/.exec(io&&io.keys&&io.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ao=is.toString,lv=so.call(bt),hv=st._,fv=fu("^"+so.call(dt).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oo=Pr?ne.Buffer:t,Qn=ne.Symbol,co=ne.Uint8Array,If=oo?oo.allocUnsafe:t,uo=xf(bt.getPrototypeOf,bt),Pf=bt.create,Of=is.propertyIsEnumerable,lo=no.splice,Af=Qn?Qn.isConcatSpreadable:t,Us=Qn?Qn.iterator:t,xi=Qn?Qn.toStringTag:t,ho=function(){try{var n=Oi(bt,"defineProperty");return n({},"",{}),n}catch{}}(),dv=ne.clearTimeout!==st.clearTimeout&&ne.clearTimeout,pv=ve&&ve.now!==st.Date.now&&ve.now,gv=ne.setTimeout!==st.setTimeout&&ne.setTimeout,fo=rr.ceil,po=rr.floor,du=bt.getOwnPropertySymbols,yv=oo?oo.isBuffer:t,Cf=ne.isFinite,mv=no.join,vv=xf(bt.keys,bt),nr=rr.max,hr=rr.min,bv=ve.now,wv=ne.parseInt,Tf=rr.random,_v=no.reverse,pu=Oi(ne,"DataView"),ks=Oi(ne,"Map"),gu=Oi(ne,"Promise"),ss=Oi(ne,"Set"),Bs=Oi(ne,"WeakMap"),qs=Oi(bt,"create"),go=Bs&&new Bs,as={},Ev=Ai(pu),xv=Ai(ks),Sv=Ai(gu),Dv=Ai(ss),Iv=Ai(Bs),yo=Qn?Qn.prototype:t,zs=yo?yo.valueOf:t,$f=yo?yo.toString:t;function I(n){if(Lt(n)&&!Le(n)&&!(n instanceof rt)){if(n instanceof Yr)return n;if(dt.call(n,"__wrapped__"))return Nd(n)}return new Yr(n)}var os=function(){function n(){}return function(a){if(!Ct(a))return{};if(Pf)return Pf(a);n.prototype=a;var c=new n;return n.prototype=t,c}}();function mo(){}function Yr(n,a){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}I.templateSettings={escape:$t,evaluate:Nt,interpolate:At,variable:"",imports:{_:I}},I.prototype=mo.prototype,I.prototype.constructor=I,Yr.prototype=os(mo.prototype),Yr.prototype.constructor=Yr;function rt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Pv(){var n=new rt(this.__wrapped__);return n.__actions__=Or(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Or(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Or(this.__views__),n}function Ov(){if(this.__filtered__){var n=new rt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Av(){var n=this.__wrapped__.value(),a=this.__dir__,c=Le(n),d=a<0,v=c?n.length:0,P=Bb(0,v,this.__views__),F=P.start,k=P.end,X=k-F,ie=d?k:F-1,se=this.__iteratees__,ce=se.length,de=0,we=hr(X,this.__takeCount__);if(!c||!d&&v==X&&we==X)return rd(n,this.__actions__);var De=[];e:for(;X--&&de<we;){ie+=a;for(var We=-1,Ie=n[ie];++We<ce;){var et=se[We],at=et.iteratee,kr=et.type,br=at(Ie);if(kr==E)Ie=br;else if(!br){if(kr==m)continue e;break e}}De[de++]=Ie}return De}rt.prototype=os(mo.prototype),rt.prototype.constructor=rt;function Si(n){var a=-1,c=n==null?0:n.length;for(this.clear();++a<c;){var d=n[a];this.set(d[0],d[1])}}function Cv(){this.__data__=qs?qs(null):{},this.size=0}function Tv(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a}function $v(n){var a=this.__data__;if(qs){var c=a[n];return c===f?t:c}return dt.call(a,n)?a[n]:t}function Nv(n){var a=this.__data__;return qs?a[n]!==t:dt.call(a,n)}function Rv(n,a){var c=this.__data__;return this.size+=this.has(n)?0:1,c[n]=qs&&a===t?f:a,this}Si.prototype.clear=Cv,Si.prototype.delete=Tv,Si.prototype.get=$v,Si.prototype.has=Nv,Si.prototype.set=Rv;function On(n){var a=-1,c=n==null?0:n.length;for(this.clear();++a<c;){var d=n[a];this.set(d[0],d[1])}}function Fv(){this.__data__=[],this.size=0}function Mv(n){var a=this.__data__,c=vo(a,n);if(c<0)return!1;var d=a.length-1;return c==d?a.pop():lo.call(a,c,1),--this.size,!0}function Lv(n){var a=this.__data__,c=vo(a,n);return c<0?t:a[c][1]}function jv(n){return vo(this.__data__,n)>-1}function Uv(n,a){var c=this.__data__,d=vo(c,n);return d<0?(++this.size,c.push([n,a])):c[d][1]=a,this}On.prototype.clear=Fv,On.prototype.delete=Mv,On.prototype.get=Lv,On.prototype.has=jv,On.prototype.set=Uv;function An(n){var a=-1,c=n==null?0:n.length;for(this.clear();++a<c;){var d=n[a];this.set(d[0],d[1])}}function kv(){this.size=0,this.__data__={hash:new Si,map:new(ks||On),string:new Si}}function Bv(n){var a=Co(this,n).delete(n);return this.size-=a?1:0,a}function qv(n){return Co(this,n).get(n)}function zv(n){return Co(this,n).has(n)}function Hv(n,a){var c=Co(this,n),d=c.size;return c.set(n,a),this.size+=c.size==d?0:1,this}An.prototype.clear=kv,An.prototype.delete=Bv,An.prototype.get=qv,An.prototype.has=zv,An.prototype.set=Hv;function Di(n){var a=-1,c=n==null?0:n.length;for(this.__data__=new An;++a<c;)this.add(n[a])}function Kv(n){return this.__data__.set(n,f),this}function Vv(n){return this.__data__.has(n)}Di.prototype.add=Di.prototype.push=Kv,Di.prototype.has=Vv;function cn(n){var a=this.__data__=new On(n);this.size=a.size}function Wv(){this.__data__=new On,this.size=0}function Gv(n){var a=this.__data__,c=a.delete(n);return this.size=a.size,c}function Yv(n){return this.__data__.get(n)}function Jv(n){return this.__data__.has(n)}function Xv(n,a){var c=this.__data__;if(c instanceof On){var d=c.__data__;if(!ks||d.length<s-1)return d.push([n,a]),this.size=++c.size,this;c=this.__data__=new An(d)}return c.set(n,a),this.size=c.size,this}cn.prototype.clear=Wv,cn.prototype.delete=Gv,cn.prototype.get=Yv,cn.prototype.has=Jv,cn.prototype.set=Xv;function Nf(n,a){var c=Le(n),d=!c&&Ci(n),v=!c&&!d&&ii(n),P=!c&&!d&&!v&&hs(n),F=c||d||v||P,k=F?uu(n.length,ov):[],X=k.length;for(var ie in n)(a||dt.call(n,ie))&&!(F&&(ie=="length"||v&&(ie=="offset"||ie=="parent")||P&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||Nn(ie,X)))&&k.push(ie);return k}function Rf(n){var a=n.length;return a?n[Iu(0,a-1)]:t}function Zv(n,a){return To(Or(n),Ii(a,0,n.length))}function Qv(n){return To(Or(n))}function yu(n,a,c){(c!==t&&!un(n[a],c)||c===t&&!(a in n))&&Cn(n,a,c)}function Hs(n,a,c){var d=n[a];(!(dt.call(n,a)&&un(d,c))||c===t&&!(a in n))&&Cn(n,a,c)}function vo(n,a){for(var c=n.length;c--;)if(un(n[c][0],a))return c;return-1}function eb(n,a,c,d){return ei(n,function(v,P,F){a(d,v,c(v),F)}),d}function Ff(n,a){return n&&vn(a,sr(a),n)}function tb(n,a){return n&&vn(a,Cr(a),n)}function Cn(n,a,c){a=="__proto__"&&ho?ho(n,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):n[a]=c}function mu(n,a){for(var c=-1,d=a.length,v=te(d),P=n==null;++c<d;)v[c]=P?t:Xu(n,a[c]);return v}function Ii(n,a,c){return n===n&&(c!==t&&(n=n<=c?n:c),a!==t&&(n=n>=a?n:a)),n}function Jr(n,a,c,d,v,P){var F,k=a&b,X=a&x,ie=a&D;if(c&&(F=v?c(n,d,v,P):c(n)),F!==t)return F;if(!Ct(n))return n;var se=Le(n);if(se){if(F=zb(n),!k)return Or(n,F)}else{var ce=fr(n),de=ce==ue||ce==ge;if(ii(n))return sd(n,k);if(ce==ze||ce==he||de&&!v){if(F=X||de?{}:Sd(n),!k)return X?$b(n,tb(F,n)):Tb(n,Ff(F,n))}else{if(!pt[ce])return v?n:{};F=Hb(n,ce,k)}}P||(P=new cn);var we=P.get(n);if(we)return we;P.set(n,F),Qd(n)?n.forEach(function(Ie){F.add(Jr(Ie,a,c,Ie,n,P))}):Xd(n)&&n.forEach(function(Ie,et){F.set(et,Jr(Ie,a,c,et,n,P))});var De=ie?X?Lu:Mu:X?Cr:sr,We=se?t:De(n);return Wr(We||n,function(Ie,et){We&&(et=Ie,Ie=n[et]),Hs(F,et,Jr(Ie,a,c,et,n,P))}),F}function rb(n){var a=sr(n);return function(c){return Mf(c,n,a)}}function Mf(n,a,c){var d=c.length;if(n==null)return!d;for(n=bt(n);d--;){var v=c[d],P=a[v],F=n[v];if(F===t&&!(v in n)||!P(F))return!1}return!0}function Lf(n,a,c){if(typeof n!="function")throw new Gr(u);return Xs(function(){n.apply(t,c)},a)}function Ks(n,a,c,d){var v=-1,P=eo,F=!0,k=n.length,X=[],ie=a.length;if(!k)return X;c&&(a=Ot(a,Lr(c))),d?(P=nu,F=!1):a.length>=s&&(P=js,F=!1,a=new Di(a));e:for(;++v<k;){var se=n[v],ce=c==null?se:c(se);if(se=d||se!==0?se:0,F&&ce===ce){for(var de=ie;de--;)if(a[de]===ce)continue e;X.push(se)}else P(a,ce,d)||X.push(se)}return X}var ei=ld(mn),jf=ld(bu,!0);function nb(n,a){var c=!0;return ei(n,function(d,v,P){return c=!!a(d,v,P),c}),c}function bo(n,a,c){for(var d=-1,v=n.length;++d<v;){var P=n[d],F=a(P);if(F!=null&&(k===t?F===F&&!Ur(F):c(F,k)))var k=F,X=P}return X}function ib(n,a,c,d){var v=n.length;for(c=He(c),c<0&&(c=-c>v?0:v+c),d=d===t||d>v?v:He(d),d<0&&(d+=v),d=c>d?0:tp(d);c<d;)n[c++]=a;return n}function Uf(n,a){var c=[];return ei(n,function(d,v,P){a(d,v,P)&&c.push(d)}),c}function cr(n,a,c,d,v){var P=-1,F=n.length;for(c||(c=Vb),v||(v=[]);++P<F;){var k=n[P];a>0&&c(k)?a>1?cr(k,a-1,c,d,v):Xn(v,k):d||(v[v.length]=k)}return v}var vu=hd(),kf=hd(!0);function mn(n,a){return n&&vu(n,a,sr)}function bu(n,a){return n&&kf(n,a,sr)}function wo(n,a){return Jn(a,function(c){return Rn(n[c])})}function Pi(n,a){a=ri(a,n);for(var c=0,d=a.length;n!=null&&c<d;)n=n[bn(a[c++])];return c&&c==d?n:t}function Bf(n,a,c){var d=a(n);return Le(n)?d:Xn(d,c(n))}function mr(n){return n==null?n===t?Ve:Ze:xi&&xi in bt(n)?kb(n):Qb(n)}function wu(n,a){return n>a}function sb(n,a){return n!=null&&dt.call(n,a)}function ab(n,a){return n!=null&&a in bt(n)}function ob(n,a,c){return n>=hr(a,c)&&n<nr(a,c)}function _u(n,a,c){for(var d=c?nu:eo,v=n[0].length,P=n.length,F=P,k=te(P),X=1/0,ie=[];F--;){var se=n[F];F&&a&&(se=Ot(se,Lr(a))),X=hr(se.length,X),k[F]=!c&&(a||v>=120&&se.length>=120)?new Di(F&&se):t}se=n[0];var ce=-1,de=k[0];e:for(;++ce<v&&ie.length<X;){var we=se[ce],De=a?a(we):we;if(we=c||we!==0?we:0,!(de?js(de,De):d(ie,De,c))){for(F=P;--F;){var We=k[F];if(!(We?js(We,De):d(n[F],De,c)))continue e}de&&de.push(De),ie.push(we)}}return ie}function cb(n,a,c,d){return mn(n,function(v,P,F){a(d,c(v),P,F)}),d}function Vs(n,a,c){a=ri(a,n),n=Od(n,a);var d=n==null?n:n[bn(Zr(a))];return d==null?t:ir(d,n,c)}function qf(n){return Lt(n)&&mr(n)==he}function ub(n){return Lt(n)&&mr(n)==Pe}function lb(n){return Lt(n)&&mr(n)==q}function Ws(n,a,c,d,v){return n===a?!0:n==null||a==null||!Lt(n)&&!Lt(a)?n!==n&&a!==a:hb(n,a,c,d,Ws,v)}function hb(n,a,c,d,v,P){var F=Le(n),k=Le(a),X=F?_e:fr(n),ie=k?_e:fr(a);X=X==he?ze:X,ie=ie==he?ze:ie;var se=X==ze,ce=ie==ze,de=X==ie;if(de&&ii(n)){if(!ii(a))return!1;F=!0,se=!1}if(de&&!se)return P||(P=new cn),F||hs(n)?_d(n,a,c,d,v,P):jb(n,a,X,c,d,v,P);if(!(c&S)){var we=se&&dt.call(n,"__wrapped__"),De=ce&&dt.call(a,"__wrapped__");if(we||De){var We=we?n.value():n,Ie=De?a.value():a;return P||(P=new cn),v(We,Ie,c,d,P)}}return de?(P||(P=new cn),Ub(n,a,c,d,v,P)):!1}function fb(n){return Lt(n)&&fr(n)==Oe}function Eu(n,a,c,d){var v=c.length,P=v,F=!d;if(n==null)return!P;for(n=bt(n);v--;){var k=c[v];if(F&&k[2]?k[1]!==n[k[0]]:!(k[0]in n))return!1}for(;++v<P;){k=c[v];var X=k[0],ie=n[X],se=k[1];if(F&&k[2]){if(ie===t&&!(X in n))return!1}else{var ce=new cn;if(d)var de=d(ie,se,X,n,a,ce);if(!(de===t?Ws(se,ie,S|N,d,ce):de))return!1}}return!0}function zf(n){if(!Ct(n)||Gb(n))return!1;var a=Rn(n)?fv:Bc;return a.test(Ai(n))}function db(n){return Lt(n)&&mr(n)==Ke}function pb(n){return Lt(n)&&fr(n)==Ae}function gb(n){return Lt(n)&&Lo(n.length)&&!!yt[mr(n)]}function Hf(n){return typeof n=="function"?n:n==null?Tr:typeof n=="object"?Le(n)?Wf(n[0],n[1]):Vf(n):fp(n)}function xu(n){if(!Js(n))return vv(n);var a=[];for(var c in bt(n))dt.call(n,c)&&c!="constructor"&&a.push(c);return a}function yb(n){if(!Ct(n))return Zb(n);var a=Js(n),c=[];for(var d in n)d=="constructor"&&(a||!dt.call(n,d))||c.push(d);return c}function Su(n,a){return n<a}function Kf(n,a){var c=-1,d=Ar(n)?te(n.length):[];return ei(n,function(v,P,F){d[++c]=a(v,P,F)}),d}function Vf(n){var a=Uu(n);return a.length==1&&a[0][2]?Id(a[0][0],a[0][1]):function(c){return c===n||Eu(c,n,a)}}function Wf(n,a){return Bu(n)&&Dd(a)?Id(bn(n),a):function(c){var d=Xu(c,n);return d===t&&d===a?Zu(c,n):Ws(a,d,S|N)}}function _o(n,a,c,d,v){n!==a&&vu(a,function(P,F){if(v||(v=new cn),Ct(P))mb(n,a,F,c,_o,d,v);else{var k=d?d(zu(n,F),P,F+"",n,a,v):t;k===t&&(k=P),yu(n,F,k)}},Cr)}function mb(n,a,c,d,v,P,F){var k=zu(n,c),X=zu(a,c),ie=F.get(X);if(ie){yu(n,c,ie);return}var se=P?P(k,X,c+"",n,a,F):t,ce=se===t;if(ce){var de=Le(X),we=!de&&ii(X),De=!de&&!we&&hs(X);se=X,de||we||De?Le(k)?se=k:qt(k)?se=Or(k):we?(ce=!1,se=sd(X,!0)):De?(ce=!1,se=ad(X,!0)):se=[]:Zs(X)||Ci(X)?(se=k,Ci(k)?se=rp(k):(!Ct(k)||Rn(k))&&(se=Sd(X))):ce=!1}ce&&(F.set(X,se),v(se,X,d,P,F),F.delete(X)),yu(n,c,se)}function Gf(n,a){var c=n.length;if(c)return a+=a<0?c:0,Nn(a,c)?n[a]:t}function Yf(n,a,c){a.length?a=Ot(a,function(P){return Le(P)?function(F){return Pi(F,P.length===1?P[0]:P)}:P}):a=[Tr];var d=-1;a=Ot(a,Lr(Se()));var v=Kf(n,function(P,F,k){var X=Ot(a,function(ie){return ie(P)});return{criteria:X,index:++d,value:P}});return Hm(v,function(P,F){return Cb(P,F,c)})}function vb(n,a){return Jf(n,a,function(c,d){return Zu(n,d)})}function Jf(n,a,c){for(var d=-1,v=a.length,P={};++d<v;){var F=a[d],k=Pi(n,F);c(k,F)&&Gs(P,ri(F,n),k)}return P}function bb(n){return function(a){return Pi(a,n)}}function Du(n,a,c,d){var v=d?zm:es,P=-1,F=a.length,k=n;for(n===a&&(a=Or(a)),c&&(k=Ot(n,Lr(c)));++P<F;)for(var X=0,ie=a[P],se=c?c(ie):ie;(X=v(k,se,X,d))>-1;)k!==n&&lo.call(k,X,1),lo.call(n,X,1);return n}function Xf(n,a){for(var c=n?a.length:0,d=c-1;c--;){var v=a[c];if(c==d||v!==P){var P=v;Nn(v)?lo.call(n,v,1):Au(n,v)}}return n}function Iu(n,a){return n+po(Tf()*(a-n+1))}function wb(n,a,c,d){for(var v=-1,P=nr(fo((a-n)/(c||1)),0),F=te(P);P--;)F[d?P:++v]=n,n+=c;return F}function Pu(n,a){var c="";if(!n||a<1||a>V)return c;do a%2&&(c+=n),a=po(a/2),a&&(n+=n);while(a);return c}function Je(n,a){return Hu(Pd(n,a,Tr),n+"")}function _b(n){return Rf(fs(n))}function Eb(n,a){var c=fs(n);return To(c,Ii(a,0,c.length))}function Gs(n,a,c,d){if(!Ct(n))return n;a=ri(a,n);for(var v=-1,P=a.length,F=P-1,k=n;k!=null&&++v<P;){var X=bn(a[v]),ie=c;if(X==="__proto__"||X==="constructor"||X==="prototype")return n;if(v!=F){var se=k[X];ie=d?d(se,X,k):t,ie===t&&(ie=Ct(se)?se:Nn(a[v+1])?[]:{})}Hs(k,X,ie),k=k[X]}return n}var Zf=go?function(n,a){return go.set(n,a),n}:Tr,xb=ho?function(n,a){return ho(n,"toString",{configurable:!0,enumerable:!1,value:el(a),writable:!0})}:Tr;function Sb(n){return To(fs(n))}function Xr(n,a,c){var d=-1,v=n.length;a<0&&(a=-a>v?0:v+a),c=c>v?v:c,c<0&&(c+=v),v=a>c?0:c-a>>>0,a>>>=0;for(var P=te(v);++d<v;)P[d]=n[d+a];return P}function Db(n,a){var c;return ei(n,function(d,v,P){return c=a(d,v,P),!c}),!!c}function Eo(n,a,c){var d=0,v=n==null?d:n.length;if(typeof a=="number"&&a===a&&v<=ae){for(;d<v;){var P=d+v>>>1,F=n[P];F!==null&&!Ur(F)&&(c?F<=a:F<a)?d=P+1:v=P}return v}return Ou(n,a,Tr,c)}function Ou(n,a,c,d){var v=0,P=n==null?0:n.length;if(P===0)return 0;a=c(a);for(var F=a!==a,k=a===null,X=Ur(a),ie=a===t;v<P;){var se=po((v+P)/2),ce=c(n[se]),de=ce!==t,we=ce===null,De=ce===ce,We=Ur(ce);if(F)var Ie=d||De;else ie?Ie=De&&(d||de):k?Ie=De&&de&&(d||!we):X?Ie=De&&de&&!we&&(d||!We):we||We?Ie=!1:Ie=d?ce<=a:ce<a;Ie?v=se+1:P=se}return hr(P,le)}function Qf(n,a){for(var c=-1,d=n.length,v=0,P=[];++c<d;){var F=n[c],k=a?a(F):F;if(!c||!un(k,X)){var X=k;P[v++]=F===0?0:F}}return P}function ed(n){return typeof n=="number"?n:Ur(n)?ee:+n}function jr(n){if(typeof n=="string")return n;if(Le(n))return Ot(n,jr)+"";if(Ur(n))return $f?$f.call(n):"";var a=n+"";return a=="0"&&1/n==-j?"-0":a}function ti(n,a,c){var d=-1,v=eo,P=n.length,F=!0,k=[],X=k;if(c)F=!1,v=nu;else if(P>=s){var ie=a?null:Mb(n);if(ie)return ro(ie);F=!1,v=js,X=new Di}else X=a?[]:k;e:for(;++d<P;){var se=n[d],ce=a?a(se):se;if(se=c||se!==0?se:0,F&&ce===ce){for(var de=X.length;de--;)if(X[de]===ce)continue e;a&&X.push(ce),k.push(se)}else v(X,ce,c)||(X!==k&&X.push(ce),k.push(se))}return k}function Au(n,a){return a=ri(a,n),n=Od(n,a),n==null||delete n[bn(Zr(a))]}function td(n,a,c,d){return Gs(n,a,c(Pi(n,a)),d)}function xo(n,a,c,d){for(var v=n.length,P=d?v:-1;(d?P--:++P<v)&&a(n[P],P,n););return c?Xr(n,d?0:P,d?P+1:v):Xr(n,d?P+1:0,d?v:P)}function rd(n,a){var c=n;return c instanceof rt&&(c=c.value()),iu(a,function(d,v){return v.func.apply(v.thisArg,Xn([d],v.args))},c)}function Cu(n,a,c){var d=n.length;if(d<2)return d?ti(n[0]):[];for(var v=-1,P=te(d);++v<d;)for(var F=n[v],k=-1;++k<d;)k!=v&&(P[v]=Ks(P[v]||F,n[k],a,c));return ti(cr(P,1),a,c)}function nd(n,a,c){for(var d=-1,v=n.length,P=a.length,F={};++d<v;){var k=d<P?a[d]:t;c(F,n[d],k)}return F}function Tu(n){return qt(n)?n:[]}function $u(n){return typeof n=="function"?n:Tr}function ri(n,a){return Le(n)?n:Bu(n,a)?[n]:$d(ft(n))}var Ib=Je;function ni(n,a,c){var d=n.length;return c=c===t?d:c,!a&&c>=d?n:Xr(n,a,c)}var id=dv||function(n){return st.clearTimeout(n)};function sd(n,a){if(a)return n.slice();var c=n.length,d=If?If(c):new n.constructor(c);return n.copy(d),d}function Nu(n){var a=new n.constructor(n.byteLength);return new co(a).set(new co(n)),a}function Pb(n,a){var c=a?Nu(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.byteLength)}function Ob(n){var a=new n.constructor(n.source,Kr.exec(n));return a.lastIndex=n.lastIndex,a}function Ab(n){return zs?bt(zs.call(n)):{}}function ad(n,a){var c=a?Nu(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.length)}function od(n,a){if(n!==a){var c=n!==t,d=n===null,v=n===n,P=Ur(n),F=a!==t,k=a===null,X=a===a,ie=Ur(a);if(!k&&!ie&&!P&&n>a||P&&F&&X&&!k&&!ie||d&&F&&X||!c&&X||!v)return 1;if(!d&&!P&&!ie&&n<a||ie&&c&&v&&!d&&!P||k&&c&&v||!F&&v||!X)return-1}return 0}function Cb(n,a,c){for(var d=-1,v=n.criteria,P=a.criteria,F=v.length,k=c.length;++d<F;){var X=od(v[d],P[d]);if(X){if(d>=k)return X;var ie=c[d];return X*(ie=="desc"?-1:1)}}return n.index-a.index}function cd(n,a,c,d){for(var v=-1,P=n.length,F=c.length,k=-1,X=a.length,ie=nr(P-F,0),se=te(X+ie),ce=!d;++k<X;)se[k]=a[k];for(;++v<F;)(ce||v<P)&&(se[c[v]]=n[v]);for(;ie--;)se[k++]=n[v++];return se}function ud(n,a,c,d){for(var v=-1,P=n.length,F=-1,k=c.length,X=-1,ie=a.length,se=nr(P-k,0),ce=te(se+ie),de=!d;++v<se;)ce[v]=n[v];for(var we=v;++X<ie;)ce[we+X]=a[X];for(;++F<k;)(de||v<P)&&(ce[we+c[F]]=n[v++]);return ce}function Or(n,a){var c=-1,d=n.length;for(a||(a=te(d));++c<d;)a[c]=n[c];return a}function vn(n,a,c,d){var v=!c;c||(c={});for(var P=-1,F=a.length;++P<F;){var k=a[P],X=d?d(c[k],n[k],k,c,n):t;X===t&&(X=n[k]),v?Cn(c,k,X):Hs(c,k,X)}return c}function Tb(n,a){return vn(n,ku(n),a)}function $b(n,a){return vn(n,Ed(n),a)}function So(n,a){return function(c,d){var v=Le(c)?Lm:eb,P=a?a():{};return v(c,n,Se(d,2),P)}}function cs(n){return Je(function(a,c){var d=-1,v=c.length,P=v>1?c[v-1]:t,F=v>2?c[2]:t;for(P=n.length>3&&typeof P=="function"?(v--,P):t,F&&vr(c[0],c[1],F)&&(P=v<3?t:P,v=1),a=bt(a);++d<v;){var k=c[d];k&&n(a,k,d,P)}return a})}function ld(n,a){return function(c,d){if(c==null)return c;if(!Ar(c))return n(c,d);for(var v=c.length,P=a?v:-1,F=bt(c);(a?P--:++P<v)&&d(F[P],P,F)!==!1;);return c}}function hd(n){return function(a,c,d){for(var v=-1,P=bt(a),F=d(a),k=F.length;k--;){var X=F[n?k:++v];if(c(P[X],X,P)===!1)break}return a}}function Nb(n,a,c){var d=a&R,v=Ys(n);function P(){var F=this&&this!==st&&this instanceof P?v:n;return F.apply(d?c:this,arguments)}return P}function fd(n){return function(a){a=ft(a);var c=ts(a)?on(a):t,d=c?c[0]:a.charAt(0),v=c?ni(c,1).join(""):a.slice(1);return d[n]()+v}}function us(n){return function(a){return iu(lp(up(a).replace(Ms,"")),n,"")}}function Ys(n){return function(){var a=arguments;switch(a.length){case 0:return new n;case 1:return new n(a[0]);case 2:return new n(a[0],a[1]);case 3:return new n(a[0],a[1],a[2]);case 4:return new n(a[0],a[1],a[2],a[3]);case 5:return new n(a[0],a[1],a[2],a[3],a[4]);case 6:return new n(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new n(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=os(n.prototype),d=n.apply(c,a);return Ct(d)?d:c}}function Rb(n,a,c){var d=Ys(n);function v(){for(var P=arguments.length,F=te(P),k=P,X=ls(v);k--;)F[k]=arguments[k];var ie=P<3&&F[0]!==X&&F[P-1]!==X?[]:Zn(F,X);if(P-=ie.length,P<c)return md(n,a,Do,v.placeholder,t,F,ie,t,t,c-P);var se=this&&this!==st&&this instanceof v?d:n;return ir(se,this,F)}return v}function dd(n){return function(a,c,d){var v=bt(a);if(!Ar(a)){var P=Se(c,3);a=sr(a),c=function(k){return P(v[k],k,v)}}var F=n(a,c,d);return F>-1?v[P?a[F]:F]:t}}function pd(n){return $n(function(a){var c=a.length,d=c,v=Yr.prototype.thru;for(n&&a.reverse();d--;){var P=a[d];if(typeof P!="function")throw new Gr(u);if(v&&!F&&Ao(P)=="wrapper")var F=new Yr([],!0)}for(d=F?d:c;++d<c;){P=a[d];var k=Ao(P),X=k=="wrapper"?ju(P):t;X&&qu(X[0])&&X[1]==(h|M|A|w)&&!X[4].length&&X[9]==1?F=F[Ao(X[0])].apply(F,X[3]):F=P.length==1&&qu(P)?F[k]():F.thru(P)}return function(){var ie=arguments,se=ie[0];if(F&&ie.length==1&&Le(se))return F.plant(se).value();for(var ce=0,de=c?a[ce].apply(this,ie):se;++ce<c;)de=a[ce].call(this,de);return de}})}function Do(n,a,c,d,v,P,F,k,X,ie){var se=a&h,ce=a&R,de=a&K,we=a&(M|O),De=a&H,We=de?t:Ys(n);function Ie(){for(var et=arguments.length,at=te(et),kr=et;kr--;)at[kr]=arguments[kr];if(we)var br=ls(Ie),Br=Vm(at,br);if(d&&(at=cd(at,d,v,we)),P&&(at=ud(at,P,F,we)),et-=Br,we&&et<ie){var zt=Zn(at,br);return md(n,a,Do,Ie.placeholder,c,at,zt,k,X,ie-et)}var ln=ce?c:this,Mn=de?ln[n]:n;return et=at.length,k?at=e1(at,k):De&&et>1&&at.reverse(),se&&X<et&&(at.length=X),this&&this!==st&&this instanceof Ie&&(Mn=We||Ys(Mn)),Mn.apply(ln,at)}return Ie}function gd(n,a){return function(c,d){return cb(c,n,a(d),{})}}function Io(n,a){return function(c,d){var v;if(c===t&&d===t)return a;if(c!==t&&(v=c),d!==t){if(v===t)return d;typeof c=="string"||typeof d=="string"?(c=jr(c),d=jr(d)):(c=ed(c),d=ed(d)),v=n(c,d)}return v}}function Ru(n){return $n(function(a){return a=Ot(a,Lr(Se())),Je(function(c){var d=this;return n(a,function(v){return ir(v,d,c)})})})}function Po(n,a){a=a===t?" ":jr(a);var c=a.length;if(c<2)return c?Pu(a,n):a;var d=Pu(a,fo(n/rs(a)));return ts(a)?ni(on(d),0,n).join(""):d.slice(0,n)}function Fb(n,a,c,d){var v=a&R,P=Ys(n);function F(){for(var k=-1,X=arguments.length,ie=-1,se=d.length,ce=te(se+X),de=this&&this!==st&&this instanceof F?P:n;++ie<se;)ce[ie]=d[ie];for(;X--;)ce[ie++]=arguments[++k];return ir(de,v?c:this,ce)}return F}function yd(n){return function(a,c,d){return d&&typeof d!="number"&&vr(a,c,d)&&(c=d=t),a=Fn(a),c===t?(c=a,a=0):c=Fn(c),d=d===t?a<c?1:-1:Fn(d),wb(a,c,d,n)}}function Oo(n){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Qr(a),c=Qr(c)),n(a,c)}}function md(n,a,c,d,v,P,F,k,X,ie){var se=a&M,ce=se?F:t,de=se?t:F,we=se?P:t,De=se?t:P;a|=se?A:_,a&=~(se?_:A),a&$||(a&=~(R|K));var We=[n,a,v,we,ce,De,de,k,X,ie],Ie=c.apply(t,We);return qu(n)&&Ad(Ie,We),Ie.placeholder=d,Cd(Ie,n,a)}function Fu(n){var a=rr[n];return function(c,d){if(c=Qr(c),d=d==null?0:hr(He(d),292),d&&Cf(c)){var v=(ft(c)+"e").split("e"),P=a(v[0]+"e"+(+v[1]+d));return v=(ft(P)+"e").split("e"),+(v[0]+"e"+(+v[1]-d))}return a(c)}}var Mb=ss&&1/ro(new ss([,-0]))[1]==j?function(n){return new ss(n)}:nl;function vd(n){return function(a){var c=fr(a);return c==Oe?hu(a):c==Ae?Qm(a):Km(a,n(a))}}function Tn(n,a,c,d,v,P,F,k){var X=a&K;if(!X&&typeof n!="function")throw new Gr(u);var ie=d?d.length:0;if(ie||(a&=~(A|_),d=v=t),F=F===t?F:nr(He(F),0),k=k===t?k:He(k),ie-=v?v.length:0,a&_){var se=d,ce=v;d=v=t}var de=X?t:ju(n),we=[n,a,c,d,v,se,ce,P,F,k];if(de&&Xb(we,de),n=we[0],a=we[1],c=we[2],d=we[3],v=we[4],k=we[9]=we[9]===t?X?0:n.length:nr(we[9]-ie,0),!k&&a&(M|O)&&(a&=~(M|O)),!a||a==R)var De=Nb(n,a,c);else a==M||a==O?De=Rb(n,a,k):(a==A||a==(R|A))&&!v.length?De=Fb(n,a,c,d):De=Do.apply(t,we);var We=de?Zf:Ad;return Cd(We(De,we),n,a)}function bd(n,a,c,d){return n===t||un(n,is[c])&&!dt.call(d,c)?a:n}function wd(n,a,c,d,v,P){return Ct(n)&&Ct(a)&&(P.set(a,n),_o(n,a,t,wd,P),P.delete(a)),n}function Lb(n){return Zs(n)?t:n}function _d(n,a,c,d,v,P){var F=c&S,k=n.length,X=a.length;if(k!=X&&!(F&&X>k))return!1;var ie=P.get(n),se=P.get(a);if(ie&&se)return ie==a&&se==n;var ce=-1,de=!0,we=c&N?new Di:t;for(P.set(n,a),P.set(a,n);++ce<k;){var De=n[ce],We=a[ce];if(d)var Ie=F?d(We,De,ce,a,n,P):d(De,We,ce,n,a,P);if(Ie!==t){if(Ie)continue;de=!1;break}if(we){if(!su(a,function(et,at){if(!js(we,at)&&(De===et||v(De,et,c,d,P)))return we.push(at)})){de=!1;break}}else if(!(De===We||v(De,We,c,d,P))){de=!1;break}}return P.delete(n),P.delete(a),de}function jb(n,a,c,d,v,P,F){switch(c){case Re:if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case Pe:return!(n.byteLength!=a.byteLength||!P(new co(n),new co(a)));case Z:case q:case Ge:return un(+n,+a);case L:return n.name==a.name&&n.message==a.message;case Ke:case Ue:return n==a+"";case Oe:var k=hu;case Ae:var X=d&S;if(k||(k=ro),n.size!=a.size&&!X)return!1;var ie=F.get(n);if(ie)return ie==a;d|=N,F.set(n,a);var se=_d(k(n),k(a),d,v,P,F);return F.delete(n),se;case ke:if(zs)return zs.call(n)==zs.call(a)}return!1}function Ub(n,a,c,d,v,P){var F=c&S,k=Mu(n),X=k.length,ie=Mu(a),se=ie.length;if(X!=se&&!F)return!1;for(var ce=X;ce--;){var de=k[ce];if(!(F?de in a:dt.call(a,de)))return!1}var we=P.get(n),De=P.get(a);if(we&&De)return we==a&&De==n;var We=!0;P.set(n,a),P.set(a,n);for(var Ie=F;++ce<X;){de=k[ce];var et=n[de],at=a[de];if(d)var kr=F?d(at,et,de,a,n,P):d(et,at,de,n,a,P);if(!(kr===t?et===at||v(et,at,c,d,P):kr)){We=!1;break}Ie||(Ie=de=="constructor")}if(We&&!Ie){var br=n.constructor,Br=a.constructor;br!=Br&&"constructor"in n&&"constructor"in a&&!(typeof br=="function"&&br instanceof br&&typeof Br=="function"&&Br instanceof Br)&&(We=!1)}return P.delete(n),P.delete(a),We}function $n(n){return Hu(Pd(n,t,Md),n+"")}function Mu(n){return Bf(n,sr,ku)}function Lu(n){return Bf(n,Cr,Ed)}var ju=go?function(n){return go.get(n)}:nl;function Ao(n){for(var a=n.name+"",c=as[a],d=dt.call(as,a)?c.length:0;d--;){var v=c[d],P=v.func;if(P==null||P==n)return v.name}return a}function ls(n){var a=dt.call(I,"placeholder")?I:n;return a.placeholder}function Se(){var n=I.iteratee||tl;return n=n===tl?Hf:n,arguments.length?n(arguments[0],arguments[1]):n}function Co(n,a){var c=n.__data__;return Wb(a)?c[typeof a=="string"?"string":"hash"]:c.map}function Uu(n){for(var a=sr(n),c=a.length;c--;){var d=a[c],v=n[d];a[c]=[d,v,Dd(v)]}return a}function Oi(n,a){var c=Jm(n,a);return zf(c)?c:t}function kb(n){var a=dt.call(n,xi),c=n[xi];try{n[xi]=t;var d=!0}catch{}var v=ao.call(n);return d&&(a?n[xi]=c:delete n[xi]),v}var ku=du?function(n){return n==null?[]:(n=bt(n),Jn(du(n),function(a){return Of.call(n,a)}))}:il,Ed=du?function(n){for(var a=[];n;)Xn(a,ku(n)),n=uo(n);return a}:il,fr=mr;(pu&&fr(new pu(new ArrayBuffer(1)))!=Re||ks&&fr(new ks)!=Oe||gu&&fr(gu.resolve())!=St||ss&&fr(new ss)!=Ae||Bs&&fr(new Bs)!=Ne)&&(fr=function(n){var a=mr(n),c=a==ze?n.constructor:t,d=c?Ai(c):"";if(d)switch(d){case Ev:return Re;case xv:return Oe;case Sv:return St;case Dv:return Ae;case Iv:return Ne}return a});function Bb(n,a,c){for(var d=-1,v=c.length;++d<v;){var P=c[d],F=P.size;switch(P.type){case"drop":n+=F;break;case"dropRight":a-=F;break;case"take":a=hr(a,n+F);break;case"takeRight":n=nr(n,a-F);break}}return{start:n,end:a}}function qb(n){var a=n.match(wt);return a?a[1].split(Jt):[]}function xd(n,a,c){a=ri(a,n);for(var d=-1,v=a.length,P=!1;++d<v;){var F=bn(a[d]);if(!(P=n!=null&&c(n,F)))break;n=n[F]}return P||++d!=v?P:(v=n==null?0:n.length,!!v&&Lo(v)&&Nn(F,v)&&(Le(n)||Ci(n)))}function zb(n){var a=n.length,c=new n.constructor(a);return a&&typeof n[0]=="string"&&dt.call(n,"index")&&(c.index=n.index,c.input=n.input),c}function Sd(n){return typeof n.constructor=="function"&&!Js(n)?os(uo(n)):{}}function Hb(n,a,c){var d=n.constructor;switch(a){case Pe:return Nu(n);case Z:case q:return new d(+n);case Re:return Pb(n,c);case Ye:case $e:case Qe:case tt:case ct:case ut:case it:case pr:case Ir:return ad(n,c);case Oe:return new d;case Ge:case Ue:return new d(n);case Ke:return Ob(n);case Ae:return new d;case ke:return Ab(n)}}function Kb(n,a){var c=a.length;if(!c)return n;var d=c-1;return a[d]=(c>1?"& ":"")+a[d],a=a.join(c>2?", ":" "),n.replace(Mt,`{
/* [wrapped with `+a+`] */
`)}function Vb(n){return Le(n)||Ci(n)||!!(Af&&n&&n[Af])}function Nn(n,a){var c=typeof n;return a=a??V,!!a&&(c=="number"||c!="symbol"&&zc.test(n))&&n>-1&&n%1==0&&n<a}function vr(n,a,c){if(!Ct(c))return!1;var d=typeof a;return(d=="number"?Ar(c)&&Nn(a,c.length):d=="string"&&a in c)?un(c[a],n):!1}function Bu(n,a){if(Le(n))return!1;var c=typeof n;return c=="number"||c=="symbol"||c=="boolean"||n==null||Ur(n)?!0:Wt.test(n)||!Pt.test(n)||a!=null&&n in bt(a)}function Wb(n){var a=typeof n;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null}function qu(n){var a=Ao(n),c=I[a];if(typeof c!="function"||!(a in rt.prototype))return!1;if(n===c)return!0;var d=ju(c);return!!d&&n===d[0]}function Gb(n){return!!Df&&Df in n}var Yb=io?Rn:sl;function Js(n){var a=n&&n.constructor,c=typeof a=="function"&&a.prototype||is;return n===c}function Dd(n){return n===n&&!Ct(n)}function Id(n,a){return function(c){return c==null?!1:c[n]===a&&(a!==t||n in bt(c))}}function Jb(n){var a=Fo(n,function(d){return c.size===g&&c.clear(),d}),c=a.cache;return a}function Xb(n,a){var c=n[1],d=a[1],v=c|d,P=v<(R|K|h),F=d==h&&c==M||d==h&&c==w&&n[7].length<=a[8]||d==(h|w)&&a[7].length<=a[8]&&c==M;if(!(P||F))return n;d&R&&(n[2]=a[2],v|=c&R?0:$);var k=a[3];if(k){var X=n[3];n[3]=X?cd(X,k,a[4]):k,n[4]=X?Zn(n[3],y):a[4]}return k=a[5],k&&(X=n[5],n[5]=X?ud(X,k,a[6]):k,n[6]=X?Zn(n[5],y):a[6]),k=a[7],k&&(n[7]=k),d&h&&(n[8]=n[8]==null?a[8]:hr(n[8],a[8])),n[9]==null&&(n[9]=a[9]),n[0]=a[0],n[1]=v,n}function Zb(n){var a=[];if(n!=null)for(var c in bt(n))a.push(c);return a}function Qb(n){return ao.call(n)}function Pd(n,a,c){return a=nr(a===t?n.length-1:a,0),function(){for(var d=arguments,v=-1,P=nr(d.length-a,0),F=te(P);++v<P;)F[v]=d[a+v];v=-1;for(var k=te(a+1);++v<a;)k[v]=d[v];return k[a]=c(F),ir(n,this,k)}}function Od(n,a){return a.length<2?n:Pi(n,Xr(a,0,-1))}function e1(n,a){for(var c=n.length,d=hr(a.length,c),v=Or(n);d--;){var P=a[d];n[d]=Nn(P,c)?v[P]:t}return n}function zu(n,a){if(!(a==="constructor"&&typeof n[a]=="function")&&a!="__proto__")return n[a]}var Ad=Td(Zf),Xs=gv||function(n,a){return st.setTimeout(n,a)},Hu=Td(xb);function Cd(n,a,c){var d=a+"";return Hu(n,Kb(d,t1(qb(d),c)))}function Td(n){var a=0,c=0;return function(){var d=bv(),v=J-(d-c);if(c=d,v>0){if(++a>=Y)return arguments[0]}else a=0;return n.apply(t,arguments)}}function To(n,a){var c=-1,d=n.length,v=d-1;for(a=a===t?d:a;++c<a;){var P=Iu(c,v),F=n[P];n[P]=n[c],n[c]=F}return n.length=a,n}var $d=Jb(function(n){var a=[];return n.charCodeAt(0)===46&&a.push(""),n.replace(Gt,function(c,d,v,P){a.push(v?P.replace(Lc,"$1"):d||c)}),a});function bn(n){if(typeof n=="string"||Ur(n))return n;var a=n+"";return a=="0"&&1/n==-j?"-0":a}function Ai(n){if(n!=null){try{return so.call(n)}catch{}try{return n+""}catch{}}return""}function t1(n,a){return Wr(be,function(c){var d="_."+c[0];a&c[1]&&!eo(n,d)&&n.push(d)}),n.sort()}function Nd(n){if(n instanceof rt)return n.clone();var a=new Yr(n.__wrapped__,n.__chain__);return a.__actions__=Or(n.__actions__),a.__index__=n.__index__,a.__values__=n.__values__,a}function r1(n,a,c){(c?vr(n,a,c):a===t)?a=1:a=nr(He(a),0);var d=n==null?0:n.length;if(!d||a<1)return[];for(var v=0,P=0,F=te(fo(d/a));v<d;)F[P++]=Xr(n,v,v+=a);return F}function n1(n){for(var a=-1,c=n==null?0:n.length,d=0,v=[];++a<c;){var P=n[a];P&&(v[d++]=P)}return v}function i1(){var n=arguments.length;if(!n)return[];for(var a=te(n-1),c=arguments[0],d=n;d--;)a[d-1]=arguments[d];return Xn(Le(c)?Or(c):[c],cr(a,1))}var s1=Je(function(n,a){return qt(n)?Ks(n,cr(a,1,qt,!0)):[]}),a1=Je(function(n,a){var c=Zr(a);return qt(c)&&(c=t),qt(n)?Ks(n,cr(a,1,qt,!0),Se(c,2)):[]}),o1=Je(function(n,a){var c=Zr(a);return qt(c)&&(c=t),qt(n)?Ks(n,cr(a,1,qt,!0),t,c):[]});function c1(n,a,c){var d=n==null?0:n.length;return d?(a=c||a===t?1:He(a),Xr(n,a<0?0:a,d)):[]}function u1(n,a,c){var d=n==null?0:n.length;return d?(a=c||a===t?1:He(a),a=d-a,Xr(n,0,a<0?0:a)):[]}function l1(n,a){return n&&n.length?xo(n,Se(a,3),!0,!0):[]}function h1(n,a){return n&&n.length?xo(n,Se(a,3),!0):[]}function f1(n,a,c,d){var v=n==null?0:n.length;return v?(c&&typeof c!="number"&&vr(n,a,c)&&(c=0,d=v),ib(n,a,c,d)):[]}function Rd(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var v=c==null?0:He(c);return v<0&&(v=nr(d+v,0)),to(n,Se(a,3),v)}function Fd(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var v=d-1;return c!==t&&(v=He(c),v=c<0?nr(d+v,0):hr(v,d-1)),to(n,Se(a,3),v,!0)}function Md(n){var a=n==null?0:n.length;return a?cr(n,1):[]}function d1(n){var a=n==null?0:n.length;return a?cr(n,j):[]}function p1(n,a){var c=n==null?0:n.length;return c?(a=a===t?1:He(a),cr(n,a)):[]}function g1(n){for(var a=-1,c=n==null?0:n.length,d={};++a<c;){var v=n[a];d[v[0]]=v[1]}return d}function Ld(n){return n&&n.length?n[0]:t}function y1(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var v=c==null?0:He(c);return v<0&&(v=nr(d+v,0)),es(n,a,v)}function m1(n){var a=n==null?0:n.length;return a?Xr(n,0,-1):[]}var v1=Je(function(n){var a=Ot(n,Tu);return a.length&&a[0]===n[0]?_u(a):[]}),b1=Je(function(n){var a=Zr(n),c=Ot(n,Tu);return a===Zr(c)?a=t:c.pop(),c.length&&c[0]===n[0]?_u(c,Se(a,2)):[]}),w1=Je(function(n){var a=Zr(n),c=Ot(n,Tu);return a=typeof a=="function"?a:t,a&&c.pop(),c.length&&c[0]===n[0]?_u(c,t,a):[]});function _1(n,a){return n==null?"":mv.call(n,a)}function Zr(n){var a=n==null?0:n.length;return a?n[a-1]:t}function E1(n,a,c){var d=n==null?0:n.length;if(!d)return-1;var v=d;return c!==t&&(v=He(c),v=v<0?nr(d+v,0):hr(v,d-1)),a===a?tv(n,a,v):to(n,mf,v,!0)}function x1(n,a){return n&&n.length?Gf(n,He(a)):t}var S1=Je(jd);function jd(n,a){return n&&n.length&&a&&a.length?Du(n,a):n}function D1(n,a,c){return n&&n.length&&a&&a.length?Du(n,a,Se(c,2)):n}function I1(n,a,c){return n&&n.length&&a&&a.length?Du(n,a,t,c):n}var P1=$n(function(n,a){var c=n==null?0:n.length,d=mu(n,a);return Xf(n,Ot(a,function(v){return Nn(v,c)?+v:v}).sort(od)),d});function O1(n,a){var c=[];if(!(n&&n.length))return c;var d=-1,v=[],P=n.length;for(a=Se(a,3);++d<P;){var F=n[d];a(F,d,n)&&(c.push(F),v.push(d))}return Xf(n,v),c}function Ku(n){return n==null?n:_v.call(n)}function A1(n,a,c){var d=n==null?0:n.length;return d?(c&&typeof c!="number"&&vr(n,a,c)?(a=0,c=d):(a=a==null?0:He(a),c=c===t?d:He(c)),Xr(n,a,c)):[]}function C1(n,a){return Eo(n,a)}function T1(n,a,c){return Ou(n,a,Se(c,2))}function $1(n,a){var c=n==null?0:n.length;if(c){var d=Eo(n,a);if(d<c&&un(n[d],a))return d}return-1}function N1(n,a){return Eo(n,a,!0)}function R1(n,a,c){return Ou(n,a,Se(c,2),!0)}function F1(n,a){var c=n==null?0:n.length;if(c){var d=Eo(n,a,!0)-1;if(un(n[d],a))return d}return-1}function M1(n){return n&&n.length?Qf(n):[]}function L1(n,a){return n&&n.length?Qf(n,Se(a,2)):[]}function j1(n){var a=n==null?0:n.length;return a?Xr(n,1,a):[]}function U1(n,a,c){return n&&n.length?(a=c||a===t?1:He(a),Xr(n,0,a<0?0:a)):[]}function k1(n,a,c){var d=n==null?0:n.length;return d?(a=c||a===t?1:He(a),a=d-a,Xr(n,a<0?0:a,d)):[]}function B1(n,a){return n&&n.length?xo(n,Se(a,3),!1,!0):[]}function q1(n,a){return n&&n.length?xo(n,Se(a,3)):[]}var z1=Je(function(n){return ti(cr(n,1,qt,!0))}),H1=Je(function(n){var a=Zr(n);return qt(a)&&(a=t),ti(cr(n,1,qt,!0),Se(a,2))}),K1=Je(function(n){var a=Zr(n);return a=typeof a=="function"?a:t,ti(cr(n,1,qt,!0),t,a)});function V1(n){return n&&n.length?ti(n):[]}function W1(n,a){return n&&n.length?ti(n,Se(a,2)):[]}function G1(n,a){return a=typeof a=="function"?a:t,n&&n.length?ti(n,t,a):[]}function Vu(n){if(!(n&&n.length))return[];var a=0;return n=Jn(n,function(c){if(qt(c))return a=nr(c.length,a),!0}),uu(a,function(c){return Ot(n,au(c))})}function Ud(n,a){if(!(n&&n.length))return[];var c=Vu(n);return a==null?c:Ot(c,function(d){return ir(a,t,d)})}var Y1=Je(function(n,a){return qt(n)?Ks(n,a):[]}),J1=Je(function(n){return Cu(Jn(n,qt))}),X1=Je(function(n){var a=Zr(n);return qt(a)&&(a=t),Cu(Jn(n,qt),Se(a,2))}),Z1=Je(function(n){var a=Zr(n);return a=typeof a=="function"?a:t,Cu(Jn(n,qt),t,a)}),Q1=Je(Vu);function ew(n,a){return nd(n||[],a||[],Hs)}function tw(n,a){return nd(n||[],a||[],Gs)}var rw=Je(function(n){var a=n.length,c=a>1?n[a-1]:t;return c=typeof c=="function"?(n.pop(),c):t,Ud(n,c)});function kd(n){var a=I(n);return a.__chain__=!0,a}function nw(n,a){return a(n),n}function $o(n,a){return a(n)}var iw=$n(function(n){var a=n.length,c=a?n[0]:0,d=this.__wrapped__,v=function(P){return mu(P,n)};return a>1||this.__actions__.length||!(d instanceof rt)||!Nn(c)?this.thru(v):(d=d.slice(c,+c+(a?1:0)),d.__actions__.push({func:$o,args:[v],thisArg:t}),new Yr(d,this.__chain__).thru(function(P){return a&&!P.length&&P.push(t),P}))});function sw(){return kd(this)}function aw(){return new Yr(this.value(),this.__chain__)}function ow(){this.__values__===t&&(this.__values__=ep(this.value()));var n=this.__index__>=this.__values__.length,a=n?t:this.__values__[this.__index__++];return{done:n,value:a}}function cw(){return this}function uw(n){for(var a,c=this;c instanceof mo;){var d=Nd(c);d.__index__=0,d.__values__=t,a?v.__wrapped__=d:a=d;var v=d;c=c.__wrapped__}return v.__wrapped__=n,a}function lw(){var n=this.__wrapped__;if(n instanceof rt){var a=n;return this.__actions__.length&&(a=new rt(this)),a=a.reverse(),a.__actions__.push({func:$o,args:[Ku],thisArg:t}),new Yr(a,this.__chain__)}return this.thru(Ku)}function hw(){return rd(this.__wrapped__,this.__actions__)}var fw=So(function(n,a,c){dt.call(n,c)?++n[c]:Cn(n,c,1)});function dw(n,a,c){var d=Le(n)?gf:nb;return c&&vr(n,a,c)&&(a=t),d(n,Se(a,3))}function pw(n,a){var c=Le(n)?Jn:Uf;return c(n,Se(a,3))}var gw=dd(Rd),yw=dd(Fd);function mw(n,a){return cr(No(n,a),1)}function vw(n,a){return cr(No(n,a),j)}function bw(n,a,c){return c=c===t?1:He(c),cr(No(n,a),c)}function Bd(n,a){var c=Le(n)?Wr:ei;return c(n,Se(a,3))}function qd(n,a){var c=Le(n)?jm:jf;return c(n,Se(a,3))}var ww=So(function(n,a,c){dt.call(n,c)?n[c].push(a):Cn(n,c,[a])});function _w(n,a,c,d){n=Ar(n)?n:fs(n),c=c&&!d?He(c):0;var v=n.length;return c<0&&(c=nr(v+c,0)),jo(n)?c<=v&&n.indexOf(a,c)>-1:!!v&&es(n,a,c)>-1}var Ew=Je(function(n,a,c){var d=-1,v=typeof a=="function",P=Ar(n)?te(n.length):[];return ei(n,function(F){P[++d]=v?ir(a,F,c):Vs(F,a,c)}),P}),xw=So(function(n,a,c){Cn(n,c,a)});function No(n,a){var c=Le(n)?Ot:Kf;return c(n,Se(a,3))}function Sw(n,a,c,d){return n==null?[]:(Le(a)||(a=a==null?[]:[a]),c=d?t:c,Le(c)||(c=c==null?[]:[c]),Yf(n,a,c))}var Dw=So(function(n,a,c){n[c?0:1].push(a)},function(){return[[],[]]});function Iw(n,a,c){var d=Le(n)?iu:bf,v=arguments.length<3;return d(n,Se(a,4),c,v,ei)}function Pw(n,a,c){var d=Le(n)?Um:bf,v=arguments.length<3;return d(n,Se(a,4),c,v,jf)}function Ow(n,a){var c=Le(n)?Jn:Uf;return c(n,Mo(Se(a,3)))}function Aw(n){var a=Le(n)?Rf:_b;return a(n)}function Cw(n,a,c){(c?vr(n,a,c):a===t)?a=1:a=He(a);var d=Le(n)?Zv:Eb;return d(n,a)}function Tw(n){var a=Le(n)?Qv:Sb;return a(n)}function $w(n){if(n==null)return 0;if(Ar(n))return jo(n)?rs(n):n.length;var a=fr(n);return a==Oe||a==Ae?n.size:xu(n).length}function Nw(n,a,c){var d=Le(n)?su:Db;return c&&vr(n,a,c)&&(a=t),d(n,Se(a,3))}var Rw=Je(function(n,a){if(n==null)return[];var c=a.length;return c>1&&vr(n,a[0],a[1])?a=[]:c>2&&vr(a[0],a[1],a[2])&&(a=[a[0]]),Yf(n,cr(a,1),[])}),Ro=pv||function(){return st.Date.now()};function Fw(n,a){if(typeof a!="function")throw new Gr(u);return n=He(n),function(){if(--n<1)return a.apply(this,arguments)}}function zd(n,a,c){return a=c?t:a,a=n&&a==null?n.length:a,Tn(n,h,t,t,t,t,a)}function Hd(n,a){var c;if(typeof a!="function")throw new Gr(u);return n=He(n),function(){return--n>0&&(c=a.apply(this,arguments)),n<=1&&(a=t),c}}var Wu=Je(function(n,a,c){var d=R;if(c.length){var v=Zn(c,ls(Wu));d|=A}return Tn(n,d,a,c,v)}),Kd=Je(function(n,a,c){var d=R|K;if(c.length){var v=Zn(c,ls(Kd));d|=A}return Tn(a,d,n,c,v)});function Vd(n,a,c){a=c?t:a;var d=Tn(n,M,t,t,t,t,t,a);return d.placeholder=Vd.placeholder,d}function Wd(n,a,c){a=c?t:a;var d=Tn(n,O,t,t,t,t,t,a);return d.placeholder=Wd.placeholder,d}function Gd(n,a,c){var d,v,P,F,k,X,ie=0,se=!1,ce=!1,de=!0;if(typeof n!="function")throw new Gr(u);a=Qr(a)||0,Ct(c)&&(se=!!c.leading,ce="maxWait"in c,P=ce?nr(Qr(c.maxWait)||0,a):P,de="trailing"in c?!!c.trailing:de);function we(zt){var ln=d,Mn=v;return d=v=t,ie=zt,F=n.apply(Mn,ln),F}function De(zt){return ie=zt,k=Xs(et,a),se?we(zt):F}function We(zt){var ln=zt-X,Mn=zt-ie,dp=a-ln;return ce?hr(dp,P-Mn):dp}function Ie(zt){var ln=zt-X,Mn=zt-ie;return X===t||ln>=a||ln<0||ce&&Mn>=P}function et(){var zt=Ro();if(Ie(zt))return at(zt);k=Xs(et,We(zt))}function at(zt){return k=t,de&&d?we(zt):(d=v=t,F)}function kr(){k!==t&&id(k),ie=0,d=X=v=k=t}function br(){return k===t?F:at(Ro())}function Br(){var zt=Ro(),ln=Ie(zt);if(d=arguments,v=this,X=zt,ln){if(k===t)return De(X);if(ce)return id(k),k=Xs(et,a),we(X)}return k===t&&(k=Xs(et,a)),F}return Br.cancel=kr,Br.flush=br,Br}var Mw=Je(function(n,a){return Lf(n,1,a)}),Lw=Je(function(n,a,c){return Lf(n,Qr(a)||0,c)});function jw(n){return Tn(n,H)}function Fo(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new Gr(u);var c=function(){var d=arguments,v=a?a.apply(this,d):d[0],P=c.cache;if(P.has(v))return P.get(v);var F=n.apply(this,d);return c.cache=P.set(v,F)||P,F};return c.cache=new(Fo.Cache||An),c}Fo.Cache=An;function Mo(n){if(typeof n!="function")throw new Gr(u);return function(){var a=arguments;switch(a.length){case 0:return!n.call(this);case 1:return!n.call(this,a[0]);case 2:return!n.call(this,a[0],a[1]);case 3:return!n.call(this,a[0],a[1],a[2])}return!n.apply(this,a)}}function Uw(n){return Hd(2,n)}var kw=Ib(function(n,a){a=a.length==1&&Le(a[0])?Ot(a[0],Lr(Se())):Ot(cr(a,1),Lr(Se()));var c=a.length;return Je(function(d){for(var v=-1,P=hr(d.length,c);++v<P;)d[v]=a[v].call(this,d[v]);return ir(n,this,d)})}),Gu=Je(function(n,a){var c=Zn(a,ls(Gu));return Tn(n,A,t,a,c)}),Yd=Je(function(n,a){var c=Zn(a,ls(Yd));return Tn(n,_,t,a,c)}),Bw=$n(function(n,a){return Tn(n,w,t,t,t,a)});function qw(n,a){if(typeof n!="function")throw new Gr(u);return a=a===t?a:He(a),Je(n,a)}function zw(n,a){if(typeof n!="function")throw new Gr(u);return a=a==null?0:nr(He(a),0),Je(function(c){var d=c[a],v=ni(c,0,a);return d&&Xn(v,d),ir(n,this,v)})}function Hw(n,a,c){var d=!0,v=!0;if(typeof n!="function")throw new Gr(u);return Ct(c)&&(d="leading"in c?!!c.leading:d,v="trailing"in c?!!c.trailing:v),Gd(n,a,{leading:d,maxWait:a,trailing:v})}function Kw(n){return zd(n,1)}function Vw(n,a){return Gu($u(a),n)}function Ww(){if(!arguments.length)return[];var n=arguments[0];return Le(n)?n:[n]}function Gw(n){return Jr(n,D)}function Yw(n,a){return a=typeof a=="function"?a:t,Jr(n,D,a)}function Jw(n){return Jr(n,b|D)}function Xw(n,a){return a=typeof a=="function"?a:t,Jr(n,b|D,a)}function Zw(n,a){return a==null||Mf(n,a,sr(a))}function un(n,a){return n===a||n!==n&&a!==a}var Qw=Oo(wu),e_=Oo(function(n,a){return n>=a}),Ci=qf(function(){return arguments}())?qf:function(n){return Lt(n)&&dt.call(n,"callee")&&!Of.call(n,"callee")},Le=te.isArray,t_=yr?Lr(yr):ub;function Ar(n){return n!=null&&Lo(n.length)&&!Rn(n)}function qt(n){return Lt(n)&&Ar(n)}function r_(n){return n===!0||n===!1||Lt(n)&&mr(n)==Z}var ii=yv||sl,n_=an?Lr(an):lb;function i_(n){return Lt(n)&&n.nodeType===1&&!Zs(n)}function s_(n){if(n==null)return!0;if(Ar(n)&&(Le(n)||typeof n=="string"||typeof n.splice=="function"||ii(n)||hs(n)||Ci(n)))return!n.length;var a=fr(n);if(a==Oe||a==Ae)return!n.size;if(Js(n))return!xu(n).length;for(var c in n)if(dt.call(n,c))return!1;return!0}function a_(n,a){return Ws(n,a)}function o_(n,a,c){c=typeof c=="function"?c:t;var d=c?c(n,a):t;return d===t?Ws(n,a,t,c):!!d}function Yu(n){if(!Lt(n))return!1;var a=mr(n);return a==L||a==p||typeof n.message=="string"&&typeof n.name=="string"&&!Zs(n)}function c_(n){return typeof n=="number"&&Cf(n)}function Rn(n){if(!Ct(n))return!1;var a=mr(n);return a==ue||a==ge||a==Q||a==Dt}function Jd(n){return typeof n=="number"&&n==He(n)}function Lo(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=V}function Ct(n){var a=typeof n;return n!=null&&(a=="object"||a=="function")}function Lt(n){return n!=null&&typeof n=="object"}var Xd=Vr?Lr(Vr):fb;function u_(n,a){return n===a||Eu(n,a,Uu(a))}function l_(n,a,c){return c=typeof c=="function"?c:t,Eu(n,a,Uu(a),c)}function h_(n){return Zd(n)&&n!=+n}function f_(n){if(Yb(n))throw new Fe(o);return zf(n)}function d_(n){return n===null}function p_(n){return n==null}function Zd(n){return typeof n=="number"||Lt(n)&&mr(n)==Ge}function Zs(n){if(!Lt(n)||mr(n)!=ze)return!1;var a=uo(n);if(a===null)return!0;var c=dt.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&so.call(c)==lv}var Ju=yn?Lr(yn):db;function g_(n){return Jd(n)&&n>=-V&&n<=V}var Qd=Ls?Lr(Ls):pb;function jo(n){return typeof n=="string"||!Le(n)&&Lt(n)&&mr(n)==Ue}function Ur(n){return typeof n=="symbol"||Lt(n)&&mr(n)==ke}var hs=Ei?Lr(Ei):gb;function y_(n){return n===t}function m_(n){return Lt(n)&&fr(n)==Ne}function v_(n){return Lt(n)&&mr(n)==Be}var b_=Oo(Su),w_=Oo(function(n,a){return n<=a});function ep(n){if(!n)return[];if(Ar(n))return jo(n)?on(n):Or(n);if(Us&&n[Us])return Zm(n[Us]());var a=fr(n),c=a==Oe?hu:a==Ae?ro:fs;return c(n)}function Fn(n){if(!n)return n===0?n:0;if(n=Qr(n),n===j||n===-j){var a=n<0?-1:1;return a*U}return n===n?n:0}function He(n){var a=Fn(n),c=a%1;return a===a?c?a-c:a:0}function tp(n){return n?Ii(He(n),0,re):0}function Qr(n){if(typeof n=="number")return n;if(Ur(n))return ee;if(Ct(n)){var a=typeof n.valueOf=="function"?n.valueOf():n;n=Ct(a)?a+"":a}if(typeof n!="string")return n===0?n:+n;n=wf(n);var c=kc.test(n);return c||qc.test(n)?Me(n.slice(2),c?2:8):Uc.test(n)?ee:+n}function rp(n){return vn(n,Cr(n))}function __(n){return n?Ii(He(n),-V,V):n===0?n:0}function ft(n){return n==null?"":jr(n)}var E_=cs(function(n,a){if(Js(a)||Ar(a)){vn(a,sr(a),n);return}for(var c in a)dt.call(a,c)&&Hs(n,c,a[c])}),np=cs(function(n,a){vn(a,Cr(a),n)}),Uo=cs(function(n,a,c,d){vn(a,Cr(a),n,d)}),x_=cs(function(n,a,c,d){vn(a,sr(a),n,d)}),S_=$n(mu);function D_(n,a){var c=os(n);return a==null?c:Ff(c,a)}var I_=Je(function(n,a){n=bt(n);var c=-1,d=a.length,v=d>2?a[2]:t;for(v&&vr(a[0],a[1],v)&&(d=1);++c<d;)for(var P=a[c],F=Cr(P),k=-1,X=F.length;++k<X;){var ie=F[k],se=n[ie];(se===t||un(se,is[ie])&&!dt.call(n,ie))&&(n[ie]=P[ie])}return n}),P_=Je(function(n){return n.push(t,wd),ir(ip,t,n)});function O_(n,a){return yf(n,Se(a,3),mn)}function A_(n,a){return yf(n,Se(a,3),bu)}function C_(n,a){return n==null?n:vu(n,Se(a,3),Cr)}function T_(n,a){return n==null?n:kf(n,Se(a,3),Cr)}function $_(n,a){return n&&mn(n,Se(a,3))}function N_(n,a){return n&&bu(n,Se(a,3))}function R_(n){return n==null?[]:wo(n,sr(n))}function F_(n){return n==null?[]:wo(n,Cr(n))}function Xu(n,a,c){var d=n==null?t:Pi(n,a);return d===t?c:d}function M_(n,a){return n!=null&&xd(n,a,sb)}function Zu(n,a){return n!=null&&xd(n,a,ab)}var L_=gd(function(n,a,c){a!=null&&typeof a.toString!="function"&&(a=ao.call(a)),n[a]=c},el(Tr)),j_=gd(function(n,a,c){a!=null&&typeof a.toString!="function"&&(a=ao.call(a)),dt.call(n,a)?n[a].push(c):n[a]=[c]},Se),U_=Je(Vs);function sr(n){return Ar(n)?Nf(n):xu(n)}function Cr(n){return Ar(n)?Nf(n,!0):yb(n)}function k_(n,a){var c={};return a=Se(a,3),mn(n,function(d,v,P){Cn(c,a(d,v,P),d)}),c}function B_(n,a){var c={};return a=Se(a,3),mn(n,function(d,v,P){Cn(c,v,a(d,v,P))}),c}var q_=cs(function(n,a,c){_o(n,a,c)}),ip=cs(function(n,a,c,d){_o(n,a,c,d)}),z_=$n(function(n,a){var c={};if(n==null)return c;var d=!1;a=Ot(a,function(P){return P=ri(P,n),d||(d=P.length>1),P}),vn(n,Lu(n),c),d&&(c=Jr(c,b|x|D,Lb));for(var v=a.length;v--;)Au(c,a[v]);return c});function H_(n,a){return sp(n,Mo(Se(a)))}var K_=$n(function(n,a){return n==null?{}:vb(n,a)});function sp(n,a){if(n==null)return{};var c=Ot(Lu(n),function(d){return[d]});return a=Se(a),Jf(n,c,function(d,v){return a(d,v[0])})}function V_(n,a,c){a=ri(a,n);var d=-1,v=a.length;for(v||(v=1,n=t);++d<v;){var P=n==null?t:n[bn(a[d])];P===t&&(d=v,P=c),n=Rn(P)?P.call(n):P}return n}function W_(n,a,c){return n==null?n:Gs(n,a,c)}function G_(n,a,c,d){return d=typeof d=="function"?d:t,n==null?n:Gs(n,a,c,d)}var ap=vd(sr),op=vd(Cr);function Y_(n,a,c){var d=Le(n),v=d||ii(n)||hs(n);if(a=Se(a,4),c==null){var P=n&&n.constructor;v?c=d?new P:[]:Ct(n)?c=Rn(P)?os(uo(n)):{}:c={}}return(v?Wr:mn)(n,function(F,k,X){return a(c,F,k,X)}),c}function J_(n,a){return n==null?!0:Au(n,a)}function X_(n,a,c){return n==null?n:td(n,a,$u(c))}function Z_(n,a,c,d){return d=typeof d=="function"?d:t,n==null?n:td(n,a,$u(c),d)}function fs(n){return n==null?[]:lu(n,sr(n))}function Q_(n){return n==null?[]:lu(n,Cr(n))}function eE(n,a,c){return c===t&&(c=a,a=t),c!==t&&(c=Qr(c),c=c===c?c:0),a!==t&&(a=Qr(a),a=a===a?a:0),Ii(Qr(n),a,c)}function tE(n,a,c){return a=Fn(a),c===t?(c=a,a=0):c=Fn(c),n=Qr(n),ob(n,a,c)}function rE(n,a,c){if(c&&typeof c!="boolean"&&vr(n,a,c)&&(a=c=t),c===t&&(typeof a=="boolean"?(c=a,a=t):typeof n=="boolean"&&(c=n,n=t)),n===t&&a===t?(n=0,a=1):(n=Fn(n),a===t?(a=n,n=0):a=Fn(a)),n>a){var d=n;n=a,a=d}if(c||n%1||a%1){var v=Tf();return hr(n+v*(a-n+mt("1e-"+((v+"").length-1))),a)}return Iu(n,a)}var nE=us(function(n,a,c){return a=a.toLowerCase(),n+(c?cp(a):a)});function cp(n){return Qu(ft(n).toLowerCase())}function up(n){return n=ft(n),n&&n.replace(In,Wm).replace(tu,"")}function iE(n,a,c){n=ft(n),a=jr(a);var d=n.length;c=c===t?d:Ii(He(c),0,d);var v=c;return c-=a.length,c>=0&&n.slice(c,v)==a}function sE(n){return n=ft(n),n&&It.test(n)?n.replace(mi,Gm):n}function aE(n){return n=ft(n),n&&Yt.test(n)?n.replace(Rt,"\\$&"):n}var oE=us(function(n,a,c){return n+(c?"-":"")+a.toLowerCase()}),cE=us(function(n,a,c){return n+(c?" ":"")+a.toLowerCase()}),uE=fd("toLowerCase");function lE(n,a,c){n=ft(n),a=He(a);var d=a?rs(n):0;if(!a||d>=a)return n;var v=(a-d)/2;return Po(po(v),c)+n+Po(fo(v),c)}function hE(n,a,c){n=ft(n),a=He(a);var d=a?rs(n):0;return a&&d<a?n+Po(a-d,c):n}function fE(n,a,c){n=ft(n),a=He(a);var d=a?rs(n):0;return a&&d<a?Po(a-d,c)+n:n}function dE(n,a,c){return c||a==null?a=0:a&&(a=+a),wv(ft(n).replace(Ft,""),a||0)}function pE(n,a,c){return(c?vr(n,a,c):a===t)?a=1:a=He(a),Pu(ft(n),a)}function gE(){var n=arguments,a=ft(n[0]);return n.length<3?a:a.replace(n[1],n[2])}var yE=us(function(n,a,c){return n+(c?"_":"")+a.toLowerCase()});function mE(n,a,c){return c&&typeof c!="number"&&vr(n,a,c)&&(a=c=t),c=c===t?re:c>>>0,c?(n=ft(n),n&&(typeof a=="string"||a!=null&&!Ju(a))&&(a=jr(a),!a&&ts(n))?ni(on(n),0,c):n.split(a,c)):[]}var vE=us(function(n,a,c){return n+(c?" ":"")+Qu(a)});function bE(n,a,c){return n=ft(n),c=c==null?0:Ii(He(c),0,n.length),a=jr(a),n.slice(c,c+a.length)==a}function wE(n,a,c){var d=I.templateSettings;c&&vr(n,a,c)&&(a=t),n=ft(n),a=Uo({},a,d,bd);var v=Uo({},a.imports,d.imports,bd),P=sr(v),F=lu(v,P),k,X,ie=0,se=a.interpolate||Wi,ce="__p += '",de=fu((a.escape||Wi).source+"|"+se.source+"|"+(se===At?jc:Wi).source+"|"+(a.evaluate||Wi).source+"|$","g"),we="//# sourceURL="+(dt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ru+"]")+`
`;n.replace(de,function(Ie,et,at,kr,br,Br){return at||(at=kr),ce+=n.slice(ie,Br).replace(Hc,Ym),et&&(k=!0,ce+=`' +
__e(`+et+`) +
'`),br&&(X=!0,ce+=`';
`+br+`;
__p += '`),at&&(ce+=`' +
((__t = (`+at+`)) == null ? '' : __t) +
'`),ie=Br+Ie.length,Ie}),ce+=`';
`;var De=dt.call(a,"variable")&&a.variable;if(!De)ce=`with (obj) {
`+ce+`
}
`;else if(Mc.test(De))throw new Fe(l);ce=(X?ce.replace(pn,""):ce).replace(gr,"$1").replace(Dn,"$1;"),ce="function("+(De||"obj")+`) {
`+(De?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var We=hp(function(){return ht(P,we+"return "+ce).apply(t,F)});if(We.source=ce,Yu(We))throw We;return We}function _E(n){return ft(n).toLowerCase()}function EE(n){return ft(n).toUpperCase()}function xE(n,a,c){if(n=ft(n),n&&(c||a===t))return wf(n);if(!n||!(a=jr(a)))return n;var d=on(n),v=on(a),P=_f(d,v),F=Ef(d,v)+1;return ni(d,P,F).join("")}function SE(n,a,c){if(n=ft(n),n&&(c||a===t))return n.slice(0,Sf(n)+1);if(!n||!(a=jr(a)))return n;var d=on(n),v=Ef(d,on(a))+1;return ni(d,0,v).join("")}function DE(n,a,c){if(n=ft(n),n&&(c||a===t))return n.replace(Ft,"");if(!n||!(a=jr(a)))return n;var d=on(n),v=_f(d,on(a));return ni(d,v).join("")}function IE(n,a){var c=C,d=B;if(Ct(a)){var v="separator"in a?a.separator:v;c="length"in a?He(a.length):c,d="omission"in a?jr(a.omission):d}n=ft(n);var P=n.length;if(ts(n)){var F=on(n);P=F.length}if(c>=P)return n;var k=c-rs(d);if(k<1)return d;var X=F?ni(F,0,k).join(""):n.slice(0,k);if(v===t)return X+d;if(F&&(k+=X.length-k),Ju(v)){if(n.slice(k).search(v)){var ie,se=X;for(v.global||(v=fu(v.source,ft(Kr.exec(v))+"g")),v.lastIndex=0;ie=v.exec(se);)var ce=ie.index;X=X.slice(0,ce===t?k:ce)}}else if(n.indexOf(jr(v),k)!=k){var de=X.lastIndexOf(v);de>-1&&(X=X.slice(0,de))}return X+d}function PE(n){return n=ft(n),n&&Tt.test(n)?n.replace(Gn,rv):n}var OE=us(function(n,a,c){return n+(c?" ":"")+a.toUpperCase()}),Qu=fd("toUpperCase");function lp(n,a,c){return n=ft(n),a=c?t:a,a===t?Xm(n)?sv(n):qm(n):n.match(a)||[]}var hp=Je(function(n,a){try{return ir(n,t,a)}catch(c){return Yu(c)?c:new Fe(c)}}),AE=$n(function(n,a){return Wr(a,function(c){c=bn(c),Cn(n,c,Wu(n[c],n))}),n});function CE(n){var a=n==null?0:n.length,c=Se();return n=a?Ot(n,function(d){if(typeof d[1]!="function")throw new Gr(u);return[c(d[0]),d[1]]}):[],Je(function(d){for(var v=-1;++v<a;){var P=n[v];if(ir(P[0],this,d))return ir(P[1],this,d)}})}function TE(n){return rb(Jr(n,b))}function el(n){return function(){return n}}function $E(n,a){return n==null||n!==n?a:n}var NE=pd(),RE=pd(!0);function Tr(n){return n}function tl(n){return Hf(typeof n=="function"?n:Jr(n,b))}function FE(n){return Vf(Jr(n,b))}function ME(n,a){return Wf(n,Jr(a,b))}var LE=Je(function(n,a){return function(c){return Vs(c,n,a)}}),jE=Je(function(n,a){return function(c){return Vs(n,c,a)}});function rl(n,a,c){var d=sr(a),v=wo(a,d);c==null&&!(Ct(a)&&(v.length||!d.length))&&(c=a,a=n,n=this,v=wo(a,sr(a)));var P=!(Ct(c)&&"chain"in c)||!!c.chain,F=Rn(n);return Wr(v,function(k){var X=a[k];n[k]=X,F&&(n.prototype[k]=function(){var ie=this.__chain__;if(P||ie){var se=n(this.__wrapped__),ce=se.__actions__=Or(this.__actions__);return ce.push({func:X,args:arguments,thisArg:n}),se.__chain__=ie,se}return X.apply(n,Xn([this.value()],arguments))})}),n}function UE(){return st._===this&&(st._=hv),this}function nl(){}function kE(n){return n=He(n),Je(function(a){return Gf(a,n)})}var BE=Ru(Ot),qE=Ru(gf),zE=Ru(su);function fp(n){return Bu(n)?au(bn(n)):bb(n)}function HE(n){return function(a){return n==null?t:Pi(n,a)}}var KE=yd(),VE=yd(!0);function il(){return[]}function sl(){return!1}function WE(){return{}}function GE(){return""}function YE(){return!0}function JE(n,a){if(n=He(n),n<1||n>V)return[];var c=re,d=hr(n,re);a=Se(a),n-=re;for(var v=uu(d,a);++c<n;)a(c);return v}function XE(n){return Le(n)?Ot(n,bn):Ur(n)?[n]:Or($d(ft(n)))}function ZE(n){var a=++uv;return ft(n)+a}var QE=Io(function(n,a){return n+a},0),e6=Fu("ceil"),t6=Io(function(n,a){return n/a},1),r6=Fu("floor");function n6(n){return n&&n.length?bo(n,Tr,wu):t}function i6(n,a){return n&&n.length?bo(n,Se(a,2),wu):t}function s6(n){return vf(n,Tr)}function a6(n,a){return vf(n,Se(a,2))}function o6(n){return n&&n.length?bo(n,Tr,Su):t}function c6(n,a){return n&&n.length?bo(n,Se(a,2),Su):t}var u6=Io(function(n,a){return n*a},1),l6=Fu("round"),h6=Io(function(n,a){return n-a},0);function f6(n){return n&&n.length?cu(n,Tr):0}function d6(n,a){return n&&n.length?cu(n,Se(a,2)):0}return I.after=Fw,I.ary=zd,I.assign=E_,I.assignIn=np,I.assignInWith=Uo,I.assignWith=x_,I.at=S_,I.before=Hd,I.bind=Wu,I.bindAll=AE,I.bindKey=Kd,I.castArray=Ww,I.chain=kd,I.chunk=r1,I.compact=n1,I.concat=i1,I.cond=CE,I.conforms=TE,I.constant=el,I.countBy=fw,I.create=D_,I.curry=Vd,I.curryRight=Wd,I.debounce=Gd,I.defaults=I_,I.defaultsDeep=P_,I.defer=Mw,I.delay=Lw,I.difference=s1,I.differenceBy=a1,I.differenceWith=o1,I.drop=c1,I.dropRight=u1,I.dropRightWhile=l1,I.dropWhile=h1,I.fill=f1,I.filter=pw,I.flatMap=mw,I.flatMapDeep=vw,I.flatMapDepth=bw,I.flatten=Md,I.flattenDeep=d1,I.flattenDepth=p1,I.flip=jw,I.flow=NE,I.flowRight=RE,I.fromPairs=g1,I.functions=R_,I.functionsIn=F_,I.groupBy=ww,I.initial=m1,I.intersection=v1,I.intersectionBy=b1,I.intersectionWith=w1,I.invert=L_,I.invertBy=j_,I.invokeMap=Ew,I.iteratee=tl,I.keyBy=xw,I.keys=sr,I.keysIn=Cr,I.map=No,I.mapKeys=k_,I.mapValues=B_,I.matches=FE,I.matchesProperty=ME,I.memoize=Fo,I.merge=q_,I.mergeWith=ip,I.method=LE,I.methodOf=jE,I.mixin=rl,I.negate=Mo,I.nthArg=kE,I.omit=z_,I.omitBy=H_,I.once=Uw,I.orderBy=Sw,I.over=BE,I.overArgs=kw,I.overEvery=qE,I.overSome=zE,I.partial=Gu,I.partialRight=Yd,I.partition=Dw,I.pick=K_,I.pickBy=sp,I.property=fp,I.propertyOf=HE,I.pull=S1,I.pullAll=jd,I.pullAllBy=D1,I.pullAllWith=I1,I.pullAt=P1,I.range=KE,I.rangeRight=VE,I.rearg=Bw,I.reject=Ow,I.remove=O1,I.rest=qw,I.reverse=Ku,I.sampleSize=Cw,I.set=W_,I.setWith=G_,I.shuffle=Tw,I.slice=A1,I.sortBy=Rw,I.sortedUniq=M1,I.sortedUniqBy=L1,I.split=mE,I.spread=zw,I.tail=j1,I.take=U1,I.takeRight=k1,I.takeRightWhile=B1,I.takeWhile=q1,I.tap=nw,I.throttle=Hw,I.thru=$o,I.toArray=ep,I.toPairs=ap,I.toPairsIn=op,I.toPath=XE,I.toPlainObject=rp,I.transform=Y_,I.unary=Kw,I.union=z1,I.unionBy=H1,I.unionWith=K1,I.uniq=V1,I.uniqBy=W1,I.uniqWith=G1,I.unset=J_,I.unzip=Vu,I.unzipWith=Ud,I.update=X_,I.updateWith=Z_,I.values=fs,I.valuesIn=Q_,I.without=Y1,I.words=lp,I.wrap=Vw,I.xor=J1,I.xorBy=X1,I.xorWith=Z1,I.zip=Q1,I.zipObject=ew,I.zipObjectDeep=tw,I.zipWith=rw,I.entries=ap,I.entriesIn=op,I.extend=np,I.extendWith=Uo,rl(I,I),I.add=QE,I.attempt=hp,I.camelCase=nE,I.capitalize=cp,I.ceil=e6,I.clamp=eE,I.clone=Gw,I.cloneDeep=Jw,I.cloneDeepWith=Xw,I.cloneWith=Yw,I.conformsTo=Zw,I.deburr=up,I.defaultTo=$E,I.divide=t6,I.endsWith=iE,I.eq=un,I.escape=sE,I.escapeRegExp=aE,I.every=dw,I.find=gw,I.findIndex=Rd,I.findKey=O_,I.findLast=yw,I.findLastIndex=Fd,I.findLastKey=A_,I.floor=r6,I.forEach=Bd,I.forEachRight=qd,I.forIn=C_,I.forInRight=T_,I.forOwn=$_,I.forOwnRight=N_,I.get=Xu,I.gt=Qw,I.gte=e_,I.has=M_,I.hasIn=Zu,I.head=Ld,I.identity=Tr,I.includes=_w,I.indexOf=y1,I.inRange=tE,I.invoke=U_,I.isArguments=Ci,I.isArray=Le,I.isArrayBuffer=t_,I.isArrayLike=Ar,I.isArrayLikeObject=qt,I.isBoolean=r_,I.isBuffer=ii,I.isDate=n_,I.isElement=i_,I.isEmpty=s_,I.isEqual=a_,I.isEqualWith=o_,I.isError=Yu,I.isFinite=c_,I.isFunction=Rn,I.isInteger=Jd,I.isLength=Lo,I.isMap=Xd,I.isMatch=u_,I.isMatchWith=l_,I.isNaN=h_,I.isNative=f_,I.isNil=p_,I.isNull=d_,I.isNumber=Zd,I.isObject=Ct,I.isObjectLike=Lt,I.isPlainObject=Zs,I.isRegExp=Ju,I.isSafeInteger=g_,I.isSet=Qd,I.isString=jo,I.isSymbol=Ur,I.isTypedArray=hs,I.isUndefined=y_,I.isWeakMap=m_,I.isWeakSet=v_,I.join=_1,I.kebabCase=oE,I.last=Zr,I.lastIndexOf=E1,I.lowerCase=cE,I.lowerFirst=uE,I.lt=b_,I.lte=w_,I.max=n6,I.maxBy=i6,I.mean=s6,I.meanBy=a6,I.min=o6,I.minBy=c6,I.stubArray=il,I.stubFalse=sl,I.stubObject=WE,I.stubString=GE,I.stubTrue=YE,I.multiply=u6,I.nth=x1,I.noConflict=UE,I.noop=nl,I.now=Ro,I.pad=lE,I.padEnd=hE,I.padStart=fE,I.parseInt=dE,I.random=rE,I.reduce=Iw,I.reduceRight=Pw,I.repeat=pE,I.replace=gE,I.result=V_,I.round=l6,I.runInContext=G,I.sample=Aw,I.size=$w,I.snakeCase=yE,I.some=Nw,I.sortedIndex=C1,I.sortedIndexBy=T1,I.sortedIndexOf=$1,I.sortedLastIndex=N1,I.sortedLastIndexBy=R1,I.sortedLastIndexOf=F1,I.startCase=vE,I.startsWith=bE,I.subtract=h6,I.sum=f6,I.sumBy=d6,I.template=wE,I.times=JE,I.toFinite=Fn,I.toInteger=He,I.toLength=tp,I.toLower=_E,I.toNumber=Qr,I.toSafeInteger=__,I.toString=ft,I.toUpper=EE,I.trim=xE,I.trimEnd=SE,I.trimStart=DE,I.truncate=IE,I.unescape=PE,I.uniqueId=ZE,I.upperCase=OE,I.upperFirst=Qu,I.each=Bd,I.eachRight=qd,I.first=Ld,rl(I,function(){var n={};return mn(I,function(a,c){dt.call(I.prototype,c)||(n[c]=a)}),n}(),{chain:!1}),I.VERSION=i,Wr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){I[n].placeholder=I}),Wr(["drop","take"],function(n,a){rt.prototype[n]=function(c){c=c===t?1:nr(He(c),0);var d=this.__filtered__&&!a?new rt(this):this.clone();return d.__filtered__?d.__takeCount__=hr(c,d.__takeCount__):d.__views__.push({size:hr(c,re),type:n+(d.__dir__<0?"Right":"")}),d},rt.prototype[n+"Right"]=function(c){return this.reverse()[n](c).reverse()}}),Wr(["filter","map","takeWhile"],function(n,a){var c=a+1,d=c==m||c==z;rt.prototype[n]=function(v){var P=this.clone();return P.__iteratees__.push({iteratee:Se(v,3),type:c}),P.__filtered__=P.__filtered__||d,P}}),Wr(["head","last"],function(n,a){var c="take"+(a?"Right":"");rt.prototype[n]=function(){return this[c](1).value()[0]}}),Wr(["initial","tail"],function(n,a){var c="drop"+(a?"":"Right");rt.prototype[n]=function(){return this.__filtered__?new rt(this):this[c](1)}}),rt.prototype.compact=function(){return this.filter(Tr)},rt.prototype.find=function(n){return this.filter(n).head()},rt.prototype.findLast=function(n){return this.reverse().find(n)},rt.prototype.invokeMap=Je(function(n,a){return typeof n=="function"?new rt(this):this.map(function(c){return Vs(c,n,a)})}),rt.prototype.reject=function(n){return this.filter(Mo(Se(n)))},rt.prototype.slice=function(n,a){n=He(n);var c=this;return c.__filtered__&&(n>0||a<0)?new rt(c):(n<0?c=c.takeRight(-n):n&&(c=c.drop(n)),a!==t&&(a=He(a),c=a<0?c.dropRight(-a):c.take(a-n)),c)},rt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},rt.prototype.toArray=function(){return this.take(re)},mn(rt.prototype,function(n,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),d=/^(?:head|last)$/.test(a),v=I[d?"take"+(a=="last"?"Right":""):a],P=d||/^find/.test(a);v&&(I.prototype[a]=function(){var F=this.__wrapped__,k=d?[1]:arguments,X=F instanceof rt,ie=k[0],se=X||Le(F),ce=function(et){var at=v.apply(I,Xn([et],k));return d&&de?at[0]:at};se&&c&&typeof ie=="function"&&ie.length!=1&&(X=se=!1);var de=this.__chain__,we=!!this.__actions__.length,De=P&&!de,We=X&&!we;if(!P&&se){F=We?F:new rt(this);var Ie=n.apply(F,k);return Ie.__actions__.push({func:$o,args:[ce],thisArg:t}),new Yr(Ie,de)}return De&&We?n.apply(this,k):(Ie=this.thru(ce),De?d?Ie.value()[0]:Ie.value():Ie)})}),Wr(["pop","push","shift","sort","splice","unshift"],function(n){var a=no[n],c=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",d=/^(?:pop|shift)$/.test(n);I.prototype[n]=function(){var v=arguments;if(d&&!this.__chain__){var P=this.value();return a.apply(Le(P)?P:[],v)}return this[c](function(F){return a.apply(Le(F)?F:[],v)})}}),mn(rt.prototype,function(n,a){var c=I[a];if(c){var d=c.name+"";dt.call(as,d)||(as[d]=[]),as[d].push({name:a,func:c})}}),as[Do(t,K).name]=[{name:"wrapper",func:t}],rt.prototype.clone=Pv,rt.prototype.reverse=Ov,rt.prototype.value=Av,I.prototype.at=iw,I.prototype.chain=sw,I.prototype.commit=aw,I.prototype.next=ow,I.prototype.plant=uw,I.prototype.reverse=lw,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=hw,I.prototype.first=I.prototype.head,Us&&(I.prototype[Us]=cw),I},ns=av();Bt?((Bt.exports=ns)._=ns,vt._=ns):st._=ns}).call(la)})(Wl,Wl.exports);var hP=Object.defineProperty,fP=Object.defineProperties,dP=Object.getOwnPropertyDescriptors,H0=Object.getOwnPropertySymbols,pP=Object.prototype.hasOwnProperty,gP=Object.prototype.propertyIsEnumerable,K0=(r,e,t)=>e in r?hP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Bo=(r,e)=>{for(var t in e||(e={}))pP.call(e,t)&&K0(r,t,e[t]);if(H0)for(var t of H0(e))gP.call(e,t)&&K0(r,t,e[t]);return r},yP=(r,e)=>fP(r,dP(e));function rn(r,e,t){let i;const s=Gl(r);return e.rpcMap&&(i=e.rpcMap[s]),i||(i=`${lP}?chainId=eip155:${s}&projectId=${t}`),i}function Gl(r){return r.includes("eip155")?Number(r.split(":")[1]):Number(r)}function mP(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function vP(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const o=e.namespaces[s].accounts;i.push(...o)}),i}function bP(r,e={}){const t=V0(r),i=V0(e);return Wl.exports.merge(t,i)}function V0(r){var e,t,i,s;const o={};if(!ws(r))return o;for(const[u,l]of Object.entries(r)){const f=ey(u)?[u]:l.chains,g=l.methods||[],y=l.events||[],b=l.rpcMap||{},x=Go(u);o[x]=yP(Bo(Bo({},o[x]),l),{chains:hl(f,(e=o[x])==null?void 0:e.chains),methods:hl(g,(t=o[x])==null?void 0:t.methods),events:hl(y,(i=o[x])==null?void 0:i.events),rpcMap:Bo(Bo({},b),(s=o[x])==null?void 0:s.rpcMap)})}return o}function wP(r){return r.includes(":")?r.split(":")[2]:r}const My={},Kt=r=>My[r],xl=(r,e)=>{My[r]=e};class _P{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class EP{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const i=Gl(e);if(!this.httpProviders[i]){const s=t||rn(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.chainId=i,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Gl(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:e.chainId}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class xP{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class SP{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class DP{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class IP{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}class PP{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||rn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new fi(new Ki(i,Kt("disableProviderPing")))}}var OP=Object.defineProperty,AP=Object.defineProperties,CP=Object.getOwnPropertyDescriptors,W0=Object.getOwnPropertySymbols,TP=Object.prototype.hasOwnProperty,$P=Object.prototype.propertyIsEnumerable,G0=(r,e,t)=>e in r?OP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qo=(r,e)=>{for(var t in e||(e={}))TP.call(e,t)&&G0(r,t,e[t]);if(W0)for(var t of W0(e))$P.call(e,t)&&G0(r,t,e[t]);return r},Sl=(r,e)=>AP(r,CP(e));class qh{constructor(e){this.events=new wh,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ot.pino(ot.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||q0})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new qh(e);return await t.initialize(),t}async request(e,t){const[i,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:qo({},e),chainId:`${i}:${s}`,topic:this.session.topic})}sendAsync(e,t,i){this.request(e,i).then(s=>t(null,s)).catch(s=>t(s,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ht("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(o=>{this.session=o}).catch(o=>{if(o.message!==Fy)throw o;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{const[i,s]=this.validateChain(e);this.getProvider(i).setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Sn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Bh.init({logger:this.providerOpts.logger||q0,relayUrl:this.providerOpts.relayUrl||oP,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Go(t)))];xl("client",this.client),xl("events",this.events),xl("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=vP(t,this.session),s=mP(i),o=bP(this.namespaces,this.optionalNamespaces),u=Sl(qo({},o[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new EP({namespace:u});break;case"solana":this.rpcProviders[t]=new xP({namespace:u});break;case"cosmos":this.rpcProviders[t]=new SP({namespace:u});break;case"polkadot":this.rpcProviders[t]=new _P({namespace:u});break;case"cip34":this.rpcProviders[t]=new DP({namespace:u});break;case"elrond":this.rpcProviders[t]=new IP({namespace:u});break;case"multiversx":this.rpcProviders[t]=new PP({namespace:u});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const s=i.data;s&&Sn(s)&&this.events.emit("accountsChanged",s.map(wP))}else i.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:s}=t,o=(i=this.client)==null?void 0:i.session.get(e);this.session=Sl(qo({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Sl(qo({},Ht("USER_DISCONNECTED")),{data:e.topic}))}),this.on(di.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=i,this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=(e==null?void 0:e.split(":"))||["",""];if(t&&!Object.keys(this.namespaces).map(u=>Go(u)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=Go(Object.keys(this.namespaces)[0]),o=this.rpcProviders[s].getDefaultChain();return[s,o]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var i;const[s,o]=this.validateChain(e);t||this.getProvider(s).setDefaultChain(o),((i=this.namespaces[s])!=null?i:this.namespaces[`${s}:${o}`]).defaultChain=o,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",o)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${z0}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${z0}/${e}`)}}const NP=qh,RP="wc",FP="ethereum_provider",MP=`${RP}@2:${FP}:`,LP="https://rpc.walletconnect.com/v1/",Yl=["eth_sendTransaction","personal_sign"],Jl=["chainChanged","accountsChanged"];var jP=Object.defineProperty,UP=Object.defineProperties,kP=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,BP=Object.prototype.hasOwnProperty,qP=Object.prototype.propertyIsEnumerable,J0=(r,e,t)=>e in r?jP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Dl=(r,e)=>{for(var t in e||(e={}))BP.call(e,t)&&J0(r,t,e[t]);if(Y0)for(var t of Y0(e))qP.call(e,t)&&J0(r,t,e[t]);return r},X0=(r,e)=>UP(r,kP(e));function Xl(r){return Number(r[0].split(":")[1])}function Il(r){return`0x${r.toString(16)}`}function zP(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:s,events:o,optionalEvents:u,rpcMap:l}=r;if(!Sn(e))throw new Error("Invalid chains");const f=e,g=i||Yl,y=o||Jl,b={[Xl(f)]:l[Xl(f)]},x={chains:f,methods:g,events:y,rpcMap:b},D=o==null?void 0:o.filter(K=>!Jl.includes(K)),S=i==null?void 0:i.filter(K=>!Yl.includes(K));if(!t&&!u&&!s&&!(D!=null&&D.length)&&!(S!=null&&S.length))return{required:x};const N=(D==null?void 0:D.length)&&(S==null?void 0:S.length)||!t,R={chains:[...new Set(N?f.concat(t||[]):t)],methods:[...new Set(g.concat(s||[]))],events:[...new Set(y.concat(u||[]))],rpcMap:l};return{required:x,optional:R}}class zh{constructor(){this.events=new zr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=MP,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new zh;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=zP(this.rpc);try{const s=await new Promise(async(u,l)=>{var f;this.rpc.showQrModal&&((f=this.modal)==null||f.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),l(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(X0(Dl({namespaces:{[this.namespace]:t}},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(g=>{u(g)}).catch(g=>{l(new Error(g.message))})});if(!s)return;this.setChainIds(this.rpc.chains);const o=J3(s.namespaces,[this.namespace]);this.setAccounts(o),this.events.emit("connect",{chainId:Il(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Il(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",X0(Dl({},Ht("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Il(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,s]=e.split(":");return{chainId:`${t}:${i}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;return{chains:((t=e.chains)==null?void 0:t.map(s=>this.formatChainId(s)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(s=>this.formatChainId(s)):void 0,methods:(e==null?void 0:e.methods)||Yl,events:(e==null?void 0:e.events)||Jl,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(i=e==null?void 0:e.qrModalOptions)!=null?i:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(s=>{i[s]=this.getRpcUrl(s,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=Xl(this.rpc.chains),this.signer=await NP.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await vh(()=>import("./index-5607c008.js").then(s=>s.a),[]);t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Dl({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:s}=e;t&&Sn(t)&&(this.rpc.chains=t.map(o=>this.formatChainId(o)),t.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)})),i&&Sn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(o=>this.formatChainId(o)),i.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${LP}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const HP=zh;function Vi(r,{includeName:e=!1}={}){if(r.type!=="function"&&r.type!=="event"&&r.type!=="error")throw new oO(r.type);return`${r.name}(${Ec(r.inputs,{includeName:e})})`}function Ec(r,{includeName:e=!1}={}){return r?r.map(t=>KP(t,{includeName:e})).join(e?", ":","):""}function KP(r,{includeName:e}){return r.type.startsWith("tuple")?`(${Ec(r.components,{includeName:e})})${r.type.slice(5)}`:r.type+(e&&r.name?` ${r.name}`:"")}function Kn(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function Vt(r){return Kn(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const VP="1.0.7",WP=r=>r,xc=r=>r,GP=()=>`viem@${VP}`;class fe extends Error{constructor(e,t={}){var o;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:GP()});const i=t.cause instanceof fe?t.cause.details:(o=t.cause)!=null&&o.message?t.cause.message:t.details,s=t.cause instanceof fe&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: https://viem.sh${s}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...i?[`Details: ${i}`]:[],`Version: ${this.version}`].join(`
`),t.cause&&(this.cause=t.cause),this.details=i,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return Ly(this,e)}}function Ly(r,e){return e!=null&&e(r)?r:r.cause?Ly(r.cause,e):r}class YP extends fe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class Z0 extends fe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class Hh extends fe{constructor({data:e,params:t,size:i}){super([`Data size of ${i} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Ec(t,{includeName:!0})})`,`Data:   ${e} (${i} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=i}}class Sc extends fe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class JP extends fe{constructor({expectedLength:e,givenLength:t,type:i}){super([`ABI encoding array length mismatch for type ${i}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class XP extends fe{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Vt(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class ZP extends fe{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class QP extends fe{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"})}}class eO extends fe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class tO extends fe{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class Q0 extends fe{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class nc extends fe{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class rO extends fe{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class nO extends fe{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class ma extends fe{constructor({abiItem:e,data:t,params:i,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Ec(i,{includeName:!0})})`,`Data:   ${t} (${s} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=i,this.size=s}}class Dc extends fe{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${Vi(e,{includeName:!0})}".`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class iO extends fe{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class sO extends fe{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class aO extends fe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class oO extends fe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class cO extends fe{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}class jy extends fe{constructor({offset:e,position:t,size:i}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${i}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class Uy extends fe{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function Os(r,{dir:e,size:t=32}={}){return typeof r=="string"?oi(r,{dir:e,size:t}):uO(r,{dir:e,size:t})}function oi(r,{dir:e,size:t=32}={}){if(t===null)return r;const i=r.replace("0x","");if(i.length>t*2)throw new Uy({size:Math.ceil(i.length/2),targetSize:t,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function uO(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new Uy({size:r.length,targetSize:t,type:"bytes"});const i=new Uint8Array(t);for(let s=0;s<t;s++){const o=e==="right";i[o?s:t-s-1]=r[o?s:r.length-s-1]}return i}class lO extends fe{constructor({max:e,min:t,signed:i,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class hO extends fe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class fO extends fe{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function _s(r,{dir:e="left"}={}){let t=typeof r=="string"?r.replace("0x",""):r,i=0;for(let s=0;s<t.length-1&&t[e==="left"?s:t.length-s-1].toString()==="0";s++)i++;return t=e==="left"?t.slice(i):t.slice(0,t.length-i),typeof r=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}function pi(r,{size:e}){if(Vt(r)>e)throw new fO({givenSize:Vt(r),maxSize:e})}function Kh(r,e={}){const{signed:t}=e;e.size&&pi(r,{size:e.size});const i=BigInt(r);if(!t)return i;const s=(r.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return i<=o?i:i-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function dO(r,e={}){let t=r;if(e.size&&(pi(t,{size:e.size}),t=_s(t)),_s(t)==="0x00")return!1;if(_s(t)==="0x01")return!0;throw new hO(t)}function xr(r,e={}){return Number(Kh(r,e))}function pO(r,e={}){let t=Wh(r);return e.size&&(pi(t,{size:e.size}),t=_s(t,{dir:"right"})),new TextDecoder().decode(t)}const gO=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Wn(r,e={}){return typeof r=="number"||typeof r=="bigint"?nt(r,e):typeof r=="string"?Vh(r,e):typeof r=="boolean"?ky(r,e):va(r,e)}function ky(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(pi(t,{size:e.size}),Os(t,{size:e.size})):t}function va(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=gO[r[s]];const i=`0x${t}`;return typeof e.size=="number"?(pi(i,{size:e.size}),Os(i,{dir:"right",size:e.size})):i}function nt(r,e={}){const{signed:t,size:i}=e,s=BigInt(r);let o;i?t?o=(1n<<BigInt(i)*8n-1n)-1n:o=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const u=typeof o=="bigint"&&t?-o-1n:0;if(o&&s>o||s<u){const f=typeof r=="bigint"?"n":"";throw new lO({max:o?`${o}${f}`:void 0,min:`${u}${f}`,signed:t,size:i,value:`${r}${f}`})}const l=`0x${(t&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?Os(l,{size:i}):l}const yO=new TextEncoder;function Vh(r,e={}){const t=yO.encode(r);return va(t,e)}const mO=new TextEncoder;function ki(r,e={}){return typeof r=="number"||typeof r=="bigint"?bO(r,e):typeof r=="boolean"?vO(r,e):Kn(r)?Wh(r,e):Bn(r,e)}function vO(r,e={}){const t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(pi(t,{size:e.size}),Os(t,{size:e.size})):t}function Wh(r,e={}){let t=r;e.size&&(pi(t,{size:e.size}),t=Os(t,{dir:"right",size:e.size}));let i=t.slice(2);i.length%2&&(i=`0${i}`);const s=new Uint8Array(i.length/2);for(let o=0;o<s.length;o++){const u=o*2,l=i.slice(u,u+2),f=Number.parseInt(l,16);if(Number.isNaN(f)||f<0)throw new fe(`Invalid byte sequence ("${l}" in "${i}").`);s[o]=f}return s}function bO(r,e){const t=nt(r,e);return Wh(t)}function Bn(r,e={}){const t=mO.encode(r);return typeof e.size=="number"?(pi(t,{size:e.size}),Os(t,{dir:"right",size:e.size})):t}const wO=/((function|event)\s)?(.*)(\((.*)\))/;function By(r){const e=r.match(wO),t=(e==null?void 0:e[2])||void 0,i=e==null?void 0:e[3],s=(e==null?void 0:e[5])||void 0;return{type:t,name:i,params:s}}function _O(r){return By(r).name}function EO(r){const e=By(r).params,t=e==null?void 0:e.split(",").map(i=>i.trim().split(" "));return t==null?void 0:t.map(i=>({type:i[0],name:i[1]==="indexed"?i[2]:i[1],...i[1]==="indexed"?{indexed:!0}:{}}))}function Zl(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function xO(r){if(typeof r!="boolean")throw new Error(`Expected boolean, not ${r}`)}function qy(r,...e){if(!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function SO(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Zl(r.outputLen),Zl(r.blockLen)}function DO(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function IO(r,e){qy(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const ps={number:Zl,bool:xO,bytes:qy,hash:SO,exists:DO,output:IO},zo=BigInt(2**32-1),Ql=BigInt(32);function zy(r,e=!1){return e?{h:Number(r&zo),l:Number(r>>Ql&zo)}:{h:Number(r>>Ql&zo)|0,l:Number(r&zo)|0}}function PO(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:o,l:u}=zy(r[s],e);[t[s],i[s]]=[o,u]}return[t,i]}const OO=(r,e)=>BigInt(r>>>0)<<Ql|BigInt(e>>>0),AO=(r,e,t)=>r>>>t,CO=(r,e,t)=>r<<32-t|e>>>t,TO=(r,e,t)=>r>>>t|e<<32-t,$O=(r,e,t)=>r<<32-t|e>>>t,NO=(r,e,t)=>r<<64-t|e>>>t-32,RO=(r,e,t)=>r>>>t-32|e<<64-t,FO=(r,e)=>e,MO=(r,e)=>r,LO=(r,e,t)=>r<<t|e>>>32-t,jO=(r,e,t)=>e<<t|r>>>32-t,UO=(r,e,t)=>e<<t-32|r>>>64-t,kO=(r,e,t)=>r<<t-32|e>>>64-t;function BO(r,e,t,i){const s=(e>>>0)+(i>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const qO=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),zO=(r,e,t,i)=>e+t+i+(r/2**32|0)|0,HO=(r,e,t,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0),KO=(r,e,t,i,s)=>e+t+i+s+(r/2**32|0)|0,VO=(r,e,t,i,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0)+(s>>>0),WO=(r,e,t,i,s,o)=>e+t+i+s+o+(r/2**32|0)|0,ba={fromBig:zy,split:PO,toBig:OO,shrSH:AO,shrSL:CO,rotrSH:TO,rotrSL:$O,rotrBH:NO,rotrBL:RO,rotr32H:FO,rotr32L:MO,rotlSH:LO,rotlSL:jO,rotlBH:UO,rotlBL:kO,add:BO,add3L:qO,add3H:zO,add4L:HO,add4H:KO,add5H:WO,add5L:VO};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const GO=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),YO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!YO)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function JO(r){if(typeof r!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof r}`);return new TextEncoder().encode(r)}function Gh(r){if(typeof r=="string"&&(r=JO(r)),!(r instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof r})`);return r}class XO{clone(){return this._cloneInto()}}function ZO(r){const e=i=>r().update(Gh(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function QO(r){const e=(i,s)=>r(s).update(Gh(i)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=i=>r(i),e}const[Hy,Ky,Vy]=[[],[],[]],e8=BigInt(0),ha=BigInt(1),t8=BigInt(2),r8=BigInt(7),n8=BigInt(256),i8=BigInt(113);for(let r=0,e=ha,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],Hy.push(2*(5*i+t)),Ky.push((r+1)*(r+2)/2%64);let s=e8;for(let o=0;o<7;o++)e=(e<<ha^(e>>r8)*i8)%n8,e&t8&&(s^=ha<<(ha<<BigInt(o))-ha);Vy.push(s)}const[s8,a8]=ba.split(Vy,!0),eg=(r,e,t)=>t>32?ba.rotlBH(r,e,t):ba.rotlSH(r,e,t),tg=(r,e,t)=>t>32?ba.rotlBL(r,e,t):ba.rotlSL(r,e,t);function o8(r,e=24){const t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let u=0;u<10;u++)t[u]=r[u]^r[u+10]^r[u+20]^r[u+30]^r[u+40];for(let u=0;u<10;u+=2){const l=(u+8)%10,f=(u+2)%10,g=t[f],y=t[f+1],b=eg(g,y,1)^t[l],x=tg(g,y,1)^t[l+1];for(let D=0;D<50;D+=10)r[u+D]^=b,r[u+D+1]^=x}let s=r[2],o=r[3];for(let u=0;u<24;u++){const l=Ky[u],f=eg(s,o,l),g=tg(s,o,l),y=Hy[u];s=r[y],o=r[y+1],r[y]=f,r[y+1]=g}for(let u=0;u<50;u+=10){for(let l=0;l<10;l++)t[l]=r[u+l];for(let l=0;l<10;l++)r[u+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=s8[i],r[1]^=a8[i]}t.fill(0)}class Ic extends XO{constructor(e,t,i,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ps.number(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=GO(this.state)}keccak(){o8(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ps.exists(this);const{blockLen:t,state:i}=this;e=Gh(e);const s=e.length;for(let o=0;o<s;){const u=Math.min(t-this.pos,s-o);for(let l=0;l<u;l++)i[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:i,blockLen:s}=this;e[i]^=t,t&128&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ps.exists(this,!1),ps.bytes(e),this.finish();const t=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();const u=Math.min(i-this.posOut,o-s);e.set(t.subarray(this.posOut,this.posOut+u),s),this.posOut+=u,s+=u}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ps.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ps.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:i,outputLen:s,rounds:o,enableXOF:u}=this;return e||(e=new Ic(t,i,s,u,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=u,e.destroyed=this.destroyed,e}}const gi=(r,e,t)=>ZO(()=>new Ic(e,r,t));gi(6,144,224/8);gi(6,136,256/8);gi(6,104,384/8);gi(6,72,512/8);gi(1,144,224/8);const c8=gi(1,136,256/8);gi(1,104,384/8);gi(1,72,512/8);const Wy=(r,e,t)=>QO((i={})=>new Ic(e,r,i.dkLen===void 0?t:i.dkLen,!0));Wy(31,168,128/8);Wy(31,136,256/8);function Rr(r,e){const t=e||"hex",i=c8(Kn(r,{strict:!1})?ki(r):r);return t==="bytes"?i:Wn(i)}const Gy=r=>Rr(ki(r));function Yy(r){const e=_O(r),t=EO(r)||[];return Gy(`${e}(${t.map(({type:i})=>i).join(",")})`)}function Jy(r){return Gy(`${r.name}(${r.inputs.map(({type:e})=>e).join(",")})`)}const Xy=r=>typeof r=="string"?Yy(r):Jy(r);class wa extends fe{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}const u8=/^0x[a-fA-F0-9]{40}$/;function qn(r){return u8.test(r)}function Vn(r){return typeof r[0]=="string"?Yh(r):l8(r)}function l8(r){let e=0;for(const s of r)e+=s.length;const t=new Uint8Array(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return t}function Yh(r){return`0x${r.reduce((e,t)=>e+t.replace("0x",""),"")}`}function Ut(r,e,t,{strict:i}={}){return Kn(r,{strict:!1})?f8(r,e,t,{strict:i}):h8(r,e,t,{strict:i})}function Zy(r,e){if(typeof e=="number"&&e>0&&e>Vt(r)-1)throw new jy({offset:e,position:"start",size:Vt(r)})}function Qy(r,e,t){if(typeof e=="number"&&typeof t=="number"&&Vt(r)!==t-e)throw new jy({offset:t,position:"end",size:Vt(r)})}function h8(r,e,t,{strict:i}={}){Zy(r,e);const s=r.slice(e,t);return i&&Qy(s,e,t),s}function f8(r,e,t,{strict:i}={}){Zy(r,e);const s=`0x${r.replace("0x","").slice((e??0)*2,(t??r.length)*2)}`;return i&&Qy(s,e,t),s}function Ca(r,e){if(r.length!==e.length)throw new ZP({expectedLength:r.length,givenLength:e.length});const t=d8({params:r,values:e}),i=Xh(t);return i.length===0?"0x":i}function d8({params:r,values:e}){const t=[];for(let i=0;i<r.length;i++)t.push(Jh({param:r[i],value:e[i]}));return t}function Jh({param:r,value:e}){const t=Pc(r.type);if(t){const[i,s]=t;return g8(e,{length:i,param:{...r,type:s}})}if(r.type==="tuple")return w8(e,{param:r});if(r.type==="address")return p8(e);if(r.type==="bool")return m8(e);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int");return v8(e,{signed:i})}if(r.type.startsWith("bytes"))return y8(e,{param:r});if(r.type==="string")return b8(e);throw new iO(r.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Xh(r){let e=0;for(let o=0;o<r.length;o++){const{dynamic:u,encoded:l}=r[o];u?e+=32:e+=Vt(l)}const t=[],i=[];let s=0;for(let o=0;o<r.length;o++){const{dynamic:u,encoded:l}=r[o];u?(t.push(nt(e+s,{size:32})),i.push(l),s+=Vt(l)):t.push(l)}return Vn([...t,...i])}function p8(r){if(!qn(r))throw new wa({address:r});return{dynamic:!1,encoded:oi(r.toLowerCase())}}function g8(r,{length:e,param:t}){const i=e===null;if(!Array.isArray(r))throw new aO(r);if(!i&&r.length!==e)throw new JP({expectedLength:e,givenLength:r.length,type:`${t.type}[${e}]`});let s=!1;const o=[];for(let u=0;u<r.length;u++){const l=Jh({param:t,value:r[u]});l.dynamic&&(s=!0),o.push(l)}if(i||s){const u=Xh(o);if(i){const l=nt(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Vn([l,u]):l}}if(s)return{dynamic:!0,encoded:u}}return{dynamic:!1,encoded:Vn(o.map(({encoded:u})=>u))}}function y8(r,{param:e}){const[t,i]=e.type.split("bytes");if(!i){const s=Math.ceil(Vt(r)/32),o=[];for(let u=0;u<s;u++)o.push(oi(Ut(r,u*32,(u+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Vn([oi(nt(Vt(r),{size:32})),...o])}}if(Vt(r)!==parseInt(i))throw new XP({expectedSize:parseInt(i),value:r});return{dynamic:!1,encoded:oi(r,{dir:"right"})}}function m8(r){return{dynamic:!1,encoded:oi(ky(r))}}function v8(r,{signed:e}){return{dynamic:!1,encoded:nt(r,{size:32,signed:e})}}function b8(r){const e=Vh(r),t=Math.ceil(Vt(e)/32),i=[];for(let s=0;s<t;s++)i.push(oi(Ut(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Vn([oi(nt(Vt(e),{size:32})),...i])}}function w8(r,{param:e}){let t=!1;const i=[];for(let s=0;s<e.components.length;s++){const o=e.components[s],u=Array.isArray(r)?s:o.name,l=Jh({param:o,value:r[u]});i.push(l),l.dynamic&&(t=!0)}return{dynamic:t,encoded:t?Xh(i):Vn(i.map(({encoded:s})=>s))}}function Pc(r){const e=r.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Ta({abi:r,args:e=[],name:t}){const i=r.filter(s=>"name"in s&&s.name===t);if(i.length!==0){if(i.length===1)return i[0];for(const s of i){if(!("inputs"in s))continue;if(!e||e.length===0){if(!s.inputs||s.inputs.length===0)return s;continue}if(!s.inputs||s.inputs.length===0||s.inputs.length!==e.length)continue;if(e.every((u,l)=>{const f="inputs"in s&&s.inputs[l];return f?eh(u,f):!1}))return s}return i[0]}}function eh(r,e){const t=typeof r,i=e.type;switch(i){case"address":return qn(r);case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return i==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>eh(Object.values(r)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?t==="string"||r instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(r)&&r.every(s=>eh(s,{...e,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Zh({abi:r,eventName:e,args:t}){var l;let i=r[0];if(e&&(i=Ta({abi:r,args:t,name:e}),!i))throw new Q0(e,{docsPath:"/docs/contract/encodeEventTopics"});if(i.type!=="event")throw new Q0(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const s=Vi(i),o=Xy(s);let u=[];if(t&&"inputs"in i){const f=(l=i.inputs)==null?void 0:l.filter(y=>"indexed"in y&&y.indexed),g=Array.isArray(t)?t:Object.values(t).length>0?(f==null?void 0:f.map(y=>t[y.name]))??[]:[];g.length>0&&(u=(f==null?void 0:f.map((y,b)=>Array.isArray(g[b])?g[b].map((x,D)=>rg({param:y,value:g[b][D]})):g[b]?rg({param:y,value:g[b]}):null))??[])}return[o,...u]}function rg({param:r,value:e}){if(r.type==="string"||r.type==="bytes")return Rr(ki(e));if(r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/))throw new cO(r.type);return Ca([r],[e])}function Oc(r,{method:e}){var i,s;const t={};return r.transport.type==="fallback"&&((s=(i=r.transport).onResponse)==null||s.call(i,({method:o,response:u,status:l,transport:f})=>{l==="success"&&e===o&&(t[u]=f.request)})),o=>t[o]||r.request}async function em(r,{address:e,abi:t,args:i,eventName:s,fromBlock:o,strict:u,toBlock:l}){const f=Oc(r,{method:"eth_newFilter"}),g=s?Zh({abi:t,args:i,eventName:s}):void 0,y=await r.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof o=="bigint"?nt(o):o,toBlock:typeof l=="bigint"?nt(l):l,topics:g}]});return{abi:t,args:i,eventName:s,id:y,request:f(y),strict:u,type:"event"}}function dn(r){return typeof r=="string"?{address:r,type:"json-rpc"}:r}const tm=r=>Ut(typeof r=="string"?Yy(r):Jy(r),0,4);function yi({abi:r,args:e,functionName:t}){let i=r[0];if(t&&(i=Ta({abi:r,args:e,name:t}),!i))throw new nc(t,{docsPath:"/docs/contract/encodeFunctionData"});if(i.type!=="function")throw new nc(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const s=Vi(i),o=tm(s),u="inputs"in i&&i.inputs?Ca(i.inputs,e??[]):void 0;return Yh([o,u??"0x"])}const rm={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},_8={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},E8={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Qh(r,e){const t=e?`${e}${r.toLowerCase()}`:r.substring(2).toLowerCase(),i=Rr(Bn(t),"bytes"),s=(e?t.substring(`${e}0x`.length):t).split("");for(let o=0;o<40;o+=2)i[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(i[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());return`0x${s.join("")}`}function x8(r,e){if(!qn(r))throw new wa({address:r});return Qh(r,e)}function Ac(r,e){if(e==="0x"&&r.length>0)throw new Sc;if(Vt(e)&&Vt(e)<32)throw new Hh({data:e,params:r,size:Vt(e)});return S8({data:e,params:r})}function S8({data:r,params:e}){const t=[];let i=0;for(let s=0;s<e.length;s++){if(i>=Vt(r))throw new Hh({data:r,params:e,size:Vt(r)});const o=e[s],{consumed:u,value:l}=Es({data:r,param:o,position:i});t.push(l),i+=u}return t}function Es({data:r,param:e,position:t}){const i=Pc(e.type);if(i){const[o,u]=i;return I8(r,{length:o,param:{...e,type:u},position:t})}if(e.type==="tuple")return T8(r,{param:e,position:t});if(e.type==="string")return C8(r,{position:t});if(e.type.startsWith("bytes"))return O8(r,{param:e,position:t});const s=Ut(r,t,t+32,{strict:!0});if(e.type.startsWith("uint")||e.type.startsWith("int"))return A8(s,{param:e});if(e.type==="address")return D8(s);if(e.type==="bool")return P8(s);throw new sO(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function D8(r){return{consumed:32,value:Qh(Ut(r,-20))}}function I8(r,{param:e,length:t,position:i}){if(!t){const u=xr(Ut(r,i,i+32,{strict:!0})),l=xr(Ut(r,u,u+32,{strict:!0}));let f=0;const g=[];for(let y=0;y<l;++y){const b=Es({data:Ut(r,u+32),param:e,position:f});f+=b.consumed,g.push(b.value)}return{value:g,consumed:32}}if(ic(e)){const u=Pc(e.type),l=!(u!=null&&u[0]);let f=0;const g=[];for(let y=0;y<t;++y){const b=xr(Ut(r,i,i+32,{strict:!0})),x=Es({data:Ut(r,b),param:e,position:l?f:y*32});f+=x.consumed,g.push(x.value)}return{value:g,consumed:32}}let s=0;const o=[];for(let u=0;u<t;++u){const l=Es({data:r,param:e,position:i+s});s+=l.consumed,o.push(l.value)}return{value:o,consumed:s}}function P8(r){return{consumed:32,value:dO(r)}}function O8(r,{param:e,position:t}){const[i,s]=e.type.split("bytes");if(!s){const u=xr(Ut(r,t,t+32,{strict:!0})),l=xr(Ut(r,u,u+32,{strict:!0}));return l===0?{consumed:32,value:"0x"}:{consumed:32,value:Ut(r,u+32,u+32+l,{strict:!0})}}return{consumed:32,value:Ut(r,t,t+parseInt(s),{strict:!0})}}function A8(r,{param:e}){const t=e.type.startsWith("int");return{consumed:32,value:parseInt(e.type.split("int")[1]||"256")>48?Kh(r,{signed:t}):xr(r,{signed:t})}}function C8(r,{position:e}){const t=xr(Ut(r,e,e+32,{strict:!0})),i=xr(Ut(r,t,t+32,{strict:!0}));return i===0?{consumed:32,value:""}:{consumed:32,value:pO(_s(Ut(r,t+32,t+32+i,{strict:!0})))}}function T8(r,{param:e,position:t}){const i=e.components.length===0||e.components.some(({name:u})=>!u),s=i?[]:{};let o=0;if(ic(e)){const u=xr(Ut(r,t,t+32,{strict:!0}));for(let l=0;l<e.components.length;++l){const f=e.components[l],g=Es({data:Ut(r,u),param:f,position:o});o+=g.consumed,s[i?l:f==null?void 0:f.name]=g.value}return{consumed:32,value:s}}for(let u=0;u<e.components.length;++u){const l=e.components[u],f=Es({data:r,param:l,position:t+o});o+=f.consumed,s[i?u:l==null?void 0:l.name]=f.value}return{consumed:o,value:s}}function ic(r){var i;const{type:e}=r;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(i=r.components)==null?void 0:i.some(ic);const t=Pc(r.type);return!!(t&&ic({...r,type:t[1]}))}function $8({abi:r,data:e}){const t=Ut(e,0,4);if(t==="0x")throw new Sc;const s=[...r||[],_8,E8].find(o=>o.type==="error"&&t===tm(Vi(o)));if(!s)throw new QP(t,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Ac(s.inputs,Ut(e,4)):void 0,errorName:s.name}}const Sr=(r,e,t)=>JSON.stringify(r,(i,s)=>{const o=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(i,o):o},t);function nm({abiItem:r,args:e,includeFunctionName:t=!0,includeName:i=!1}){if("name"in r&&"inputs"in r&&r.inputs)return`${t?r.name:""}(${r.inputs.map((s,o)=>`${i&&s.name?`${s.name}: `:""}${typeof e[o]=="object"?Sr(e[o]):e[o]}`).join(", ")})`}const im={gwei:9,wei:18},N8={ether:-9,wei:9};function Ui(r,e){let t=r.toString();const i=t.startsWith("-");i&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,o]=[t.slice(0,t.length-e),t.slice(t.length-e)];return o=o.replace(/(0+)$/,""),`${i?"-":""}${s||"0"}${o?`.${o}`:""}`}function tr(r,e="wei"){return Ui(r,im[e])}function qr(r,e="wei"){return Ui(r,N8[e])}function Cc(r){const e=Object.entries(r).map(([i,s])=>s===void 0||s===!1?null:[i,s]).filter(Boolean),t=e.reduce((i,[s])=>Math.max(i,s.length),0);return e.map(([i,s])=>`  ${`${i}:`.padEnd(t+1)}  ${s}`).join(`
`)}class R8 extends fe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class F8 extends fe{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:y,to:b,value:x}){const D=Cc({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:t==null?void 0:t.address,to:b,value:typeof x<"u"&&`${tr(x)} ${(s==null?void 0:s.nativeCurrency.symbol)||"ETH"}`,data:o,gas:u,gasPrice:typeof l<"u"&&`${qr(l)} gwei`,maxFeePerGas:typeof f<"u"&&`${qr(f)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${qr(g)} gwei`,nonce:y});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",D].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class sm extends fe{constructor({blockHash:e,blockNumber:t,blockTag:i,hash:s,index:o}){let u="Transaction";i&&o!==void 0&&(u=`Transaction at block time "${i}" at index "${o}"`),e&&o!==void 0&&(u=`Transaction at block hash "${e}" at index "${o}"`),t&&o!==void 0&&(u=`Transaction at block number "${t}" at index "${o}"`),s&&(u=`Transaction with hash "${s}"`),super(`${u} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class am extends fe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class M8 extends fe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}class om extends fe{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:y,to:b,value:x}){const D=t?dn(t):void 0,S=Cc({from:D==null?void 0:D.address,to:b,value:typeof x<"u"&&`${tr(x)} ${(s==null?void 0:s.nativeCurrency.symbol)||"ETH"}`,data:o,gas:u,gasPrice:typeof l<"u"&&`${qr(l)} gwei`,maxFeePerGas:typeof f<"u"&&`${qr(f)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${qr(g)} gwei`,nonce:y});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",S].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class ef extends fe{constructor(e,{abi:t,args:i,contractAddress:s,docsPath:o,functionName:u,sender:l}){const f=Ta({abi:t,args:i,name:u}),g=f?nm({abiItem:f,args:i,includeFunctionName:!1,includeName:!1}):void 0,y=f?Vi(f,{includeName:!0}):void 0,b=Cc({address:s&&WP(s),function:y,args:g&&g!=="()"&&`${[...Array((u==null?void 0:u.length)??0).keys()].map(()=>" ").join("")}${g}`,sender:l});super(e.shortMessage||`An unknown error occurred while executing the contract function "${u}".`,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",b].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=t,this.args=i,this.cause=e,this.contractAddress=s,this.functionName=u,this.sender=l}}class L8 extends fe{constructor({abi:e,data:t,functionName:i,message:s}){let o,u,l;if(t&&t!=="0x"){o=$8({abi:e,data:t});const{abiItem:f,errorName:g,args:y}=o;if(g==="Error")l=y[0];else if(g==="Panic"){const[b]=y;l=rm[b]}else{const b=f?Vi(f,{includeName:!0}):void 0,x=f&&y?nm({abiItem:f,args:y,includeFunctionName:!1,includeName:!1}):void 0;u=[b?`Error: ${b}`:"",x&&x!=="()"?`       ${[...Array((g==null?void 0:g.length)??0).keys()].map(()=>" ").join("")}${x}`:""]}}else s&&(l=s);super(l&&l!=="execution reverted"?[`The contract function "${i}" reverted with the following reason:`,l].join(`
`):`The contract function "${i}" reverted.`,{metaMessages:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.reason=l,this.data=o}}class j8 extends fe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class tf extends fe{constructor({data:e,message:t}){super(t||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}const U8=3;function _a(r,{abi:e,address:t,args:i,docsPath:s,functionName:o,sender:u}){const{code:l,data:f,message:g,shortMessage:y}=r instanceof tf?r:r instanceof fe?r.walk(x=>"data"in x):{};let b=r;return r instanceof Sc?b=new j8({functionName:o}):l===U8&&(f||g||y)&&(b=new L8({abi:e,data:typeof f=="object"?f.data:f,functionName:o,message:y??g})),new ef(b,{abi:e,args:i,contractAddress:t,docsPath:s,functionName:o,sender:u})}class $a extends fe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join(`
`),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}class k8 extends fe{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:y,to:b,value:x}){const D=Cc({from:t==null?void 0:t.address,to:b,value:typeof x<"u"&&`${tr(x)} ${(s==null?void 0:s.nativeCurrency.symbol)||"ETH"}`,data:o,gas:u,gasPrice:typeof l<"u"&&`${qr(l)} gwei`,maxFeePerGas:typeof f<"u"&&`${qr(f)} gwei`,maxPriorityFeePerGas:typeof g<"u"&&`${qr(g)} gwei`,nonce:y});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",D].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}class xs extends fe{constructor({cause:e,message:t}={}){var s;const i=(s=t==null?void 0:t.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(xs,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(xs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class sc extends fe{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${qr(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(sc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class th extends fe{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${qr(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(th,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class rh extends fe{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(rh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class nh extends fe{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(nh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported/});class ih extends fe{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(ih,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class sh extends fe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(sh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class ah extends fe{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(ah,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class oh extends fe{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(oh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class ch extends fe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(ch,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class ac extends fe{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:i}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${qr(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${i?` = ${qr(i)} gwei`:""}).`].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(ac,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class B8 extends fe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.message}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}class pa extends fe{constructor({body:e,details:t,headers:i,status:s,url:o}){super("HTTP request failed.",{details:t,metaMessages:[s&&`Status: ${s}`,`URL: ${xc(o)}`,e&&`Request body: ${Sr(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class q8 extends fe{constructor({body:e,details:t,url:i}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${xc(i)}`,`Request body: ${Sr(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class rf extends fe{constructor({body:e,error:t,url:i}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${xc(i)}`,`Request body: ${Sr(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class uh extends fe{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${xc(t)}`,`Request body: ${Sr(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}const z8=-1;class Fr extends fe{constructor(e,{code:t,docsPath:i,metaMessages:s,shortMessage:o}){super(o,{cause:e,docsPath:i,metaMessages:s||(e==null?void 0:e.metaMessages)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof rf?e.code:t??z8}}class As extends Fr{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class H8 extends Fr{constructor(e){super(e,{code:-32700,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}class K8 extends Fr{constructor(e){super(e,{code:-32600,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}class V8 extends Fr{constructor(e){super(e,{code:-32601,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}class W8 extends Fr{constructor(e){super(e,{code:-32602,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}class G8 extends Fr{constructor(e){super(e,{code:-32603,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}class cm extends Fr{constructor(e){super(e,{code:-32e3,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}class Y8 extends Fr{constructor(e){super(e,{code:-32001,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}class J8 extends Fr{constructor(e){super(e,{code:-32002,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}class um extends Fr{constructor(e){super(e,{code:-32003,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}class ng extends Fr{constructor(e){super(e,{code:-32004,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}class X8 extends Fr{constructor(e){super(e,{code:-32005,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}class Z8 extends Fr{constructor(e){super(e,{code:-32006,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}class Q8 extends As{constructor(e){super(e,{code:4001,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}class eA extends As{constructor(e){super(e,{code:4100,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}class tA extends As{constructor(e){super(e,{code:4200,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}class rA extends As{constructor(e){super(e,{code:4900,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}class nA extends As{constructor(e){super(e,{code:4901,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}class iA extends As{constructor(e){super(e,{code:4902,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}class sA extends Fr{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}function nf(r){return r instanceof um||r instanceof cm||r instanceof rf&&r.code===xs.code}function sf(r,e){var i;const t=r.details.toLowerCase();return sc.nodeMessage.test(t)?new sc({cause:r,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):th.nodeMessage.test(t)?new th({cause:r,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rh.nodeMessage.test(t)?new rh({cause:r,nonce:e==null?void 0:e.nonce}):nh.nodeMessage.test(t)?new nh({cause:r,nonce:e==null?void 0:e.nonce}):ih.nodeMessage.test(t)?new ih({cause:r,nonce:e==null?void 0:e.nonce}):sh.nodeMessage.test(t)?new sh({cause:r}):ah.nodeMessage.test(t)?new ah({cause:r,gas:e==null?void 0:e.gas}):oh.nodeMessage.test(t)?new oh({cause:r,gas:e==null?void 0:e.gas}):ch.nodeMessage.test(t)?new ch({cause:r}):ac.nodeMessage.test(t)?new ac({cause:r,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):t.match(xs.nodeMessage)||"code"in r.cause&&((i=r.cause)==null?void 0:i.code)===xs.code?new xs({cause:r,message:r.cause.details||r.details}):new B8({cause:r.cause.cause})}function aA(r,{docsPath:e,...t}){let i=r;return nf(r)&&(i=sf(r,t)),new k8(i,{docsPath:e,...t})}function af(r,{formatter:e}){return e?Object.keys(e({})).reduce((i,s)=>(r!=null&&r.hasOwnProperty(s)&&(i[s]=r[s]),i),{}):{}}function Cs(r,{formatter:e}){return e(r)}function of(r){return{...r,gas:typeof r.gas<"u"?nt(r.gas):void 0,gasPrice:typeof r.gasPrice<"u"?nt(r.gasPrice):void 0,maxFeePerGas:typeof r.maxFeePerGas<"u"?nt(r.maxFeePerGas):void 0,maxPriorityFeePerGas:typeof r.maxPriorityFeePerGas<"u"?nt(r.maxPriorityFeePerGas):void 0,nonce:typeof r.nonce<"u"?nt(r.nonce):void 0,value:typeof r.value<"u"?nt(r.value):void 0}}function Tc(r){const{account:e,gasPrice:t,maxFeePerGas:i,maxPriorityFeePerGas:s,to:o}=r,u=e?dn(e):void 0;if(u&&!qn(u.address))throw new wa({address:u.address});if(o&&!qn(o))throw new wa({address:o});if(typeof t<"u"&&(typeof i<"u"||typeof s<"u"))throw new R8;if(i&&i>2n**256n-1n)throw new sc({maxFeePerGas:i});if(s&&i&&s>i)throw new ac({maxFeePerGas:i,maxPriorityFeePerGas:s})}class oA extends fe{constructor({blockHash:e,blockNumber:t}){let i="Block";e&&(i=`Block at hash "${e}"`),t&&(i=`Block at number "${t}"`),super(`${i} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const lm={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function hm(r){const e={...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,chainId:r.chainId?xr(r.chainId):void 0,gas:r.gas?BigInt(r.gas):void 0,gasPrice:r.gasPrice?BigInt(r.gasPrice):void 0,maxFeePerGas:r.maxFeePerGas?BigInt(r.maxFeePerGas):void 0,maxPriorityFeePerGas:r.maxPriorityFeePerGas?BigInt(r.maxPriorityFeePerGas):void 0,nonce:r.nonce?xr(r.nonce):void 0,to:r.to?r.to:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,type:r.type?lm[r.type]:void 0,value:r.value?BigInt(r.value):void 0,v:r.v?BigInt(r.v):void 0};return e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip2930"&&(delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e}function cA(r){var t;const e=(t=r.transactions)==null?void 0:t.map(i=>typeof i=="string"?i:hm(i));return{...r,baseFeePerGas:r.baseFeePerGas?BigInt(r.baseFeePerGas):null,difficulty:r.difficulty?BigInt(r.difficulty):void 0,gasLimit:r.gasLimit?BigInt(r.gasLimit):void 0,gasUsed:r.gasUsed?BigInt(r.gasUsed):void 0,hash:r.hash?r.hash:null,logsBloom:r.logsBloom?r.logsBloom:null,nonce:r.nonce?r.nonce:null,number:r.number?BigInt(r.number):null,size:r.size?BigInt(r.size):void 0,timestamp:r.timestamp?BigInt(r.timestamp):void 0,transactions:e,totalDifficulty:r.totalDifficulty?BigInt(r.totalDifficulty):null}}async function Ea(r,{blockHash:e,blockNumber:t,blockTag:i="latest",includeTransactions:s=!1}={}){var l,f;const o=t!==void 0?nt(t):void 0;let u=null;if(e?u=await r.request({method:"eth_getBlockByHash",params:[e,s]}):u=await r.request({method:"eth_getBlockByNumber",params:[o||i,s]}),!u)throw new oA({blockHash:e,blockNumber:t});return Cs(u,{formatter:((f=(l=r.chain)==null?void 0:l.formatters)==null?void 0:f.block)||cA})}async function fm(r){const e=await r.request({method:"eth_gasPrice"});return BigInt(e)}async function dm(r,{address:e,blockTag:t="latest",blockNumber:i}){const s=await r.request({method:"eth_getTransactionCount",params:[e,i?nt(i):t]});return xr(s)}const Pl=1500000000n;async function pm(r,e){const{account:t,gas:i,gasPrice:s,maxFeePerGas:o,maxPriorityFeePerGas:u,nonce:l}=e;if(!t)throw new $a;const f=dn(t),g=await Ea(r,{blockTag:"latest"}),y={...e,from:f.address};if(typeof l>"u"&&(y.nonce=await dm(r,{address:f.address,blockTag:"pending"})),g.baseFeePerGas){if(typeof s<"u")throw new fe("Chain does not support legacy `gasPrice`.");if(typeof o>"u")y.maxPriorityFeePerGas=u??Pl,y.maxFeePerGas=g.baseFeePerGas*120n/100n+y.maxPriorityFeePerGas;else{if(typeof u>"u"&&o<Pl)throw new fe("`maxFeePerGas` cannot be less than the default `maxPriorityFeePerGas` (1.5 gwei).");y.maxFeePerGas=o,y.maxPriorityFeePerGas=u??Pl}}else{if(typeof o<"u"||typeof u<"u")throw new fe("Chain does not support EIP-1559 fees.");typeof s>"u"&&(y.gasPrice=await fm(r)*120n/100n)}return typeof i>"u"&&(y.gas=await cf(r,{...y,account:{address:f.address,type:"json-rpc"}})),Tc(y),y}async function cf(r,e){var s,o;const t=e.account??r.account;if(!t)throw new $a({docsPath:"/docs/actions/public/estimateGas"});const i=dn(t);try{const{accessList:u,blockNumber:l,blockTag:f,data:g,gas:y,gasPrice:b,maxFeePerGas:x,maxPriorityFeePerGas:D,nonce:S,to:N,value:R,...K}=i.type==="local"?await pm(r,e):e,M=(l?nt(l):void 0)||f;Tc(e);const O=(o=(s=r.chain)==null?void 0:s.formatters)==null?void 0:o.transactionRequest,A=Cs({from:i.address,accessList:u,data:g,gas:y,gasPrice:b,maxFeePerGas:x,maxPriorityFeePerGas:D,nonce:S,to:N,value:R,...af(K,{formatter:O})},{formatter:O||of}),_=await r.request({method:"eth_estimateGas",params:M?[A,M]:[A]});return BigInt(_)}catch(u){throw aA(u,{...e,account:i,chain:r.chain})}}async function uA(r,{abi:e,address:t,args:i,functionName:s,...o}){const u=yi({abi:e,args:i,functionName:s});try{return await cf(r,{data:u,to:t,...o})}catch(l){const f=o.account?dn(o.account):void 0;throw _a(l,{abi:e,address:t,args:i,docsPath:"/docs/contract/simulateContract",functionName:s,sender:f==null?void 0:f.address})}}const Ol="/docs/contract/decodeFunctionResult";function Ts({abi:r,args:e,functionName:t,data:i}){let s=r[0];if(t&&(s=Ta({abi:r,args:e,name:t}),!s))throw new nc(t,{docsPath:Ol});if(s.type!=="function")throw new nc(void 0,{docsPath:Ol});if(!s.outputs)throw new rO(s.name,{docsPath:Ol});const o=Ac(s.outputs,i);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const lh=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],gm=[{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],ig=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],sg=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]}],lA=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}],hA="0x82ad56cb";class hh extends fe{constructor({blockNumber:e,chain:t,contract:i}){super(`Chain "${t.name}" does not support contract "${i.name}".`,{metaMessages:["This could be due to any of the following:",...e&&i.blockCreated&&i.blockCreated>e?[`- The contract "${i.name}" was not deployed until block ${i.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${i.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class fA extends fe{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class dA extends fe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class ym extends fe{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}function pA({chain:r,currentChainId:e}){if(!r)throw new dA;if(e!==r.id)throw new fA({chain:r,currentChainId:e})}function $s({blockNumber:r,chain:e,contract:t}){var s;const i=(s=e==null?void 0:e.contracts)==null?void 0:s[t];if(!i)throw new hh({chain:e,contract:{name:t}});if(r&&i.blockCreated&&i.blockCreated>r)throw new hh({blockNumber:r,chain:e,contract:{name:t,blockCreated:i.blockCreated}});return i.address}function gA(r,{docsPath:e,...t}){let i=r;return nf(r)&&(i=sf(r,t)),new om(i,{docsPath:e,...t})}const Al=new Map;function mm({fn:r,id:e,shouldSplitBatch:t,wait:i=0}){const s=async()=>{const g=l();o();const y=g.map(({args:b})=>b);y.length!==0&&r(y).then(b=>{g.forEach(({pendingPromise:x},D)=>{var S;return(S=x.resolve)==null?void 0:S.call(x,[b[D],b])})}).catch(b=>{g.forEach(({pendingPromise:x})=>{var D;return(D=x.reject)==null?void 0:D.call(x,b)})})},o=()=>Al.delete(e),u=()=>l().map(({args:g})=>g),l=()=>Al.get(e)||[],f=g=>Al.set(e,[...l(),g]);return{flush:o,async schedule(g){const y={},b=new Promise((S,N)=>{y.resolve=S,y.reject=N});return(t==null?void 0:t([...u(),g]))&&s(),l().length>0?(f({args:g,pendingPromise:y}),b):(f({args:g,pendingPromise:y}),setTimeout(s,i),b)}}}async function $c(r,e){var K,$,M;const{account:t,batch:i=!!((K=r.batch)!=null&&K.multicall),blockNumber:s,blockTag:o="latest",accessList:u,data:l,gas:f,gasPrice:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:x,to:D,value:S,...N}=e,R=t?dn(t):void 0;try{Tc(e);const A=(s?nt(s):void 0)||o,_=(M=($=r.chain)==null?void 0:$.formatters)==null?void 0:M.transactionRequest,h=Cs({from:R==null?void 0:R.address,accessList:u,data:l,gas:f,gasPrice:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:x,to:D,value:S,...af(N,{formatter:_})},{formatter:_||of});if(i&&yA({request:h}))try{return await mA(r,{...h,blockNumber:s,blockTag:o})}catch(H){if(!(H instanceof ym)&&!(H instanceof hh))throw H}const w=await r.request({method:"eth_call",params:A?[h,A]:[h]});return w==="0x"?{data:void 0}:{data:w}}catch(O){const A=vA(O),{offchainLookup:_,offchainLookupSignature:h}=await vh(()=>import("./ccip-f9c342bf.js"),[]);if((A==null?void 0:A.slice(0,10))===h&&D)return{data:await _(r,{data:A,to:D})};throw gA(O,{...e,account:R,chain:r.chain})}}function yA({request:r}){const{data:e,to:t,...i}=r;return!(!e||e.startsWith(hA)||!t||Object.values(i).filter(s=>typeof s<"u").length>0)}async function mA(r,e){var N;const{batchSize:t=1024,wait:i=0}=typeof((N=r.batch)==null?void 0:N.multicall)=="object"?r.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:u,multicallAddress:l,to:f}=e;let g=l;if(!g){if(!r.chain)throw new ym;g=$s({blockNumber:s,chain:r.chain,contract:"multicall3"})}const b=(s?nt(s):void 0)||o,{schedule:x}=mm({id:`${r.uid}.${b}`,wait:i,shouldSplitBatch(R){return R.reduce(($,{data:M})=>$+(M.length-2),0)>t*2},fn:async R=>{const K=R.map(O=>({allowFailure:!0,callData:O.data,target:O.to})),$=yi({abi:lh,args:[K],functionName:"aggregate3"}),M=await r.request({method:"eth_call",params:[{data:$,to:g},b]});return Ts({abi:lh,args:[K],functionName:"aggregate3",data:M||"0x"})}}),[{returnData:D,success:S}]=await x({data:u,to:f});if(!S)throw new tf({data:D});return D==="0x"?{data:void 0}:{data:D}}function vA(r){if(!(r instanceof fe))return;const e=r.walk();return typeof e.data=="object"?e.data.data:e.data}async function li(r,{abi:e,address:t,args:i,functionName:s,...o}){const u=yi({abi:e,args:i,functionName:s});try{const{data:l}=await $c(r,{data:u,to:t,...o});return Ts({abi:e,args:i,functionName:s,data:l||"0x"})}catch(l){throw _a(l,{abi:e,address:t,args:i,docsPath:"/docs/contract/readContract",functionName:s})}}async function bA(r,{abi:e,address:t,args:i,dataSuffix:s,functionName:o,...u}){const l=u.account?dn(u.account):void 0,f=yi({abi:e,args:i,functionName:o});try{const{data:g}=await $c(r,{batch:!1,data:`${f}${s?s.replace("0x",""):""}`,to:t,...u});return{result:Ts({abi:e,args:i,functionName:o,data:g||"0x"}),request:{abi:e,address:t,args:i,functionName:o,...u}}}catch(g){throw _a(g,{abi:e,address:t,args:i,docsPath:"/docs/contract/simulateContract",functionName:o,sender:l==null?void 0:l.address})}}const Cl=new Map,ag=new Map;let wA=0;function Ns(r,e,t){const i=++wA,s=()=>Cl.get(r)||[],o=()=>{const y=s();Cl.set(r,y.filter(b=>b.id!==i))},u=()=>{const y=ag.get(r);s().length===1&&y&&y(),o()},l=s();if(Cl.set(r,[...l,{id:i,fns:e}]),l&&l.length>0)return u;const f={};for(const y in e)f[y]=(...b)=>{const x=s();x.length!==0&&x.forEach(D=>{var S,N;return(N=(S=D.fns)[y])==null?void 0:N.call(S,...b)})};const g=t(f);return typeof g=="function"&&ag.set(r,g),u}async function fh(r){return new Promise(e=>setTimeout(e,r))}function Na(r,{emitOnBegin:e,initialWaitTime:t,interval:i}){let s=!0;const o=()=>s=!1;return(async()=>{let l;e&&(l=await r({unpoll:o}));const f=await(t==null?void 0:t(l))??i;await fh(f);const g=async()=>{s&&(await r({unpoll:o}),await fh(i),g())};g()})(),o}const _A=new Map,EA=new Map;function xA(r){const e=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:u=>o.set(s,u)}),t=e(r,_A),i=e(r,EA);return{clear:()=>{t.clear(),i.clear()},promise:t,response:i}}async function SA(r,{cacheKey:e,maxAge:t=1/0}){const i=xA(e),s=i.response.get();if(s&&t>0&&new Date().getTime()-s.created.getTime()<t)return s.data;let o=i.promise.get();o||(o=r(),i.promise.set(o));try{const u=await o;return i.response.set({created:new Date,data:u}),u}finally{i.promise.clear()}}const DA=r=>`blockNumber.${r}`;async function Ra(r,{maxAge:e=r.pollingInterval}={}){const t=await SA(()=>r.request({method:"eth_blockNumber"}),{cacheKey:DA(r.uid),maxAge:e});return BigInt(t)}const og="/docs/contract/decodeEventLog";function uf({abi:r,data:e,strict:t,topics:i}){const s=t??!0,[o,...u]=i;if(!o)throw new eO({docsPath:og});const l=r.find(S=>S.type==="event"&&o===Xy(Vi(S)));if(!(l&&"name"in l)||l.type!=="event")throw new tO(o,{docsPath:og});const{name:f,inputs:g}=l,y=g==null?void 0:g.some(S=>!("name"in S&&S.name));let b=y?[]:{};const x=g.filter(S=>"indexed"in S&&S.indexed);if(u.length>0)for(let S=0;S<x.length;S++){const N=x[S],R=u[S];if(!R)throw new Dc({abiItem:l,param:N});b[N.name||S]=IA({param:N,value:R})}const D=g.filter(S=>!("indexed"in S&&S.indexed));if(D.length>0){if(e&&e!=="0x")try{const S=Ac(D,e);if(S)if(y)b=[...b,...S];else for(let N=0;N<D.length;N++)b[D[N].name]=S[N]}catch(S){if(s)throw S instanceof Hh?new ma({abiItem:l,data:S.data,params:S.params,size:S.size}):S}else if(s)throw new ma({abiItem:l,data:"0x",params:D,size:0})}return{eventName:f,args:Object.values(b).length>0?b:void 0}}function IA({param:r,value:e}){return r.type==="string"||r.type==="bytes"||r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/)?e:(Ac([r],e)||[])[0]}function Bi(r,{args:e,eventName:t}={}){return{...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,logIndex:r.logIndex?Number(r.logIndex):null,transactionHash:r.transactionHash?r.transactionHash:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,...t?{args:e,eventName:t}:{}}}async function Nc(r,{filter:e}){const t="strict"in e&&e.strict;return(await e.request({method:"eth_getFilterChanges",params:[e.id]})).map(s=>{var o;if(typeof s=="string")return s;try{const{eventName:u,args:l}="abi"in e&&e.abi?uf({abi:e.abi,data:s.data,topics:s.topics,strict:t}):{eventName:void 0,args:void 0};return Bi(s,{args:l,eventName:u})}catch(u){let l,f;if(u instanceof ma||u instanceof Dc){if("strict"in e&&e.strict)return;l=u.abiItem.name,f=(o=u.abiItem.inputs)==null?void 0:o.some(g=>!("name"in g&&g.name))}return Bi(s,{args:f?[]:{},eventName:l})}}).filter(Boolean)}async function lf(r,{address:e,blockHash:t,fromBlock:i,toBlock:s,event:o,args:u,strict:l}={}){const f=l??!1;let g=[];o&&(g=Zh({abi:[o],eventName:o.name,args:u}));let y;return t?y=await r.request({method:"eth_getLogs",params:[{address:e,topics:g,blockHash:t}]}):y=await r.request({method:"eth_getLogs",params:[{address:e,topics:g,fromBlock:typeof i=="bigint"?nt(i):i,toBlock:typeof s=="bigint"?nt(s):s}]}),y.map(b=>{var x;try{const{eventName:D,args:S}=o?uf({abi:[o],data:b.data,topics:b.topics,strict:f}):{eventName:void 0,args:void 0};return Bi(b,{args:S,eventName:D})}catch(D){let S,N;if(D instanceof ma||D instanceof Dc){if(f)return;S=D.abiItem.name,N=(x=D.abiItem.inputs)==null?void 0:x.some(R=>!("name"in R&&R.name))}return Bi(b,{args:N?[]:{},eventName:S})}}).filter(Boolean)}async function Rc(r,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function PA(r,{abi:e,address:t,args:i,batch:s=!0,eventName:o,onError:u,onLogs:l,pollingInterval:f=r.pollingInterval,strict:g}){const y=Sr(["watchContractEvent",t,i,s,r.uid,o,f]),b=g??!1;return Ns(y,{onLogs:l,onError:u},x=>{let D,S,N=!1;const R=Na(async()=>{var K;if(!N){try{S=await em(r,{abi:e,address:t,args:i,eventName:o,strict:b})}catch{}N=!0;return}try{let $;if(S)$=await Nc(r,{filter:S});else{const M=await Ra(r);D&&D!==M?$=await lf(r,{address:t,args:i,fromBlock:D+1n,toBlock:M,event:Ta({abi:e,name:o})}):$=[],D=M}if($.length===0)return;s?x.onLogs($):$.forEach(M=>x.onLogs([M]))}catch($){(K=x.onError)==null||K.call(x,$)}},{emitOnBegin:!0,interval:f});return async()=>{S&&await Rc(r,{filter:S}),R()}})}function OA(r,{docsPath:e,...t}){let i=r;return nf(r)&&(i=sf(r,t)),new F8(i,{docsPath:e,...t})}async function oc(r){const e=await r.request({method:"eth_chainId"});return xr(e)}async function hf(r,e){var N;const{account:t=r.account,chain:i=r.chain,accessList:s,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:y,to:b,value:x,...D}=e;if(!t)throw new $a({docsPath:"/docs/actions/wallet/sendTransaction"});const S=dn(t);try{Tc(e);let R;if(i!==null&&(R=await oc(r),pA({currentChainId:R,chain:i})),S.type==="local"){const M=await pm(r,{account:S,accessList:s,chain:i,data:o,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:y,to:b,value:x,...D});R||(R=await oc(r));const O=await S.signTransaction({...M,chainId:R});return await r.request({method:"eth_sendRawTransaction",params:[O]})}const K=(N=i==null?void 0:i.formatters)==null?void 0:N.transactionRequest,$=Cs({accessList:s,data:o,from:S.address,gas:u,gasPrice:l,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:y,to:b,value:x,...af(D,{formatter:K})},{formatter:K||of});return await r.request({method:"eth_sendTransaction",params:[$]})}catch(R){throw OA(R,{...e,account:S,chain:e.chain||void 0})}}async function AA(r,{abi:e,address:t,args:i,dataSuffix:s,functionName:o,...u}){const l=yi({abi:e,args:i,functionName:o});return await hf(r,{data:`${l}${s?s.replace("0x",""):""}`,to:t,...u})}const dh=256;let Ho=dh,Ko;function CA(r=11){if(!Ko||Ho+r>dh*2){Ko="",Ho=0;for(let e=0;e<dh;e++)Ko+=(256+Math.random()*256|0).toString(16).substring(1)}return Ko.substring(Ho,Ho+++r)}function vm({chain:r,key:e="base",name:t="Base Client",pollingInterval:i=4e3,transport:s,type:o="base"}){const{config:u,request:l,value:f}=s({chain:r,pollingInterval:i});return{chain:r,key:e,name:t,pollingInterval:i,request:l,transport:{...u,...f},type:o,uid:CA()}}function bm(r,{delay:e=100,retryCount:t=2,shouldRetry:i=()=>!0}={}){return new Promise((s,o)=>{const u=async({count:l=0}={})=>{const f=async({error:g})=>{const y=typeof e=="function"?e({count:l,error:g}):e;y&&await fh(y),u({count:l+1})};try{const g=await r();s(g)}catch(g){if(l<t&&await i({count:l,error:g}))return f({error:g});o(g)}};u()})}const TA=r=>"code"in r?r.code!==-1&&r.code!==-32004&&r.code!==-32005&&r.code!==-32042&&r.code!==-32603:r instanceof pa&&r.status?r.status!==403&&r.status!==408&&r.status!==413&&r.status!==429&&r.status!==500&&r.status!==502&&r.status!==503&&r.status!==504:!1;function $A(r,{retryDelay:e=150,retryCount:t=3}={}){return async i=>bm(async()=>{try{return await r(i)}catch(s){const o=s;throw o.code===-32700?new H8(o):o.code===-32600?new K8(o):o.code===-32601?new V8(o):o.code===-32602?new W8(o):o.code===-32603?new G8(o):o.code===-32e3?new cm(o):o.code===-32001?new Y8(o):o.code===-32002?new J8(o):o.code===-32003?new um(o):o.code===-32004?new ng(o):o.code===-32005?new X8(o):o.code===-32006?new Z8(o):o.code===-32042?new ng(o):o.code===4001?new Q8(o):o.code===4100?new eA(o):o.code===4200?new tA(o):o.code===4900?new rA(o):o.code===4901?new nA(o):o.code===4902?new iA(o):s instanceof fe?s:new sA(o)}},{delay:({count:s,error:o})=>{var u;if(o&&o instanceof pa){const l=(u=o==null?void 0:o.headers)==null?void 0:u.get("Retry-After");if(l!=null&&l.match(/\d/))return parseInt(l)*1e3}return~~(1<<s)*e},retryCount:t,shouldRetry:({error:s})=>!TA(s)})}function wm({key:r,name:e,request:t,retryCount:i=3,retryDelay:s=150,timeout:o,type:u},l){return{config:{key:r,name:e,request:t,retryCount:i,retryDelay:s,timeout:o,type:u},request:$A(t,{retryCount:i,retryDelay:s}),value:l}}function cg(r,e={}){const{key:t="custom",name:i="Custom Provider",retryDelay:s}=e;return({retryCount:o})=>wm({key:t,name:i,request:r.request.bind(r),retryCount:e.retryCount??o,retryDelay:s,type:"custom"})}class NA extends fe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}function _m(r,{errorInstance:e,timeout:t,signal:i}){return new Promise((s,o)=>{(async()=>{let u;try{const l=new AbortController;t>0&&(u=setTimeout(()=>{i?l.abort():o(e)},t)),s(await r({signal:l==null?void 0:l.signal}))}catch(l){l.name==="AbortError"&&o(e),o(l)}finally{clearTimeout(u)}})()})}let ph=0;async function RA(r,{body:e,fetchOptions:t={},timeout:i=1e4}){var l;const{headers:s,method:o,signal:u}=t;try{const f=await _m(async({signal:y})=>await fetch(r,{...t,body:Array.isArray(e)?Sr(e.map(x=>({jsonrpc:"2.0",id:ph++,...x}))):Sr({jsonrpc:"2.0",id:ph++,...e}),headers:{...s,"Content-Type":"application/json"},method:o||"POST",signal:u||(i>0?y:void 0)}),{errorInstance:new uh({body:e,url:r}),timeout:i,signal:!0});let g;if((l=f.headers.get("Content-Type"))!=null&&l.startsWith("application/json")?g=await f.json():g=await f.text(),!f.ok)throw new pa({body:e,details:Sr(g.error)||f.statusText,headers:f.headers,status:f.status,url:r});return g}catch(f){throw f instanceof pa||f instanceof uh?f:new pa({body:e,details:f.message,url:r})}}function FA(r,{body:e,onResponse:t}){if(r.readyState===r.CLOSED||r.readyState===r.CLOSING)throw new q8({body:e,url:r.url,details:"Socket is closed."});const i=ph++,s=({data:o})=>{var l;const u=JSON.parse(o);typeof u.id=="number"&&i!==u.id||(t==null||t(u),e.method==="eth_subscribe"&&typeof u.result=="string"&&r.subscriptions.set(u.result,s),e.method==="eth_unsubscribe"&&r.subscriptions.delete((l=e.params)==null?void 0:l[0]))};return r.requests.set(i,s),r.send(JSON.stringify({jsonrpc:"2.0",...e,id:i})),r}async function MA(r,{body:e,timeout:t=1e4}){return _m(()=>new Promise(i=>gh.webSocket(r,{body:e,onResponse:i})),{errorInstance:new uh({body:e,url:r.url}),timeout:t})}const gh={http:RA,webSocket:FA,webSocketAsync:MA};function LA(r,e={}){const{batch:t,fetchOptions:i,key:s="http",name:o="HTTP JSON-RPC",retryDelay:u}=e;return({chain:l,retryCount:f,timeout:g})=>{const{batchSize:y=1e3,wait:b=0}=typeof t=="object"?t:{},x=e.retryCount??f,D=g??e.timeout??1e4,S=r||(l==null?void 0:l.rpcUrls.default.http[0]);if(!S)throw new NA;return wm({key:s,name:o,async request({method:N,params:R}){const K={method:N,params:R},{schedule:$}=mm({id:`${r}`,wait:b,shouldSplitBatch(_){return _.length>y},fn:_=>gh.http(S,{body:_,fetchOptions:i,timeout:D})}),M=async _=>t?$(_):[await gh.http(S,{body:_,fetchOptions:i,timeout:D})],[{error:O,result:A}]=await M(K);if(O)throw new rf({body:K,error:O,url:S});return A},retryCount:x,retryDelay:u,timeout:D,type:"http"},{url:r})}}const jA=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,UA=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Em({domain:r,message:e,primaryType:t,types:i}){const s=i,o=(u,l)=>{for(const f of u){const{name:g,type:y}=f,b=y,x=l[g],D=b.match(UA);if(D&&(typeof x=="number"||typeof x=="bigint")){const[R,K,$]=D;nt(x,{signed:K==="int",size:parseInt($)/8})}if(b==="address"&&typeof x=="string"&&!qn(x))throw new wa({address:x});const S=b.match(jA);if(S){const[R,K]=S;if(K&&Vt(x)!==parseInt(K))throw new nO({expectedSize:parseInt(K),givenSize:Vt(x)})}const N=s[b];N&&o(N,x)}};if(s.EIP712Domain&&r&&o(s.EIP712Domain,r),t!=="EIP712Domain"){const u=s[t];o(u,e)}}const Tl="/docs/contract/encodeDeployData";function xm({abi:r,args:e,bytecode:t}){if(!e||e.length===0)return t;const i=r.find(o=>"type"in o&&o.type==="constructor");if(!i)throw new YP({docsPath:Tl});if(!("inputs"in i))throw new Z0({docsPath:Tl});if(!i.inputs||i.inputs.length===0)throw new Z0({docsPath:Tl});const s=Ca(i.inputs,e);return Yh([t,s])}const kA={"0x0":"reverted","0x1":"success"};function BA(r){return{...r,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,contractAddress:r.contractAddress?r.contractAddress:null,cumulativeGasUsed:r.cumulativeGasUsed?BigInt(r.cumulativeGasUsed):null,effectiveGasPrice:r.effectiveGasPrice?BigInt(r.effectiveGasPrice):null,gasUsed:r.gasUsed?BigInt(r.gasUsed):null,logs:r.logs?r.logs.map(e=>Bi(e)):null,to:r.to?r.to:null,transactionIndex:r.transactionIndex?xr(r.transactionIndex):null,status:r.status?kA[r.status]:null,type:r.type?lm[r.type]:null}}function qA({domain:r,message:e,primaryType:t,types:i}){const s=typeof r>"u"?{}:r,o={EIP712Domain:[(s==null?void 0:s.name)&&{name:"name",type:"string"},(s==null?void 0:s.version)&&{name:"version",type:"string"},(s==null?void 0:s.chainId)&&{name:"chainId",type:"uint256"},(s==null?void 0:s.verifyingContract)&&{name:"verifyingContract",type:"address"},(s==null?void 0:s.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean),...i};Em({domain:s,message:e,primaryType:t,types:o});const u=["0x1901"];return s&&u.push(zA({domain:s,types:o})),t!=="EIP712Domain"&&u.push(Sm({data:e,primaryType:t,types:o})),Rr(Vn(u))}function zA({domain:r,types:e}){return Sm({data:r,primaryType:"EIP712Domain",types:e})}function Sm({data:r,primaryType:e,types:t}){const i=Dm({data:r,primaryType:e,types:t});return Rr(i)}function Dm({data:r,primaryType:e,types:t}){const i=[{type:"bytes32"}],s=[HA({primaryType:e,types:t})];for(const o of t[e]){const[u,l]=Pm({types:t,name:o.name,type:o.type,value:r[o.name]});i.push(u),s.push(l)}return Ca(i,s)}function HA({primaryType:r,types:e}){const t=Wn(KA({primaryType:r,types:e}));return Rr(t)}function KA({primaryType:r,types:e}){let t="";const i=Im({primaryType:r,types:e});i.delete(r);const s=[r,...Array.from(i).sort()];for(const o of s)t+=`${o}(${e[o].map(({name:u,type:l})=>`${l} ${u}`).join(",")})`;return t}function Im({primaryType:r,types:e},t=new Set){const i=r.match(/^\w*/u),s=i==null?void 0:i[0];if(t.has(s)||e[s]===void 0)return t;t.add(s);for(const o of e[s])Im({primaryType:o.type,types:e},t);return t}function Pm({types:r,name:e,type:t,value:i}){if(r[t]!==void 0)return[{type:"bytes32"},Rr(Dm({data:i,primaryType:t,types:r}))];if(t==="bytes")return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},Rr(i)];if(t==="string")return[{type:"bytes32"},Rr(Wn(i))];if(t.lastIndexOf("]")===t.length-1){const s=t.slice(0,t.lastIndexOf("[")),o=i.map(u=>Pm({name:e,type:s,types:r,value:u}));return[{type:"bytes32"},Rr(Ca(o.map(([u])=>u),o.map(([,u])=>u)))]}return[{type:t},i]}function VA(r,e){const t=(()=>typeof r=="string"?Bn(r):r.raw instanceof Uint8Array?r.raw:ki(r.raw))(),i=Bn(`Ethereum Signed Message:
${t.length}`);return Rr(Vn([i,t]),e)}function zn(r,e){let[t,i="0"]=r.split(".");const s=t.startsWith("-");if(s&&(t=t.slice(1)),i=i.replace(/(0+)$/,""),e===0)t=`${Math.round(+`${t}.${i}`)}`,i="";else if(i.length>e){const[o,u,l]=[i.slice(0,e-1),i.slice(e-1,e),i.slice(e)],f=Math.round(+`${u}.${l}`);f>9?i=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):i=`${o}${f}`,i.length>e&&(i=i.slice(1),t=`${BigInt(t)+1n}`),i=i.slice(0,e)}else i=i.padEnd(e,"0");return BigInt(`${s?"-":""}${t}${i}`)}function kn(r,e="wei"){return zn(r,im[e])}function Om(r){if(r.length!==66||r.indexOf("[")!==0||r.indexOf("]")!==65)return null;const e=`0x${r.slice(1,65)}`;return Kn(e)?e:null}function Am(r){let e=new Uint8Array(32).fill(0);if(!r)return va(e);const t=r.split(".");for(let i=t.length-1;i>=0;i-=1){const s=Om(t[i]),o=s?ki(s):Rr(Bn(t[i]),"bytes");e=Rr(Vn([e,o]),"bytes")}return va(e)}function WA(r){return`[${r.slice(2)}]`}function GA(r){const e=new Uint8Array(32).fill(0);return r?Om(r)||Rr(Bn(r)):va(e)}function Fc(r){const e=r.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const t=new Uint8Array(Bn(e).byteLength+2);let i=0;const s=e.split(".");for(let o=0;o<s.length;o++){let u=Bn(s[o]);u.byteLength>255&&(u=Bn(WA(GA(s[o])))),t[i]=u.length,t.set(u,i+1),i+=u.length+1}return t.byteLength!==i+1?t.slice(0,i+1):t}async function YA(r,{blockNumber:e,blockTag:t,name:i,universalResolverAddress:s}){var u;let o=s;if(!o){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=$s({blockNumber:e,chain:r.chain,contract:"ensUniversalResolver"})}try{const l=await li(r,{address:o,abi:gm,functionName:"resolve",args:[Wn(Fc(i)),yi({abi:sg,functionName:"addr",args:[Am(i)]})],blockNumber:e,blockTag:t});if(l[0]==="0x")return null;const f=Ts({abi:sg,functionName:"addr",data:l[0]});return _s(f)==="0x00"?null:f}catch(l){if(l instanceof ef){const f=(u=l.cause)==null?void 0:u.reason;if(f!=null&&f.includes("Wildcard on non-extended resolvers is not supported"))return null}throw l}}class JA extends fe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class fa extends fe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class ff extends fe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class XA extends fe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const ZA=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,QA=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,eC=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,tC=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function rC(r){try{const e=await fetch(r,{method:"HEAD"});if(e.status===200){const t=e.headers.get("content-type");return t==null?void 0:t.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(t=>{const i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=r})}}function ug(r,e){return r?r.endsWith("/")?r.slice(0,-1):r:e}function Cm({uri:r,gatewayUrls:e}){const t=eC.test(r);if(t)return{uri:r,isOnChain:!0,isEncoded:t};const i=ug(e==null?void 0:e.ipfs,"https://ipfs.io"),s=ug(e==null?void 0:e.arweave,"https://arweave.net"),o=r.match(ZA),{protocol:u,subpath:l,target:f,subtarget:g=""}=(o==null?void 0:o.groups)||{},y=u==="ipns:/"||l==="ipns/",b=u==="ipfs:/"||l==="ipfs/"||QA.test(r);if(r.startsWith("http")&&!y&&!b){let D=r;return e!=null&&e.arweave&&(D=r.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:D,isOnChain:!1,isEncoded:!1}}if((y||b)&&f)return{uri:`${i}/${y?"ipns":"ipfs"}/${f}${g}`,isOnChain:!1,isEncoded:!1};if(u==="ar:/"&&f)return{uri:`${s}/${f}${g||""}`,isOnChain:!1,isEncoded:!1};let x=r.replace(tC,"");if(x.startsWith("<svg")&&(x=`data:image/svg+xml;base64,${btoa(x)}`),x.startsWith("data:")||x.startsWith("{"))return{uri:x,isOnChain:!0,isEncoded:!1};throw new ff({uri:r})}function Tm(r){if(typeof r!="object"||!("image"in r)&&!("image_url"in r)&&!("image_data"in r))throw new JA({data:r});return r.image||r.image_url||r.image_data}async function nC({gatewayUrls:r,uri:e}){try{const t=await fetch(e).then(s=>s.json());return await df({gatewayUrls:r,uri:Tm(t)})}catch{throw new ff({uri:e})}}async function df({gatewayUrls:r,uri:e}){const{uri:t,isOnChain:i}=Cm({uri:e,gatewayUrls:r});if(i||await rC(t))return t;throw new ff({uri:e})}function iC(r){r.startsWith("did:nft:")&&(r=r.replace("did:nft:","").replace(/_/g,"/"));const[e,t,i]=r.split("/"),[s,o]=e.split(":"),[u,l]=t.split(":");if(!s||s.toLowerCase()!=="eip155")throw new fa({reason:"Only EIP-155 supported"});if(!o)throw new fa({reason:"Chain ID not found"});if(!l)throw new fa({reason:"Contract address not found"});if(!i)throw new fa({reason:"Token ID not found"});if(!u)throw new fa({reason:"ERC namespace not found"});return{chainID:parseInt(o),namespace:u.toLowerCase(),contractAddress:l,tokenID:i}}async function sC(r,{nft:e}){if(e.namespace==="erc721")return li(r,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return li(r,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new XA({namespace:e.namespace})}async function aC(r,{gatewayUrls:e,record:t}){return/eip155:/i.test(t)?oC(r,{gatewayUrls:e,record:t}):df({uri:t,gatewayUrls:e})}async function oC(r,{gatewayUrls:e,record:t}){const i=iC(t),s=await sC(r,{nft:i}),{uri:o,isOnChain:u,isEncoded:l}=Cm({uri:s,gatewayUrls:e});if(u&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const g=l?atob(o.replace("data:application/json;base64,","")):o,y=JSON.parse(g);return df({uri:Tm(y),gatewayUrls:e})}let f=i.tokenID;return i.namespace==="erc1155"&&(f=f.replace("0x","").padStart(64,"0")),nC({gatewayUrls:e,uri:o.replace(/(?:0x)?{id}/,f)})}async function $m(r,{blockNumber:e,blockTag:t,name:i,key:s,universalResolverAddress:o}){let u=o;if(!u){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=$s({blockNumber:e,chain:r.chain,contract:"ensUniversalResolver"})}const l=await li(r,{address:u,abi:gm,functionName:"resolve",args:[Wn(Fc(i)),yi({abi:ig,functionName:"text",args:[Am(i),s]})],blockNumber:e,blockTag:t});if(l[0]==="0x")return null;const f=Ts({abi:ig,functionName:"text",data:l[0]});return f===""?null:f}async function cC(r,{blockNumber:e,blockTag:t,gatewayUrls:i,name:s,universalResolverAddress:o}){const u=await $m(r,{blockNumber:e,blockTag:t,key:"avatar",name:s,universalResolverAddress:o});if(!u)return null;try{return await aC(r,{record:u,gatewayUrls:i})}catch{return null}}async function uC(r,{address:e,blockNumber:t,blockTag:i,universalResolverAddress:s}){let o=s;if(!o){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=$s({blockNumber:t,chain:r.chain,contract:"ensUniversalResolver"})}const u=`${e.toLowerCase().substring(2)}.addr.reverse`;try{return(await li(r,{address:o,abi:[{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],functionName:"reverse",args:[Wn(Fc(u))],blockNumber:t,blockTag:i}))[0]}catch(l){if(l instanceof ef&&l.cause.reason===rm[50])return null;throw l}}async function lC(r,{blockNumber:e,blockTag:t,name:i,universalResolverAddress:s}){let o=s;if(!o){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=$s({blockNumber:e,chain:r.chain,contract:"ensUniversalResolver"})}const[u]=await li(r,{address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Wn(Fc(i))],blockNumber:e,blockTag:t});return u}async function hC(r){const e=Oc(r,{method:"eth_newBlockFilter"}),t=await r.request({method:"eth_newBlockFilter"});return{id:t,request:e(t),type:"block"}}async function Nm(r,{address:e,args:t,event:i,fromBlock:s,strict:o,toBlock:u}={}){const l=Oc(r,{method:"eth_newFilter"});let f=[];i&&(f=Zh({abi:[i],eventName:i.name,args:t}));const g=await r.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?nt(s):s,toBlock:typeof u=="bigint"?nt(u):u,...f.length?{topics:f}:{}}]});return{abi:i?[i]:void 0,args:t,eventName:i?i.name:void 0,id:g,request:l(g),strict:o,type:"event"}}async function Rm(r){const e=Oc(r,{method:"eth_newPendingTransactionFilter"}),t=await r.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}async function fC(r,{address:e,blockNumber:t,blockTag:i="latest"}){const s=t?nt(t):void 0,o=await r.request({method:"eth_getBalance",params:[e,s||i]});return BigInt(o)}async function dC(r,{blockHash:e,blockNumber:t,blockTag:i="latest"}={}){const s=t!==void 0?nt(t):void 0;let o;return e?o=await r.request({method:"eth_getBlockTransactionCountByHash",params:[e]}):o=await r.request({method:"eth_getBlockTransactionCountByNumber",params:[s||i]}),xr(o)}async function pC(r,{address:e,blockNumber:t,blockTag:i="latest"}){const s=t!==void 0?nt(t):void 0,o=await r.request({method:"eth_getCode",params:[e,s||i]});if(o!=="0x")return o}function gC(r){var e;return{baseFeePerGas:r.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:r.gasUsedRatio,oldestBlock:BigInt(r.oldestBlock),reward:(e=r.reward)==null?void 0:e.map(t=>t.map(i=>BigInt(i)))}}async function yC(r,{blockCount:e,blockNumber:t,blockTag:i="latest",rewardPercentiles:s}){const o=t?nt(t):void 0,u=await r.request({method:"eth_feeHistory",params:[nt(e),o||i,s]});return gC(u)}async function mC(r,{filter:e}){const t=e.strict??!1;return(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>{var o;try{const{eventName:u,args:l}="abi"in e&&e.abi?uf({abi:e.abi,data:s.data,topics:s.topics,strict:t}):{eventName:void 0,args:void 0};return Bi(s,{args:l,eventName:u})}catch(u){let l,f;if(u instanceof ma||u instanceof Dc){if("strict"in e&&e.strict)return;l=u.abiItem.name,f=(o=u.abiItem.inputs)==null?void 0:o.some(g=>!("name"in g&&g.name))}return Bi(s,{args:f?[]:{},eventName:l})}}).filter(Boolean)}async function vC(r,{address:e,blockNumber:t,blockTag:i="latest",slot:s}){const o=t!==void 0?nt(t):void 0;return await r.request({method:"eth_getStorageAt",params:[e,s,o||i]})}async function pf(r,{blockHash:e,blockNumber:t,blockTag:i="latest",hash:s,index:o}){var f,g;const u=t!==void 0?nt(t):void 0;let l=null;if(s?l=await r.request({method:"eth_getTransactionByHash",params:[s]}):e?l=await r.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,nt(o)]}):(u||i)&&(l=await r.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||i,nt(o)]})),!l)throw new sm({blockHash:e,blockNumber:t,blockTag:i,hash:s,index:o});return Cs(l,{formatter:((g=(f=r.chain)==null?void 0:f.formatters)==null?void 0:g.transaction)||hm})}async function bC(r,{hash:e,transactionReceipt:t}){const[i,s]=await Promise.all([Ra(r),e?pf(r,{hash:e}):void 0]),o=(t==null?void 0:t.blockNumber)||(s==null?void 0:s.blockNumber);return o?i-o+1n:0n}async function yh(r,{hash:e}){var i,s;const t=await r.request({method:"eth_getTransactionReceipt",params:[e]});if(!t)throw new am({hash:e});return Cs(t,{formatter:((s=(i=r.chain)==null?void 0:i.formatters)==null?void 0:s.transactionReceipt)||BA})}async function wC(r,e){var N;const{allowFailure:t=!0,batchSize:i,blockNumber:s,blockTag:o,contracts:u,multicallAddress:l}=e,f=i??(typeof((N=r.batch)==null?void 0:N.multicall)=="object"&&r.batch.multicall.batchSize||1024),g=u;let y=l;if(!y){if(!r.chain)throw new Error("client chain not configured. multicallAddress is required.");y=$s({blockNumber:s,chain:r.chain,contract:"multicall3"})}const b=[[]];let x=0,D=0;for(let R=0;R<g.length;R++){const{abi:K,address:$,args:M,functionName:O}=g[R];try{const A=yi({abi:K,args:M,functionName:O});D+=A.length,f>0&&D>f&&(x++,D=(A.length-2)/2,b[x]=[]),b[x]=[...b[x],{allowFailure:!0,callData:A,target:$}]}catch(A){const _=_a(A,{abi:K,address:$,args:M,docsPath:"/docs/contract/multicall",functionName:O});if(!t)throw _;b[x]=[...b[x],{allowFailure:!0,callData:"0x",target:$}]}}return(await Promise.all(b.map(R=>li(r,{abi:lh,address:y,args:[R],blockNumber:s,blockTag:o,functionName:"aggregate3"})))).flat().map(({returnData:R,success:K},$)=>{const M=b.flat(),{callData:O}=M[$],{abi:A,address:_,functionName:h,args:w}=g[$];try{if(O==="0x")throw new Sc;if(!K)throw new tf({data:R});const H=Ts({abi:A,data:R,functionName:h});return t?{result:H,status:"success"}:H}catch(H){const C=_a(H,{abi:A,address:_,args:w,docsPath:"/docs/contract/multicall",functionName:h});if(!t)throw C;return{error:C,result:void 0,status:"failure"}}})}const _C="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);BigInt(1);BigInt(2);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function EC(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function xC(r,e){const t=Kn(r)?ki(r):r,i=Kn(e)?ki(e):e;return EC(t,i)}async function Fm(r,{address:e,hash:t,signature:i,...s}){const o=Kn(i)?i:Wn(i);try{const{data:u}=await $c(r,{data:xm({abi:lA,args:[e,t,o],bytecode:_C}),...s});return xC(u??"0x0","0x1")}catch(u){if(u instanceof om)return!1;throw u}}async function SC(r,{address:e,message:t,signature:i,...s}){const o=VA(t);return Fm(r,{address:e,hash:o,signature:i,...s})}async function DC(r,{address:e,signature:t,message:i,primaryType:s,types:o,domain:u,...l}){const f=qA({message:i,primaryType:s,types:o,domain:u});return Fm(r,{address:e,hash:f,signature:t,...l})}function Mm(r,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:i,onError:s,poll:o,pollingInterval:u=r.pollingInterval}){const l=typeof o<"u"?o:r.transport.type!=="webSocket";let f;return l?(()=>{const b=Sr(["watchBlockNumber",r.uid,e,t,u]);return Ns(b,{onBlockNumber:i,onError:s},x=>Na(async()=>{var D;try{const S=await Ra(r,{maxAge:0});if(f){if(S===f)return;if(S-f>1&&t)for(let N=f+1n;N<S;N++)x.onBlockNumber(N,f),f=N}(!f||S>f)&&(x.onBlockNumber(S,f),f=S)}catch(S){(D=x.onError)==null||D.call(x,S)}},{emitOnBegin:e,interval:u}))})():(()=>{let b=!0,x=()=>b=!1;return(async()=>{try{const{unsubscribe:D}=await r.transport.subscribe({params:["newHeads"],onData(S){var R;if(!b)return;const N=Kh((R=S.result)==null?void 0:R.number);i(N,f),f=N},onError(S){s==null||s(S)}});x=D,b||x()}catch(D){s==null||s(D)}})(),x})()}async function IC(r,{confirmations:e=1,hash:t,onReplaced:i,pollingInterval:s=r.pollingInterval,timeout:o}){const u=Sr(["waitForTransactionReceipt",r.uid,t]);let l,f,g,y=!1;return new Promise((b,x)=>{o&&setTimeout(()=>x(new M8({hash:t})),o);const D=Ns(u,{onReplaced:i,resolve:b,reject:x},S=>{const N=Mm(r,{emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(R){if(y)return;let K=R;const $=async M=>{N(),M(),D()};try{if(g){if(K-g.blockNumber+1n<e)return;$(()=>S.resolve(g));return}if(l||(y=!0,await bm(async()=>{l=await pf(r,{hash:t}),l.blockNumber&&(K=l.blockNumber)},{delay:({count:M})=>~~(1<<M)*200,retryCount:6}),y=!1),g=await yh(r,{hash:t}),e>0&&K-g.blockNumber+1n<e)return;$(()=>S.resolve(g))}catch(M){if(l&&(M instanceof sm||M instanceof am)){f=l;const A=(await Ea(r,{blockNumber:K,includeTransactions:!0})).transactions.find(({from:h,nonce:w})=>h===f.from&&w===f.nonce);if(!A||(g=await yh(r,{hash:A.hash}),K-g.blockNumber+1n<e))return;let _="replaced";A.to===f.to&&A.value===f.value?_="repriced":A.from===A.to&&A.value===0n&&(_="cancelled"),$(()=>{var h;(h=S.onReplaced)==null||h.call(S,{reason:_,replacedTransaction:f,transaction:A,transactionReceipt:g}),S.resolve(g)})}else $(()=>S.reject(M))}}});return N})})}function PC(r,{blockTag:e="latest",emitMissed:t=!1,emitOnBegin:i=!1,onBlock:s,onError:o,includeTransactions:u=!1,poll:l,pollingInterval:f=r.pollingInterval}){const g=typeof l<"u"?l:r.transport.type!=="webSocket";let y;return g?(()=>{const D=Sr(["watchBlocks",r.uid,t,i,u,f]);return Ns(D,{onBlock:s,onError:o},S=>Na(async()=>{var N;try{const R=await Ea(r,{blockTag:e,includeTransactions:u});if(R.number&&(y!=null&&y.number)){if(R.number===y.number)return;if(R.number-y.number>1&&t)for(let K=(y==null?void 0:y.number)+1n;K<R.number;K++){const $=await Ea(r,{blockNumber:K,includeTransactions:u});S.onBlock($,y),y=$}}(!(y!=null&&y.number)||e==="pending"&&!(R!=null&&R.number)||R.number&&R.number>y.number)&&(S.onBlock(R,y),y=R)}catch(R){(N=S.onError)==null||N.call(S,R)}},{emitOnBegin:i,interval:f}))})():(()=>{let D=!0,S=()=>D=!1;return(async()=>{try{const{unsubscribe:N}=await r.transport.subscribe({params:["newHeads"],onData(R){if(!D)return;const K=R.result;s(K,y),y=K},onError(R){o==null||o(R)}});S=N,D||S()}catch(N){o==null||o(N)}})(),S})()}function OC(r,{address:e,args:t,batch:i=!0,event:s,onError:o,onLogs:u,pollingInterval:l=r.pollingInterval,strict:f}){const g=Sr(["watchEvent",e,t,i,r.uid,s,l]),y=f??!1;return Ns(g,{onLogs:u,onError:o},b=>{let x,D,S=!1;const N=Na(async()=>{var R;if(!S){try{D=await Nm(r,{address:e,args:t,event:s,strict:y})}catch{}S=!0;return}try{let K;if(D)K=await Nc(r,{filter:D});else{const $=await Ra(r);x&&x!==$?K=await lf(r,{address:e,args:t,fromBlock:x+1n,toBlock:$,event:s}):K=[],x=$}if(K.length===0)return;i?b.onLogs(K):K.forEach($=>b.onLogs([$]))}catch(K){(R=b.onError)==null||R.call(b,K)}},{emitOnBegin:!0,interval:l});return async()=>{D&&await Rc(r,{filter:D}),N()}})}function AC(r,{batch:e=!0,onError:t,onTransactions:i,poll:s,pollingInterval:o=r.pollingInterval}){return(typeof s<"u"?s:r.transport.type!=="webSocket")?(()=>{const g=Sr(["watchPendingTransactions",r.uid,e,o]);return Ns(g,{onTransactions:i,onError:t},y=>{let b;const x=Na(async()=>{var D;try{if(!b)try{b=await Rm(r);return}catch(N){throw x(),N}const S=await Nc(r,{filter:b});if(S.length===0)return;e?y.onTransactions(S):S.forEach(N=>y.onTransactions([N]))}catch(S){(D=y.onError)==null||D.call(y,S)}},{emitOnBegin:!0,interval:o});return async()=>{b&&await Rc(r,{filter:b}),x()}})})():(()=>{let g=!0,y=()=>g=!1;return(async()=>{try{const{unsubscribe:b}=await r.transport.subscribe({params:["newPendingTransactions"],onData(x){if(!g)return;const D=x.result;i([D])},onError(x){t==null||t(x)}});y=b,g||y()}catch(b){t==null||t(b)}})(),y})()}const CC=r=>({call:e=>$c(r,e),createBlockFilter:()=>hC(r),createContractEventFilter:e=>em(r,e),createEventFilter:e=>Nm(r,e),createPendingTransactionFilter:()=>Rm(r),estimateContractGas:e=>uA(r,e),estimateGas:e=>cf(r,e),getBalance:e=>fC(r,e),getBlock:e=>Ea(r,e),getBlockNumber:e=>Ra(r,e),getBlockTransactionCount:e=>dC(r,e),getBytecode:e=>pC(r,e),getChainId:()=>oc(r),getEnsAddress:e=>YA(r,e),getEnsAvatar:e=>cC(r,e),getEnsName:e=>uC(r,e),getEnsResolver:e=>lC(r,e),getEnsText:e=>$m(r,e),getFeeHistory:e=>yC(r,e),getFilterChanges:e=>Nc(r,e),getFilterLogs:e=>mC(r,e),getGasPrice:()=>fm(r),getLogs:e=>lf(r,e),getStorageAt:e=>vC(r,e),getTransaction:e=>pf(r,e),getTransactionConfirmations:e=>bC(r,e),getTransactionCount:e=>dm(r,e),getTransactionReceipt:e=>yh(r,e),multicall:e=>wC(r,e),readContract:e=>li(r,e),simulateContract:e=>bA(r,e),verifyMessage:e=>SC(r,e),verifyTypedData:e=>DC(r,e),uninstallFilter:e=>Rc(r,e),waitForTransactionReceipt:e=>IC(r,e),watchBlocks:e=>PC(r,e),watchBlockNumber:e=>Mm(r,e),watchContractEvent:e=>PA(r,e),watchEvent:e=>OC(r,e),watchPendingTransactions:e=>AC(r,e)});function TC({batch:r,chain:e,key:t="public",name:i="Public Client",transport:s,pollingInterval:o}){const u={batch:r,...vm({chain:e,key:t,name:i,pollingInterval:o,transport:s,type:"publicClient"})};return{...u,...CC(u)}}async function $C(r,{chain:e}){const{id:t,name:i,nativeCurrency:s,rpcUrls:o,blockExplorers:u}=e;await r.request({method:"wallet_addEthereumChain",params:[{chainId:nt(t),chainName:i,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:u?Object.values(u).map(({url:l})=>l):void 0}]})}function NC(r,{abi:e,args:t,bytecode:i,...s}){const o=xm({abi:e,args:t,bytecode:i});return hf(r,{...s,data:o})}async function RC(r){return(await r.request({method:"eth_accounts"})).map(t=>Qh(t))}async function FC(r){return await r.request({method:"wallet_getPermissions"})}async function MC(r){return(await r.request({method:"eth_requestAccounts"})).map(t=>x8(t))}async function LC(r,e){return r.request({method:"wallet_requestPermissions",params:[e]})}async function jC(r,{account:e=r.account,message:t}){if(!e)throw new $a({docsPath:"/docs/actions/wallet/signMessage"});const i=dn(e);if(i.type==="local")return i.signMessage({message:t});const s=(()=>typeof t=="string"?Vh(t):t.raw instanceof Uint8Array?Wn(t.raw):t.raw)();return r.request({method:"personal_sign",params:[s,i.address]})}async function UC(r,{account:e=r.account,domain:t,message:i,primaryType:s,types:o}){if(!e)throw new $a({docsPath:"/docs/actions/wallet/signTypedData"});const u=dn(e),l={EIP712Domain:[(t==null?void 0:t.name)&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(t==null?void 0:t.chainId)&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean),...o};if(Em({domain:t,message:i,primaryType:s,types:l}),u.type==="local")return u.signTypedData({domain:t,primaryType:s,types:l,message:i});const f=Sr({domain:t??{},primaryType:s,types:l,message:i},(g,y)=>Kn(y)?y.toLowerCase():y);return r.request({method:"eth_signTypedData_v4",params:[u.address,f]})}async function kC(r,{id:e}){await r.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(e)}]})}async function BC(r,e){return await r.request({method:"wallet_watchAsset",params:e})}const qC=r=>({addChain:e=>$C(r,e),deployContract:e=>NC(r,e),getAddresses:()=>RC(r),getChainId:()=>oc(r),getPermissions:()=>FC(r),requestAddresses:()=>MC(r),requestPermissions:e=>LC(r,e),sendTransaction:e=>hf(r,e),signMessage:e=>jC(r,e),signTypedData:e=>UC(r,e),switchChain:e=>kC(r,e),watchAsset:e=>BC(r,e),writeContract:e=>AA(r,e)});function lg({account:r,chain:e,transport:t,key:i="wallet",name:s="Wallet Client",pollingInterval:o}){const u={...vm({chain:e,key:i,name:s,pollingInterval:o,transport:l=>t({...l,retryCount:0}),type:"walletClient"}),account:r?dn(r):void 0};return{...u,...qC(u)}}const $l={id:65,name:"OKTC Testnet",network:"oktc-testnet",nativeCurrency:{decimals:18,name:"OKT",symbol:"OKT"},rpcUrls:{default:{http:["https://exchaintestrpc.okex.org"]},public:{http:["https://exchaintestrpc.okex.org"]}},blockExplorers:{default:{name:"oklink",url:"https://www.oklink.com/oktc-test"}},testnet:!0},cc=r=>new Promise(e=>setTimeout(e,r)),Fi=["USDC","USDT","KUSD"],zC=["USDC","USDT"],Te={},Ce={};let gs,je,Mi,xe,ye={},mh=!1,lt;async function Hn(r){const{request:e}=await je.simulateContract(r);await Mi.writeContract(e),window.alert("Transaction has been successfully sent to the blockchain. You can view the transaction's details in your wallet.")}function ci(r){console.error(r),r.message.includes("Details:")===!0?window.alert(r.message.substring(r.message.indexOf("Details:"),r.message.indexOf("Version:"))):window.alert(r.message)}window.addEventListener("load",async()=>{ye=(await(await fetch("../json/conf.json")).json()).testnet;let r="",e=[];lt=document.querySelector("#loading");const t=document.querySelector("footer"),i=document.querySelector("#home"),s=document.querySelector("#defi"),o=document.querySelector("#docs"),u=document.querySelector("#account-access");function l(b){b.preventDefault();const x=b.target.id||b.target.parentElement.id;if(x===r)return;window.scrollTo({top:0,behavior:"instant"});const D=document.querySelector("main");if(D&&D.remove(),x==="home"){document.body.insertBefore(document.querySelector("#template-home").content.cloneNode(!0),t),r=x,i.classList.add("linked"),s.classList.remove("linked"),o.classList.remove("linked");const S=document.querySelector("#countdown");xn.extend(y6);const N=xn("2023-7-15 19:00");xn()<N?(S.innerHTML=xn.duration(N.diff(xn())).format("[<div>]D [<small>days</small></div><div>]H [<small>hours</small></div><div>]m [<small>minutes</small></div>]"),setInterval(()=>{S.innerHTML=xn.duration(N.diff(xn())).format("[<div>]D [<small>days</small></div><div>]H [<small>hours</small></div><div>]m [<small>minutes</small></div>]")},3e4)):S.style.display="none"}else x==="defi"?(document.body.insertBefore(document.querySelector("#template-defi").content.cloneNode(!0),t),r=x,i.classList.remove("linked"),s.classList.add("linked"),o.classList.remove("linked"),HC(),VC(),KC(),WC()):x==="docs"&&(document.body.insertBefore(document.querySelector("#template-docs").content.cloneNode(!0),t),r=x,i.classList.remove("linked"),s.classList.remove("linked"),o.classList.add("linked"));x&&b.action!=="back"?e.push(x):b.action==="back"&&e.pop(),window.history.replaceState(e,null)}async function f(){console.log("fetchAccountData");const[b]=await Mi.getAddresses();xe=b,mh=await je.readContract({address:ye.accounts.address,abi:Te.accounts,functionName:"isAgent",args:[xe],account:xe})}async function g(){u.setAttribute("disabled",!0),lt.style.display="flex",je=TC({chain:$l,transport:LA()});try{window.ethereum===void 0?(window.ethereum.on("chainChanged",f),window.ethereum.on("accountsChanged",f),Mi=lg({chain:$l,transport:cg(window.ethereum)}),window.ethereum.isConnected()===!0?await Mi.requestPermissions({eth_accounts:{}}):await Mi.requestAddresses()):(gs=await HP.init({projectId:"8e8d1e31f5a5649a8b3c4cacfc494138",showQrModal:!0,qrModalOptions:{themeMode:"light",themeVariables:{"--wcm-accent-color":"#000000","--wcm-background-color":"#000000","--wcm-background-border-radius":"0px","--wcm-container-border-radius":"0px"},explorerRecommendedWalletIds:["c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96","4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0","971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709","20459438007b75f4f4acb98bf29aa3b800550309646d375da5fd4aac6c2a2c66","38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662","dceb063851b1833cbb209e3717a0a0b06bf3fb500fe9db8cd3a553e4b1d02137"],explorerExcludedWalletIds:"ALL"},chains:[65,66],events:["chainChanged","accountsChanged"]}),Mi=lg({chain:$l,transport:cg(gs)}),gs.on("chainChanged",f),gs.on("accountsChanged",f),await gs.connect(),await gs.enable()),Te.presale=(await(await fetch(`../json/${ye.presale.abi}`)).json()).abi,Te.accounts=(await(await fetch(`../json/${ye.accounts.abi}`)).json()).abi,Te.exchange=(await(await fetch(`../json/${ye.exchange.abi}`)).json()).abi,Te.stakingpool=(await(await fetch(`../json/${ye.stakingpool.abi}`)).json()).abi;for(const x in ye.tokens)Te[x]=(await(await fetch(`../json/${ye.tokens[x].abi}`)).json()).abi;xe===void 0&&await f();const b=await je.getBalance({address:xe});console.log(`Balance: ${tr(b)} OKT`),s.style.display="flex",u.textContent="Disconnect",u.onclick=y,u.removeAttribute("disabled")}catch(b){u.removeAttribute("disabled"),b.code===4001?console.log("Please connect to Wallet."):console.error(b),window.alert(b.message)}finally{lt.style.display="none"}}async function y(){e[e.length-1]==="docs"?(e=["home","docs"],window.history.replaceState(e,null)):e[e.length-1]==="defi"?(e=[],l({preventDefault:()=>{},target:{id:"home"},action:""})):e[e.length-1]==="home"&&(e=["home"],window.history.replaceState(e,null)),xe=void 0,je=void 0,Mi=void 0,u.textContent="Connect",u.onclick=g,s.style.display="none"}i.onclick=l,s.onclick=l,o.onclick=l,u.onclick=g,window.history.pushState(e,null),l({preventDefault:()=>{},target:{id:"home"},action:""}),window.addEventListener("popstate",b=>{e.length>1&&(l({preventDefault:()=>{},target:{id:e[e.length-2]},action:"back"}),window.history.pushState(e,null))})});async function xa([r,e,t]){lt.style.display="flex";try{const i=await je.getBlockNumber(),s=await je.createContractEventFilter({address:ye.tokens[r].address,abi:Te[r],eventName:"Approval",args:{owner:xe},fromBlock:i}),o=Date.now();await Hn({address:ye.tokens[r].address,abi:Te[r],functionName:"approve",args:[e,t],account:xe});const u=Date.now()-o;console.log(u);const l=4e4;u<l&&(console.log(l-u),await cc(l-u));let f=await je.getFilterLogs({filter:s});for(;f.length===0;)f=await je.getFilterLogs({filter:s}),await cc(5e3);f.length>0&&(console.log(f),Ce[r].approved=!0,clearInterval(Ce[r].approveId))}catch(i){ci(i)}finally{lt.style.display="none"}}async function ai(r){const e=await je.readContract({address:ye.tokens[r].address,abi:Te[r],functionName:"balanceOf",args:[xe],account:xe}),t=await je.readContract({address:ye.tokens[r].address,abi:Te[r],functionName:"decimals",account:xe});return[e,t]}async function HC(){const r=document.querySelector("#kdsk"),e=document.querySelector("#presale .unlock-date"),t=document.querySelector("#presale input[name=kdsk]"),i=document.querySelector("#presale select[name=usd]"),s=document.querySelector("#presale input[name=usd]"),o=document.querySelector("#presale .warning"),u=document.querySelector("#presale button[name=buy]"),l=document.querySelector("#presale button[name=claim]");let f=await je.readContract({address:ye.presale.address,abi:Te.presale,functionName:"getParticipant",account:xe});f.lockedAmount>0&&(r.textContent=tr(f.lockedAmount),e.textContent=xn(Number(f.unlockDate)*1e3).format("ddd, MMM D, YYYY h:mm A")),i.onchange=async()=>{const[y,b]=await ai(i.value);y<zn(t.value,b)?o.style.display="inline":o.style.display="none"},t.oninput=async()=>{if(!(t.value.length>0&&parseFloat(t.value)>0)){t.value="",s.textContent="0",o.style.display="none";return}const[y,b]=await je.readContract({address:ye.presale.address,abi:Te.presale,functionName:"getRate",account:xe});s.value=tr(kn(t.value)*b/y);const[x,D]=await ai(i.value);x<zn(s.value,D)?o.style.display="inline":o.style.display="none"};async function g(){if(t.value.length>0&&parseFloat(t.value)>0){if(parseFloat(t.value)<2500)return window.alert(`Minimum amount you can buy is 2500 KDSK.

The amount you're buying is lesser than the minimum allowed`);lt.style.display="flex";try{const y=await je.readContract({address:ye.tokens[i.value].address,abi:Te[i.value],functionName:"allowance",args:[xe,ye.presale.address],account:xe}),b=await je.readContract({address:ye.tokens[i.value].address,abi:Te[i.value],functionName:"decimals",account:xe}),x=zn(s.value,b);if(y<x){window.alert(`"Allow" this dapp to access ${s.value} ${i.value}. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),u.classList.add("allow"),u.innerHTML="<div></div>Allow<span>7723</span>",u.onclick=xa.bind(this,[i.value,ye.presale.address,x]),(Ce[i.value]===void 0||Ce[i.value].handled===!0)&&(Ce[i.value]={approveId:null,approved:!1,handleId:null,handled:!1},Ce[i.value].handleId=setInterval(()=>{if(Ce[i.value].handled===!0){clearInterval(Ce[i.value].handleId);return}Ce[i.value].approved===!0&&(u.classList.remove("allow"),u.innerHTML="<div></div>Buy<span>7723</span>",u.onclick=g,lt.style.display="none",clearInterval(Ce[i.value].handleId),Ce[i.value].handled=!0)},1500)),lt.style.display="none";return}const D=await je.getBlockNumber(),S=await je.createContractEventFilter({address:ye.presale.address,abi:Te.presale,eventName:"Sold",args:{buyer:xe},fromBlock:D}),N=Date.now();await Hn({address:ye.presale.address,abi:Te.presale,functionName:"buy",args:[ye.tokens[i.value].address,x],account:xe});const R=Date.now()-N;console.log(R);const K=4e4;R<K&&(console.log(K-R),await cc(K-R));let $=await je.getFilterLogs({filter:S});for(;$.length===0;)$=await je.getFilterLogs({filter:S}),await cc(5e3);$.length>0&&(console.log($),s.value="",t.value="",f=await je.readContract({address:ye.presale.address,abi:Te.presale,functionName:"getParticipant",account:xe}),f.lockedAmount>0&&(r.textContent=tr(f.lockedAmount),e.textContent=xn(Number(f.unlockDate)*1e3).format("ddd, MMM D, YYYY h:mm A")))}catch(y){ci(y)}finally{lt.style.display="none"}}}u.onclick=g,l.onclick=async()=>{lt.style.display="flex";try{const[y]=await ai("KDSK");await Hn({address:ye.presale.address,abi:Te.presale,functionName:"claim",account:xe});const[b]=await ai("KDSK"),x=b-y;window.alert(`You have successfully claimed ${tr(x)} KDSK`)}catch(y){ci(y)}finally{lt.style.display="none"}}}function KC(){const r=document.querySelector("video"),e=document.querySelector("#cash input[name=address]"),t=document.querySelector("#cash button[name=scan]"),i=document.querySelector("#cash input[name=amount]"),s=document.querySelector("#cash .cash-amount.warning"),o=document.querySelector("#cash button[name=all]"),u=document.querySelector("#cash select[name=token]"),l=document.querySelector("#cash-in"),f=document.querySelector("#cash-out"),g=document.querySelector("#claim");let y;g.onclick=async()=>{try{const D=await je.getBlock();if(xn(Number(D.timestamp)*1e3).day()!==6)return window.alert("Commissions can only be claimed on Saturdays");if(mh===!0)return window.alert(`You're not an agent. Only agents should press the "Claim" button`);const S=await je.readContract({address:ye.exchange.address,abi:Te.exchange,functionName:"getAgentCommissions",account:xe});window.confirm(`You have ${tr(S)} ${u.value}, Do you want to claim it now?`)&&await Hn({address:ye.exchange.address,abi:Te.exchange,functionName:"claimCommissions",args:[ye.tokens[u.value].address],account:xe})}catch(D){ci(D)}finally{lt.style.display="none"}},i.oninput=async()=>{clearTimeout(y),y=setTimeout(async()=>{if(i.value.length===0){s.style.display="none";return}const[D,S]=await ai(u.value);D<zn(i.value,S)?s.style.display="inline":s.style.display="none"},1e3)},t.onclick=()=>{r.style.display="block",x.start()},o.onclick=async()=>{i.value=tr(await je.readContract({address:ye.tokens[u.value].address,abi:Te[u.value],functionName:"balanceOf",args:[xe],account:xe}))},l.onclick=async()=>{if(!(i.value.trim()&&parseFloat(i.value)>0))return;if(qn(e.value)===!1)return window.alert("The agent's address is invalid. Please check!");if(mh===!1)return window.alert(`You're not an agent. Only agents should press the "Cash In" button`);const[D,S]=await ai(u.value),N=zn(i.value,S);if(D<N)return window.alert("Agent has insufficient balance!");lt.style.display="flex";try{await Hn({address:ye.exchange.address,abi:Te.exchange,functionName:"cashIn",args:[Te[u.value].address,e.value,N],account:xe})}catch(R){console.error(R),window.alert(R.message)}finally{lt.style.display="none"}};async function b(){if(!(i.value.trim()&&parseFloat(i.value)>0))return;if(qn(e.value)===!1)return window.alert("The agent's address is invalid. Please check!");lt.style.display="flex";const[D,S]=await ai(u.value),N=zn(i.value,S);if(D<N)return lt.style.display="none",window.alert("You have insufficient balance!");try{const R=await je.readContract({address:ye.exchange.address,abi:Te.exchange,functionName:"getStableTokenOptions",args:[ye.tokens[u.value].address],account:xe});let K;if(N>R.minTariffAmount&&N<=R.maxTariffAmount?K=N*R.tariffPercentMultiplier/R.tariffPercentDivider:N<=R.minTariffAmount?K=R.minTariff:N>R.maxTariffAmount&&(K=R.maxTariff),window.alert(`You are about cash out ${Ui(N,S)} ${u.value}.

You will be charged a fee of ${parseFloat(Ui(K,S)).toFixed(2)} ${u.value}.

TOTAL = ${parseFloat(Ui(N+K,S)).toFixed(2)} ${u.value}`),await je.readContract({address:"0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2",abi:Te[u.value],functionName:"allowance",args:[xe,ye.exchange.address],account:xe})<N){window.alert(`"Allow" this dapp to access ${i.value} ${u.value}. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),l.style.display="none",f.classList.add("allow"),f.innerHTML="<div></div>Allow<span>009</span>",f.onclick=xa.bind(this,[u.value,ye.exchange.address,N]),(Ce[u.value]===void 0||Ce[u.value].handled===!0)&&(Ce[u.value]={approveId:null,approved:!1,handleId:null,handled:!1},Ce[u.value].handleId=setInterval(()=>{if(Ce[u.value].handled===!0){clearInterval(Ce[u.value].handleId);return}Ce[u.value].approved===!0&&(l.style.display="flex",f.classList.remove("allow"),f.innerHTML="<div></div>Cash Out<span>009</span>",f.onclick=b,lt.style.display="none",clearInterval(Ce[u.value].handleId),Ce[u.value].handled=!0)},1500)),lt.style.display="none";return}await Hn({address:ye.exchange.address,abi:Te.exchange,functionName:"cashOut",args:[ye.tokens[u.value].address,e.value,N],account:xe})}catch(R){console.error(R),window.alert(R.message)}finally{lt.style.display="none"}}f.onclick=b;for(const D of ye.cashExchangeSelect){const S=document.createElement("option");S.text=D,u.add(S)}const x=new Xe(r,D=>{if(console.log("decoded qr code:",D),qn(D)===!1)return window.alert("The scanned qr-code returned an invalid address");e.value=D,r.style.display="none"},{highlightScanRegion:!0,highlightCodeOutline:!0,returnDetailedScanResult:!0,onDecodeError:D=>{r.style.display="none",console.log(D),window.alert(D)}})}function VC(){const r=document.querySelector("#exchange input[name=from_token]"),e=document.querySelector("#exchange button[name=from_token]"),t=document.querySelector("#exchange select[name=from_token"),i=document.querySelector("#exchange .warning"),s=document.querySelector("#switch"),o=document.querySelector("#exchange input[name=to_token]"),u=document.querySelector("#exchange select[name=to_token"),l=document.querySelector("#exchange button[name=swap]");async function f(y=!1){if(t.value===u.value)return;let b;Fi.includes(t.value)===!1&&(console.trace("fromTokenRate"),b=await je.readContract({address:ye.exchange.address,abi:Te.exchange,functionName:"getRate",args:[ye.tokens[t.value].address],account:xe}));let x;if(Fi.includes(u.value)===!1&&(console.trace("toTokenRate"),x=await je.readContract({address:ye.exchange.address,abi:Te.exchange,functionName:"getRate",args:[ye.tokens[u.value].address],account:xe})),Fi.includes(t.value)===!0&&Fi.includes(u.value)===!0&&(b={multiplier:1n,divider:1n},x={multiplier:1n,divider:1n}),y===!0){if(!(o.value.length&&parseFloat(o.value)>0))return;Fi.includes(u.value)===!0?r.value=tr(kn(o.value)*b.divider/b.multiplier):r.value=tr(kn(o.value)*x.multiplier/x.divider)}else{if(!(r.value.length>0&&parseFloat(r.value)>0)){i.style.display="none";return}Fi.includes(t.value)===!0?o.value=tr(kn(r.value)*x.divider/x.multiplier):o.value=tr(kn(r.value)*b.multiplier/b.divider)}const D=await je.readContract({address:ye.tokens[t.value].address,abi:Te[t.value],functionName:"balanceOf",args:[xe],account:xe}),S=await je.readContract({address:ye.tokens[t.value].address,abi:Te[t.value],functionName:"decimals",account:xe});D<zn(r.value,S)?i.style.display="inline":i.style.display="none"}r.oninput=()=>{if(!(r.value.length>0&&parseFloat(r.value)>0)){o.value="",i.style.display="none";return}f()},e.onclick=async()=>{const y=await je.readContract({address:ye.tokens[t.value].address,abi:Te[t.value],functionName:"decimals",account:xe});r.value=Ui(await je.readContract({address:ye.tokens[t.value].address,abi:Te[t.value],functionName:"balanceOf",args:[xe],account:xe}),y),f()},t.onchange=y=>{const b=ye.tokenExchangeSelect.length-1;let x=y.target.selectedIndex;u.selectedIndex===b&&x===b?u.selectedIndex=--x:x===u.selectedIndex&&(u.selectedIndex=++x),f()},s.onclick=()=>{const y=t.selectedIndex,b=u.selectedIndex;u.selectedIndex=y,t.selectedIndex=b;const x=r.value,D=o.value;r.value=D,o.value=x,Fi.includes(t.value)===!0?f(!0):f()},o.oninput=()=>{f(!0)},u.onchange=y=>{const b=ye.tokenExchangeSelect.length-1;let x=y.target.selectedIndex;t.selectedIndex===b&&x===b?t.selectedIndex=--x:x===t.selectedIndex&&(t.selectedIndex=++x),f()};async function g(){if(r.value.length&&parseFloat(r.value)>0){lt.style.display="flex";try{const y=await je.readContract({address:ye.tokens[t.value].address,abi:Te[t.value],functionName:"allowance",args:[xe,ye.exchange.address],account:xe}),b=await je.readContract({address:ye.tokens[t.value].address,abi:Te[t.value],functionName:"decimals",account:xe}),x=zn(r.value,b);if(y<x){window.alert(`"Allow" this dapp to access ${r.value} ${t.value}. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),l.classList.add("allow"),l.innerHTML="<div></div>Allow<span>007</span>",l.onclick=xa.bind(this,[t.value,ye.exchange.address,x]),(Ce[t.value]===void 0||Ce[t.value].handled===!0)&&(Ce[t.value]={approveId:null,approved:!1,handleId:null,handled:!1},Ce[t.value].handleId=setInterval(()=>{if(Ce[t.value].handled===!0){clearInterval(Ce[t.value].handleId);return}Ce[t.value].approved===!0&&(l.classList.remove("allow"),l.innerHTML="<div></div>Swap<span>007</span>",l.onclick=g,lt.style.display="none",clearInterval(Ce[t.value].handleId),Ce[t.value].handled=!0)},1500)),lt.style.display="none";return}await Hn({address:ye.exchange.address,abi:Te.exchange,functionName:"convert",args:[ye.tokens[t.value].address,ye.tokens[u.value].address,x],account:xe}),r.value="",o.value="";const D=await je.readContract({address:ye.exchange.address,abi:Te.exchange,functionName:"tradeFeePercentMultiplier",account:xe}),S=await je.readContract({address:ye.exchange.address,abi:Te.exchange,functionName:"tradeFeePercentDivider",account:xe}),N=x*D/S;let R;zC.includes(t.value)===!0?R=u.value:R=t.value,window.alert(`You have been deducted ${Ui(N,b)} ${R} as trade fee.`)}catch(y){ci(y)}finally{lt.style.display="none"}}}l.onclick=g;for(let y=0;y<ye.tokenExchangeSelect.length;y++){const b=document.createElement("option"),x=document.createElement("option");b.text=x.text=ye.tokenExchangeSelect[y],t.add(b),u.add(x)}t.selectedIndex=0,u.selectedIndex=1}function WC(){const r=new Intl.NumberFormat("en",{minimumFractionDigits:2}),e=document.querySelector("#pool input[type=range]"),t=document.querySelector("#locking-days"),i=document.querySelector("#fixed-apy"),s=document.querySelector("#days"),o=document.querySelector("#forecast"),u=document.querySelector("#pool input[name=stake]"),l=document.querySelector("#pool .stake-balance.warning"),f=document.querySelector("#pool button[name=stake-all]"),g=document.querySelector("#pool button[name=stake]"),y=document.querySelector("#pool button[name=stakes]"),b=document.querySelector("#pool input[name=unstake]"),x=document.querySelector("#pool .unstake-balance.warning"),D=document.querySelector("#pool button[name=unstake-all]"),S=document.querySelector("#pool button[name=unstake]");let N,R;function K(){if(!(u.value.length>0&&parseFloat(u.value)>0))return;const O=parseFloat(u.value);let A=0;t.value==="91"?A=.230391:t.value==="182"?A=.328012:t.value==="364"&&(A=.626479),o.textContent=r.format((O+O*((1+A/364)**parseInt(e.value)-1)).toFixed(2))}u.oninput=async()=>{clearTimeout(N),N=setTimeout(async()=>{const O=await je.readContract({address:ye.tokens.KDSK.address,abi:Te.KDSK,functionName:"balanceOf",args:[xe],account:xe});if(u.value.length===0){l.style.display="none";return}O<kn(u.value)?l.style.display="inline":l.style.display="none"},1e3),K()},f.onclick=async()=>{u.value=tr(await je.readContract({address:ye.tokens.KDSK.address,abi:Te.KDSK,functionName:"balanceOf",args:[xe],account:xe})),K()},D.onclick=async()=>{b.value=tr(await je.readContract({address:ye.stakingpool.address,abi:Te.stakingpool,functionName:"getUnlockedAmount",account:xe}))},t.onchange=O=>{i.textContent=O.target.selectedOptions[0].dataset.apy,K()};async function $(){if(b.value.length&&b.value>0){lt.style.display="flex";try{const O=await je.readContract({address:ye.tokens.stKDSK.address,abi:Te.stKDSK,functionName:"allowance",args:[xe,ye.stakingpool.address],account:xe}),A=kn(b.value);if(O<A){window.alert(`"Allow" this dapp to access ${b.value} stKDSK. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),S.innerHTML="Allow",S.classList.add("allow"),S.onclick=xa.bind(this,["stKDSK",ye.stakingpool.address,A]),(Ce.stKDSK===void 0||Ce.stKDSK.handled===!0)&&(Ce.stKDSK={approveId:null,approved:!1,handleId:null,handled:!1},Ce.stKDSK.handleId=setInterval(()=>{if(Ce.stKDSK.handled===!0){clearInterval(Ce.stKDSK.handleId);return}Ce.stKDSK.approved===!0&&(S.classList.remove("allow"),S.innerHTML='<i class="fas fa-coins"></i>&nbsp;Unstake',S.onclick=$,lt.style.display="none",clearInterval(Ce.stKDSK.handleId),Ce.stKDSK.handled=!0)},1500)),lt.style.display="none";return}await Hn({address:ye.stakingpool.address,abi:Te.stakingpool,functionName:"unstake",args:[A],account:xe}),b.value=""}catch(O){ci(O)}finally{lt.style.display="none"}}}S.onclick=$,b.oninput=async()=>{clearTimeout(R),R=setTimeout(async()=>{const[O]=await ai("stKDSK");if(b.value.length===0){x.style.display="none";return}O<kn(b.value)?x.style.display="inline":x.style.display="none"},1e3)};async function M(){if(u.value.length&&u.value>0){lt.style.display="flex";try{const O=await je.readContract({address:ye.tokens.KDSK.address,abi:Te.KDSK,functionName:"allowance",args:[xe,ye.stakingpool.address],account:xe}),A=kn(u.value);if(O<A){window.alert(`"Allow" this dapp to access ${u.value} KDSK. This action will not transfer any amount from your account, it is rather to approve the amount that can be transferred.`),g.innerHTML="Allow",g.classList.add("allow"),g.onclick=xa.bind(this,["KDSK",ye.stakingpool.address,A]),(Ce.KDSK===void 0||Ce.KDSK.handled===!0)&&(console.log("Watching..."),Ce.KDSK={approveId:null,approved:!1,handleId:null,handled:!1},Ce.KDSK.handleId=setInterval(()=>{if(Ce.KDSK.handled===!0){clearInterval(Ce.KDSK.handleId);return}Ce.KDSK.approved===!0&&(g.classList.remove("allow"),g.innerHTML='<i class="fas fa-piggy-bank"></i>&nbsp;Stake',g.onclick=M,lt.style.display="none",clearInterval(Ce.KDSK.handleId),Ce.KDSK.handled=!0)},1500)),lt.style.display="none";return}await Hn({address:ye.stakingpool.address,abi:Te.stakingpool,functionName:"stake",args:[BigInt(t.value),A],account:xe}),u.value=""}catch(O){ci(O)}finally{lt.style.display="none"}}}g.onclick=M,e.oninput=function(){s.textContent=e.value,K()},i.textContent=t.selectedOptions[0].dataset.apy,s.textContent=e.value,y.onclick=async()=>{lt.style.display="flex";try{const O=await je.readContract({address:ye.stakingpool.address,abi:Te.stakingpool,functionName:"getUnlockedAmount",account:xe}),A=await je.readContract({address:ye.stakingpool.address,abi:Te.stakingpool,functionName:"issuedEarningsIndex",account:xe}),_=await je.readContract({address:ye.stakingpool.address,abi:Te.stakingpool,functionName:"getStakes",account:xe});if(_.length===0)return window.alert("You have no amount staked.");let h=0n;const w=_.filter(H=>H.amount!=="0").map(H=>{h+=H.amount;let C="";H.lockingDays===91?C="25.9%":H.lockingDays===182?C="38.8%":H.lockingDays===364&&(C="87.0%");const B=Number(A-H.startedAtEarningsIndex),Y=H.lockingDays-B;return B>=H.lockingDays?` ${parseFloat(tr(H.amount)).toFixed(2)} stKDSK @ ${C} APY`:` ${parseFloat(tr(H.amount)).toFixed(2)} stKDSK @ ${C} APY ( ${Y} ${Y>1?"days":"day"} more)`});w.unshift("Stakes:"),w.push(`
 Total Locked: ${parseFloat(tr(h)).toFixed(2)} stKDSK`),w.push(` Total Unlocked: ${parseFloat(tr(O)).toFixed(2)} stKDSK`),lt.style.display="none",window.alert(w.join(`
`))}catch(O){ci(O)}finally{lt.style.display="none"}}}export{fe as B,pa as H,wa as I,vh as _,Vn as a,Kn as b,$c as c,$8 as d,Ca as e,xc as g,qn as i,Sr as s};
